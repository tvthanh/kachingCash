!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";var t={className:"",text:'<i class="icon-ic-upload"></i><br><br>Simply drag and drop image file<br> or <span>browse</span> on your disc.',previewImage:!0,value:null,classes:{main:"ezdz-dropzone",enter:"ezdz-enter",reject:"ezdz-reject",accept:"ezdz-accept",focus:"ezdz-focus"},validators:{maxSize:null,width:null,maxWidth:null,minWidth:null,height:null,maxHeight:null,minHeight:null},init:function(){},enter:function(){},leave:function(){},reject:function(){},accept:function(){},format:function(e){return e}};e.ezdz=function(i,a){this.settings=e.extend(!0,{},t,e.ezdz.defaults,a),this.$input=e(i);var s=this,n=s.settings,r=s.$input;if(r.is('input[type="file"]')&&e.ezdz.isBrowserCompatible()){var d=function(){var t,i,a;i=e('<div class="'+n.classes.main+'" />').on("dragover.ezdz",function(){e(this).addClass(n.classes.enter),e.isFunction(n.enter)&&n.enter.apply(this)}).on("dragleave.ezdz",function(){e(this).removeClass(n.classes.enter),e.isFunction(n.leaved)&&n.leaved.apply(this)}).addClass(n.className),r.wrap(i).before("<div>"+n.text+"</div>"),t=r.parent("."+n.classes.main),a=n.value||r.data("value"),a&&s.preview(a),e.isFunction(n.init)&&n.init.apply(r,[a]),r.on("focus.ezdz",function(){t.addClass(n.classes.focus)}).on("blur.ezdz",function(){t.removeClass(n.classes.focus)}).on("change.ezdz",function(){var i=this.files[0];if(i){var a=i.name.replace(/\\/g,"/").replace(/.*\//,""),s=i.name.split(".").pop(),d=n.format(a);i.extension=s;var o=r.attr("accept"),c=!1,l=!0,p={mimeType:!1,maxSize:!1,width:!1,minWidth:!1,maxWidth:!1,height:!1,minHeight:!1,maxHeight:!1};if(o){var h=o.split(/[,|]/);e.each(h,function(t,a){if(a=e.trim(a),"."+s===a)return c=!0,!1;if(i.type===a)return c=!0,!1;if(a.indexOf("/*")!==!1){var n=a.replace("/*",""),r=i.type.replace(/(\/.*)$/g,"");if(n===r)return c=!0,!1}}),c===!1&&(p.mimeType=!0)}else c=!0;if(t.removeClass(n.classes.reject+" "+n.classes.accept),c!==!0)return r.val(""),t.addClass(n.classes.reject),e.isFunction(n.reject)&&n.reject.apply(r,[i,p]),!1;var u=new FileReader(i);u.readAsDataURL(i),u.onload=function(a){var s,o=new Image;i.data=a.target.result,o.src=i.data,setTimeout(function(){s=o.width&&o.height,n.validators.maxSize&&i.size>n.validators.maxSize&&(l=!1,p.maxSize=!0),s&&(i.width=o.width,i.height=o.height,n.validators.width&&o.width!==n.validators.width&&(l=!1,p.width=!0),n.validators.maxWidth&&o.width>n.validators.maxWidth&&(l=!1,p.maxWidth=!0),n.validators.minWidth&&o.width<n.validators.minWidth&&(l=!1,p.minWidth=!0),n.validators.height&&o.height!==n.validators.height&&(l=!1,p.height=!0),n.validators.maxHeight&&o.height>n.validators.maxHeight&&(l=!1,p.maxHeight=!0),n.validators.minHeight&&o.height<n.validators.minHeight&&(l=!1,p.minHeight=!0)),l===!0?(t.find("img").remove(),s&&n.previewImage===!0?(t.find("div").addClass("active"),t.css({"background-image":"url("+o.src+")"})):t.find("div").html("<span>"+d+"</span>"),t.addClass(n.classes.accept),e.isFunction(n.accept)&&n.accept.apply(r,[i])):(r.val(""),t.addClass(n.classes.reject),e.isFunction(n.reject)&&n.reject.apply(r,[i,p]))},250)}}})};d()}},e.ezdz.prototype.preview=function(t,i){var a=this.settings,s=this.$input,n=s.parent("."+a.classes.main),r=t.replace(/\\/g,"/").replace(/.*\//,""),d=a.format(r),o=new Image;o.src=t,o.onload=function(){n.find("div").html(e(o).fadeIn()),e.isFunction(i)&&i.apply(this)},o.onerror=function(){n.find("div").html("<span>"+d+"</span>"),e.isFunction(i)&&i.apply(this)},n.addClass(a.classes.accept)},e.ezdz.prototype.destroy=function(){var e=this.settings,t=this.$input;t.parent("."+e.classes.main).replaceWith(t),t.off("*.ezdz"),t.removeData("ezdz")},e.ezdz.prototype.options=function(t){var i=this.settings;return t?void e.extend(!0,this.settings,t):i},e.ezdz.prototype.container=function(){var e=this.settings,t=this.$input;return t.parent("."+e.classes.main)},e.ezdz.isBrowserCompatible=function(){return!!(window.File&&window.FileList&&window.FileReader)},e.ezdz.defaults=t,e.fn.ezdz=function(t){var i,a=arguments;return this.each(function(){return(i=e(this).data("ezdz"))?i[t]?i[t].apply(i,Array.prototype.slice.call(a,1)):void e.error("Ezdz error - Method "+t+" does not exist."):e(this).data("ezdz",new e.ezdz(this,t))})}});
//# sourceMappingURL=dragndrop.js.map
