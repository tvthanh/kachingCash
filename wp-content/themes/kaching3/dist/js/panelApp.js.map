{"version":3,"sources":["panelApp.js","panelNav.js","fileUploadDecorator.js","ifm-clipboard.js","headerCtrl.js","modalCtrl.js","questionModalCtrl.js","passwordChangeModal.js","imagePreviewModalCtrl.js","expiredCtrl.js","campaignsCtrl.js","dashboard-controller.js","profileCtrl.js","creditCardsCtrl.js","addFundsCtrl.js","activeFundCtrl.js","archivedFundCtrl.js","fundManagementCtrl.js","analyticsCtrl.js","overview-tab-controller.js","payout-tab-controller.js","revenue.controller.js","traffic-tab-controller.js","funnel-tab-controller.js","scans-tab.controller.js","sales-tab.controller.js","orderHistoryCtrl.js","orderHistoryDetailCtrl.js","billingCtrl.js","paymentRequestCtrl.js","editPaymentRequestCtrl.js","apiKeysCtrl.js","mediaCtrl.js","mediaViewCtrl.js","mediaEditCtrl.js","productsCtrl.js","questionsCtrl.js","productViewCtrl.js","productEditCtrl.js","campaignEditorCtrl.js","newCampaignEditorCtrl.js","editCampaignCtrl.js","step1Ctrl.js","step2Ctrl.js","step3Ctrl.js","step4Ctrl.js","step5Ctrl.js","step6Ctrl.js","permissionsService.js","campaignEditorService.js","kachingZoneCampaignEditorService.js","campaignsService.js","analyticsService.js","clientsService.js","mediaService.js","productsService.js","questionsService.js","orderService.js","applicationsService.js","billingService.js","scansService.js","salesService.js","siteNav.js","owlCarousel.js","campaignProduct.js","ifmUploaderPreviewImage.js","ifmUploaderPreviewVideo.js","ifmMin.js","ifmMax.js","ifmNumber.js","campaignEditDetails.js","campaignEditTargeting.js","campaignEditBudgeting.js","campaignEditMedia.js","campaignEditProducts.js","campaignActionSettings.js","adDollars.js","productList.js","questionList.js","arPreview.js","cropper-image.controller.js","image-cropper.controller.js","doFocus.js","campaignStatus.js","transactionStatus.js","transactionType.js","budgetType.js","answerType.js","trustUrl.js","mediaType.js","paymentRequestStatus.js","orderHistoryFilter.js","fundManagementFilter.js","onlyNumber.js","advertisements-controller.js","edit-advertisement-controller.js","format-number.js","only-digits.js","advertisement-editor-service.js","kachingZonesHelpers.js","billboards-controller.js","billboards-step1-controller.js","billboards-step2-controller.js","billboards-step3-controller.js","billboards-step4-controller.js","finish-modal-controller.js","magazine-ads-controller.js","magazine-step1-controller.js","magazine-step2-controller.js","magazine-step3-controller.js","magazine-step4-controller.js","instore-campaign-controller.js","instore-step1-controller.js","instore-step2-controller.js","instore-step3-controller.js","instore-step4-controller.js","radio-ads-controller.js","radio-step1-controller.js","radio-step2-controller.js","radio-step3-controller.js","radio-step4-controller.js","tv-ads-controller.js","tv-step1-controller.js","tv-step2-controller.js","tv-step3-controller.js","tv-step4-controller.js","mediaPreview.js","countryService.js","balance-input.js","url-input.js","instoreMediaPreview.js","lotteryFilter.js","lotteryService.js","lotteryCtrl.js","kaching-lottery.js","testLotteryCtrl.js","coinMapping.js","coinMappingService.js","coinMappingFilter.js","advertiserOrganizationManagementCtrl.js","advertiserManagementDetailCtrl.js","advertiserOrganizationManagementService.js","userManagementCtrl.js","userManagementDetailCtrl.js","userManagementService.js","btnClearUploadFileDirective.js","validNumber.js","datePickerAddonDirective.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ADvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AEdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AF7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AGvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACn3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A9FzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A+FlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACr0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACldA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC14BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"panelApp.js","sourcesContent":["'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp', ['underscore', 'ngSanitize', 'ngCookies', 'ngAnimate', 'ngTouch', 'ui.router', 'ui.bootstrap', 'mgcrea.ngStrap', 'daterangepicker', 'com.2fdevs.videogular', 'infinite-scroll', 'angularFileUpload', 'chart.js', 'ui.mask', 'ngImgCrop', 'ngMap', 'ngCsv']).constant('apiUrl', kachingAppConfig.apiUrl).constant('ulabApiUrl', kachingAppConfig.ulabApiUrl).constant('sessionDays', 30).constant('statePermissions', {\n        advertiser: ['expired', 'kaching.account', 'kaching.cards', 'kaching.funds', 'kaching.fundManagement', 'kaching.activeList', 'kaching.archivedFund', 'billing', 'billing.paymentRequest', 'billing.paymentRequest.edit', 'kaching.campaigns', 'kaching.campaigns.edit', 'kaching.campaigns.view', 'campaigns.new', 'campaigns.new.step1', 'campaigns.new.step2', 'campaigns.new.step3', 'campaigns.new.step4', 'campaigns.new.step5', 'campaigns.new.step6', 'kaching.campaigns.newCampaign', 'media', 'media.view', 'media.edit', 'kaching.products', 'kaching.products.view', 'kaching.products.edit', 'kaching.questions', 'kaching.dashboard', 'advertisements', 'advertisements.new', 'advertisements.edit', 'zones', 'kaching.analytics', 'kaching.orderHistory', 'kaching.orderHistory.edit', 'kaching.lottery', 'kaching.testLottery', 'kaching.coinMapping', 'kaching.advertiserOrganizationManagement', 'kaching.advertiserOrganizationManagement.edit', 'kaching.advertiserOrganizationManagement.new', 'kaching.userManagement', 'kaching.userManagement.edit', 'kaching.userManagement.new', 'kaching.userManagement.company', 'kaching'],\n        developer: ['expired', 'account', 'apikeys']\n    });\n\n    angular.module('panelApp').config(['$stateProvider', '$urlRouterProvider', 'statePermissions', 'highchartsNGProvider', function ($stateProvider, $urlRouterProvider, statePermissions, highchartsNGProvider) {\n\n        var controllersPath = kachingAppConfig.wpTemplateUri + '/assets/kaching/panel-module/controllers/';\n        highchartsNGProvider.basePath('/js/');\n        var globalHeaderView = {\n            controller: 'headerCtrl',\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/panel-module/components/header/headerTmpl.html'\n        };\n\n        $urlRouterProvider.otherwise('/kaching');\n\n        $stateProvider\n        // Kaching\n        .state('kaching', {\n            url: '/kaching',\n            data: { title: 'Home' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'campaignsCtrl',\n                    templateUrl: controllersPath + 'campaigns/campaignsTmpl.html'\n                }\n            }\n        })\n        // Session expired\n        .state('expired', {\n            url: '/expired',\n            data: { title: 'Session Expired' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'expiredCtrl',\n                    templateUrl: controllersPath + 'expired/expiredTmpl.html'\n                }\n            }\n        })\n        // Account settings\n        .state('kaching.account', {\n            url: '/account',\n            data: { title: 'Account Settings' },\n            views: {\n                'main@': {\n                    controller: 'profileCtrl',\n                    templateUrl: controllersPath + 'profile/profileTmpl.html'\n                }\n            }\n        })\n        // Credit cards\n        .state('kaching.cards', {\n            url: '/credit-cards',\n            data: { title: 'Credit Cards' },\n            views: {\n                'main@': {\n                    controller: 'creditCardsCtrl',\n                    templateUrl: controllersPath + 'creditCards/creditCardsTmpl.html'\n                }\n            }\n        })\n        // Analytics\n        .state('kaching.analytics', {\n            url: '/analytics',\n            data: { title: 'Analytics' },\n            views: {\n                'main@': {\n                    controller: 'analyticsCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/analytics/analyticsTmpl.html'\n                }\n            }\n        })\n        // Add funds\n        .state('kaching.funds', {\n            url: '/add-funds',\n            data: { title: 'Add Funds' },\n            views: {\n                'main@': {\n                    controller: 'addFundsCtrl',\n                    templateUrl: controllersPath + 'addFunds/addFundsTmpl.html'\n                }\n            }\n        }).state('kaching.fundManagement', {\n            url: '/fund-management',\n            data: { title: 'Fund Management' },\n            views: {\n                'main@': {\n                    controller: 'fundManagementCtrl',\n                    templateUrl: controllersPath + 'fundManagement/fundManagementTmpl.html'\n                }\n            }\n        }).state('kaching.coinMapping', {\n            url: '/coin-mapping',\n            data: { title: 'Coin Mapping' },\n            views: {\n                'main@': {\n                    controller: 'coinMappingCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/coin-mapping/coinMappingTmpl.html'\n                }\n            }\n        }).state('kaching.activeList', {\n            url: '/active-list',\n            data: { title: 'Active Fund Lists' },\n            views: {\n                'main@': {\n                    controller: 'activeFundCtrl',\n                    templateUrl: controllersPath + 'addFunds/activeFundTmpl.html'\n                }\n            }\n        }) //archivedFund\n        .state('kaching.archivedFund', {\n            url: '/archived-fund',\n            data: { title: 'Archived Fund Lists' },\n            views: {\n                'main@': {\n                    controller: 'archivedFundCtrl',\n                    templateUrl: controllersPath + 'addFunds/archivedFundTmpl.html'\n                }\n            }\n        })\n        // Billing\n        .state('billing', {\n            url: '/billing',\n            data: { title: 'Billing' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'billingCtrl',\n                    templateUrl: controllersPath + 'billing/billingTmpl.html'\n                }\n            }\n        }).state('billing.paymentRequest', {\n            url: '/payment-request',\n            data: { title: 'Payment Request' },\n            views: {\n                'main@': {\n                    controller: 'paymentRequestCtrl',\n                    templateUrl: controllersPath + 'billing/paymentRequestTmpl.html'\n                }\n            }\n        }).state('billing.paymentRequest.edit', {\n            url: '/edit/:paymentId',\n            data: { title: 'Payment Request' },\n            views: {\n                'main@': {\n                    controller: 'editPaymentRequestCtrl',\n                    templateUrl: controllersPath + 'billing/editPaymentRequestTmpl.html'\n                }\n            }\n        })\n        // Dashboard\n        .state('kaching.dashboard', {\n            url: '/dashboard',\n            data: { title: 'Dashboard' },\n            views: {\n                'main@': {\n                    controller: 'dashboardCtrl',\n                    templateUrl: controllersPath + 'dashboard/dashboard-tmpl.html'\n                }\n            }\n        })\n        ////////////\n        // Campaigns\n        ////////////\n        .state('kaching.campaigns', {\n            url: '/campaigns',\n            data: { title: 'Campaigns' },\n            views: {\n                'main@': {\n                    controller: 'campaignsCtrl',\n                    templateUrl: controllersPath + 'campaigns/campaignsTmpl.html'\n                }\n            }\n        }).state('kaching.campaigns.edit', {\n            url: '/edit/:campaignId',\n            data: { title: 'Edit Campaign' },\n            views: {\n                'main@': {\n                    // controller: 'editCampaignCtrl',\n                    // templateUrl: controllersPath + 'campaignEditor/editCampaignTmpl.html'\n                    controller: 'newCampaignEditorCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/newCampaignEditor/newCampaignEditorTmpl.html'\n                }\n            }\n        }).state('kaching.campaigns.view', {\n            url: '/view/:campaignId',\n            data: { title: 'Edit Campaign' },\n            views: {\n                'main@': {\n                    controller: 'newCampaignEditorCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/newCampaignEditor/newCampaignEditorTmpl.html'\n                }\n            }\n        }).state('kaching.campaigns.newCampaign', {\n            url: '/create-new-campaign',\n            data: { title: 'New Campaign' },\n            views: {\n                'main@': {\n                    controller: 'newCampaignEditorCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/newCampaignEditor/newCampaignEditorTmpl.html'\n                }\n            },\n            resolve: {\n                campaignId: function campaignId(utils) {\n                    return utils.getCampaignId();\n                }\n            }\n        }).state('campaigns.new', {\n            url: '/new-campaign',\n            data: { title: 'New Campaign' },\n            views: {\n                'main@': {\n                    controller: 'campaignEditorCtrl',\n                    templateUrl: controllersPath + 'campaignEditor/campaignEditorTmpl.html'\n                }\n            }\n        }).state('campaigns.new.step1', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep1Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step1Tmpl.html'\n                }\n            }\n        }).state('campaigns.new.step2', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep2Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step2Tmpl.html'\n                }\n            }\n        }).state('campaigns.new.step3', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep3Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step3Tmpl.html'\n                }\n            }\n        }).state('campaigns.new.step4', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep4Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step4Tmpl.html'\n                }\n            }\n        }).state('campaigns.new.step5', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep5Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step5Tmpl.html'\n                }\n            }\n        }).state('campaigns.new.step6', {\n            views: {\n                'campaignEditorMain': {\n                    controller: 'campaignEditorStep6Ctrl',\n                    templateUrl: controllersPath + 'campaignEditor/steps/step6Tmpl.html'\n                }\n            }\n        }).state('advertisements', {\n            url: '/advertisements',\n            data: { title: 'Advertisement' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'advertisementsCtrl',\n                    templateUrl: controllersPath + 'advertisement/advertisement-tmpl.html'\n                }\n            }\n        }).state('advertisements.new', {\n            url: '/new-advertisement',\n            data: { title: 'Advertisement' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'editAdvertisementCtrl',\n                    templateUrl: controllersPath + 'advertisementEditor/advertisement-editor-tmpl.html'\n                }\n            }\n        }).state('advertisements.edit', {\n            url: '/edit/:advertId',\n            data: { title: 'Edit Advertisement' },\n            views: {\n                'main@': {\n                    controller: 'editAdvertisementCtrl',\n                    templateUrl: controllersPath + 'advertisementEditor/advertisement-editor-tmpl.html'\n                }\n            }\n        })\n\n        /////////\n        // Media\n        /////////\n        .state('media', {\n            url: '/media',\n            data: { title: 'Media' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'mediaCtrl',\n                    templateUrl: controllersPath + 'media/mediaTmpl.html'\n                }\n            }\n        }).state('media.view', {\n            url: '/view/:mediaId',\n            data: { title: 'View Media' },\n            views: {\n                'main@': {\n                    controller: 'mediaViewCtrl',\n                    templateUrl: controllersPath + 'mediaView/mediaViewTmpl.html'\n                }\n            }\n        }).state('media.edit', {\n            url: '/edit/:mediaId',\n            data: { title: 'Edit Media' },\n            views: {\n                'main@': {\n                    controller: 'mediaEditCtrl',\n                    templateUrl: controllersPath + 'mediaEdit/mediaEditTmpl.html'\n                }\n            }\n        })\n\n        ///////////\n        // Products\n        ///////////\n        .state('kaching.products', {\n            url: '/products',\n            data: { title: 'Products' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'productsCtrl',\n                    templateUrl: controllersPath + 'products/productsTmpl.html'\n                }\n            }\n        }).state('kaching.products.view', {\n            url: '/view/:productId',\n            data: { title: 'View Product' },\n            views: {\n                'main@': {\n                    controller: 'productViewCtrl',\n                    templateUrl: controllersPath + 'productView/productViewTmpl.html'\n                }\n            }\n        }).state('kaching.products.edit', {\n            url: '/edit/:productId',\n            data: { title: 'Edit Product' },\n            views: {\n                'main@': {\n                    controller: 'productEditCtrl',\n                    templateUrl: controllersPath + 'productEdit/productEditTmpl.html'\n                }\n            }\n        }).state('kaching.questions', {\n            url: '/questions',\n            data: { title: 'Questions' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'questionsCtrl',\n                    templateUrl: controllersPath + 'questions/questionsTmpl.html'\n                }\n            }\n        })\n        ////////////////\n        // API keys page\n        ////////////////\n        .state('apikeys', {\n            url: '/api-keys',\n            data: { title: 'API Keys' },\n            views: {\n                'header@': globalHeaderView,\n                'main@': {\n                    controller: 'apiKeysCtrl',\n                    templateUrl: controllersPath + 'apiKeys/apiKeysTmpl.html'\n                }\n            }\n        })\n        ////////////////\n        // Order History\n        ////////////////\n        .state('kaching.orderHistory', {\n            url: '/order-history',\n            data: { title: 'Order History' },\n            params: { updatingId: null },\n            views: {\n                'main@': {\n                    controller: 'orderHistoryCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/order-history/orderHistoryTmpl.html'\n                }\n            }\n        })\n        /////////////////////\n        // Order History Edit\n        /////////////////////\n        .state('kaching.orderHistory.edit', {\n            url: '/order-detail/:orderNumber',\n            data: { title: 'Order History Detail' },\n            params: { order: null },\n            views: {\n                'main@': {\n                    controller: 'orderHistoryDetailCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/order-history/orderHistoryDetailTmpl.html'\n                }\n            }\n        })\n        /////////////////////\n        // Lottery List\n        /////////////////////\n        .state('kaching.lottery', {\n            url: '/lottery',\n            data: { title: 'Lottery List' },\n            params: { order: null },\n            views: {\n                'main@': {\n                    controller: 'lotteryCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/lottery/lotteryTmpl.html'\n                }\n            }\n        }).state('kaching.testLottery', {\n            url: '/lottery-test',\n            data: { title: 'Lottery List' },\n            params: { order: null },\n            views: {\n                'main@': {\n                    controller: 'testLotteryCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/lottery/testLotteryTmpl.html'\n                }\n            }\n        })\n        /////////////////////////\n        // Advertiser Management\n        /////////////////////////\n        .state('kaching.advertiserOrganizationManagement', {\n            url: '/business-management',\n            data: { title: 'Business Management' },\n            views: {\n                'main@': {\n                    controller: 'advertiserOrganizationManagementCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/advertiserOrganizationManagement/advertiserOrganizationManagementTmpl.html'\n                }\n            }\n        })\n        //////////////////////////////\n        // New Advertiser Management\n        //////////////////////////////\n        .state('kaching.advertiserOrganizationManagement.new', {\n            url: '/new-business',\n            data: { title: 'New Business' },\n            views: {\n                'main@': {\n                    controller: 'advertiserManagementDetailCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/advertiserOrganizationManagement/advertiserManagementCreateTmpl.html'\n                }\n            }\n        })\n        //////////////////////////////\n        // Advertiser Management Edit\n        //////////////////////////////\n        .state('kaching.advertiserOrganizationManagement.edit', {\n            url: '/business-detail/:id',\n            data: { title: 'Business Management Detail' },\n            views: {\n                'main@': {\n                    controller: 'advertiserManagementDetailCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/advertiserOrganizationManagement/advertiserManagementDetailTmpl.html'\n                }\n            }\n        })\n        ///////////////////\n        // User Management\n        ///////////////////\n        .state('kaching.userManagement', {\n            url: '/user-management',\n            data: { title: 'User Management' },\n            views: {\n                'main@': {\n                    controller: 'userManagementCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/userManagement/userManagementTmpl.html'\n                }\n            }\n        })\n        ////////////////////////\n        // List User of Comapny Management\n        ////////////////////////\n        .state('kaching.userManagement.company', {\n            url: '/user-management/:company',\n            data: { title: 'User of management' },\n            views: {\n                'main@': {\n                    controller: 'userManagementCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/userManagement/userManagementTmpl.html'\n                }\n            }\n        })\n        ////////////////////////\n        // New User Management\n        ////////////////////////\n        .state('kaching.userManagement.new', {\n            url: '/new-user',\n            data: { title: 'New User' },\n            views: {\n                'main@': {\n                    controller: 'userManagementDetailCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/userManagement/userManagementCreateTmpl.html'\n                }\n            }\n        })\n        ////////////////////////\n        // User Management Edit\n        ////////////////////////\n        .state('kaching.userManagement.edit', {\n            url: '/user-detail/:id',\n            data: { title: 'User Management Detail' },\n            views: {\n                'main@': {\n                    controller: 'userManagementDetailCtrl',\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/management/userManagement/userManagementDetailTmpl.html'\n                }\n            }\n        })\n        /////////\n        // Zone\n        /////////\n        .state('zones', {\n            url: '/kaching-zones',\n            data: { title: 'Kaching zones' },\n            views: {\n                'header@': globalHeaderView\n            }\n        });\n    }]);\n\n    angular.module('panelApp').run(['$rootScope', '$location', '$state', 'authService', 'permissionsService', function ($rootScope, $location, $state, authService, permissionsService) {\n        // Handle unknown URLs\n        // This is a replacement for the '$urlRouterProvider.otherwise' block in module config\n        if (authService.isAdvertiser()) {\n            $state.transitionTo('kaching');\n        } else if (authService.isDeveloper()) {\n            $state.transitionTo('apikeys');\n        }\n\n        $rootScope.$on('stateNotFound', function (event, unfoundState, fromState, fromParams) {\n            if (authService.isAdvertiser()) {\n                $state.transitionTo('kaching');\n            } else if (authService.isDeveloper()) {\n                $state.transitionTo('apikeys');\n            }\n        });\n\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState) {\n\n            if (toState.name === 'expired') {\n                angular.element('.sidebar-area').hide();\n                return;\n            }\n\n            angular.element('.sidebar-area').show();\n\n            if (!authService.isLoggedIn()) {\n                $state.transitionTo('expired');\n                event.preventDefault();\n                return;\n            }\n\n            if (!permissionsService.userHasAccess(toState.name)) {\n                if (authService.isAdvertiser()) {\n                    $state.transitionTo('kaching');\n                } else if (authService.isDeveloper()) {\n                    $state.transitionTo('apikeys');\n                }\n                event.preventDefault();\n                return;\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('panelNav', ['utils', 'authService', '$window', function (utils, authService, $window) {\n        return {\n            restrict: 'AE',\n            replace: 'true',\n            scope: {\n                'loggedIn': '='\n            },\n            templateUrl: templateDirUri + '/assets/kaching/directives/panelNav/panelNavTmpl.html',\n            link: function link(scope, element, attrs) {\n                var ele = element;\n\n                ele.on('click', 'a.item-level-1', function (event) {\n                    event.preventDefault();\n\n                    var $item = angular.element(this);\n\n                    var $selectorItem = $item.closest('ul.panel-nav > li');\n                    var $subNavigation = $selectorItem.find('.sub-navigation-kaching');\n\n                    $subNavigation.slideToggle();\n\n                    var $others = angular.element('ul.panel-nav > li').not($selectorItem);\n                    $others.find('a.item-level-1').removeClass('active');\n                    $others.find('a.item-level-2').removeClass('active');\n                    $others.find('.sub-navigation-kaching').slideUp();\n\n                    $item.addClass('active');\n                });\n\n                ele.on('click', 'a.item-level-2', function (event) {\n                    event.preventDefault();\n\n                    var $item = angular.element(this);\n                    var $selectorItem = $item.closest('ul.sub-navigation-kaching > li');\n                    var $others = angular.element('ul.sub-navigation-kaching > li').not($selectorItem);\n\n                    $others.find('a.item-level-2').removeClass('active');\n                    $item.addClass('active');\n                });\n            },\n            controller: ['$rootScope', '$scope', '$state', '$modal', function ($rootScope, $scope, $state, $modal) {\n                $scope.$state = $state;\n                $scope.isPanel = kachingAppConfig.isPanelPage;\n\n                $scope.urls = {\n                    campaigns: kachingAppConfig.panelUrl + '#/campaigns',\n                    media: kachingAppConfig.panelUrl + '#/media',\n                    products: kachingAppConfig.panelUrl + '#/products',\n                    billing: kachingAppConfig.panelUrl + '#/billing',\n                    apikeys: kachingAppConfig.panelUrl + '#/api-keys',\n                    dashboard: kachingAppConfig.panelUrl + '#/dashboard'\n                };\n\n                $scope.isAdvertiser = function () {\n                    return authService.isAdvertiser();\n                };\n\n                $scope.isDeveloper = function () {\n                    return authService.isDeveloper();\n                };\n\n                var defaultOption = {\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/billboards/billboards-popup-tmpl.html',\n                    controller: 'billboardsCtrl',\n                    animation: 'am-fade-and-scale',\n                    // placement: 'center',\n                    backdrop: 'static',\n                    title: 'Billboards',\n                    onShow: function onShow() {\n                        angular.element('html').css('overflow', 'hidden');\n                    },\n                    onBeforeHide: function onBeforeHide() {\n                        angular.element('html').css('overflow', 'initial');\n                    },\n                    resolve: {\n                        campaignId: function campaignId() {\n                            return undefined;\n                        },\n                        viewDetail: function viewDetail() {\n                            return undefined;\n                        }\n                    },\n                    onHide: function onHide() {\n                        $rootScope.$broadcast('reload-campaigns');\n                    }\n                };\n\n                var instoreOption = {\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/instore-campaign/instore-campaign-popup-tmpl.html',\n                    controller: 'instoreCampaignCtrl',\n                    title: 'Instore Campaign'\n                };\n\n                var magazineOption = {\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/magazine-ads/magazine-ads-popup-tmpl.html',\n                    controller: 'magazineAdsCtrl',\n                    title: 'Magazine Ads'\n                };\n\n                var radioOption = {\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/radio-ads/radio-ads-popup-tmpl.html',\n                    controller: 'radioAdsCtrl',\n                    title: 'Radio Ads'\n                };\n\n                var tvOption = {\n                    templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/tv-ads/tv-ads-popup-tmpl.html',\n                    controller: 'tvAdsCtrl',\n                    title: 'TV Ads'\n                };\n\n                $scope.showKachingZonePopup = function (type) {\n\n                    var option = {};\n\n                    switch (type) {\n                        case 'billboards':\n                            angular.extend(option, defaultOption);\n                            break;\n                        case 'instore':\n                            angular.extend(option, defaultOption, instoreOption);\n                            break;\n                        case 'magazine-ads':\n                            angular.extend(option, defaultOption, magazineOption);\n                            break;\n                        case 'radio-ads':\n                            angular.extend(option, defaultOption, radioOption);\n                            break;\n                        case 'tv-ads':\n                            angular.extend(option, defaultOption, tvOption);\n                            break;\n                        default:\n                            break;\n                    }\n\n                    $modal(option);\n                };\n\n                $scope.logout = function () {\n                    authService.logout().then(function () {\n                        $window.location.href = kachingAppConfig.homeUrl;\n                    });\n                };\n\n                $scope.isStaff = function () {\n                    return document.cookie.search('isStaff=true') !== -1 ? true : false;\n                };\n            }]\n        };\n    }]);\n})();","'use strict';\n\n//\n// A patch for the ngFileUpload module.\n// It's a replacement for the nvFileOver directive, which has multiple bugs.\n// Usage - simply add the 'ifm-over-class' attribute to the nv-file-drop element:\n// <div nv-file-drop uploader=\"uploader\" ifm-over-class=\"fileover\"></div>\n//\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').config(function ($provide) {\n        $provide.decorator('nvFileDropDirective', function ($delegate) {\n            var directive = $delegate[0],\n                link = directive.link;\n\n            directive.compile = function () {\n                return function (scope, element, attrs) {\n                    var overClass = attrs.ifmOverClass || 'fileover';\n                    link.apply(this, arguments);\n                    element.on('dragover', function () {\n                        element.addClass(overClass);\n                    });\n                    element.on('dragleave', function () {\n                        element.removeClass(overClass);\n                    });\n                    element.on('drop', function () {\n                        element.removeClass(overClass);\n                    });\n                };\n            };\n\n            return $delegate;\n        });\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmClipboard', ['$tooltip', function ($tooltip) {\n        return {\n            restrict: 'A',\n            scope: {\n                clipboardSuccess: '&',\n                clipboardError: '&',\n                tooltipTitle: '@',\n                tooltipPlacement: '@',\n                tooltipAnimation: '@'\n            },\n            link: function link(scope, el) {\n\n                var tooltipTitle = typeof scope.tooltipTitle === 'undefined' ? 'Copied' : scope.tooltipTitle;\n                var tooltipPlacement = typeof scope.tooltipPlacement === 'undefined' ? 'top' : scope.tooltipPlacement;\n                var tooltipAnimation = typeof scope.tooltipAnimation === 'undefined' ? 'am-fade-and-scale' : scope.tooltipAnimation;\n\n                var myTooltip = $tooltip(el, { title: tooltipTitle, placement: tooltipPlacement, animation: tooltipAnimation, trigger: 'manual' });\n\n                el.on('mouseout', function () {\n                    myTooltip.hide();\n                });\n\n                var clipboard = new Clipboard(el[0]);\n\n                clipboard.on('success', function (e) {\n                    myTooltip.show();\n                    scope.$apply(function () {\n                        scope.clipboardSuccess({\n                            e: e\n                        });\n                    });\n                });\n\n                clipboard.on('error', function (e) {\n                    scope.$apply(function () {\n                        scope.clipboardError({\n                            e: e\n                        });\n                    });\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('headerCtrl', ['$scope', '$state', 'authService', '$window', function ($scope, $state, authService, $window) {\n        $scope.loggedIn = authService.isLoggedIn();\n\n        $scope.logoSrc = kachingAppConfig.wpTemplateUri + '/assets/images/logo.png';\n\n        $scope.logoClick = function () {\n            if (authService.isAdvertiser()) {\n                $state.go('kaching.campaigns');\n            } else if (authService.isDeveloper()) {\n                $state.go('apikeys');\n            } else {\n                $window.location.href = kachingAppConfig.homeUrl;\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('confirmModalCtrl', ['$scope', '$alert', 'mediaService', 'modalOptions', 'modalData', 'modalTitle', 'modalContent', 'cancelText', 'okText', function ($scope, $alert, mediaService, modalOptions, modalData, modalTitle, modalContent, cancelText, okText) {\n        $scope.title = modalTitle;\n        $scope.content = modalContent;\n        $scope.cancelText = cancelText;\n        $scope.okText = okText;\n\n        $scope.modalData = modalData;\n\n        $scope.okFunction = function () {\n            modalOptions.okFunction(modalData);\n            $scope.$hide();\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('newQuestionModalCtrl', ['$scope', '$state', 'errorHandler', 'apiUrl', 'authToken', 'utils', 'productsService', 'FileUploader', 'modalOptions', 'questionsService', '$q', function ($scope, $state, errorHandler, apiUrl, authToken, utils, productsService, FileUploader, modalOptions, questionsService, $q) {\n\n        var answerId = 0;\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.view = {\n            submitted: false\n        };\n\n        var init = function init() {\n            $scope.answerList = [];\n            $scope.dialogTitle = 'New question';\n            $scope.viewMode = false;\n            if (modalOptions.type !== 'new') {\n                $scope.editId = modalOptions.id;\n                $scope.getQuestion(modalOptions.id);\n\n                if (modalOptions.type === 'edit') {\n                    $scope.dialogTitle = 'Edit question';\n                } else {\n                    $scope.dialogTitle = 'View question';\n                    $scope.viewMode = true;\n                }\n            }\n        };\n\n        $scope.getQuestion = function (id) {\n            questionsService.getQuestionDetail(id).then(function (data) {\n                $scope.question = data.content;\n                $scope.answerList = data.answers;\n                $scope.answerType = data.type;\n            }, function (error) {});\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.showNoAnswerError = function () {\n            if (parseInt($scope.answerType) === 2) {\n                return false;\n            } else {\n                return $scope.answerList.length < 2;\n            }\n        };\n\n        $scope.createQuestion = function () {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid && !$scope.showNoAnswerError()) {\n                var data = { content: $scope.question, type: $scope.answerType };\n                if ($scope.editId) {\n                    data.id = $scope.editId;\n                }\n                questionsService.createQuestion(data).then(function (data) {\n                    $scope.createdQuestion = data;\n                    $scope.createAnswers();\n                    $scope.closeModal();\n                }, function () {});\n            }\n        };\n\n        $scope.createAnswers = function () {\n            if (!$scope.createdQuestion) return;\n            var deferred = $q.defer();\n\n            var data = {\n                questionID: $scope.createdQuestion.id,\n                contents: []\n            };\n\n            if ($scope.answerType != 2) {\n                angular.forEach($scope.answerList, function (answer) {\n                    data.contents.push({ content: answer.content });\n                });\n            }\n\n            questionsService.createAnswers(data).then(function (data) {\n                deferred.response(data);\n            }, function (error) {\n                deferred.reject(error);\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.closeModal = function () {\n            modalOptions.submit();\n            $scope.$hide();\n        };\n\n        $scope.addAnswer = function () {\n            $scope.answerList.push({ id: 'new' + answerId, content: $scope.answerItem });\n            answerId++;\n            $scope.answerItem = '';\n        };\n\n        $scope.removeQuestion = function (id) {\n            $scope.answerList = _.without($scope.answerList, _.findWhere($scope.answerList, { id: id }));\n        };\n\n        $scope.answerType = 0;\n\n        // $scope.$watch('answerType', function(newVal, oldVal) {\n        //     if (newVal) {\n        //     }\n        // });\n\n        // SINGLE_CHOICE = 0\n        // MULTIPLE_CHOICE = 1\n        // OTHER_CHOICE = 2\n        // COMBINE_CHOICE = 3\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n\n    angular.module('panelApp').controller('passwordChangeModalCtrl', ['$scope', '$alert', 'errorHandler', 'utils', 'userService', function ($scope, $alert, errorHandler, utils, userService) {\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            sending: false,\n            submitted: false\n        };\n\n        $scope.data = {\n            currentPassword: '',\n            newPassword: '',\n            newPasswordRepeat: ''\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.changePassword = function () {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                $scope.view.sending = true;\n                userService.changePassword($scope.data.currentPassword, $scope.data.newPassword).then(function () {\n                    $scope.view.sending = false;\n                    $alert({\n                        title: 'Your password has been changed.',\n                        content: '',\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'success',\n                        show: true\n                    });\n                    $scope.$hide();\n                }, function (response) {\n                    console.log('changePassword response', response);\n                    if (response.status === 400 && typeof response.data.current_password !== 'undefined') {\n                        $scope.form1.current_password.$setValidity('password', false);\n                        $scope.view.sending = false;\n                        $scope.data.currentPassword = '';\n                    } else {\n                        errorHandler.processApiResponse(response);\n                        $scope.$hide();\n                    }\n                });\n            }\n        };\n\n        $scope.$watch('data.currentPassword', function (newValue, oldValue, scope) {\n            if (!newValue) {\n                scope.form1.current_password.$setValidity('password', true);\n                scope.form1.$setPristine();\n                scope.form1.$valid = true;\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('imagePreviewModalCtrl', ['$scope', 'imageUrl', 'actionText', function ($scope, imageUrl, actionText) {\n        $scope.imageUrl = imageUrl;\n        $scope.actionText = actionText;\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('expiredCtrl', ['$scope', '$state', 'authService', function ($scope, $state, authService) {\n\n        $scope.view = {\n            busy: false,\n            formError: false\n        };\n\n        $scope.loginFormData = {\n            email: '',\n            password: ''\n        };\n\n        $scope.signinFormSubmit = function () {\n\n            console.log('in signinFormSubmit()', $scope.loginFormData.email, $scope.loginFormData.password);\n\n            $scope.view.busy = true;\n            $scope.view.formError = false;\n\n            authService.login($scope.loginFormData.email, $scope.loginFormData.password).then(function (user) {\n                $scope.view.busy = false;\n                if (user.usertype === 1) {\n                    $state.go('campaigns');\n                } else {\n                    $state.go('apikeys');\n                }\n            }, function () {\n                $scope.view.busy = false;\n                $scope.view.formError = true;\n            });\n        };\n\n        $scope.showForgotPasswordDialog = function () {\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/forgot-password/forgot-password-tmpl.html',\n                controller: 'forgotPasswordModalCtrl',\n                animation: 'am-fade-and-scale',\n                // placement: 'center'\n                backdrop: 'static'\n            });\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignsCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'campaignsService', '$state', 'utils', 'userService', 'kachingZonesHelpers', '$q', function ($scope, $alert, $modal, errorHandler, campaignsService, $state, utils, userService, kachingZonesHelpers, $q) {\n        var helper = kachingZonesHelpers;\n        var itemsPerPage = 10;\n\n        $scope.view = {\n            initialLoadComplete: false,\n            busy: true,\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10,\n            filtersActive: false,\n            campaignStatuses: [{ code: -1, label: 'Any status' }, { code: 0, label: 'Incomplete' },\n            // {code: 1, label: 'Billing'},\n            // {code: 2, label: 'Prepared'},\n            { code: 3, label: 'Live' },\n            // {code: 4, label: 'Completed'},\n            { code: 5, label: 'Stopped' }]\n        };\n\n        $scope.view.statusFilterModel = $scope.view.campaignStatuses[0];\n\n        $scope.data = {\n            campaignsCount: 0,\n            campaigns: []\n        };\n\n        $scope.filters = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.campaignTypes = [{ code: -1, label: 'Create New Campaign' }, { code: 0, label: 'Billboards' }, { code: 1, label: 'Instore Campaign' }, { code: 2, label: 'Magazine Ads' }, { code: 3, label: 'Radio Ads' }, { code: 4, label: 'TV Ads' }];\n\n        var init = function init() {\n            $scope.availableCoin = 0;\n            getBalance().then(function (coin) {\n                $scope.availableCoin = coin;\n            });\n            initFilters();\n            getCampaigns();\n        };\n\n        function initFilters() {\n            $scope.filters = {\n                name: '',\n                client: '',\n                media_title: '',\n                start_date: '',\n                end_date: '',\n                status: undefined\n            };\n        }\n\n        function getBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function (response) {\n                var coin = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                deferred.resolve(coin);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        };\n\n        $scope.changePage = function () {\n            getCampaigns();\n        };\n\n        $scope.reloadCampaigns = function (page) {\n            if (page) {\n                $scope.view.currentPage = page;\n            } else {\n                $scope.view.currentPage = 1;\n            }\n\n            getCampaigns();\n        };\n\n        function getCampaigns(argsObj) {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1)\n            };\n\n            if ($scope.filters.name.length > 0) {\n                params.name = $scope.filters.name;\n            }\n            if ($scope.filters.client.length > 0) {\n                params.client = $scope.filters.client;\n            }\n            if ($scope.filters.media_title.length > 0) {\n                params.media_title = $scope.filters.media_title;\n            }\n            if ($scope.filters.start_date && $scope.filters.start_date.length > 0) {\n                params.start_date = $scope.filters.start_date;\n            }\n            if ($scope.filters.end_date && $scope.filters.end_date.length > 0) {\n                params.end_date = $scope.filters.end_date;\n            }\n            if (typeof $scope.filters.status !== 'undefined') {\n                params.status = $scope.filters.status;\n            }\n\n            campaignsService.getCampaigns(params).then(function (campaigns) {\n                $scope.data.campaignsCount = campaigns.count;\n                $scope.data.campaigns = campaigns.items;\n                $scope.view.initialLoadComplete = true;\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = true;\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        var deleteCampaign = function deleteCampaign(campaign) {\n            var name = campaign.name;\n            campaignsService.deleteCampaign(campaign.id).then(function () {\n                $alert({\n                    title: 'Campagin deleted.',\n                    content: 'Campaign \"' + name + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getCampaigns();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.startCampaign = function (campaign) {\n            var name = campaign.name;\n            campaignsService.startCampaign(campaign.id).then(function () {\n\n                $alert({\n                    title: 'Campagin started.',\n                    content: 'Campaign \"' + name + '\" is now live.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n\n                getCampaigns();\n            }, function (response) {\n\n                var processingError = _.findWhere(response.data.errorDetails.logicProcessing.processingErrors, { code: 3 }) || _.findWhere(response.data.errorDetails.logicProcessing.processingErrors, { code: 40 }) || _.findWhere(response.data.errorDetails.logicProcessing.processingErrors, { code: 51 });\n\n                var title = 'Incorrect campaign settings.';\n                if (typeof processingError !== 'undefined') {\n                    var errorMsg = 'Please review your campaign settings then start the campaign';\n                    if (processingError.code === 40) {\n                        errorMsg = processingError.message;\n                    }\n                    if (processingError.code === 51) {\n                        errorMsg = processingError.message;\n                        title = '';\n                    }\n                    $alert({\n                        title: title,\n                        content: errorMsg,\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'danger',\n                        show: true\n                    });\n                } else {\n                    errorHandler.processApiResponse(response);\n                }\n            });\n        };\n\n        var _stopCampaign = function _stopCampaign(campaign) {\n            var name = campaign.name;\n            campaignsService.stopCampaign(campaign.id).then(function () {\n                $alert({\n                    title: 'Campagin stopped.',\n                    content: 'Campaign \"' + name + '\" has been stopped.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getCampaigns();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showDeleteCampaignDialog = function (_campaign) {\n            if (_campaign.status === 3) {\n                $modal({\n                    templateUrl: templateDirUri + '/assets/kaching/panel-module/components/campaignWarningStopModal/modalTmpl.html',\n                    controller: 'campaignWarningStopModalCtrl',\n                    animation: 'am-fade-and-scale',\n                    placement: 'center'\n                });\n                return;\n            }\n\n            var options = {\n                delete: function _delete(campaign) {\n                    console.log('delete camapgin', campaign);\n                    deleteCampaign(campaign);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/campaignDeleteModal/modalTmpl.html',\n                controller: 'campaignDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    campaign: function campaign() {\n                        return _campaign;\n                    }\n                }\n            });\n        };\n\n        $scope.checkCampaignActive = function (e, campaign) {\n            e.preventDefault();\n            if (campaign.status === 3) {\n                $scope.showStopCampaignDialog(campaign);\n            } else if (campaign.status === 2 || campaign.status === 5) {\n                $scope.showStartCampaignDialog(campaign);\n            }\n        };\n\n        $scope.showStopCampaignDialog = function (_campaign2) {\n            var _callbacks = {\n                stopCampaign: function stopCampaign(campaign) {\n                    console.log('stop camapgin', campaign);\n                    _stopCampaign(campaign);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/campaignStopModal/modalTmpl.html',\n                controller: 'campaignStopModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    callbacks: function callbacks() {\n                        return _callbacks;\n                    },\n                    campaign: function campaign() {\n                        return _campaign2;\n                    }\n                }\n            });\n        };\n\n        $scope.showStartCampaignDialog = function (_campaign3) {\n            var _callbacks2 = {\n                startCampaign: function startCampaign(campaign) {\n                    $scope.startCampaign(campaign);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/campaignStartModal/modalTmpl.html',\n                controller: 'campaignStartModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    callbacks: function callbacks() {\n                        return _callbacks2;\n                    },\n                    campaign: function campaign() {\n                        return _campaign3;\n                    }\n                }\n            });\n        };\n\n        $scope.updateFilters = function () {\n            $scope.filters.status = $scope.view.statusFilterModel.code === -1 ? undefined : $scope.view.statusFilterModel.code;\n            $scope.reloadCampaigns();\n        };\n\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.filters.start_date = moment(newValue.startDate).format('YYYY-MM-DD');\n                $scope.filters.end_date = moment(newValue.endDate).format('YYYY-MM-DD');\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            } else {\n                $scope.filters.start_date = null;\n                $scope.filters.end_date = null;\n            }\n            $scope.updateFilters();\n        });\n\n        $scope.toggleFilters = function () {\n            if ($scope.view.filtersActive) {\n                $scope.clearFilters();\n            } else {\n                $scope.view.filtersActive = true;\n            }\n        };\n\n        $scope.clearFilters = function () {\n            $scope.view.filtersActive = false;\n            initFilters();\n            $scope.reloadCampaigns();\n        };\n\n        $scope.showCampaignPopup = function (campaign, viewDetail) {\n            utils.setCampaignId(campaign.id);\n\n            if (viewDetail) {\n                utils.setViewDetail(true);\n                $state.go('kaching.campaigns.view', { campaignId: campaign.id });\n            } else {\n                if (campaign.status === 3) {\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/campaignWarningStopModal/modalTmpl.html',\n                        controller: 'campaignWarningStopModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        placement: 'center'\n                    });\n                    return;\n                }\n\n                utils.setViewDetail(false);\n                $state.go('kaching.campaigns.edit', { campaignId: campaign.id });\n            }\n        };\n\n        $scope.$on('reload-campaigns', function () {\n            $scope.reloadCampaigns();\n        });\n\n        $scope.createCampaign = function () {\n            if ($scope.availableCoin) {\n                utils.setCampaignId(undefined);\n                utils.setViewDetail(false);\n                $state.go('kaching.campaigns.newCampaign');\n            } else {\n                helper.alert('danger', 'Your available fund is 0. Add fund before you create new campaign.', 5);\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('dashboardCtrl', ['$scope', function ($scope) {\n        $scope.chartConfig = {\n            'options': {\n                'chart': {\n                    'type': 'areaspline'\n                },\n                'xAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'yAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'gridLineColor': 'transparent',\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'pane': {},\n                'tooltip': {},\n                'plotOptions': {\n                    'series': {\n                        'stacking': '',\n                        'marker': {\n                            'enabled': false\n                        }\n                    },\n                    'pie': {\n                        'size': 500\n                    }\n                },\n                'exporting': {\n                    'enabled': false\n                }\n            },\n            'series': [{\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n\n            }, {\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n            }],\n            'title': {\n                'text': ''\n            },\n            'credits': {\n                'enabled': false\n            },\n            'loading': false,\n            'size': {\n                'height': 130\n            },\n            'tooltip': {},\n            'useHighStocks': false,\n            func: function func(chart) {}\n        };\n\n        $scope.chartConfig2 = angular.copy($scope.chartConfig);\n        $scope.chartConfig2.series[0].color = '#62d194';\n        $scope.chartConfig2.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n        $scope.chartConfigGender = angular.copy($scope.chartConfig);\n\n        //chart gender\n        $scope.chartConfigGender.options.chart.type = 'bar';\n        $scope.chartConfigGender.options.xAxis.categories = ['24:00', '18:00', '12:00', '06:00', '00:00'];\n        $scope.chartConfigGender.options.xAxis.labels.enabled = true;\n        $scope.chartConfigGender.options.xAxis.lineWidth = 1;\n        $scope.chartConfigGender.options.xAxis.lineColor = '#E6EAEE';\n        $scope.chartConfigGender.options.plotOptions.series.pointWidth = 18;\n        $scope.chartConfigGender.options.yAxis = {\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'min': 0,\n            'minRange': 100000,\n            'max': 100000,\n            'minPadding': 100000,\n            'gridLineWidth': 0\n\n        };\n        $scope.chartConfigGender.series = [{\n            name: 'female',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000],\n            color: '#FFBC00'\n        }, {\n            name: 'male',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000],\n            color: '#2DA1F8'\n        }];\n        $scope.chartConfigGender.options.plotOptions.series.stacking = 'normal';\n        $scope.chartConfigGender.size.height = 250;\n\n        // Age Timeline\n        $scope.chartConfigAgeTimeline = angular.copy($scope.chartConfig);\n        $scope.chartConfigAgeTimeline.options.chart.type = 'column';\n        $scope.chartConfigAgeTimeline.options.xAxis.categories = ['06:00', '08:00', '10:00', '12:00', '14:00', '16:00'];\n        $scope.chartConfigAgeTimeline.options.xAxis.labels.enabled = true;\n        $scope.chartConfigAgeTimeline.size.height = 281;\n        $scope.chartConfigAgeTimeline.options.yAxis.lineWidth = 1;\n        $scope.chartConfigAgeTimeline.options.yAxis.lineColor = '#E6EAEE';\n        $scope.chartConfigAgeTimeline.options.plotOptions.series.stacking = 'normal';\n        $scope.chartConfigAgeTimeline.options.plotOptions.series.pointWidth = 18;\n        $scope.chartConfigAgeTimeline.options.xAxis.lineWidth = 1;\n        $scope.chartConfigAgeTimeline.options.xAxis.lineColor = '#E6EAEE';\n        $scope.chartConfigAgeTimeline.options.yAxis = {\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'min': 0,\n            'minRange': 100000,\n            'max': 100000,\n            'minPadding': 100000,\n            'gridLineWidth': 0\n\n        };\n        $scope.chartConfigAgeTimeline.series = [{\n            name: '65+',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000, 10000],\n            color: '#8567E6'\n        }, {\n            name: '55-64',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000, 10000],\n            color: '#40557D'\n        }, {\n            name: '45-54',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000, 10000],\n            color: '#289DF5'\n        }, {\n            name: '35-44',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000, 10000],\n            color: '#39BF23'\n        }, {\n            name: '25-34',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000, 10000],\n            color: '#FFD400'\n        }, {\n            name: '0-24',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 20000, 10000],\n            color: '#F0B499'\n        }];\n\n        // Customers\n        $scope.chartconfigCustomer = angular.copy($scope.chartConfig);\n        $scope.chartconfigCustomer.options.chart.type = 'pie';\n        $scope.chartconfigCustomer.options.plotOptions.pie.size = 140;\n        $scope.chartconfigCustomer.options.plotOptions.pie.colors = ['#289DF5', '#40557D', '#FFD400'];\n        $scope.chartconfigCustomer.size.height = 150;\n        $scope.chartconfigCustomer.series = [{\n            name: 'Customers',\n            data: [['Returning', 6], ['New', 4], ['Referrals', 7]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n\n        // product spending\n        $scope.chartconfigProductSpending = angular.copy($scope.chartConfig);\n        $scope.chartconfigProductSpending.options.chart.type = 'pie';\n        $scope.chartconfigProductSpending.options.plotOptions.pie.size = 150;\n        $scope.chartconfigProductSpending.options.plotOptions.pie.colors = ['#40557D', '#3373B3', '#F0B499', '#72C4B9', '#FFD60D', '#1AA6D6'];\n        $scope.chartconfigProductSpending.size.height = 200;\n        $scope.chartconfigProductSpending.series = [{\n            name: 'Product',\n            data: [['Nike', 6], ['Nike', 4], ['Nike', 7], ['Nike', 6], ['Nike', 6], ['Nike', 6]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n\n        // age\n        $scope.chartconfigAge = angular.copy($scope.chartConfig);\n        $scope.chartconfigAge.options.chart.type = 'pie';\n        $scope.chartconfigAge.options.plotOptions.pie.size = 150;\n        $scope.chartconfigAge.options.plotOptions.pie.colors = ['#F0B499', '#FFD400', '#39BF23', '#289DF5', '#40557D', '#8567E6'];\n        $scope.chartconfigAge.size.height = 180;\n        $scope.chartconfigAge.series = [{\n            name: 'Product',\n            data: [['0-24', 6], ['25-34', 4], ['35-44', 7], ['45-54', 6], ['55-64', 6], ['65+', 6]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n\n        // Daily Sale\n        $scope.chartconfigDailySale = angular.copy($scope.chartConfig);\n        $scope.chartconfigDailySale.options.chart.type = 'column';\n        $scope.chartconfigDailySale.options.plotOptions.series.pointWidth = 8;\n        $scope.chartconfigDailySale.size.height = 179;\n        $scope.chartconfigDailySale.series = [{\n            name: 'Thang 1',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000],\n            color: '#1A91EB'\n        }];\n\n        // Hour\n        $scope.chartconfigHour = angular.copy($scope.chartConfig);\n        $scope.chartconfigHour.options.chart.type = 'area';\n        $scope.chartconfigHour.options.xAxis = {\n            'categories': ['Jan', 'Feb', 'March', 'April', 'May'],\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'gridLineWidth': 0\n\n        };\n        $scope.chartconfigHour.series = [{\n            name: '',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000],\n            color: '#1A91EB'\n        }];\n\n        //Genre\n        $scope.chartconfigGenres = angular.copy($scope.chartConfig);\n        $scope.chartconfigGenres.options.chart.type = 'column';\n        $scope.chartconfigGenres.size.height = 180;\n        $scope.chartconfigGenres.options.xAxis = {\n            'categories': ['21/9', '22/9', '23/9', '24/9', '25/9', '26/9', '27/9'],\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'gridLineWidth': 0\n\n        };\n        $scope.chartconfigGenres.series = [{\n            name: 'Male',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n            color: '#337BBF'\n        }, {\n            name: 'Female',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n            color: '#2297F0'\n        }];\n        $scope.chartconfigGenres.options.yAxis = {\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'min': 0,\n            'minRange': 100,\n            'max': 3000,\n            'minPadding': 1,\n            'gridLineWidth': 0\n\n        };\n\n        //Community Type\n        $scope.chartconfigCommunity = angular.copy($scope.chartConfig);\n        $scope.chartconfigCommunity.options.chart.type = 'solidgauge';\n        $scope.chartconfigCommunity.size.height = 250;\n        $scope.chartconfigCommunity.options.tooltip = {\n            'borderWidth': 0,\n            'backgroundColor': 'none',\n            'shadow': false,\n            'style': {\n                'fontSize': '16px'\n            },\n            'pointFormat': '{series.name}<br><span style=\\'font-size:2em; color: {point.color}; font-weight: bold\\'>{point.y}%</span>',\n            'useHTML': true,\n            positioner: function positioner(labelWidth, labelHeight) {\n                return {\n                    x: 104 - labelWidth / 2,\n                    y: 104\n                };\n            }\n        };\n        Highcharts.getOptions().colors = ['#1F96EF', '#8668E6', '#FAC83F'];\n        $scope.chartconfigCommunity.options.pane = {\n            startAngle: 0,\n            endAngle: 360,\n            background: [{ // Track for Move\n                outerRadius: '109%',\n                innerRadius: '91%',\n                backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0.2).get(),\n                borderWidth: 0\n            }, { // Track for Exercise\n                outerRadius: '66%',\n                innerRadius: '85%',\n                backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[1]).setOpacity(0.2).get(),\n                borderWidth: 0\n            }, { // Track for Stand\n                outerRadius: '40%',\n                innerRadius: '59%',\n                backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[2]).setOpacity(0.2).get(),\n                borderWidth: 0\n            }]\n        };\n        $scope.chartconfigCommunity.options.yAxis = {\n            'min': 0,\n            'max': 100,\n            'lineWidth': 0,\n            'tickPositions': []\n        };\n        $scope.chartconfigCommunity.options.plotOptions = {\n            solidgauge: {\n                borderWidth: '18px',\n                dataLabels: {\n                    y: 0,\n                    borderWidth: 0,\n                    useHTML: true,\n                    enabled: false\n                },\n                linecap: 'round',\n                stickyTracking: false,\n                innerRadius: '0%'\n            },\n            series: {\n                pointWidth: 0\n            }\n        };\n        $scope.chartconfigCommunity.series = [{\n            name: 'Urban',\n            borderColor: '#1F96EF',\n            data: [{\n                color: Highcharts.getOptions().colors[0],\n                radius: '100%',\n                innerRadius: '100%',\n                y: 50\n            }]\n        }, {\n            name: 'Suburban',\n            borderColor: Highcharts.getOptions().colors[1],\n            data: [{\n                color: Highcharts.getOptions().colors[1],\n                radius: '75%',\n                innerRadius: '75%',\n                y: 35\n            }]\n        }, {\n            name: 'Rural',\n            borderColor: Highcharts.getOptions().colors[2],\n            data: [{\n                color: Highcharts.getOptions().colors[2],\n                radius: '50%',\n                innerRadius: '50%',\n                y: 15\n            }]\n        }];\n        // Platform\n        $scope.chartconfigPlatform = angular.copy($scope.chartConfig);\n        $scope.chartconfigPlatform.options.chart.type = 'pie';\n        $scope.chartconfigPlatform.options.plotOptions.pie.size = 200;\n        $scope.chartconfigPlatform.options.plotOptions.pie.colors = ['#289DF5', '#F9C943'];\n        $scope.chartconfigPlatform.size.height = 250;\n        $scope.chartconfigPlatform.series = [{\n            name: '',\n            data: [['IOS', 6], ['Android', 4]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n        $scope.chartconfigPlatform.options.tooltip = {\n            'borderWidth': 0,\n            'backgroundColor': 'none',\n            'shadow': false,\n            'style': {\n                'fontSize': '20px'\n            },\n            'pointFormat': '<span style=\\'font-size:2em; color: {point.color}; font-weight: bold;\\'>{point.y}%</span>',\n            'useHTML': true,\n            positioner: function positioner(labelWidth, labelHeight) {\n                return {\n                    x: 100 - labelWidth / 2,\n                    y: 80\n                };\n            }\n        };\n\n        //campaignDown\n        $scope.campaignDown = angular.copy($scope.chartConfig);\n        $scope.campaignDown.options.chart.margin = 0;\n        $scope.campaignDown.options.chart.padding = 0;\n        $scope.campaignDown.options.xAxis = {\n            'categories': [],\n            'title': {\n                'text': null\n            },\n            'lineWidth': 0,\n            'lineColor': 'transparent',\n            'labels': {\n                'enabled': false\n            },\n            'minorTickLength': 0,\n            'tickLength': 0,\n            'tickWidth': 0,\n            'minPadding': 0,\n            'maxPadding': 0,\n            'pointPadding': 0,\n            'groupPadding': 0\n        };\n        $scope.campaignDown.options.yAxis = {\n            'lineWidth': 0,\n            'lineColor': 'transparent',\n            'labels': {\n                'enabled': false\n            },\n            'minorTickLength': 0,\n            'tickLength': 0,\n            'gridLineColor': 'transparent',\n            'tickWidth': 0,\n            'minPadding': 0,\n            'maxPadding': 0,\n            'pointPadding': 0,\n            'groupPadding': 0\n        };\n\n        $scope.campaignUp = angular.copy($scope.campaignDown);\n        $scope.campaignUp.series[0].color = '#62d194';\n        $scope.campaignUp.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n\n        // Age Timeline\n        $scope.chartNetIncome = angular.copy($scope.chartConfig);\n        $scope.chartNetIncome.options.chart.type = 'column';\n        $scope.chartNetIncome.options.xAxis.categories = ['21/9/2016', '22/9/2016', '23/9/2016', '24/9/2016', '25/9/2016', '26/9/2016', '27/9/2016'];\n        $scope.chartNetIncome.options.xAxis.labels.enabled = true;\n        $scope.chartNetIncome.size.height = 250;\n        $scope.chartNetIncome.options.yAxis.lineWidth = 1;\n        $scope.chartNetIncome.options.yAxis.lineColor = '#E6EAEE';\n        $scope.chartNetIncome.options.plotOptions.series.stacking = 'normal';\n        $scope.chartNetIncome.options.plotOptions.series.pointWidth = 40;\n        $scope.chartNetIncome.options.plotOptions.series.borderRadius = 3;\n        $scope.chartNetIncome.options.xAxis.lineWidth = 1;\n        $scope.chartNetIncome.options.xAxis.lineColor = '#E6EAEE';\n        $scope.chartNetIncome.options.yAxis = {\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'min': -200000,\n            'minRange': -200000,\n            'max': 200000,\n            'minPadding': 100000,\n            'gridLineWidth': 1\n\n        };\n        $scope.chartNetIncome.series = [{\n            name: '65+',\n            showInLegend: false,\n            data: [20000, 40000, 30000, 40000, 30000, 20000],\n            color: '#51B4FF'\n        }, {\n            name: '55-64',\n            showInLegend: false,\n            data: [53000, 34000, 40000, 70000, 80000, 10000],\n            color: '#337BBF'\n        }, {\n            name: '45-54',\n            showInLegend: false,\n            data: [-53000, -34000, -40000, -70000, -50000, -30000],\n            color: '#E2E7EE'\n        }];\n\n        // Age Timeline\n        $scope.chartconfigHouseholdIncome = angular.copy($scope.chartConfig);\n        $scope.chartconfigHouseholdIncome.options.chart.polar = true;\n        $scope.chartconfigHouseholdIncome.options.pane.size = '80%';\n        $scope.chartconfigHouseholdIncome.options.xAxis.categories = ['0-10K 15%', '20-30K 15%', '30-40K 17%', '40-50K 17%', '50-60K 45%', '60-70K', '70-80K 45%', '80K+ 45%'];\n        $scope.chartconfigHouseholdIncome.options.xAxis.labels.enabled = true;\n        $scope.chartconfigHouseholdIncome.size.height = 250;\n        $scope.chartconfigHouseholdIncome.options.yAxis.lineWidth = 1;\n        $scope.chartconfigHouseholdIncome.options.yAxis.lineColor = '#E6EAEE';\n        $scope.chartconfigHouseholdIncome.options.plotOptions.series.stacking = 'normal';\n        $scope.chartconfigHouseholdIncome.options.plotOptions.series.pointWidth = 40;\n        $scope.chartconfigHouseholdIncome.options.plotOptions.series.borderRadius = 3;\n        $scope.chartconfigHouseholdIncome.options.plotOptions.series.marker.enabled = true;\n        $scope.chartconfigHouseholdIncome.options.xAxis.lineWidth = 1;\n        $scope.chartconfigHouseholdIncome.options.xAxis.lineColor = '#E6EAEE';\n        $scope.chartconfigHouseholdIncome.series = [{\n            showInLegend: false,\n            type: 'area',\n            data: [10000, 80000, 20000, 70000, 30000, 60000, 40000, 50000]\n        }];\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('profileCtrl', ['$scope', '$alert', '$modal', '$q', 'utils', 'errorHandler', 'userService', 'FileUploader', function ($scope, $alert, $modal, $q, utils, errorHandler, userService, FileUploader) {\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            loading: true,\n            sending: false,\n            submitted: false\n        };\n\n        $scope.data = {\n            user: {},\n            countries: []\n        };\n        $scope.profileImageUploader = new FileUploader();\n\n        $scope.previewImage = function (event) {\n            var imageFile = event.target.files[0];\n            if (imageFile) {\n                var reader = new FileReader();\n                reader.readAsDataURL(imageFile);\n                reader.addEventListener('load', function () {\n                    angular.element('#profileImage').css('background-image', 'url(' + reader.result + ')');\n                });\n\n                $scope.data.user.avatar = imageFile;\n            }\n        };\n\n        var init = function init() {\n\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            userService.getUser().then(function (user) {\n                $scope.data.user = user;\n                angular.element('#profileImage').css('background-image', 'url(' + $scope.data.user.avatar + ')');\n                deferred1.resolve(user);\n            }, function (response) {\n                deferred1.reject(response);\n            });\n\n            userService.getCountries().then(function (countries) {\n                $scope.data.countries = countries;\n                deferred2.resolve(countries);\n            }, function (response) {\n                deferred2.reject(response);\n            });\n\n            $q.all(promisses).then(function () {\n                $scope.data.user.country = _.findWhere($scope.data.countries, { id: parseInt($scope.data.user.country) });\n                $scope.view.loading = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.showPasswordChangeDialog = function () {\n            $modal({\n                // templateUrl: 'panel-module/components/passwordChangeModal/modalTmpl.html',\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/passwordChangeModal/passwordChangeModal.html',\n                controller: 'passwordChangeModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                backdrop: 'static'\n            });\n        };\n\n        $scope.saveProfile = function () {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                $scope.view.sending = true;\n\n                var data = {\n                    address: $scope.data.user.address,\n                    city: $scope.data.user.city,\n                    company: $scope.data.user.company,\n                    country: $scope.data.user.country.id,\n                    email: $scope.data.user.email,\n                    firstName: $scope.data.user.firstName,\n                    id: $scope.data.user.id,\n                    lastName: $scope.data.user.lastName,\n                    postalCode: $scope.data.user.postalCode\n                };\n\n                // check avatar\n                if ($scope.data.user.avatar && _typeof($scope.data.user.avatar) === 'object') {\n                    $scope.data.avatar = $scope.data.user.avatar;\n                }\n\n                userService.updateUser(data).then(function () {\n                    $scope.view.sending = false;\n                    $alert({\n                        title: 'Account settings saved.',\n                        content: '',\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'success',\n                        show: true\n                    });\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('creditCardsCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'billingService', function ($scope, $alert, $modal, errorHandler, billingService) {\n\n        var itemsPerPage = 10;\n\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.data = {\n            cards: []\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n            getCards();\n        };\n\n        function getCards() {\n            billingService.getCards().then(function (cards) {\n                $scope.data.cards = cards;\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        var deleteCard = function deleteCard(card) {\n            billingService.deleteCard(card.payment_method_id).then(function () {\n                $alert({\n                    title: 'Your credit card has been deleted.',\n                    content: '',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getCards();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.setMainCard = function (card) {\n            billingService.setMainCard(card.payment_method_id).then(function (cards) {\n                getCards();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showDeleteCardDialog = function (_card) {\n            var _callbacks = {\n                delete: function _delete(card) {\n                    console.log('delete card', card);\n                    deleteCard(card);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/cardDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/cardDeleteModal/modalTmpl.html',\n                controller: 'cardDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    callbacks: function callbacks() {\n                        return _callbacks;\n                    },\n                    card: function card() {\n                        return _card;\n                    }\n                }\n            });\n        };\n\n        $scope.showNewCardDialog = function () {\n            var _callbacks2 = {\n                cardAdded: function cardAdded(card) {\n                    console.log('new card', card);\n                    getCards();\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newCardModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/newCardModal/modalTmpl.html',\n                controller: 'newCardModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    callbacks: function callbacks() {\n                        return _callbacks2;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('addFundsCtrl', ['$q', 'utils', '$scope', '$rootScope', 'errorHandler', '$modal', 'billingService', 'userService', function ($q, utils, $scope, $rootScope, errorHandler, $modal, billingService, userService) {\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            loading: true,\n            sending: false,\n            submitted: false,\n            checkoutSuccess: false,\n            checkoutFailure: false,\n            paymentDeclined: false,\n            mainCardError: false,\n            showBillingDetailsForm: false\n        };\n\n        $scope.data = {\n            card: {\n                masked_number: '',\n                expiration_date: null\n            },\n            countries: [],\n            user: {\n                firstName: '',\n                lastName: '',\n                company: '',\n                country: undefined,\n                city: '',\n                address: '',\n                postalCode: ''\n            },\n            amountsList: [500, 250, 100, 50],\n            creditsCustomAmount: null,\n            checkoutCredits: 0,\n            checkoutTotal: 0,\n            creditValue: null,\n            creditsBalance: 0\n        };\n\n        var init = function init() {\n\n            $scope.view.loading = true;\n\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            billingService.getMainCard().then(function (card) {\n                $scope.data.card = card;\n                deferred1.resolve(card);\n            }, function (response) {\n                $scope.view.mainCardError = true;\n                deferred1.reject(response);\n            });\n\n            userService.getBalance().then(function (response) {\n                $scope.data.creditsBalance = response.credits_balance;\n                $scope.data.creditValue = 1 / response.cash_to_credits_conversion_ratio;\n                deferred2.resolve($scope.data.creditValue);\n            }, function (response) {\n                deferred2.reject(response);\n            });\n\n            userService.getUser().then(function (user) {\n                $scope.data.user = {\n                    firstName: user.firstName,\n                    lastName: user.lastName,\n                    company: user.company,\n                    country: user.country,\n                    city: user.city,\n                    address: user.address,\n                    postalCode: user.postalCode\n                };\n                deferred3.resolve(user);\n            }, function (response) {\n                deferred3.reject(response);\n            });\n\n            userService.getCountries().then(function (countries) {\n                $scope.data.countries = countries;\n                deferred4.resolve(countries);\n            }, function (response) {\n                deferred4.reject(response);\n            });\n\n            $q.all(promisses).then(function () {\n                if (!hasBillingDetails()) {\n                    $scope.view.showBillingDetailsForm = true;\n                }\n                $scope.view.loading = false;\n            }, function (response) {\n                if ($scope.view.mainCardError === true) {\n                    $scope.view.loading = false;\n                } else {\n                    errorHandler.processApiResponse(response);\n                }\n            });\n        };\n\n        function hasBillingDetails() {\n            if ($scope.data.user.firstName === '') {\n                return false;\n            }\n            if ($scope.data.user.lastName === '') {\n                return false;\n            }\n            if ($scope.data.user.company === '') {\n                return false;\n            }\n            if ($scope.data.user.country === undefined) {\n                return false;\n            }\n            if ($scope.data.user.city === '') {\n                return false;\n            }\n            if ($scope.data.user.address === '') {\n                return false;\n            }\n            if ($scope.data.user.postalCode === '') {\n                return false;\n            }\n            return true;\n        }\n\n        var resetData = function resetData() {\n            $scope.data.creditsCustomAmount = null;\n            $scope.data.checkoutCredits = 0;\n            $scope.data.checkoutTotal = 0;\n        };\n\n        var resetCheckoutStatus = function resetCheckoutStatus() {\n            $scope.view.checkoutSuccess = false;\n            $scope.view.checkoutFailure = false;\n        };\n\n        $scope.$watch(function () {\n            return $scope.data.checkoutCredits;\n        }, function () {\n            $scope.data.checkoutTotal = $scope.data.checkoutCredits * $scope.data.creditValue;\n            if ($scope.data.checkoutTotal > 0) {\n                resetCheckoutStatus();\n            }\n        });\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.changeBillingDetails = function () {\n            $scope.view.showBillingDetailsForm = true;\n        };\n\n        $scope.selectCreditsPreset = function (amount) {\n            $scope.data.checkoutCredits = amount;\n            $scope.data.creditsCustomAmount = null;\n        };\n\n        $scope.selectCreditsCustom = function (amount) {\n            $scope.data.checkoutCredits = amount;\n        };\n\n        $scope.checkoutCancel = function () {\n            resetData();\n        };\n\n        $scope.checkoutCconfirm = function () {\n\n            if ($scope.view.showBillingDetailsForm && !$scope.form1.$valid) {\n\n                $scope.view.submitted = true;\n            } else {\n\n                $scope.view.sending = true;\n                $scope.view.showBillingDetailsForm = false;\n                $scope.paymentDeclinedMessage = '';\n\n                userService.updateUser($scope.data.user).then(function () {\n                    billingService.buyCredits($scope.data.card.payment_method_id, $scope.data.checkoutCredits).then(function (response) {\n                        $scope.view.sending = false;\n                        $scope.view.checkoutSuccess = true;\n                        $rootScope.$broadcast('accountBalanceChanged');\n                        resetData();\n                    }, function (response) {\n                        $scope.view.sending = false;\n                        if (response.status === 400 && typeof response.data.error_code !== 'undefined') {\n                            if (response.data.error_code === 1) {\n                                $scope.view.checkoutFailure = true;\n                            } else if (response.data.error_code === 2) {\n                                $scope.view.paymentDeclined = true;\n                                $scope.paymentDeclinedMessage = response.data.message;\n                            }\n                        } else {\n                            errorHandler.processApiResponse(response);\n                        }\n                        resetData();\n                    });\n                }, function (response) {\n                    $scope.view.sending = false;\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('activeFundCtrl', ['$scope', function ($scope) {\n\n        var dataFundDetails = [{\n            srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n            title: 'Coca Cola',\n            subTitle: 'Coke Studio Season 8',\n            totalFund: '1,000,000',\n            totalPayout: '190,000',\n            refiledFund: '300,000',\n            totalCurrentFund: '920,000',\n            status: 'status-green'\n        }, {\n            srcImg: 'http://theshoegame.com/wp-content/uploads/2015/01/nike-logo-copy.jpg',\n            title: 'Nike',\n            subTitle: 'Nike Air Max Campaign',\n            totalFund: '3,000,000',\n            totalPayout: '210,400',\n            refiledFund: '1,300,000',\n            totalCurrentFund: '2,300,000',\n            status: 'status-green'\n        }, {\n            srcImg: 'http://www.kowalskis.com/sites/kowalskis.com/files/images/departments/starbucks-logo-trans.png',\n            title: 'Starbucks',\n            subTitle: 'Nitro Cold Brew',\n            totalFund: '425,000',\n            totalPayout: '19,400',\n            refiledFund: '100,000',\n            totalCurrentFund: '250,000',\n            status: 'status-organce'\n        }, {\n            srcImg: 'http://vector.me/files/images/7/3/73419/nikon.png',\n            title: 'Nikon',\n            subTitle: 'Nikon 1 J5 Product Launch',\n            totalFund: '17,000,000',\n            totalPayout: '721,200',\n            refiledFund: '5,000,000',\n            totalCurrentFund: '6,300,500',\n            status: 'status-gray'\n        }, {\n            srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n            title: 'LG',\n            subTitle: 'LG G5',\n            totalFund: '800,000',\n            totalPayout: '120,000',\n            refiledFund: '1,000,000',\n            totalCurrentFund: '350,000',\n            status: 'status-organce'\n        }, {\n            srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n            title: 'Leica',\n            subTitle: 'Leica M-D Launch',\n            totalFund: '2,800,000',\n            totalPayout: '710,000',\n            refiledFund: '900,000',\n            totalCurrentFund: '1,100,000',\n            status: 'status-green'\n        }];\n\n        $scope.dataFundDetails = dataFundDetails;\n\n        var revenuePieProduct = {\n            id: 'revenuePieProduct',\n            title: {\n                text: 'Top Funds by <strong>Campaign</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 3000000', 3000000], ['<strong>Coca Cola</strong><br/>USD 1000000', 1000000], ['<strong>Leica</strong><br/>USD 2800000', 2800000]]\n            }]\n        };\n        var revenuePieSource = {\n            id: 'revenuePieSource',\n            title: {\n                text: 'Top Funds by <strong>Payout</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 210000', 210000], ['<strong>Leica</strong><br/>USD 120000', 120000], ['<strong>Coca Cola</strong><br/>USD 190000', 190000]]\n            }]\n        };\n        var revenuePieCountry = {\n            id: 'revenuePieCountry',\n            title: {\n                text: 'Top Funds by <strong>Refill</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 210000', 210000], ['<strong>Leica</strong><br/>USD 120000', 120000], ['<strong>Coca Cola</strong><br/>USD 190000', 190000]]\n            }]\n        };\n\n        function init() {\n            drawPieChart(revenuePieProduct);\n            drawPieChart(revenuePieSource);\n            drawPieChart(revenuePieCountry);\n        }\n\n        function drawPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                title: {\n                    text: c.title.text,\n                    align: 'left',\n                    // verticalAlign: 'middle',\n                    y: 20\n                },\n                tooltip: {\n                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n                },\n                credits: {\n                    enabled: false\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false\n                        },\n                        // startAngle: 0,\n                        // endAngle: 360,\n                        // center: ['50%', '65%'],\n                        showInLegend: true,\n                        colors: ['#289df5', '#39bf23', '#8567e6'],\n                        size: 220\n                    }\n                },\n                legend: {\n                    align: 'right',\n                    verticalAlign: 'middle',\n                    layout: 'vertical',\n                    symbolRadius: 100,\n                    symbolPadding: 5,\n                    // itemMarginBottom: 10,\n                    itemStyle: {\n                        fontWeight: 100\n                    }\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name,\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }]\n            });\n        }\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('archivedFundCtrl', ['$scope', function ($scope) {\n\n        var dataFundDetails = [{\n            srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n            title: 'Coca Cola',\n            subTitle: 'Coke Studio Season 8',\n            totalFund: '1,000,000',\n            totalPayout: '190,000',\n            refiledFund: '300,000',\n            totalCurrentFund: '920,000',\n            status: 'status-gray'\n        }, {\n            srcImg: 'http://theshoegame.com/wp-content/uploads/2015/01/nike-logo-copy.jpg',\n            title: 'Nike',\n            subTitle: 'Nike Air Max Campaign',\n            totalFund: '3,000,000',\n            totalPayout: '210,400',\n            refiledFund: '1,300,000',\n            totalCurrentFund: '2,300,000',\n            status: 'status-gray'\n        }, {\n            srcImg: 'http://www.kowalskis.com/sites/kowalskis.com/files/images/departments/starbucks-logo-trans.png',\n            title: 'Starbucks',\n            subTitle: 'Nitro Cold Brew',\n            totalFund: '425,000',\n            totalPayout: '19,400',\n            refiledFund: '100,000',\n            totalCurrentFund: '250,000',\n            status: 'status-gray'\n        }, {\n            srcImg: 'http://vector.me/files/images/7/3/73419/nikon.png',\n            title: 'Nikon',\n            subTitle: 'Nikon 1 J5 Product Launch',\n            totalFund: '17,000,000',\n            totalPayout: '721,200',\n            refiledFund: '5,000,000',\n            totalCurrentFund: '6,300,500',\n            status: 'status-gray'\n        }, {\n            srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n            title: 'LG',\n            subTitle: 'LG G5',\n            totalFund: '800,000',\n            totalPayout: '120,000',\n            refiledFund: '1,000,000',\n            totalCurrentFund: '350,000',\n            status: 'status-gray'\n        }, {\n            srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n            title: 'Leica',\n            subTitle: 'Leica M-D Launch',\n            totalFund: '2,800,000',\n            totalPayout: '710,000',\n            refiledFund: '900,000',\n            totalCurrentFund: '1,100,000',\n            status: 'status-gray'\n        }];\n\n        $scope.dataFundDetails = dataFundDetails;\n\n        var revenuePieProduct = {\n            id: 'revenuePieProduct',\n            title: {\n                text: 'Top Funds by <strong>Campaign</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 3000000', 3000000], ['<strong>Coca Cola</strong><br/>USD 1000000', 1000000], ['<strong>Leica</strong><br/>USD 2800000', 2800000]]\n            }]\n        };\n        var revenuePieSource = {\n            id: 'revenuePieSource',\n            title: {\n                text: 'Top Funds by <strong>Payout</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 210000', 210000], ['<strong>Leica</strong><br/>USD 120000', 120000], ['<strong>Coca Cola</strong><br/>USD 190000', 190000]]\n            }]\n        };\n        var revenuePieCountry = {\n            id: 'revenuePieCountry',\n            title: {\n                text: 'Top Funds by <strong>Refill</strong>'\n            },\n            series: [{\n                data: [['<strong>Nike</strong><br/>USD 210000', 210000], ['<strong>Leica</strong><br/>USD 120000', 120000], ['<strong>Coca Cola</strong><br/>USD 190000', 190000]]\n            }]\n        };\n\n        function init() {\n            drawPieChart(revenuePieProduct);\n            drawPieChart(revenuePieSource);\n            drawPieChart(revenuePieCountry);\n        }\n\n        function drawPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                title: {\n                    text: c.title.text,\n                    align: 'left',\n                    // verticalAlign: 'middle',\n                    y: 20\n                },\n                tooltip: {\n                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n                },\n                credits: {\n                    enabled: false\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false\n                        },\n                        // startAngle: 0,\n                        // endAngle: 360,\n                        // center: ['50%', '65%'],\n                        showInLegend: true,\n                        colors: ['#289df5', '#39bf23', '#8567e6'],\n                        size: 220\n                    }\n                },\n                legend: {\n                    align: 'right',\n                    verticalAlign: 'middle',\n                    layout: 'vertical',\n                    symbolRadius: 100,\n                    symbolPadding: 5,\n                    // itemMarginBottom: 10,\n                    itemStyle: {\n                        fontWeight: 100\n                    }\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name,\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }]\n            });\n        }\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('fundManagementCtrl', ['$scope', '$state', '$q', 'orderService', '$rootScope', 'advertiserOrganizationManagementService', function ($scope, $state, $q, orderService, $rootScope, advertiserOrganizationManagementService) {\n        $scope.updatingId = $state.params.updatingId;\n\n        $scope.data = {\n            fundList: []\n        };\n\n        var itemsPerPage = 8;\n\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 8,\n            filtersActive: false\n        };\n        $scope.companyName = '';\n\n        if (!$rootScope.kaching) $rootScope.kaching = {};\n        $scope.getAdvertiserOrganizationList = function () {\n            var deferred = $q.defer();\n\n            var requestParams = {\n                page_size: $scope.view.itemsPerPage,\n                page: $scope.view.currentPage,\n                limit: $scope.view.maxSize\n            };\n\n            if ($scope.companyName.length > 0) {\n                requestParams.name = $scope.companyName;\n            }\n\n            $scope.view.busy = true;\n\n            advertiserOrganizationManagementService.getAdvertiserOrganizationList(requestParams).then(function (response) {\n                $scope.view.totalItem = response.count;\n                $scope.updatingId = null;\n                $scope.data.fundList = [];\n                $scope.data.fundListCount = response.results.length;\n                $scope.totalAvailable = response.total_credit;\n                $scope.totalFund = response.total_funded_credit;\n                $scope.totalSpent = response.total_spent_credit;\n                $scope.view.busy = false;\n                var orderLists = response.results;\n                angular.forEach(orderLists, function (value, key) {\n                    var dataItem = {\n                        name: value.name,\n                        funded_credit: value.funded_credit,\n                        spent_credit: value.spent_credit,\n                        balance_credit: value.balance_credit\n                    };\n                    $scope.data.fundList.push(dataItem);\n                });\n                deferred.resolve();\n            }, function (response) {\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.changePage = function () {\n            $scope.getAdvertiserOrganizationList();\n        };\n\n        $scope.editOrder = function (orderItem) {\n            $state.go('kaching.orderHistory.edit', { order: orderItem, orderNumber: orderItem.orderNumber });\n        };\n\n        function init() {\n            $scope.getAdvertiserOrganizationList();\n        }\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('analyticsCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'billingService', function ($scope, $alert, $modal, errorHandler, billingService) {\n        $scope.tab = {\n            SCANS: 'scans',\n            SALES: 'sales',\n\n            CAMPAIGN_OVERVIEW: 'overview',\n            CAMPAIGN_PAYOUT: 'payout',\n            PRODUCT_REVENUE: 'revenue',\n            PRODUCT_TRAFFIC: 'traffic',\n            PURCHASE_FUNNEL: 'funnel'\n        };\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/analytics/tabs/';\n\n        $scope.analyticsTab = {\n            scans: templateFolder + '/scans/scans-tab.html',\n            sales: templateFolder + '/sales/sales-tab.html',\n\n            overview: templateFolder + 'overview-tab.html',\n            payout: templateFolder + 'payout-tab.html',\n            revenue: templateFolder + '/productRevenue/revenue-tab.html',\n            traffic: templateFolder + 'traffic-tab.html',\n            funnel: templateFolder + 'funnel-tab.html'\n        };\n\n        $scope.updateTab = function (tab) {\n            $scope.activedTab = tab;\n        };\n\n        var init = function init() {\n            $scope.activedTab = $scope.tab.SCANS;\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('panelApp').controller('overviewCtrl', ['$scope', function ($scope) {\n    var dataViewDetails = [{\n      srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n      title: 'Coca Cola',\n      subTitle: 'Coke Studio Season 8',\n      hours: '23:13',\n      date: '20 Oct 2016',\n      name: 'John Appleseed',\n      sex: 'Male',\n      age: '18-24',\n      device: 'iOS',\n      type: 'Video',\n      country: 'Beattyhaven Isle of Man',\n      coin: '1',\n      hrefReview: 'http://www.coca-colacompany.com/'\n    }, {\n      srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQufBXIrA6QaW6NSnnmjWq5vWXu2jrQtvPvUb1gEEjoU6ilf2Gt5w',\n      title: 'Nike',\n      subTitle: 'Nike Air Max Campaign',\n      hours: '12:24',\n      date: '16 Oct 2016',\n      name: 'Ricardo Hall',\n      sex: 'Male',\n      age: '45-44',\n      device: 'iOS',\n      type: 'Video/Image',\n      country: 'South Aditya Seychelles',\n      coin: '1',\n      hrefReview: 'http://www.nike.com/us/en_us/'\n    }, {\n      srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRAJ2Nofpu6L6uSLW9raOXiBgOE4k-2XrKpH0qLCQxnPDbStW30ww',\n      title: 'Starbucks',\n      subTitle: 'Nitro Cold Brew',\n      hours: '02:25',\n      date: '24 Nov 2016',\n      name: 'Viola Wade',\n      sex: 'Female',\n      age: '18-24',\n      device: 'Android',\n      type: 'Video/Image',\n      country: 'Port Erickmouth Syria Arab Republic',\n      coin: '1',\n      hrefReview: 'http://www.starbucks.vn/'\n    }, {\n      srcImg: 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcT6rXmlwvAqpGTFBKg6KmZf7u31_FEeWKAsL6Z2YjjxFT6_Maj7Uw',\n      title: 'Nikon',\n      subTitle: 'Nikon 1 J5 Product Launch',\n      hours: '12:54',\n      date: '05 Oct 2016',\n      name: 'Mario Hardy',\n      sex: 'Male',\n      age: '18-24',\n      device: 'Android',\n      type: 'Video/Image',\n      country: 'North Annie Aruba',\n      coin: '1',\n      hrefReview: 'http://www.nikon.com.vn/vi_VN'\n    }, {\n      srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n      title: 'LG',\n      subTitle: 'LG G5',\n      hours: '23:13',\n      date: '15 Feb 2016',\n      name: 'Lida Valdez',\n      sex: 'Female',\n      age: '25-34',\n      device: 'iOS',\n      type: 'Video',\n      country: 'Danstad Maili',\n      coin: '1',\n      hrefReview: 'http://www.lg.com/vn'\n    }, {\n      srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n      title: 'Leica',\n      subTitle: 'Leica M-D Launch',\n      hours: '12:24',\n      date: '18 Dec 2016',\n      name: 'Ricardo Hall',\n      sex: 'Male',\n      age: '35-44',\n      device: 'iOS',\n      type: 'Video',\n      country: 'East Ruben Mexico',\n      coin: '1',\n      hrefReview: 'https://us.leica-camera.com/'\n    }];\n    // {\n    //     srcImg: 'xxx',\n    //     title: 'xxx',\n    //     subTitle: 'xxx',\n    //     hours: 'xxx',\n    //     date: 'xxx',\n    //     name: 'xxx',\n    //     sex: 'xxx',\n    //     age: 'xxx',\n    //     device: 'xxx',\n    //     type: 'xxx',\n    //     country: 'xxx',\n    //     coin: 'xxx',\n    //     hrefReview: 'xxx'\n    // },\n\n    $scope.dataViewDetails = dataViewDetails;\n\n    $scope.chartConfig = {\n      'options': {\n        'chart': {\n          'type': 'areaspline'\n        },\n        'xAxis': {\n          'categories': [],\n          'title': {\n            'text': null\n          },\n\n          'labels': {\n            'enabled': false\n          },\n          'minorTickLength': 0,\n          'tickLength': 0,\n          'tickWidth': 0,\n          'minPadding': 0,\n          'maxPadding': 0,\n          'pointPadding': 0,\n          'groupPadding': 0,\n          'lineColor': '',\n          'lineWidth': ''\n        },\n        'yAxis': {\n          'categories': [],\n          'title': {\n            'text': null\n          },\n          'labels': {\n            'enabled': false\n          },\n          'minorTickLength': 0,\n          'tickLength': 0,\n          'gridLineColor': 'transparent',\n          'tickWidth': 0,\n          'minPadding': 0,\n          'maxPadding': 0,\n          'pointPadding': 0,\n          'groupPadding': 0,\n          'lineColor': '',\n          'lineWidth': ''\n        },\n        'pane': {},\n        'tooltip': {},\n        'plotOptions': {\n          'series': {\n            'stacking': '',\n            'marker': {\n              'enabled': false\n            }\n          },\n          'pie': {\n            'size': 500\n          }\n        },\n        'exporting': {\n          'enabled': false\n        }\n      },\n      'series': [{\n        'showInLegend': false,\n        'data': [],\n        'color': '',\n        'name': ''\n\n      }, {\n        'showInLegend': false,\n        'data': [],\n        'color': '',\n        'name': ''\n      }],\n      'title': {\n        'text': ''\n      },\n      'credits': {\n        'enabled': false\n      },\n      'loading': false,\n      'size': {\n        'height': 130\n      },\n      'tooltip': {},\n      'useHighStocks': false,\n      func: function func(chart) {}\n    };\n\n    $scope.chartConfig2 = angular.copy($scope.chartConfig);\n    $scope.chartConfig2.series[0].color = '#62d194';\n    $scope.chartConfig2.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n    $scope.chartConfigGender = angular.copy($scope.chartConfig);\n\n    //chart gender\n    $scope.chartConfigGender.options.chart.type = 'bar';\n    $scope.chartConfigGender.options.xAxis.categories = ['24:00', '18:00', '12:00', '06:00', '00:00'];\n    $scope.chartConfigGender.options.xAxis.labels.enabled = true;\n    $scope.chartConfigGender.options.xAxis.lineWidth = 1;\n    $scope.chartConfigGender.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigGender.options.plotOptions.series.pointWidth = 18;\n    $scope.chartConfigGender.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100000,\n      'max': 100000,\n      'minPadding': 100000,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartConfigGender.series = [{\n      name: 'female',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000],\n      color: '#FFBC00'\n    }, {\n      name: 'male',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000],\n      color: '#2DA1F8'\n    }];\n    $scope.chartConfigGender.options.plotOptions.series.stacking = 'normal';\n    $scope.chartConfigGender.size.height = 250;\n\n    // Age Timeline\n    $scope.chartConfigAgeTimeline = angular.copy($scope.chartConfig);\n    $scope.chartConfigAgeTimeline.options.chart.type = 'column';\n    $scope.chartConfigAgeTimeline.options.xAxis.categories = ['06:00', '08:00', '10:00', '12:00', '14:00', '16:00'];\n    $scope.chartConfigAgeTimeline.options.xAxis.labels.enabled = true;\n    $scope.chartConfigAgeTimeline.size.height = 281;\n    $scope.chartConfigAgeTimeline.options.yAxis.lineWidth = 1;\n    $scope.chartConfigAgeTimeline.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigAgeTimeline.options.plotOptions.series.stacking = 'normal';\n    $scope.chartConfigAgeTimeline.options.plotOptions.series.pointWidth = 18;\n    $scope.chartConfigAgeTimeline.options.xAxis.lineWidth = 1;\n    $scope.chartConfigAgeTimeline.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigAgeTimeline.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100000,\n      'max': 100000,\n      'minPadding': 100000,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartConfigAgeTimeline.series = [{\n      name: '65+',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000],\n      color: '#8567E6'\n    }, {\n      name: '55-64',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#40557D'\n    }, {\n      name: '45-54',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#289DF5'\n    }, {\n      name: '35-44',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#39BF23'\n    }, {\n      name: '25-34',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#FFD400'\n    }, {\n      name: '0-24',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#F0B499'\n    }];\n\n    // Customers\n    $scope.chartconfigCustomer = angular.copy($scope.chartConfig);\n    $scope.chartconfigCustomer.options.chart.type = 'pie';\n    $scope.chartconfigCustomer.options.plotOptions.pie.size = 140;\n    $scope.chartconfigCustomer.options.plotOptions.pie.colors = ['#289DF5', '#40557D', '#FFD400'];\n    $scope.chartconfigCustomer.size.height = 150;\n    $scope.chartconfigCustomer.series = [{\n      name: 'Customers',\n      data: [['Returning', 6], ['New', 4], ['Referrals', 7]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // product spending\n    $scope.chartconfigProductSpending = angular.copy($scope.chartConfig);\n    $scope.chartconfigProductSpending.options.chart.type = 'pie';\n    $scope.chartconfigProductSpending.options.plotOptions.pie.size = 150;\n    $scope.chartconfigProductSpending.options.plotOptions.pie.colors = ['#40557D', '#3373B3', '#F0B499', '#72C4B9', '#FFD60D', '#1AA6D6'];\n    $scope.chartconfigProductSpending.size.height = 200;\n    $scope.chartconfigProductSpending.series = [{\n      name: 'Product',\n      data: [['Nike', 6], ['Nike', 4], ['Nike', 7], ['Nike', 6], ['Nike', 6], ['Nike', 6]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // age\n    $scope.chartconfigAge = angular.copy($scope.chartConfig);\n    $scope.chartconfigAge.options.chart.type = 'pie';\n    $scope.chartconfigAge.options.plotOptions.pie.size = 150;\n    $scope.chartconfigAge.options.plotOptions.pie.colors = ['#F0B499', '#FFD400', '#39BF23', '#289DF5', '#40557D', '#8567E6'];\n    $scope.chartconfigAge.size.height = 180;\n    $scope.chartconfigAge.series = [{\n      name: 'Product',\n      data: [['0-24', 6], ['25-34', 4], ['35-44', 7], ['45-54', 6], ['55-64', 6], ['65+', 6]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // Daily Sale\n    $scope.chartconfigDailySale = angular.copy($scope.chartConfig);\n    $scope.chartconfigDailySale.options.chart.type = 'column';\n    $scope.chartconfigDailySale.options.plotOptions.series.pointWidth = 8;\n    $scope.chartconfigDailySale.size.height = 179;\n    $scope.chartconfigDailySale.series = [{\n      name: 'Thang 1',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000],\n      color: '#1A91EB'\n    }];\n\n    // Hour\n    $scope.chartconfigHour = angular.copy($scope.chartConfig);\n    $scope.chartconfigHour.options.chart.type = 'area';\n    $scope.chartconfigHour.options.xAxis = {\n      'categories': ['Jan', 'Feb', 'March', 'April', 'May'],\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartconfigHour.series = [{\n      name: '',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000],\n      color: '#1A91EB'\n    }];\n\n    //Genre\n    $scope.chartconfigGenres = angular.copy($scope.chartConfig);\n    $scope.chartconfigGenres.options.chart.type = 'column';\n    $scope.chartconfigGenres.size.height = 180;\n    $scope.chartconfigGenres.options.xAxis = {\n      'categories': ['21/9', '22/9', '23/9', '24/9', '25/9', '26/9', '27/9'],\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartconfigGenres.series = [{\n      name: 'Male',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n      color: '#337BBF'\n    }, {\n      name: 'Female',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n      color: '#2297F0'\n    }];\n    $scope.chartconfigGenres.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100,\n      'max': 3000,\n      'minPadding': 1,\n      'gridLineWidth': 0\n\n    };\n\n    //Community Type\n    $scope.chartconfigCommunity = angular.copy($scope.chartConfig);\n    $scope.chartconfigCommunity.options.chart.type = 'solidgauge';\n    $scope.chartconfigCommunity.size.height = 250;\n    $scope.chartconfigCommunity.options.tooltip = {\n      'borderWidth': 0,\n      'backgroundColor': 'none',\n      'shadow': false,\n      'style': {\n        'fontSize': '16px'\n      },\n      'pointFormat': '{series.name}<br><span style=\\'font-size:2em; color: {point.color}; font-weight: bold\\'>{point.y}%</span>',\n      'useHTML': true,\n      positioner: function positioner(labelWidth, labelHeight) {\n        return {\n          x: 104 - labelWidth / 2,\n          y: 104\n        };\n      }\n    };\n    Highcharts.getOptions().colors = ['#1F96EF', '#8668E6', '#FAC83F'];\n    $scope.chartconfigCommunity.options.pane = {\n      startAngle: 0,\n      endAngle: 360,\n      background: [{ // Track for Move\n        outerRadius: '109%',\n        innerRadius: '91%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }, { // Track for Exercise\n        outerRadius: '66%',\n        innerRadius: '85%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[1]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }, { // Track for Stand\n        outerRadius: '40%',\n        innerRadius: '59%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[2]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }]\n    };\n    $scope.chartconfigCommunity.options.yAxis = {\n      'min': 0,\n      'max': 100,\n      'lineWidth': 0,\n      'tickPositions': []\n    };\n    $scope.chartconfigCommunity.options.plotOptions = {\n      solidgauge: {\n        borderWidth: '18px',\n        dataLabels: {\n          y: 0,\n          borderWidth: 0,\n          useHTML: true,\n          enabled: false\n        },\n        linecap: 'round',\n        stickyTracking: false,\n        innerRadius: '0%'\n      },\n      series: {\n        pointWidth: 0\n      }\n    };\n    $scope.chartconfigCommunity.series = [{\n      name: 'Urban',\n      borderColor: '#1F96EF',\n      data: [{\n        color: Highcharts.getOptions().colors[0],\n        radius: '100%',\n        innerRadius: '100%',\n        y: 50\n      }]\n    }, {\n      name: 'Suburban',\n      borderColor: Highcharts.getOptions().colors[1],\n      data: [{\n        color: Highcharts.getOptions().colors[1],\n        radius: '75%',\n        innerRadius: '75%',\n        y: 35\n      }]\n    }, {\n      name: 'Rural',\n      borderColor: Highcharts.getOptions().colors[2],\n      data: [{\n        color: Highcharts.getOptions().colors[2],\n        radius: '50%',\n        innerRadius: '50%',\n        y: 15\n      }]\n    }];\n    // Platform\n    $scope.chartconfigPlatform = angular.copy($scope.chartConfig);\n    $scope.chartconfigPlatform.options.chart.type = 'pie';\n    $scope.chartconfigPlatform.options.plotOptions.pie.size = 200;\n    $scope.chartconfigPlatform.options.plotOptions.pie.colors = ['#289DF5', '#F9C943'];\n    $scope.chartconfigPlatform.size.height = 250;\n    $scope.chartconfigPlatform.series = [{\n      name: '',\n      data: [['IOS', 6], ['Android', 4]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n    $scope.chartconfigPlatform.options.tooltip = {\n      'borderWidth': 0,\n      'backgroundColor': 'none',\n      'shadow': false,\n      'style': {\n        'fontSize': '20px'\n      },\n      'pointFormat': '<span style=\\'font-size:2em; color: {point.color}; font-weight: bold;\\'>{point.y}%</span>',\n      'useHTML': true,\n      positioner: function positioner(labelWidth, labelHeight) {\n        return {\n          x: 100 - labelWidth / 2,\n          y: 80\n        };\n      }\n    };\n\n    //campaignDown\n    $scope.campaignDown = angular.copy($scope.chartConfig);\n    $scope.campaignDown.options.chart.margin = 0;\n    $scope.campaignDown.options.chart.padding = 0;\n    $scope.campaignDown.options.xAxis = {\n      'categories': [],\n      'title': {\n        'text': null\n      },\n      'lineWidth': 0,\n      'lineColor': 'transparent',\n      'labels': {\n        'enabled': false\n      },\n      'minorTickLength': 0,\n      'tickLength': 0,\n      'tickWidth': 0,\n      'minPadding': 0,\n      'maxPadding': 0,\n      'pointPadding': 0,\n      'groupPadding': 0\n    };\n    $scope.campaignDown.options.yAxis = {\n      'lineWidth': 0,\n      'lineColor': 'transparent',\n      'labels': {\n        'enabled': false\n      },\n      'minorTickLength': 0,\n      'tickLength': 0,\n      'gridLineColor': 'transparent',\n      'tickWidth': 0,\n      'minPadding': 0,\n      'maxPadding': 0,\n      'pointPadding': 0,\n      'groupPadding': 0\n    };\n\n    $scope.campaignUp = angular.copy($scope.campaignDown);\n    $scope.campaignUp.series[0].color = '#62d194';\n    $scope.campaignUp.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n\n    // Age Timeline\n    $scope.chartNetIncome = angular.copy($scope.chartConfig);\n    $scope.chartNetIncome.options.chart.type = 'column';\n    $scope.chartNetIncome.options.xAxis.categories = ['21/9/2016', '22/9/2016', '23/9/2016', '24/9/2016', '25/9/2016', '26/9/2016', '27/9/2016'];\n    $scope.chartNetIncome.options.xAxis.labels.enabled = true;\n    $scope.chartNetIncome.size.height = 250;\n    $scope.chartNetIncome.options.yAxis.lineWidth = 1;\n    $scope.chartNetIncome.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartNetIncome.options.plotOptions.series.stacking = 'normal';\n    $scope.chartNetIncome.options.plotOptions.series.pointWidth = 40;\n    $scope.chartNetIncome.options.plotOptions.series.borderRadius = 3;\n    $scope.chartNetIncome.options.xAxis.lineWidth = 1;\n    $scope.chartNetIncome.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartNetIncome.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': -200000,\n      'minRange': -200000,\n      'max': 200000,\n      'minPadding': 100000,\n      'gridLineWidth': 1\n\n    };\n    $scope.chartNetIncome.series = [{\n      name: '65+',\n      showInLegend: false,\n      data: [20000, 40000, 30000, 40000, 30000, 20000],\n      color: '#51B4FF'\n    }, {\n      name: '55-64',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 80000, 10000],\n      color: '#337BBF'\n    }, {\n      name: '45-54',\n      showInLegend: false,\n      data: [-53000, -34000, -40000, -70000, -50000, -30000],\n      color: '#E2E7EE'\n    }];\n\n    // Age Timeline\n    $scope.chartconfigHouseholdIncome = angular.copy($scope.chartConfig);\n    $scope.chartconfigHouseholdIncome.options.chart.polar = true;\n    $scope.chartconfigHouseholdIncome.options.pane.size = '80%';\n    $scope.chartconfigHouseholdIncome.options.xAxis.categories = ['0-10K 15%', '20-30K 15%', '30-40K 17%', '40-50K 17%', '50-60K 45%', '60-70K', '70-80K 45%', '80K+ 45%'];\n    $scope.chartconfigHouseholdIncome.options.xAxis.labels.enabled = true;\n    $scope.chartconfigHouseholdIncome.size.height = 250;\n    $scope.chartconfigHouseholdIncome.options.yAxis.lineWidth = 1;\n    $scope.chartconfigHouseholdIncome.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.stacking = 'normal';\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.pointWidth = 40;\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.borderRadius = 3;\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.marker.enabled = true;\n    $scope.chartconfigHouseholdIncome.options.xAxis.lineWidth = 1;\n    $scope.chartconfigHouseholdIncome.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartconfigHouseholdIncome.series = [{\n      showInLegend: false,\n      type: 'area',\n      data: [10000, 80000, 20000, 70000, 30000, 60000, 40000, 50000]\n    }];\n  }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('payoutCtrl', ['$scope', 'analyticsService', function ($scope, analyticsService) {\n\n        var dataPayoutDetails = [{\n            srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n            title: 'Coca Cola',\n            subTitle: 'Coke Studio Season 8',\n            hours: '23:13',\n            date: '20 Oct 2016',\n            name: 'John Appleseed',\n            coin: '1',\n            totalCoin: '5',\n            dollars: '100',\n            month: '',\n            hrefReview: 'http://www.coca-colacompany.com/'\n        }, {\n            srcImg: 'http://theshoegame.com/wp-content/uploads/2015/01/nike-logo-copy.jpg',\n            title: 'Nike',\n            subTitle: 'Nike Air Max Campaign',\n            hours: '12:24',\n            date: '16 Oct 2016',\n            name: 'Ricardo Hall',\n            coin: '1',\n            totalCoin: '1',\n            dollars: '',\n            month: '',\n            hrefReview: 'http://www.nike.com/us/en_us/'\n        }, {\n            srcImg: 'http://www.kowalskis.com/sites/kowalskis.com/files/images/departments/starbucks-logo-trans.png',\n            title: 'Starbucks',\n            subTitle: 'Nitro Cold Brew',\n            hours: '02:25',\n            date: '24 Nov 2016',\n            name: 'Viola Wade',\n            coin: '1',\n            totalCoin: '12',\n            dollars: '100',\n            month: '',\n            hrefReview: 'http://www.starbucks.vn/'\n        }, {\n            srcImg: 'http://vector.me/files/images/7/3/73419/nikon.png',\n            title: 'Nikon',\n            subTitle: 'Nikon 1 J5 Product Launch',\n            hours: '12:54',\n            date: '05 Oct 2016',\n            name: 'Mario Hardy',\n            coin: '1',\n            totalCoin: '8',\n            dollars: '200',\n            month: '',\n            hrefReview: 'http://www.nikon.com.vn/vi_VN'\n        }, {\n            srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n            title: 'LG',\n            subTitle: 'LG G5',\n            hours: '23:13',\n            date: '15 Feb 2016',\n            name: 'Lida Valdez',\n            coin: '1',\n            totalCoin: '7',\n            dollars: '10,000',\n            month: '',\n            hrefReview: 'http://www.lg.com/vn'\n        }, {\n            srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n            title: 'Leica',\n            subTitle: 'Leica M-D Launch',\n            hours: '12:24',\n            date: '18 Dec 2016',\n            name: 'Ricardo Hall',\n            coin: '1',\n            totalCoin: '5',\n            dollars: '100',\n            month: '',\n            hrefReview: 'https://us.leica-camera.com/'\n        }];\n\n        var itemsPerPage = 10;\n        var maxSize = 10;\n\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            maxSize: maxSize,\n            currentPage: 1\n        };\n\n        $scope.data = {\n            campaignsCount: 0,\n            campaigns: []\n        };\n\n        $scope.changePage = function () {\n            getStatisticCampaigns();\n        };\n\n        var getStatisticCampaigns = function getStatisticCampaigns() {\n\n            var params = {\n                page_size: itemsPerPage,\n                page: $scope.view.currentPage\n            };\n\n            analyticsService.getStatisticCampaigns(params).then(function (data) {\n                $scope.data.campaignsCount = data.count;\n                $scope.data.campaigns = [];\n                angular.forEach(data.items, function (value, key) {\n                    var item = dataPayoutDetails[Math.floor(Math.random() * dataPayoutDetails.length)];\n                    var dataItem = {\n                        srcImg: item.srcImg,\n                        title: item.title,\n                        subTitle: item.subTitle,\n                        recent_view_on: value.recent_view_on === null ? '-' : moment(value.recent_view_on).format('H:mm:ss D MMM YYYY'),\n                        recent_user: value.recent_user,\n                        coin_earned: value.coin_earned,\n                        totalCoin: item.totalCoin,\n                        dollars: item.dollars,\n                        month: '',\n                        hrefReview: item.hrefReview\n                    };\n                    $scope.data.campaigns.push(dataItem);\n                });\n            }, function (response) {});\n        };\n\n        var init = function init() {\n            getStatisticCampaigns();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('revenueCtrl', ['$scope', function ($scope) {\n\n        $scope.chartConfig = {\n            'options': {\n                'chart': {\n                    'type': 'areaspline'\n                },\n                'xAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'yAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'gridLineColor': 'transparent',\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'pane': {},\n                'tooltip': {},\n                'plotOptions': {\n                    'series': {\n                        'stacking': '',\n                        'marker': {\n                            'enabled': false\n                        }\n                    },\n                    'pie': {\n                        'size': 500\n                    }\n                },\n                'exporting': {\n                    'enabled': false\n                }\n            },\n            'series': [{\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n\n            }, {\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n            }],\n            'title': {\n                'text': ''\n            },\n            'credits': {\n                'enabled': false\n            },\n            'loading': false,\n            'size': {\n                'height': 130\n            },\n            'tooltip': {},\n            'useHighStocks': false,\n            func: function func(chart) {}\n        };\n\n        // product spending\n        $scope.chartconfigProductSpending = angular.copy($scope.chartConfig);\n        $scope.chartconfigProductSpending.options.chart.type = 'pie';\n        $scope.chartconfigProductSpending.options.plotOptions.pie.size = 150;\n        $scope.chartconfigProductSpending.options.plotOptions.pie.colors = ['#40557D', '#3373B3', '#F0B499', '#72C4B9', '#FFD60D', '#1AA6D6'];\n        $scope.chartconfigProductSpending.size.height = 200;\n        $scope.chartconfigProductSpending.series = [{\n            name: 'Product',\n            data: [['Nike', 6], ['Nike', 4], ['Nike', 7], ['Nike', 6], ['Nike', 6], ['Nike', 6]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n\n        // Daily Sale\n        $scope.chartconfigDailySale = angular.copy($scope.chartConfig);\n        $scope.chartconfigDailySale.options.chart.type = 'column';\n        $scope.chartconfigDailySale.options.plotOptions.series.pointWidth = 8;\n        $scope.chartconfigDailySale.size.height = 179;\n        $scope.chartconfigDailySale.series = [{\n            name: 'Thang 1',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000],\n            color: '#1A91EB'\n        }];\n\n        // Customers\n        $scope.chartconfigCustomer = angular.copy($scope.chartConfig);\n        $scope.chartconfigCustomer.options.chart.type = 'pie';\n        $scope.chartconfigCustomer.options.plotOptions.pie.size = 140;\n        $scope.chartconfigCustomer.options.plotOptions.pie.colors = ['#289DF5', '#40557D', '#FFD400'];\n        $scope.chartconfigCustomer.size.height = 150;\n        $scope.chartconfigCustomer.series = [{\n            name: 'Customers',\n            data: [['Returning', 6], ['New', 4], ['Referrals', 7]],\n            innerSize: '70%',\n            showInLegend: false,\n            dataLabels: {\n                enabled: false\n            }\n        }];\n\n        // Hour\n        $scope.chartconfigHour = angular.copy($scope.chartConfig);\n        $scope.chartconfigHour.options.chart.type = 'area';\n        $scope.chartconfigHour.options.xAxis = {\n            'categories': ['Jan', 'Feb', 'March', 'April', 'May'],\n            'title': {\n                'text': null\n            },\n            'labels': {\n                'enabled': true\n            },\n            'lineColor': '#E6EAEE',\n            'lineWidth': 1,\n            'gridLineWidth': 0\n\n        };\n        $scope.chartconfigHour.series = [{\n            name: '',\n            showInLegend: false,\n            data: [20000, 20000, 30000, 20000, 10000],\n            color: '#1A91EB'\n        }];\n\n        // Data Prduct Revenue Details\n        var dataProductRevenueDetails = [{\n            srcImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRa_pyRU_WvbQ0QtxuyPYZq_5G5Pf_XxkCuYLmg3mNzfGwPrvpk',\n            title: 'Rabbit hole London',\n            subTitle: 'Oversized Hoodie',\n            price: 'USD 230.00',\n            payment: 'Credit Card',\n            hoursOfView: '23:13',\n            dateOfView: '24 Nov 2016',\n            hoursOfSale: '23:13',\n            dateOfSale: '24 Nov 2016',\n            userName: 'John Appleseed',\n            sex: 'Male',\n            age: '18-24',\n            country: 'Beattyhaven Canada',\n            companyName: 'Nike',\n            hrefReview: 'http://www.nike.com/us/en_us/'\n        }, {\n            srcImg: 'https://cdn.shopify.com/s/files/1/1202/6102/products/stussy-world-tour-t-shirt-fa15-navy-1_1_grande.jpeg?v=1462801097',\n            title: 'Stussy',\n            subTitle: 'Bills T-shirt',\n            price: 'USD 150.00',\n            payment: 'Credit Card',\n            hoursOfView: '12:24',\n            dateOfView: '24 Nov 2016',\n            hoursOfSale: '12:24',\n            dateOfSale: '24 Nov 2016',\n            userName: 'Ricardo Hall',\n            sex: 'Male',\n            age: '45-50',\n            country: 'South Aditya French Guiana',\n            companyName: 'Nike',\n            hrefReview: 'http://www.nike.com/us/en_us/'\n        }, {\n            srcImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXBBjCCRVbMx6LeQMzYKSDq1C-NAlOpTF6FXWMfZe-e69_eDFm',\n            title: 'Billionaire Boys Club',\n            subTitle: 'Motm Starfield T-Shirt',\n            price: 'USD 80.00',\n            payment: 'Paypal',\n            hoursOfView: '02:25',\n            dateOfView: '24 Nov 2016',\n            hoursOfSale: '02:25',\n            dateOfSale: '24 Nov 2016',\n            userName: 'Viola Wade',\n            sex: 'Female',\n            age: '18-24',\n            country: 'Port Erickmouth Sweden',\n            companyName: 'Coke',\n            hrefReview: 'http://www.coca-colacompany.com/'\n        }, {\n            srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQC7B1qC3EfAnnCqE-Ku58xyN0cN03s9sHGdkOl-IJwS-7P7wHYsA',\n            title: 'A.P.C',\n            subTitle: 'Petit New Standard',\n            price: 'USD 180.00',\n            payment: 'Credit Card',\n            hoursOfView: '12:54',\n            dateOfView: '05 Oct 2016',\n            hoursOfSale: '12:54',\n            dateOfSale: '05 Oct 2016',\n            userName: 'Mario Hardy',\n            sex: 'Male',\n            age: '18-24',\n            country: 'North Annie Aruba',\n            companyName: 'Nikon',\n            hrefReview: 'http://www.nikon.com.vn/vi_VN'\n        }, {\n            srcImg: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAQEhUQEhIPEBAQEhUQEBISFQ8QDxUVFRUWFhUVFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGxAQGisfHR0tLS0tLS0tKy0rLSsrLS0tMC0tKy0rLSsxLS0tLysrLTcrLSstLS4tKysuLS0tMCsuN//AABEIAOAAugMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAAIDBAYBBwj/xAA/EAABAwIDBQUGBAUCBwEAAAABAAIDBBEFEiEGMUFRcRMiYYGRBzJSobHBFCNC0WJygpLxU7IWJTNjouHwFf/EABoBAQADAQEBAAAAAAAAAAAAAAABAwQCBQb/xAAkEQEAAgIBAwUBAQEAAAAAAAAAAQIDETEEEiEFIjJBUSMUE//aAAwDAQACEQMRAD8A9lSSSQJJJJAkkkkCWa25ib2TXnTK7LflcfTQLSoLtjDnpJf4QHjyK5v8Zd4/lDyyWUA+9x8lNHJ4qkW3URzDdovPntl6cd0NFTVNuaJRVTSL33LKwMkcN6JU9Gd5JPgq7dsO475FJKy+g9Uf2SlJkcD8P3WagiARzZaQNmsSBmaRyTDf+kfiM+P+c/rZpJJL1njkkkkgSSSSBJJJIEkkkgSSSSBJJJIEko6ioZGLvcGjx+3NZXEcelkJbH3Gbgf1kc78FzNohOmknxKFhLXSNDhvG8rCbVbYOkz0sceRhIBeTdzmkX0Fu7r13JRQb+ZVevwpsoGuV7fddv8AI+CpvaZjwsx6i25ZyNvFSSQX1VybDJIxq06cRqEymlB7pWG0TD1aWrbiUVKSCi0blTbT63CtM0sOKonzK+PELsbdF17PmpoaaQ2s13pb6q6zDC73zYDgNSfPgrKYrT9KcuelY5S7MvkijeAe4ZCWA6gCwBtyGYFG6fFdbPFuGYfsh9wBlAsALADcmkr0azNY08i0907aGOdjtzgfr6KRZdX4MUeNHDN47irIv+uNDKSpw4ix2+7equAruJiUEkkkpCSSSQJJJDMTxlkPdFnycuA6qJnQIyyNaLuIaOZNggeJbQAd2LU/Gd3kEGmnfK7M8kk+g8AuNiVc3/HUQgkcXnM8lxPEm66D4KyGBPFlWlVsTwKlYx3JWAnAIIuzT2Q66gealAUrUDOxZxa30CcyNo3NaOgAUoXUTtxoKd2fMrgKeiDcoXOzCekgbkXCxOXQEDMqlp6pzPEcQkAuFinegXp6hrxcb+I4qVAoXFjrjgjcbw4AjcVdW23MwckkkukA+0GKdkOzZ/1Hj+0fus1Eznv4ldY4yvc92pOqc4aKi07l3EJ2MTgxR0kl9FYLVyGZQu2TrLrQgTWp4anAJwCBoCe0JWTmhA4BdsupBBwBPTU4IEuWTlxByycEgugIECn2TQF21kEZVnDqixyncToq7hqel01u/wA1MToHUk2J1wD4Jy0OGHw5u/yTpRYFMw92tualrAsztWpnWeOqLvag1Kc0g5ZrIrUvJOUcN5QRk3KlaE1gAUjUD2hZHbfbf/8APkjp44HVFRKzO1t3NaASWjRoJe4kHQW6rXBdDRcGwuNAbC4vyPAKYHjeM+0PGIC0Sww0pe3O1j4jnLb2vZzrjdxRWDHNpxlf+EjkY4Bw/Lj1B1G59ws9UA4xjWUaxdrlvvAggPe9bH+4L3Vo8hw6cF3adfSIQ4e+R0THSsEcrmNMjAcwa4jVoPHVZ/avbKKiPZMb209gS2+VjL/E7n4D5LSVMwjjfId0bHyH+lpd9l4BUTukc6Rxu97i9x8XalZ8ltcPX9K6GvUWm1+KtvT+0yXN+ZTxOZfXI5zXgcxe4PyW+wfFoauITROuzc4HRzSNSHDgV4KFco8SliZLGxxa2oZ2cg5i/wDkdCq65Jjl6vU+kYskfy9svRcc9osUTjHTxictNjI5xbFfk0AXd10VfC/aUC4NqIQxh07SNznZfEtO8dCvOF1R/wBLL6+kdN2dsx5/ft9CwyNe0PaQ5rgHNI1BBGhCkWK9lNa59NJETcQydzwa8Xt0uD6rb2Wis7jb5TqcE4ctsf4bZdCRCSlQa7imgJZt6QQX6CT9PmFcQiF+VwKLgq6k+HMvO4ybgjfwV18wkaHcRofAqhA/d4FTzDI4n9Lh3h9wqXSPCX+6evrqiLpbaDfxKDYVJYkcnH57lbbIb3QEoypgVRilVpjkE4Qna/ETTUVRMDZzYnBn87hlb8yCigKwftlq8lGyL/WnaD0YC76gKa+ZJ4DvYbhYtUVR4FtMzyGd/wBWr1hoWR9ldJ2WGQc5c8x/rebfIBa5TafJDlRAJGOjPuyMcw9HAg/VeCYth0lNK6CQWew28HDg4eBC+gWoPtDgVPWMyyt7wBySNsJGdDy8Doqr07np+m9d/mtMW+MvCU4LQbR7IT0d3j86EamRoIc0fxt4ddyzwWeYmOX1WHNTLXupO4OXVdwjCZquTsoW5nb3Hcxo5uPAL0/ZrYaCltJKRUTjUEi0TD/C07yOZ+SmtJsp6rr8XTx7p3b8P9m2DPpqYvkBa+ocJMp0c1gFm38TqfMLWprTcJXWmI1Gnx2fNObJOS3Mk5RmTUDmnA/JUah/5jB1KlSsE+8pVWjd8zb5qy5AjwVhtQeZ9FAUlIyLmFriOCuzHMwO4jTzTq6C/eCrwu3s+IadVAFseI5jGTYvGZnI+HkrTpdQAqtQxr8sh0dCSfI77qSgGa7z0CC7E8q9E9C5Jg3QKzTSG2qAXtrj1bTdlHR0xnknzd/K57GZbWBA0ubnUkDRZCv2Wx7EyBUyQNDDmaxzmNDSRbcwHh4r0qKoAV7DBvdzK6i2jTzWm2O2hp2NjhrmNYwZWMEjg0DkLt3Ld7JQ18dPlr5GSz5yWuZY2ZYWDiALm+bgjTk13JJtsWYjoo5k6neCNC11tDlIdbrZNmXIquWG2g2E7Wdj6bLHHK60zeEfEvaOII/Tz+W5sbqeBRasTy0dP1OTBbupKLCcKipYhDC3K0ak/qceLnHiVaKeE1ymPCm1rWnutO5koiupkW9Pcjk0b0Nvec8mN+yIXQqY5ZZB8eUjoR/lBYhdq0cyT/8AfNX3bkOpTmfpuYLefJE37kHUkgnIBUg0Q2qp7i7d41RVyquCDM4kRe59yYFrvB1tfXeocLleY2RC2do/MdwB3eqIY5S543tG+2Zvg4ahB9lnF3aSX0e5pA5HIL/NAaZS21JuVNeyksm5LlAomXWgp2ZWgeCF0bLuHgi4QV8RrY4InzSuyxxNL3nfYDkOJ5DxWOosPqcZAmqnS01C7WKjjcWySs4PneOBH6QrHtUa51A+wLmskifKBxjDxm+ysYhs+7EezIrJIsPfG0up4WhplBF7Olv7pFhay7jhAZszhlKMVL8ObkpaWndFVvY5xhkmcSQwE6EtFiT4LXVuN0zIH1faskgYHEvjIeHFpy5W23uzaW5pTYPSNpjhzctPFPG+JrIy1khBHfLb+8628679ViMTfTwyR0kLC6kwwtEcDTd1VXvuY4vHLfO48zc7k5FV1BUVWIUck0kjagPFa+Bh/JpaZh7kZ5yPOhPUbgvUoljsPlhw2N1RXTxtqat/aTPJOptpFGN5Ywaep4rV0dZFJG2Zj2uic3O2S/cy781+A3qJSupj1mm+0DDDIIhOXFzxEHtZI6DOdze0tZad4UakRMOqkcoeKmUCElBsfdle1wNiWZR1udeuqMSaFDsbhDuycf0vt6/4QWMMiyMA4nUog7h6qlTPueNrK41A9qfZNCiNXF/qR/3NRKlfn+yrygoNTYrUD3jG/q0tPqD9lO/FhbvMI/lIcPsuYvWVk4bx9Iq+UNB1Wd2Ol1mZwEl2+d9PorWK4lG7QPGvB2h+adgeHljTJawmcXtO+4Hdv8iulQ7ZduoY3FOBugJ4ezS6bj+LxUUD6iW+SMXs22ZxOga3xJ0VqkZZoQfavCW10ElM5xZ2gGV41yuabtNuIvwUwOYNXS1dOX1NMKcS3aIi8S5onNGrtBa4J0QzYGU0k9Vhb3l0VLaop3uOrYXi5Y7wbv8AMqr/AM8awQ2w92UBgqC6TMQBYEs5q3SbGyto6prZhLX17ck1RIMjcp0LGgbm5b9b8F14Qgo8UzR1e0Eou1kb4MNjdcWjabNd4GSQ+gKqbN4fDhxz1L3TV0lPJX1D7XZBGe88eDnEHXe7LyAWn2j2X/EUDKGGQQdl2RjcW5m/lWtdo6XVL/hgfh56d8zpaisY4VFU9ozueW2acoOjG6WaDu6qdwMvUVGSldic7I5K/Ej+HoI3gPbDE/usa0OvqAS4m28hFNpoBFhjsPidJK7D46d9aGggGK+aRmbdewLrckx2wtWYY5HVEdTXUr4XUucFlOyOFwcIwObiLlx32A4IlVYNicc8tTSuox+OjZ+JimzubFKGZS6Nw99vVNwLlHgP4vsZX1DH4fG5lRRUkEYiiFheMyuuS8jkLXK1pQnZTBhQ0kVKHGTsmkF+67nOLnWHAXcbIsuJlKtJoVMDoo5wuxOuFAbUjS6oYtYwPJNstnX6EIm8XCH1bM0UjPijeP8AxKAbhmLsOl3PI4gfW6JmtcfdAZ17x9FisDlWngkus+TJaPEN2PBXWyrGOkHfc5w5E2b6DRVm0jbbgiBF1FmVHdM8tMViI8AYdZV6uTRPmdZDqubRWVhzbwGCnM0zYxqXOA9V6ntBRCJkDW7o2mL5D9isTsHR9rWsPCMF58t3zsvRdqx+SDyePoVviPY83LPuZQ2Ckpm3IHioL3V7D2a35KtwKXsFUmIU8rtFSkcg451yEYphYINALuCNsGiBSnRD26uVyd2irU41QXGjRdukVwIJWJyawrt0Eco0UdOd4Uz1WYbO6oLCq21tzCslQP3jqg84w1+V7h8LiPQ2WgpKhAjTkSSuG4SP8u8Vbw15uAs2Su5ejjtqIaiJ9wuqGA2CkzLPK+Gar9EIqGGyN1zbkckLxF9hYakrRRTfhovZWz86Y8ox/uWu2rP5I8Xj6FZL2WA9rMf+2P8AcFq9rT+Wwc3/AGK3R8HnX+TKMaitE2wQ+NqI3sLKpBTPVVxT5HKIFBboG3d0RZUcOZpfmrjyggqCuUzUx2pViIIHvK4Fx6TSgmaurjU5BwqrMNbqyVDKEEnionjVdjOnRNeba8tUHnYflmkcDo57wRw3lXMPbr5obBJmJPNzj6lFqAcVTf7ehj+huI6J1vBRxKWyx25a4BqxqBV60NYFmsTK1Y/LPkbj2WU1mTS/E5rB5XJ+oWg2pZdjP5/sVFsLT9nRR/x3efMq7tA28V/hN/qt0/F5dp3ZlIW69FM9yij3LpVKTXlcYFx6no2XI8NUBWBtgFyUp99FXBugcwKdqiCkCBPKTE1yTEFgJyaCnBBwqNykKY4IGR8lUxebs4ZZPgje70aVbG9T0tOJC5p1Ba4HzFvupgeUUWjR0CN0AQqSHs3mM72OLfQ2RfD1Tl8N+HyLRBPzJse5NKxWbIU6oaLLYq3vAc9Fp6l2iH4Xh34irjZ+kOzO6DUrXhjcsuedQ9Swqn7KGOP4I2jztqqu0kwbCRxeQB9UVWM2uxAOkEYOkY16nf8AZbrTqHmRyrAJjih7ay3ipfxd1Q6Tk3RKgbbVC6cEm6KxOsgtucokwzJB6CZqlaq7SpG2QddvSamudr8ko3ILTU5MYnIOpjk5NcgYUQwtu8+FkOKvYXJrbmuq8kvP9sqbs6t/J9pB/UBf53XMORn2j0/fik5tLD5G4+pQTCzp0VeeG3pp2NNOiWVciFwnXXny3BNY6yN+zyku6Wc+Ebfqft6rOVZ/Zeh7K0nZU0Y4uGc9Xa/Sy9Dp6/bB1VtRpJjmJCBmnvuBy+VtfmF547NI4niTcrR7WSZpw3g1uX11QuNllZedyxQijpQOqlbCFJZdXKU1O0BTlQMaSrAaBxQdapQ5Q3SHVBYaeikFuZCrNupmuQPc3xCawWK48pNKC2xPBTIypLIEVxKybdAnhKnflcD4rqjLkEO38Oama/4Hg+Tgf/SyGFBbrGW9pRSj4W3/ALSHfRYXC9LKM/xaul5GotxTLqSMaJui8+Xov//Z',\n            title: 'Silas',\n            subTitle: 'Tokyo/London Print Yoke',\n            price: 'USD 170.00',\n            payment: 'Apple Pay',\n            hoursOfView: '23:13',\n            dateOfView: '05 Oct 2016',\n            hoursOfSale: '23:13',\n            dateOfSale: '05 Oct 2016',\n            userName: 'Ricardo Hall',\n            sex: 'Male',\n            age: '35-44',\n            country: 'Danstad Russian Federation',\n            companyName: 'Nike',\n            hrefReview: 'http://www.nike.com/us/en_us/'\n        }];\n\n        // Begin: variable zone //\n        var revenueSeries = {\n            id: 'revenueChart',\n            name: 'Revenue',\n            data: [2000, 1000, 4000, 3500, 10000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750],\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 24 * 3600 * 1000\n        };\n        var revenueData = [{\n            title: 'REVENUE',\n            value: '$37.5k'\n        }, {\n            title: 'UNIT SOLD',\n            value: '890'\n        }, {\n            title: 'ORDERS',\n            value: '381'\n        }, {\n            title: 'VIEWS',\n            value: '13.2k'\n        }, {\n            title: 'CONV.RATE',\n            value: '4.32%'\n        }, {\n            title: 'AOV',\n            value: '$24.9'\n        }, {\n            title: 'RPV',\n            value: '$8.9'\n        }];\n        var revenuePieProduct = {\n            id: 'revenuePieProduct',\n            title: {\n                text: 'Revenue by <strong>Product</strong>'\n            },\n            series: [{\n                name: 'Revenue by Product',\n                data: [['<strong>Hoodie</strong><br/>USD 3689.80', 3689.80], ['<strong>T-Shirt</strong><br/>USD 980.20', 980.20], ['<strong>Skate T-Shirt</strong><br/>USD 770.20', 770.20]]\n            }],\n            credits: {\n                enabled: false\n            }\n        };\n        var revenuePieSource = {\n            id: 'revenuePieSource',\n            title: {\n                text: 'Revenue by <strong>Source</strong>'\n            },\n            series: [{\n                name: 'Revenue by Source',\n                data: [['<strong>Amazon</strong><br/>USD 339.80', 339.80], ['<strong>Walmart</strong><br/>USD 680.20', 680.20], ['<strong>Ebay</strong><br/>USD 120.20', 120.20]]\n            }],\n            credits: {\n                enabled: false\n            }\n        };\n        var revenuePieCountry = {\n            id: 'revenuePieCountry',\n            title: {\n                text: 'Revenue by <strong>Country</strong>'\n            },\n            series: [{\n                name: 'Revenue by Country',\n                data: [['<strong>Canada</strong><br/>USD 2358.85', 2358.85], ['<strong>Sweden</strong><br/>USD 7583.10', 7583.10], ['<strong>Singapore</strong><br/>USD 5461.28', 5461.28]]\n            }],\n            credits: {\n                enabled: false\n            }\n        };\n        var productViewRate = {\n            id: 'productViewRate',\n            title: 'Product View Rate',\n            categories: ['<strong>UNDEFEATED</strong> Full Zip Jacket', '<strong>STUSSY</strong> T-Shirt', '<strong>HUF</strong> T-Shirt', '<strong>STAMPD</strong> Warm Up Pants'],\n            logos: ['https://image.freepik.com/free-icon/domain_318-32028.jpg', 'http://www.albany.edu/ims/Images/youtubelink.png', 'https://maxcdn.icons8.com/Share/icon/Network//domain1600.png', 'http://static.wixstatic.com/media/1a7da0_4c725e80c78c4e9893caf308e1a389c5.png'],\n            series: {\n                data: [{\n                    y: 500,\n                    color: '#2097f0'\n                }, {\n                    y: 300,\n                    color: '#8d74e5'\n                }, {\n                    y: 400,\n                    color: '#3FC42A'\n                }, {\n                    y: 700,\n                    color: '#FAC739'\n                }]\n            },\n            credits: {\n                enabled: false\n            },\n            exporting: {\n                enabled: false\n            }\n        };\n        var productSpending = {\n            id: 'productSpending',\n            title: {\n                text: 'Product Spending'\n            },\n            series: [{\n                name: 'Product Spending',\n                data: [['<strong>ROLEX</strong> USD ', 1396], ['<strong>VANS</strong> USD ', 501], ['<strong>INCASE</strong> USD ', 465], ['<strong>GUCCI</strong> USD ', 430], ['<strong>LV</strong> USD ', 215], ['<strong>INCASE</strong> USD ', 573]]\n            }],\n            credits: {\n                enabled: false\n            }\n        };\n        var dailySaleData = [{\n            y: 50\n        }, {\n            y: 30\n        }, {\n            y: 10\n        }, {\n            y: 25\n        }, {\n            y: 60\n        }, {\n            y: 75\n        }, {\n            y: 45\n        }, {\n            y: 70\n        }, {\n            y: 50\n        }, {\n            y: 45\n        }, {\n            y: 90\n        }, {\n            y: 80\n        }, {\n            y: 76\n        }, {\n            y: 21\n        }, {\n            y: 80\n        }, {\n            y: 45\n        }, {\n            y: 30\n        }, {\n            y: 24\n        }, {\n            y: 15\n        }, {\n            y: 45\n        }];\n        var maxDailySale = findMaxDailySale(dailySaleData);\n        var dailySale = {\n            id: 'dailySale',\n            title: 'Daily Sale',\n            series: {\n                data: dailySaleData\n            },\n            maxValue: maxDailySale,\n            increaseValue: '+32'\n        };\n        var customer = {\n            id: 'customerPie',\n            title: {\n                text: 'Customer'\n            },\n            series: [{\n                name: 'Revenue by Product',\n                data: [['NEW', 3689.80], ['RETURNING', 1280.20], ['REFERRALS', 770.20]]\n            }],\n            maxValue: 271,\n            increaseValue: '+9.3',\n            total: function total() {\n                var sum = 0;\n                var data = this.series[0].data;\n                for (var i = 1; i < data.length; i++) {\n                    sum += data[i][1];\n                }\n                return sum;\n            }\n        };\n        var monthRevenue = {\n            id: 'monthRevenue',\n            name: 'Month',\n            data: [[Date.UTC(2016, 1), 1000, '12'], [Date.UTC(2016, 2), 4000, '-4'], [Date.UTC(2016, 3), 2500, '21'], [Date.UTC(2016, 4), 6500, '7'], [Date.UTC(2016, 5), 1500, '4.3']],\n            total: function total() {\n                var sum = 0;\n                var data = this.data;\n                for (var i = 0; i < data.length; i++) {\n                    sum += data[i][1];\n                }\n                return sum;\n            },\n            increaseValue: '+32',\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 24 * 3600 * 1000 * 30\n        };\n        // End: variable zone //\n\n        // Begin: Angular Scope zone //\n        $scope.dataProductRevenueDetails = dataProductRevenueDetails;\n        $scope.revenueSeries = revenueSeries;\n        $scope.revenueData = revenueData;\n        $scope.revenuePieProduct = revenuePieProduct;\n        $scope.revenuePieSource = revenuePieSource;\n        $scope.revenuePieCountry = revenuePieCountry;\n        $scope.productViewRate = productViewRate;\n        $scope.productSpending = productSpending;\n        $scope.dailySale = dailySale;\n        $scope.customer = customer;\n        $scope.monthRevenue = monthRevenue;\n        // End: Angular Scope zone //\n\n        // Begin: Function Zone //\n        function init() {\n\n            drawLineChart($scope.revenueSeries);\n            drawPieChart($scope.revenuePieProduct);\n            drawPieChart($scope.revenuePieSource);\n            drawPieChart($scope.revenuePieCountry);\n            // drawVerticalBarChart($scope.productViewRate);\n            // drawPieTwoLegendColumnChart($scope.productSpending);\n            // drawBarChart($scope.dailySale);\n            // drawCustomerPieChart($scope.customer);\n            // drawMonthRevenueLineChart($scope.monthRevenue);\n        }\n\n        function drawLineChart(chart) {\n            var c = chart;\n            var lineChart = Highcharts.stockChart(c.id, {\n                title: {\n                    text: ''\n                },\n                xAxis: {\n                    tickmarkPlacement: 'on',\n                    type: 'datetime',\n                    tickInterval: 24 * 3600 * 1000\n                },\n                yAxis: {\n                    title: {\n                        text: ''\n                    },\n                    opposite: false\n                },\n                rangeSelector: {\n                    enabled: false\n                },\n                navigator: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                },\n                rangeSelectorZoom: {\n                    enabled: false\n                },\n                scrollbar: {\n                    enabled: false\n                },\n                series: [{\n                    name: c.name,\n                    data: c.data,\n                    pointStart: c.pointStart,\n                    pointInterval: c.pointInterval\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n\n        function drawPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                title: {\n                    text: c.title.text, //'Browser<br>shares<br>2015',\n                    align: 'center', //'center',\n                    verticalAlign: 'middle', //'middle',\n                    y: -130 //40\n                },\n                tooltip: {\n                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' //'{series.name}: <b>{point.percentage:.1f}%</b>'\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false, //true,\n                            distance: -50, //-50,\n                            style: {\n                                fontWeight: 'bold', //'bold',\n                                color: 'white'\n                            }\n                        },\n                        startAngle: 0, //0,\n                        endAngle: 360, //360,\n                        center: ['50%', '65%'],\n                        showInLegend: true\n                    }\n                },\n                legend: {\n                    align: 'right',\n                    verticalAlign: 'middle',\n                    layout: 'vertical',\n                    symbolRadius: 100,\n                    symbolPadding: 5,\n                    itemMarginBottom: 10,\n                    itemStyle: {\n                        fontWeight: 100\n                    },\n                    symbolWidth: 16,\n                    symbolHeight: 16,\n                    y: 50\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name, //'Browser share',\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n\n        function drawVerticalBarChart(chart) {\n            var c = chart;\n            var barChart = Highcharts.chart(c.id, {\n                chart: {\n                    type: 'bar'\n                },\n                title: {\n                    text: c.title\n                },\n                xAxis: {\n                    categories: c.categories,\n                    labels: {\n                        x: 5,\n                        y: -25,\n                        align: 'left'\n                    }\n                },\n                yAxis: {\n                    min: 0,\n                    title: {\n                        text: ' '\n                    },\n                    gridLineWidth: 0,\n                    stackLabels: {\n                        enabled: true,\n                        x: -40,\n                        style: {\n                            color: 'white',\n                            textShadow: undefined\n                        }\n                    }\n                },\n                legend: {\n                    reversed: true,\n                    enabled: false\n                },\n                plotOptions: {\n                    series: {\n                        stacking: 'normal'\n                    },\n                    bar: {\n                        zones: [{\n                            fillColor: 'red'\n                        }]\n                    }\n                },\n                series: [{\n                    name: 'Price',\n                    data: c.series.data,\n                    borderRadius: 25\n                }],\n                credits: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                }\n            });\n        }\n\n        function drawPieTwoLegendColumnChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                title: {\n                    text: c.title.text,\n                    align: 'center',\n                    verticalAlign: 'middle',\n                    y: -150\n                },\n                tooltip: {\n                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false,\n                            distance: -50,\n                            style: {\n                                fontWeight: 'bold',\n                                color: 'white'\n                            }\n                        },\n                        startAngle: 0,\n                        endAngle: 360,\n                        center: ['50%', '65%'],\n                        showInLegend: true\n                    }\n                },\n                legend: {\n                    labelFormatter: function labelFormatter() {\n                        var total = 0;\n                        var percentage;\n                        var data = this.series.data;\n                        for (var key in data) {\n                            if (data[key]) {\n                                total += data[key].y;\n                            }\n                        }\n                        percentage = (this.y / total * 100).toFixed(2);\n                        return this.name + ' ' + this.y + '<br/>' + percentage + '%' + '<br/><span style=\"color:#B0B0B0;\">______________________</span>';\n                    },\n                    align: 'right',\n                    verticalAlign: 'middle',\n                    layout: 'horizontal',\n                    symbolRadius: 100,\n                    symbolPadding: 5,\n                    itemMarginBottom: 14,\n                    itemDistance: 50,\n                    width: 300,\n                    maxHeight: 500,\n                    itemWidth: 130,\n                    itemStyle: {\n                        fontWeight: 100\n                    },\n                    symbolWidth: 16,\n                    symbolHeight: 16,\n                    y: 50\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name,\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n\n        function drawBarChart(chart) {\n            var c = chart;\n            var barChart = Highcharts.chart(c.id, {\n                chart: {\n                    type: 'column'\n                },\n                title: {\n                    text: ' '\n                },\n                xAxis: {\n                    categories: c.categories,\n                    labels: {\n                        formatter: function formatter() {\n                            return ' ';\n                        }\n                    }\n                },\n                yAxis: {\n                    min: 0,\n                    title: {\n                        text: ' '\n                    },\n                    labels: {\n                        formatter: function formatter() {\n                            return ' ';\n                        }\n                    },\n                    gridLineWidth: 0\n                },\n                legend: {\n                    enabled: false\n                },\n                plotOptions: {\n                    series: {\n                        stacking: 'normal'\n                    },\n                    bar: {\n                        zones: [{\n                            fillColor: 'red'\n                        }]\n                    }\n                },\n                series: [{\n                    name: 'Price',\n                    data: c.series.data\n                }],\n                credits: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                }\n            });\n        }\n\n        function findMaxDailySale(arr) {\n            var max = arr[0].y;\n            var indexOfMax = 0;\n            for (var i = 0; i < arr.length; i++) {\n                if (arr[i].y >= max) {\n                    max = arr[i].y;\n                    indexOfMax = i;\n                }\n            }\n            arr[indexOfMax].color = '#F7BE00';\n            return max;\n        }\n\n        function drawCustomerPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                title: {\n                    text: ' ',\n                    align: 'center', //'center',\n                    verticalAlign: 'middle', //'middle',\n                    y: -100 //40\n                },\n                tooltip: {\n                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' //'{series.name}: <b>{point.percentage:.1f}%</b>'\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false, //true,\n                            distance: -50, //-50,\n                            style: {\n                                fontWeight: 'bold', //'bold',\n                                color: 'white'\n                            }\n                        },\n                        startAngle: 0, //0,\n                        endAngle: 360, //360,\n                        center: ['25%', '65%'],\n                        showInLegend: true,\n                        size: '50%'\n                    }\n                },\n                legend: {\n                    align: 'center',\n                    verticalAlign: 'bottom',\n                    layout: 'horizontal',\n                    symbolRadius: 100,\n                    symbolPadding: 5,\n                    itemMarginBottom: 10,\n                    itemStyle: {\n                        fontWeight: 100\n                    },\n                    symbolWidth: 16,\n                    symbolHeight: 16\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name, //'Browser share',\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }]\n            });\n        }\n\n        function drawMonthRevenueLineChart(chart) {\n            var c = chart;\n            var lineChart = Highcharts.chart(c.id, {\n                chart: {\n                    type: 'area'\n                },\n                title: {\n                    text: ''\n                },\n                xAxis: {\n                    tickmarkPlacement: 'on',\n                    type: 'datetime'\n                },\n                yAxis: {\n                    title: {\n                        text: ''\n                    },\n                    gridLineWidth: 0,\n                    opposite: false,\n                    labels: {\n                        enabled: false\n                    }\n                },\n                rangeSelector: {\n                    enabled: false\n                },\n                navigator: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                },\n                rangeSelectorZoom: {\n                    enabled: false\n                },\n                scrollbar: {\n                    enabled: false\n                },\n                series: [{\n                    name: c.name,\n                    data: c.data,\n                    pointStart: c.pointStart,\n                    pointInterval: c.pointInterval,\n                    fillColor: {\n                        linearGradient: [0, 0, 0, 500],\n                        stops: [[0, Highcharts.getOptions().colors[0]], [1, 'rgba(255,255,255,0)']]\n                    }\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n        // End: Function Zone //\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('trafficCtrl', ['$scope', function ($scope) {\n\n        var dataProductTrafficeDetails = [{\n            srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n            title: 'Coca Cola',\n            dollars: '23,197.20',\n            unitSold: '1724',\n            order: '471',\n            numView: '58,910',\n            coinRate: '5.10',\n            dollarAVO: '65.90',\n            dollarRPV: '21.10',\n            status: 'status-green'\n        }, {\n            srcImg: 'http://theshoegame.com/wp-content/uploads/2015/01/nike-logo-copy.jpg',\n            title: 'Nike',\n            dollars: '11,203.20',\n            unitSold: '985',\n            order: '432',\n            numView: '42,892',\n            coinRate: '3.25',\n            dollarAVO: '34.10',\n            dollarRPV: '12.60',\n            status: 'status-green'\n        }, {\n            srcImg: 'http://www.kowalskis.com/sites/kowalskis.com/files/images/departments/starbucks-logo-trans.png',\n            title: 'Starbucks',\n            dollars: '4,289.90',\n            unitSold: '89',\n            order: '211',\n            numView: '8,991',\n            coinRate: '1.11',\n            dollarAVO: '18.30',\n            dollarRPV: '3.10',\n            status: 'status-organce'\n        }, {\n            srcImg: 'http://vector.me/files/images/7/3/73419/nikon.png',\n            title: 'Nikon',\n            dollars: '9,190.30',\n            unitSold: '166',\n            order: '99',\n            numView: '13,991',\n            coinRate: '1.98',\n            dollarAVO: '43.10',\n            dollarRPV: '21.60',\n            status: 'status-gray'\n        }, {\n            srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n            title: 'LG',\n            dollars: '12,890.20',\n            unitSold: '221',\n            order: '210',\n            numView: '31,900',\n            coinRate: '2.11',\n            dollarAVO: '32.80',\n            dollarRPV: '10.90',\n            status: 'status-organce'\n        }, {\n            srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n            title: 'Leica',\n            dollars: '15,560.50',\n            unitSold: '321',\n            order: '350',\n            numView: '68,500',\n            coinRate: '5.88',\n            dollarAVO: '40.70',\n            dollarRPV: '20.10',\n            status: 'status-green'\n        }\n        // {\n        //     srcImg: 'xxx',\n        //     title: 'xxx',\n        //     dollars: 'xxx',\n        //     unitSold: 'xxx',\n        //     order: 'xxx',\n        //     numView: 'xxx',\n        //     coinRate: 'xxx',\n        //     dollarAVO: 'xxx',\n        //     dollarRPV: 'xxx',\n        //     status: 'xxx'\n        // }\n        ];\n\n        $scope.dataProductTrafficeDetails = dataProductTrafficeDetails;\n\n        $scope.chartConfig = {\n            'options': {\n                'chart': {\n                    'type': 'areaspline'\n                },\n                'xAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'yAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'gridLineColor': 'transparent',\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'pane': {},\n                'tooltip': {},\n                'plotOptions': {\n                    'series': {\n                        'stacking': '',\n                        'marker': {\n                            'enabled': false\n                        }\n                    },\n                    'pie': {\n                        'size': 500\n                    }\n                },\n                'exporting': {\n                    'enabled': false\n                }\n            },\n            'series': [{\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n\n            }, {\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n            }],\n            'title': {\n                'text': ''\n            },\n            'credits': {\n                'enabled': false\n            },\n            'loading': false,\n            'size': {\n                'height': 130\n            },\n            'tooltip': {},\n            'useHighStocks': false,\n            func: function func(chart) {}\n        };\n\n        // Traffic Source chart\n        $scope.trafficSource = angular.copy($scope.chartConfig);\n        $scope.trafficSource.options.chart.type = 'area';\n        $scope.trafficSource.options.xAxis = {\n            allowDecimals: false,\n            title: {\n                text: null\n            },\n            labels: {\n                enabled: false,\n                formatter: function formatter() {\n                    return this.value; // clean, unformatted number for year\n                }\n            }\n        };\n        $scope.trafficSource.options.yAxis = {\n            title: {\n                text: null\n            },\n            labels: {\n                formatter: function formatter() {\n                    return this.value / 1000 + 'k';\n                }\n            }\n        };\n        $scope.trafficSource.options.tooltip = {\n            pointFormat: '{series.name} produced <b>{point.y:,.0f}</b><br/>warheads in {point.x}'\n        };\n        $scope.trafficSource.options.plotOptions = {\n            area: {\n                pointStart: 1940,\n                marker: {\n                    enabled: false,\n                    symbol: 'circle',\n                    radius: 2,\n                    states: {\n                        hover: {\n                            enabled: true\n                        }\n                    }\n                }\n            }\n        };\n        $scope.trafficSource.series = [{\n            name: 'Top Revenue',\n            data: [null, null, null, null, null, 6, 11, 32, 110, 235, 369, 640, 1005, 1436, 2063, 3057, 4618, 6444, 9822, 15468, 20434, 24126, 27387, 29459, 31056, 31982, 32040, 31233, 29224, 27342, 26662, 26956, 27912, 28999, 28965, 27826, 25579, 25722, 24826, 24605, 24304, 23464, 23708, 24099, 24357, 24237, 24401, 24344, 23586, 22380, 21004, 17287, 14747, 13076, 12555, 12144, 11009, 10950, 10871, 10824, 10577, 10527, 10475, 10421, 10358, 10295, 10104]\n        }, {\n            name: 'Top Converation Rate',\n            data: [null, null, null, null, null, null, null, null, null, null, 5, 25, 50, 120, 150, 200, 426, 660, 869, 1060, 1605, 2471, 3322, 4238, 5221, 6129, 7089, 8339, 9399, 10538, 11643, 13092, 14478, 15915, 17385, 19055, 21205, 23044, 25393, 27935, 30062, 32049, 33952, 35804, 37431, 39197, 45000, 43000, 41000, 39000, 37000, 35000, 33000, 31000, 29000, 27000, 25000, 24000, 23000, 22000, 21000, 20000, 19000, 18000, 18000, 17000, 16000]\n        }];\n        $scope.trafficSource.size.height = 400;\n\n        // Traffic Rate Chart\n        $scope.trafficRateChart = angular.copy($scope.chartConfig);\n        $scope.trafficRateChart.options.chart.type = 'pie';\n        $scope.trafficRateChart.tooltip = {\n            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n        };\n        $scope.trafficRateChart.options.plotOptions = {\n            pie: {\n                dataLabels: {\n                    enabled: false,\n                    distance: 0,\n                    style: {\n                        fontWeight: 'bold',\n                        color: 'white'\n                    }\n                },\n                startAngle: 0,\n                endAngle: 360,\n                center: ['50%', '50%'],\n                showInLegend: true\n            }\n        };\n        $scope.trafficRateChart.options.legend = {\n            labelFormatter: function labelFormatter() {\n                var total = 0;\n                var percentage;\n                var data = this.series.data;\n                for (var key in data) {\n                    if (data[key]) {\n                        total += data[key].y;\n                    }\n                }\n                percentage = (this.y / total * 100).toFixed(2);\n                return this.name + ' ' + this.y + '<br/>' + percentage + '%' + '<br/><span style=\"color:#B0B0B0;\">______________________</span>';\n            },\n            align: 'right',\n            verticalAlign: 'middle',\n            layout: 'horizontal',\n            symbolRadius: 100,\n            symbolPadding: 5,\n            itemMarginBottom: 10,\n            itemDistance: 10,\n            width: 300,\n            height: 250,\n            itemWidth: 130,\n            itemStyle: {\n                fontWeight: 100\n            },\n            symbolWidth: 14,\n            symbolHeight: 14,\n            y: 60\n        };\n        $scope.trafficRateChart.series = [{\n            innerSize: '50%',\n            data: [['<strong>ROLEX</strong> USD ', 1396], ['<strong>VANS</strong> USD ', 501], ['<strong>INCASE</strong> USD ', 465], ['<strong>GUCCI</strong> USD ', 430], ['<strong>LV</strong> USD ', 215], ['<strong>INCASE</strong> USD ', 573]]\n        }];\n        $scope.trafficRateChart.size.height = 299;\n    }]);\n})();","'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('panelApp').controller('funnelCtrl', ['$scope', function ($scope) {\n\n    var dataProductFunnelDetails = [{\n      srcImg: 'https://www.ccep.com/system/image_block/2941/Coca-Cola.jpg',\n      title: 'Coca Cola',\n      dollars: '23,197.20',\n      numVist: '58,910',\n      numView: '471',\n      numCart: '5.10',\n      purchase: '65.90',\n      status: 'status-green'\n    }, {\n      srcImg: 'http://theshoegame.com/wp-content/uploads/2015/01/nike-logo-copy.jpg',\n      title: 'Nike',\n      dollars: '11,203.20',\n      numVist: '42,892',\n      numView: '432',\n      numCart: '3.25',\n      purchase: '34.10',\n      status: 'status-green'\n    }, {\n      srcImg: 'http://www.kowalskis.com/sites/kowalskis.com/files/images/departments/starbucks-logo-trans.png',\n      title: 'Starbucks',\n      dollars: '4,289.90',\n      numVist: '8,991',\n      numView: '211',\n      numCart: '1.11',\n      purchase: '18.30',\n      status: 'status-organce'\n    }, {\n      srcImg: 'http://vector.me/files/images/7/3/73419/nikon.png',\n      title: 'Nikon',\n      dollars: '9,190.30',\n      numVist: '13,991',\n      numView: '99',\n      numCart: '1.98',\n      purchase: '43.10',\n      status: 'status-gray'\n    }, {\n      srcImg: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQRlV2lijfvgaPUFrfCrp0l4lxiT_dYcj_6El3HGaS50i_yz1EFEg',\n      title: 'LG',\n      dollars: '12,890.20',\n      numVist: '31,900',\n      numView: '210',\n      numCart: '2.11',\n      purchase: '32.80',\n      status: 'status-organce'\n    }, {\n      srcImg: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRI5hwT454_ibBEE1HoYkSvJfRI2PS8jQ07-a9EJegFistqkSer',\n      title: 'Leica',\n      dollars: '15,560.50',\n      numVist: '68,500',\n      numView: '350',\n      numCart: '5.88',\n      purchase: '40.70',\n      status: 'status-green'\n    }];\n\n    $scope.dataProductFunnelDetails = dataProductFunnelDetails;\n\n    $scope.chartConfig = {\n      'options': {\n        'chart': {\n          'type': 'areaspline'\n        },\n        'xAxis': {\n          'categories': [],\n          'title': {\n            'text': null\n          },\n\n          'labels': {\n            'enabled': false\n          },\n          'minorTickLength': 0,\n          'tickLength': 0,\n          'tickWidth': 0,\n          'minPadding': 0,\n          'maxPadding': 0,\n          'pointPadding': 0,\n          'groupPadding': 0,\n          'lineColor': '',\n          'lineWidth': ''\n        },\n        'yAxis': {\n          'categories': [],\n          'title': {\n            'text': null\n          },\n          'labels': {\n            'enabled': false\n          },\n          'minorTickLength': 0,\n          'tickLength': 0,\n          'gridLineColor': 'transparent',\n          'tickWidth': 0,\n          'minPadding': 0,\n          'maxPadding': 0,\n          'pointPadding': 0,\n          'groupPadding': 0,\n          'lineColor': '',\n          'lineWidth': ''\n        },\n        'pane': {},\n        'tooltip': {},\n        'plotOptions': {\n          'series': {\n            'stacking': '',\n            'marker': {\n              'enabled': false\n            }\n          },\n          'pie': {\n            'size': 500\n          }\n        },\n        'exporting': {\n          'enabled': false\n        }\n      },\n      'series': [{\n        'showInLegend': false,\n        'data': [],\n        'color': '',\n        'name': ''\n\n      }, {\n        'showInLegend': false,\n        'data': [],\n        'color': '',\n        'name': ''\n      }],\n      'title': {\n        'text': ''\n      },\n      'credits': {\n        'enabled': false\n      },\n      'loading': false,\n      'size': {\n        'height': 130\n      },\n      'tooltip': {},\n      'useHighStocks': false,\n      func: function func(chart) {}\n    };\n\n    $scope.chartConfig2 = angular.copy($scope.chartConfig);\n    $scope.chartConfig2.series[0].color = '#62d194';\n    $scope.chartConfig2.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n    $scope.chartConfigGender = angular.copy($scope.chartConfig);\n\n    //chart gender\n    $scope.chartConfigGender.options.chart.type = 'bar';\n    $scope.chartConfigGender.options.xAxis.categories = ['24:00', '18:00', '12:00', '06:00', '00:00'];\n    $scope.chartConfigGender.options.xAxis.labels.enabled = true;\n    $scope.chartConfigGender.options.xAxis.lineWidth = 1;\n    $scope.chartConfigGender.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigGender.options.plotOptions.series.pointWidth = 18;\n    $scope.chartConfigGender.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100000,\n      'max': 100000,\n      'minPadding': 100000,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartConfigGender.series = [{\n      name: 'female',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000],\n      color: '#FFBC00'\n    }, {\n      name: 'male',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000],\n      color: '#2DA1F8'\n    }];\n    $scope.chartConfigGender.options.plotOptions.series.stacking = 'normal';\n    $scope.chartConfigGender.size.height = 250;\n\n    // Age Timeline\n    $scope.chartConfigAgeTimeline = angular.copy($scope.chartConfig);\n    $scope.chartConfigAgeTimeline.options.chart.type = 'column';\n    $scope.chartConfigAgeTimeline.options.xAxis.categories = ['06:00', '08:00', '10:00', '12:00', '14:00', '16:00'];\n    $scope.chartConfigAgeTimeline.options.xAxis.labels.enabled = true;\n    $scope.chartConfigAgeTimeline.size.height = 250;\n    $scope.chartConfigAgeTimeline.options.yAxis.lineWidth = 1;\n    $scope.chartConfigAgeTimeline.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigAgeTimeline.options.plotOptions.series.stacking = 'normal';\n    $scope.chartConfigAgeTimeline.options.plotOptions.series.pointWidth = 18;\n    $scope.chartConfigAgeTimeline.options.xAxis.lineWidth = 1;\n    $scope.chartConfigAgeTimeline.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartConfigAgeTimeline.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100000,\n      'max': 100000,\n      'minPadding': 100000,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartConfigAgeTimeline.series = [{\n      name: '65+',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000],\n      color: '#8567E6'\n    }, {\n      name: '55-64',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#40557D'\n    }, {\n      name: '45-54',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#289DF5'\n    }, {\n      name: '35-44',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#39BF23'\n    }, {\n      name: '25-34',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#FFD400'\n    }, {\n      name: '0-24',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 20000, 10000],\n      color: '#F0B499'\n    }];\n\n    // Customers\n    $scope.chartconfigCustomer = angular.copy($scope.chartConfig);\n    $scope.chartconfigCustomer.options.chart.type = 'pie';\n    $scope.chartconfigCustomer.options.plotOptions.pie.size = 140;\n    $scope.chartconfigCustomer.options.plotOptions.pie.colors = ['#289DF5', '#40557D', '#FFD400'];\n    $scope.chartconfigCustomer.size.height = 150;\n    $scope.chartconfigCustomer.series = [{\n      name: 'Customers',\n      data: [['Returning', 6], ['New', 4], ['Referrals', 7]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // product spending\n    $scope.chartconfigProductSpending = angular.copy($scope.chartConfig);\n    $scope.chartconfigProductSpending.options.chart.type = 'pie';\n    $scope.chartconfigProductSpending.options.plotOptions.pie.size = 150;\n    $scope.chartconfigProductSpending.options.plotOptions.pie.colors = ['#40557D', '#3373B3', '#F0B499', '#72C4B9', '#FFD60D', '#1AA6D6'];\n    $scope.chartconfigProductSpending.size.height = 200;\n    $scope.chartconfigProductSpending.series = [{\n      name: 'Product',\n      data: [['Nike', 6], ['Nike', 4], ['Nike', 7], ['Nike', 6], ['Nike', 6], ['Nike', 6]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // age\n    $scope.chartconfigAge = angular.copy($scope.chartConfig);\n    $scope.chartconfigAge.options.chart.type = 'pie';\n    $scope.chartconfigAge.options.plotOptions.pie.size = 150;\n    $scope.chartconfigAge.options.plotOptions.pie.colors = ['#F0B499', '#FFD400', '#39BF23', '#289DF5', '#40557D', '#8567E6'];\n    $scope.chartconfigAge.size.height = 180;\n    $scope.chartconfigAge.series = [{\n      name: 'Product',\n      data: [['0-24', 6], ['25-34', 4], ['35-44', 7], ['45-54', 6], ['55-64', 6], ['65+', 6]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n\n    // Daily Sale\n    $scope.chartconfigDailySale = angular.copy($scope.chartConfig);\n    $scope.chartconfigDailySale.options.chart.type = 'column';\n    $scope.chartconfigDailySale.options.plotOptions.series.pointWidth = 8;\n    $scope.chartconfigDailySale.size.height = 150;\n    $scope.chartconfigDailySale.series = [{\n      name: 'Thang 1',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000, 20000, 20000, 30000, 20000, 10000, 10000],\n      color: '#1A91EB'\n    }];\n\n    // Hour\n    $scope.chartconfigHour = angular.copy($scope.chartConfig);\n    $scope.chartconfigHour.options.chart.type = 'area';\n    $scope.chartconfigHour.options.xAxis = {\n      'categories': ['Jan', 'Feb', 'March', 'April', 'May'],\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartconfigHour.series = [{\n      name: '',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000],\n      color: '#1A91EB'\n    }];\n\n    //Genre\n    $scope.chartconfigGenres = angular.copy($scope.chartConfig);\n    $scope.chartconfigGenres.options.chart.type = 'column';\n    $scope.chartconfigGenres.size.height = 150;\n    $scope.chartconfigGenres.options.xAxis = {\n      'categories': ['21/9', '22/9', '23/9', '24/9', '25/9', '26/9', '27/9'],\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'gridLineWidth': 0\n\n    };\n    $scope.chartconfigGenres.series = [{\n      name: 'Male',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n      color: '#337BBF'\n    }, {\n      name: 'Female',\n      showInLegend: false,\n      data: [20000, 20000, 30000, 20000, 10000, 10000, 10000],\n      color: '#2297F0'\n    }];\n    $scope.chartconfigGenres.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': 0,\n      'minRange': 100,\n      'max': 3000,\n      'minPadding': 1,\n      'gridLineWidth': 0\n\n    };\n\n    //Community Type\n    $scope.chartconfigCommunity = angular.copy($scope.chartConfig);\n    $scope.chartconfigCommunity.options.chart.type = 'solidgauge';\n    $scope.chartconfigCommunity.size.height = 250;\n    $scope.chartconfigCommunity.options.tooltip = {\n      'borderWidth': 0,\n      'backgroundColor': 'none',\n      'shadow': false,\n      'style': {\n        'fontSize': '16px'\n      },\n      'pointFormat': '{series.name}<br><span style=\\'font-size:2em; color: {point.color}; font-weight: bold\\'>{point.y}%</span>',\n      'useHTML': true,\n      positioner: function positioner(labelWidth, labelHeight) {\n        return {\n          x: 104 - labelWidth / 2,\n          y: 104\n        };\n      }\n    };\n    Highcharts.getOptions().colors = ['#1F96EF', '#8668E6', '#FAC83F'];\n    $scope.chartconfigCommunity.options.pane = {\n      startAngle: 0,\n      endAngle: 360,\n      background: [{ // Track for Move\n        outerRadius: '109%',\n        innerRadius: '91%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }, { // Track for Exercise\n        outerRadius: '66%',\n        innerRadius: '85%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[1]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }, { // Track for Stand\n        outerRadius: '40%',\n        innerRadius: '59%',\n        backgroundColor: Highcharts.Color(Highcharts.getOptions().colors[2]).setOpacity(0.2).get(),\n        borderWidth: 0\n      }]\n    };\n    $scope.chartconfigCommunity.options.yAxis = {\n      'min': 0,\n      'max': 100,\n      'lineWidth': 0,\n      'tickPositions': []\n    };\n    $scope.chartconfigCommunity.options.plotOptions = {\n      solidgauge: {\n        borderWidth: '18px',\n        dataLabels: {\n          y: 0,\n          borderWidth: 0,\n          useHTML: true,\n          enabled: false\n        },\n        linecap: 'round',\n        stickyTracking: false,\n        innerRadius: '0%'\n      },\n      series: {\n        pointWidth: 0\n      }\n    };\n    $scope.chartconfigCommunity.series = [{\n      name: 'Urban',\n      borderColor: '#1F96EF',\n      data: [{\n        color: Highcharts.getOptions().colors[0],\n        radius: '100%',\n        innerRadius: '100%',\n        y: 50\n      }]\n    }, {\n      name: 'Suburban',\n      borderColor: Highcharts.getOptions().colors[1],\n      data: [{\n        color: Highcharts.getOptions().colors[1],\n        radius: '75%',\n        innerRadius: '75%',\n        y: 35\n      }]\n    }, {\n      name: 'Rural',\n      borderColor: Highcharts.getOptions().colors[2],\n      data: [{\n        color: Highcharts.getOptions().colors[2],\n        radius: '50%',\n        innerRadius: '50%',\n        y: 15\n      }]\n    }];\n    // Platform\n    $scope.chartconfigPlatform = angular.copy($scope.chartConfig);\n    $scope.chartconfigPlatform.options.chart.type = 'pie';\n    $scope.chartconfigPlatform.options.plotOptions.pie.size = 200;\n    $scope.chartconfigPlatform.options.plotOptions.pie.colors = ['#289DF5', '#F9C943'];\n    $scope.chartconfigPlatform.size.height = 250;\n    $scope.chartconfigPlatform.series = [{\n      name: '',\n      data: [['IOS', 6], ['Android', 4]],\n      innerSize: '70%',\n      showInLegend: false,\n      dataLabels: {\n        enabled: false\n      }\n    }];\n    $scope.chartconfigPlatform.options.tooltip = {\n      'borderWidth': 0,\n      'backgroundColor': 'none',\n      'shadow': false,\n      'style': {\n        'fontSize': '20px'\n      },\n      'pointFormat': '<span style=\\'font-size:2em; color: {point.color}; font-weight: bold;\\'>{point.y}%</span>',\n      'useHTML': true,\n      positioner: function positioner(labelWidth, labelHeight) {\n        return {\n          x: 100 - labelWidth / 2,\n          y: 80\n        };\n      }\n    };\n\n    //campaignDown\n    $scope.campaignDown = angular.copy($scope.chartConfig);\n    $scope.campaignDown.options.chart.margin = 0;\n    $scope.campaignDown.options.chart.padding = 0;\n    $scope.campaignDown.options.xAxis = {\n      'categories': [],\n      'title': {\n        'text': null\n      },\n      'lineWidth': 0,\n      'lineColor': 'transparent',\n      'labels': {\n        'enabled': false\n      },\n      'minorTickLength': 0,\n      'tickLength': 0,\n      'tickWidth': 0,\n      'minPadding': 0,\n      'maxPadding': 0,\n      'pointPadding': 0,\n      'groupPadding': 0\n    };\n    $scope.campaignDown.options.yAxis = {\n      'lineWidth': 0,\n      'lineColor': 'transparent',\n      'labels': {\n        'enabled': false\n      },\n      'minorTickLength': 0,\n      'tickLength': 0,\n      'gridLineColor': 'transparent',\n      'tickWidth': 0,\n      'minPadding': 0,\n      'maxPadding': 0,\n      'pointPadding': 0,\n      'groupPadding': 0\n    };\n\n    $scope.campaignUp = angular.copy($scope.campaignDown);\n    $scope.campaignUp.series[0].color = '#62d194';\n    $scope.campaignUp.series[0].data = [5, 20, 15, 2, 7, 10, 4, 11, 15, 10, 21];\n\n    // Age Timeline\n    $scope.chartNetIncome = angular.copy($scope.chartConfig);\n    $scope.chartNetIncome.options.chart.type = 'column';\n    $scope.chartNetIncome.options.xAxis.categories = ['21/9/2016', '22/9/2016', '23/9/2016', '24/9/2016', '25/9/2016', '26/9/2016', '27/9/2016'];\n    $scope.chartNetIncome.options.xAxis.labels.enabled = true;\n    $scope.chartNetIncome.size.height = 250;\n    $scope.chartNetIncome.options.yAxis.lineWidth = 1;\n    $scope.chartNetIncome.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartNetIncome.options.plotOptions.series.stacking = 'normal';\n    $scope.chartNetIncome.options.plotOptions.series.pointWidth = 40;\n    $scope.chartNetIncome.options.plotOptions.series.borderRadius = 3;\n    $scope.chartNetIncome.options.xAxis.lineWidth = 1;\n    $scope.chartNetIncome.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartNetIncome.options.yAxis = {\n      'title': {\n        'text': null\n      },\n      'labels': {\n        'enabled': true\n      },\n      'lineColor': '#E6EAEE',\n      'lineWidth': 1,\n      'min': -200000,\n      'minRange': -200000,\n      'max': 200000,\n      'minPadding': 100000,\n      'gridLineWidth': 1\n\n    };\n    $scope.chartNetIncome.series = [{\n      name: '65+',\n      showInLegend: false,\n      data: [20000, 40000, 30000, 40000, 30000, 20000],\n      color: '#51B4FF'\n    }, {\n      name: '55-64',\n      showInLegend: false,\n      data: [53000, 34000, 40000, 70000, 80000, 10000],\n      color: '#337BBF'\n    }, {\n      name: '45-54',\n      showInLegend: false,\n      data: [-53000, -34000, -40000, -70000, -50000, -30000],\n      color: '#E2E7EE'\n    }];\n\n    // Age Timeline\n    $scope.chartconfigHouseholdIncome = angular.copy($scope.chartConfig);\n    $scope.chartconfigHouseholdIncome.options.chart.polar = true;\n    $scope.chartconfigHouseholdIncome.options.pane.size = '80%';\n    $scope.chartconfigHouseholdIncome.options.xAxis.categories = ['0-10K 15%', '20-30K 15%', '30-40K 17%', '40-50K 17%', '50-60K 45%', '60-70K', '70-80K 45%', '80K+ 45%'];\n    $scope.chartconfigHouseholdIncome.options.xAxis.labels.enabled = true;\n    $scope.chartconfigHouseholdIncome.size.height = 250;\n    $scope.chartconfigHouseholdIncome.options.yAxis.lineWidth = 1;\n    $scope.chartconfigHouseholdIncome.options.yAxis.lineColor = '#E6EAEE';\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.stacking = 'normal';\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.pointWidth = 40;\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.borderRadius = 3;\n    $scope.chartconfigHouseholdIncome.options.plotOptions.series.marker.enabled = true;\n    $scope.chartconfigHouseholdIncome.options.xAxis.lineWidth = 1;\n    $scope.chartconfigHouseholdIncome.options.xAxis.lineColor = '#E6EAEE';\n    $scope.chartconfigHouseholdIncome.series = [{\n      showInLegend: false,\n      type: 'area',\n      data: [10000, 80000, 20000, 70000, 30000, 60000, 40000, 50000]\n    }];\n  }]);\n})();","'use strict';\n\n(function (_) {\n    'use strict';\n\n    angular.module('panelApp').controller('scans', ['$scope', 'scansService', function ($scope, scansService) {\n        var service = scansService;\n        var WEEK = 'week';\n        var MONTH = 'month';\n\n        var BY_AGE = 'byAge';\n        var BY_DEVICE_OS = 'byDeviceOS';\n        var BY_COUNTRY = 'byCountry';\n        var BY_GENDER = 'byGender';\n        var TRIGGER_ACTION = 'triggerAction';\n        var TOP_CAMPAIGN_BY_SPEND = 'topCampaignBySpend';\n        var ACTIVE_USER_HOURS = 'activeUserByHours';\n        var ACTIVE_USER_BY_DAY = 'activeUserByDay';\n        var TOP_CAMPAIGN_BY_TRIGGER = 'topCampaignByTrigger';\n        var ACTIVE_CAMPAIGN_IN_PERIOD = 'activeCampaignInPeriod';\n        var SCAN_IN_PERIOD = 'scanInPeriod';\n\n        var period = WEEK;\n\n        $scope.chartConfig = {\n            'options': {\n                'chart': {\n                    'type': 'areaspline'\n                },\n                'xAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'yAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'gridLineColor': 'transparent',\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'pane': {},\n                'tooltip': {},\n                'plotOptions': {\n                    'series': {\n                        'stacking': '',\n                        'marker': {\n                            'enabled': false\n                        }\n                    },\n                    'pie': {\n                        'size': 500\n                    }\n                },\n                'exporting': {\n                    'enabled': false\n                }\n            },\n            'series': [{\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n\n            }, {\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n            }],\n            'title': {\n                'text': ''\n            },\n            'credits': {\n                'enabled': false\n            },\n            'loading': false,\n            'size': {\n                'height': 130\n            },\n            'tooltip': {},\n            'useHighStocks': false,\n            func: function func(chart) {}\n        };\n\n        // ScanThisWeek\n        var increaseColor = '#0fbd66';\n        var decreaseColor = '#E6315E';\n        $scope.$watch('analytic.filter', function (newVal, oldVal) {\n            init();\n        });\n\n        // ActiveTriggers\n        $scope.chartconfigActiveTriggers = angular.copy($scope.chartConfig);\n        $scope.chartconfigActiveTriggers.options.chart.type = 'line';\n        $scope.chartconfigActiveTriggers.size.height = 50;\n        $scope.chartconfigActiveTriggers.options.xAxis = {\n            title: {\n                text: null\n            },\n            labels: {\n                enabled: false\n            },\n            lineColor: '#FFFFFF',\n            lineWidth: 1,\n            gridLineWidth: 0,\n            tickColor: '#FFFFFF',\n            tickWidth: 0\n        };\n        $scope.chartconfigActiveTriggers.series = [{\n            name: '',\n            showInLegend: false,\n            data: [2, 2, 3, 2, 1, 4, 5, 7, 1, 5, 4],\n            color: decreaseColor\n        }];\n\n        // // topCamapaign\n        // service.getDataOf(TOP_CAMPAIGN_BY_SPEND, period).then((response) => {\n        //\n        //     let topCampaigns = response.reduce((data, element) => {\n        //         data.push({\n        //             title:      element.campaign_name,\n        //             percent:    element.percentage\n        //         });\n        //         return data;\n        //     }, []);\n        //     $scope.topCampaigns = topCampaigns;\n        // });\n        // var topCampaigns = [{\n        //     title: 'RayBan Glasses RB7056',\n        //     percent: '70',\n        //     no_searches: '4',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: 'Drake - Hotline Bling.Mp4',\n        //     percent: '50',\n        //     no_searches: '2',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: '3 Hpbd Minion.Mp4',\n        //     percent: '25',\n        //     no_searches: '1',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: 'RayBan Glasses RB7056',\n        //     percent: '10',\n        //     no_searches: '3',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }];\n        // $scope.topCampaigns = topCampaigns;\n\n        // // topWorstCampaign\n        // var topWorstCampaigns = [{\n        //     title: 'RayBan Glasses RB7056',\n        //     percent: '12',\n        //     no_searches: '4',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: 'Drake - Hotline Bling.Mp4',\n        //     percent: '23',\n        //     no_searches: '2',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: '3 Hpbd Minion.Mp4',\n        //     percent: '26',\n        //     no_searches: '1',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }, {\n        //     title: 'RayBan Glasses RB7056',\n        //     percent: '36',\n        //     no_searches: '3',\n        //     start_date: '2016-12-01',\n        //     end_date: '2016-12-07',\n        //     // nowDateLive:    '7'\n        // }];\n        // $scope.topWorstCampaigns = topWorstCampaigns;\n\n        // Begin: Function Zone //\n        function init() {\n            switch ($scope.analytic.filter) {\n                case 'Last 7 days':\n                    period = WEEK;\n                    break;\n                case 'Last month':\n                    period = MONTH;\n                    break;\n                default:\n                    break;\n            }\n            service.getDataOf(SCAN_IN_PERIOD, period).then(function (response) {\n                $scope.chartconfigScanThisWeek = angular.copy($scope.chartConfig);\n                $scope.chartconfigScanThisWeek.options.chart.type = 'line';\n                $scope.chartconfigScanThisWeek.size.height = 50;\n                $scope.chartconfigScanThisWeek.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.scanThisWeek = {};\n                $scope.scanThisWeek.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.scanThisWeek.percentage = response.percentage.toFixed(2) : $scope.scanThisWeek.percentage = 100;\n                $scope.scanThisWeek.total = response.total;\n\n                $scope.chartconfigScanThisWeek.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.scanThisWeek.data,\n                    color: $scope.scanThisWeek.percentage > 0 ? increaseColor : decreaseColor\n                }];\n                $scope.view.busy = false;\n            }, function (error) {\n                console.error(error);\n                $scope.view.busy = false;\n            });\n\n            service.getDataOf(ACTIVE_USER_BY_DAY, period).then(function (response) {\n                // ActiveUser\n                $scope.chartconfigActiveUser = angular.copy($scope.chartConfig);\n                $scope.chartconfigActiveUser.options.chart.type = 'line';\n                $scope.chartconfigActiveUser.size.height = 50;\n                $scope.chartconfigActiveUser.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.activeUser = {};\n                $scope.activeUser.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.activeUser.percentage = response.percentage.toFixed(2) : $scope.activeUser.percentage = 100;\n                $scope.activeUser.total = response.total;\n                $scope.chartconfigActiveUser.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.activeUser.data,\n                    color: $scope.activeUser.percentage > 0 ? increaseColor : decreaseColor\n                }];\n            });\n\n            service.getDataOf(ACTIVE_CAMPAIGN_IN_PERIOD, period).then(function (response) {\n                // ActiveCampaigns\n                $scope.chartconfigActiveCampaigns = angular.copy($scope.chartConfig);\n                $scope.chartconfigActiveCampaigns.options.chart.type = 'line';\n                $scope.chartconfigActiveCampaigns.size.height = 50;\n                $scope.chartconfigActiveCampaigns.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.activeCampaignInPeriod = {};\n                $scope.activeCampaignInPeriod.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.activeCampaignInPeriod.percentage = response.percentage.toFixed(2) : $scope.activeCampaignInPeriod.percentage = 100;\n                $scope.activeCampaignInPeriod.total = response.total;\n                $scope.chartconfigActiveCampaigns.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.activeCampaignInPeriod.data,\n                    color: $scope.activeCampaignInPeriod.percentage > 0 ? increaseColor : decreaseColor\n                }];\n            });\n\n            service.getDataOf(BY_AGE, period).then(function (response) {\n                // agePie\n                var data = response.reduce(function (data, element) {\n                    data.push(['Age: ' + element.age[0] + '-' + element.age[1], element.count]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, function (item) {\n                    return item.count;\n                }).age;\n                maxText = maxText[0] + '-' + maxText[1];\n                var agePie = {\n                    id: 'agePie',\n                    title: {\n                        text: 'AGE'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: '/assets/images/analytics/pieImages/birthday_icon.svg',\n                    max: maxText ? maxText : 'None'\n                };\n                $scope.agePie = agePie;\n                // genderPie\n                drawPieChart($scope.agePie);\n            });\n\n            service.getDataOf(BY_DEVICE_OS, period).then(function (response) {\n                // devicePie\n                var data = response.reduce(function (data, element) {\n                    data.push([element.participant__device_os, element.total]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, 'total').participant__device_os;\n                var maxImage = void 0;\n                switch (maxText) {\n                    case 'iOS':\n                        maxImage = '/assets/images/analytics/pieImages/apple_icon.svg';\n                        break;\n                    case 'Android':\n                        maxImage = '/assets/images/analytics/pieImages/android_icon.svg';\n                        break;\n                    default:\n                        maxImage = '/assets/images/analytics/pieImages/apple_icon.svg';\n                        break;\n                }\n                var devicePie = {\n                    id: 'devicePie',\n                    title: {\n                        text: 'DEVICE'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: maxImage,\n                    max: maxText ? maxText : 'None',\n                    x: 126\n                };\n                $scope.devicePie = devicePie;\n                drawPieChart($scope.devicePie);\n            });\n\n            service.getDataOf(BY_COUNTRY, period).then(function (response) {\n                // countryPie\n                var data = response.reduce(function (data, element) {\n                    data.push([element.participant__country__short_name, element.total]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, 'total').participant__country__short_name;\n                var countryPie = {\n                    id: 'countryPie',\n                    title: {\n                        text: 'COUNTRY'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: '/assets/images/analytics/pieImages/globe_icon.svg',\n                    max: maxText ? maxTextCountry(maxText) : 'None'\n                };\n                $scope.countryPie = countryPie;\n                drawPieChart($scope.countryPie);\n            });\n\n            // Change sort country for the USA and the UK\n            function maxTextCountry(maxText) {\n                var country = '';\n                switch (maxText) {\n                    case 'United Kingdom of Great Britain and Northern Ireland':\n                        country = 'The UK';\n                        break;\n                    case 'United States of America':\n                        country = 'The USA';\n                        break;\n                    default:\n                        country = maxText;\n                }\n                return country;\n            }\n            // End change sort country for the USA and the UK\n\n            service.getDataOf(BY_GENDER, period).then(function (response) {\n                // genderPie\n                var data = [['Male', response.male], ['Female', response.female]];\n                var maxText = response.male >= response.female ? 'Male' : 'Female';\n                var maleImage = '/assets/images/analytics/pieImages/male_icon.svg';\n                var femaleImage = '/assets/images/analytics/pieImages/female_icon.svg';\n                var maxImage = response.male >= response.female ? maleImage : femaleImage;\n                var genderPie = {\n                    id: 'genderPie',\n                    title: {\n                        text: 'GENDER'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: maxImage,\n                    max: maxText ? maxText : 'None'\n                };\n                $scope.genderPie = genderPie;\n                drawPieChart($scope.genderPie);\n            });\n\n            service.getDataOf(ACTIVE_USER_HOURS, period).then(function (response) {\n                // activeUsersLineChart\n                var reverseResponse = response.reverse();\n                var yearStart = reverseResponse[0].hour.split('T')[0].split('-')[0];\n                var monthStart = reverseResponse[0].hour.split('T')[0].split('-')[1] - 1;\n                var dayStart = reverseResponse[0].hour.split('T')[0].split('-')[2];\n                var hourStart = reverseResponse[0].hour.split('T')[1].split(':')[0];\n                var pointStart = Date.UTC(yearStart, monthStart, dayStart, hourStart);\n                var data = reverseResponse.reduce(function (data, element) {\n                    data.push(element.amount);\n                    return data;\n                }, []);\n                var activeUsers = {\n                    id: 'activeUsersLineChart',\n                    name: 'Weekly Users',\n                    data: data,\n                    pointStart: pointStart,\n                    pointInterval: 3600 * 1000\n                };\n                $scope.activeUsers = activeUsers;\n                drawLineChart($scope.activeUsers);\n            });\n\n            service.getDataOf(TOP_CAMPAIGN_BY_SPEND, period).then(function (response) {\n\n                var topCampaigns = response.reduce(function (data, element) {\n                    data.push({\n                        title: element.campaign_name,\n                        percent: element.percentage ? element.percentage.toFixed(2) : 0\n                    });\n                    return data;\n                }, []);\n                $scope.topCampaigns = topCampaigns;\n            });\n\n            service.getDataOf(TOP_CAMPAIGN_BY_SPEND, period).then(function (response) {\n                var reverseResponse = response.reverse();\n                var topWorstCampaigns = reverseResponse.reduce(function (data, element) {\n                    data.push({\n                        title: element.campaign_name,\n                        percent: element.percentage ? element.percentage.toFixed(2) : 0\n                    });\n                    return data;\n                }, []);\n                $scope.topWorstCampaigns = topWorstCampaigns;\n            });\n\n            service.getDataOf(TRIGGER_ACTION, period).then(function (response) {\n                var triggerAction = response.reduce(function (data, element) {\n                    data.push({\n                        action: element.action,\n                        total: element.total,\n                        percentage: element.percentage ? element.percentage.toFixed(2) : 0\n                    });\n                    return data;\n                }, []);\n                triggerAction.map(function (action) {\n                    switch (action.action) {\n                        case 'share':\n                            action.icon = 'fa fa-share';\n                            break;\n                        case 'scan':\n                            action.icon = 'fa fa-qrcode';\n                            break;\n                        case 'buy_product':\n                            action.icon = 'fa fa-cubes';\n                            break;\n                        default:\n                    }\n                    return action;\n                });\n                $scope.triggerAction = triggerAction;\n            });\n\n            service.getDataOf(TOP_CAMPAIGN_BY_TRIGGER, period).then(function (response) {\n                var topTriggers = response.reduce(function (data, element) {\n                    data.push({\n                        image: element.campaign_header_image,\n                        title: element.campaign_name,\n                        percent: element.percentage ? element.percentage.toFixed(2) : 0,\n                        total: element.total\n                    });\n                    return data;\n                }, []);\n                $scope.topTriggers = topTriggers;\n            });\n        }\n\n        function drawLineChart(chart) {\n            var c = chart;\n            var lineChart = Highcharts.stockChart(c.id, {\n                title: {\n                    text: ''\n                },\n                xAxis: {\n                    tickmarkPlacement: 'on',\n                    type: 'datetime',\n                    tickInterval: 24 * 3600 * 1000\n                },\n                yAxis: {\n                    title: {\n                        text: ''\n                    },\n                    opposite: false\n                },\n                rangeSelector: {\n                    enabled: false\n                },\n                navigator: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                },\n                rangeSelectorZoom: {\n                    enabled: false\n                },\n                scrollbar: {\n                    enabled: false\n                },\n                series: [{\n                    name: c.name,\n                    data: c.data,\n                    pointStart: c.pointStart,\n                    pointInterval: c.pointInterval\n                }],\n                credits: {\n                    enabled: false\n                },\n                legend: {\n                    enabled: true\n                }\n            });\n        }\n\n        function drawPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                chart: {\n                    marginTop: -90,\n                    height: 200\n                },\n                title: {\n                    text: c.title.text, //'Browser<br>shares<br>2015',\n                    align: 'center', //'center',\n                    verticalAlign: 'bottom', //'bottom',\n                    y: -5 //40\n                },\n                subtitle: {\n                    text: '<div class=\"box-icon-pie\" style=\"width:25%;\"><img src=\"' + kachingAppConfig.wpTemplateUri + c.image + '\" /></div><div class=\"box-num-pie align-center\">' + c.max + '</div>',\n                    align: 'center',\n                    verticalAlign: 'middle',\n                    useHTML: true,\n                    y: -30\n                },\n                tooltip: {\n                    // pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>',\n                    useHTML: true,\n                    formatter: function formatter() {\n                        return '<div>' + this.point.name + ' : ' + this.point.percentage.toFixed(2) + '%' + '</div>';\n                    }\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false, //true,\n                            distance: -50, //-50,\n                            style: {\n                                fontWeight: 'bold', //'bold',\n                                color: 'white'\n                            }\n                        },\n                        startAngle: 0, //0,\n                        endAngle: 360, //360,\n                        center: ['50%', '65%'],\n                        showInLegend: true,\n                        size: '50%'\n                    }\n                },\n                legend: {\n                    enabled: false\n                    //     align: 'right',\n                    //     verticalAlign: 'middle',\n                    //     layout: 'vertical',\n                    //     symbolRadius: 100,\n                    //     symbolPadding: 5,\n                    //     itemMarginBottom: 10,\n                    //     itemStyle: {\n                    //         fontWeight: 100\n                    //     },\n                    //     symbolWidth: 16,\n                    //     symbolHeight: 16,\n                    //     y: 50\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name, //'Browser share',\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n\n        init();\n    }]);\n})(_);","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('sales', ['$scope', 'salesService', function ($scope, salesService) {\n\n        var service = salesService;\n        var WEEK = 'week';\n        var MONTH = 'month';\n\n        var BY_AGE = 'saleByAge';\n        var BY_DEVICE_OS = 'saleByDeviceOS';\n        var BY_COUNTRY = 'saleByCountry';\n        var BY_GENDER = 'saleByGender';\n\n        var REVENUE_IN_PERIOD = 'revenueInPeriod';\n        var AVG_PER_TRANS_IN_PERIOD = 'avgPerTransInPeriod';\n        var TRANSACTION_IN_PERIOD = 'transactionInPeriod';\n\n        // const ACTIVE_USER_BY_DAY = 'activeUserByDay';\n        // const TOP_CAMPAIGN_BY_TRIGGER = 'topCampaignByTrigger';\n        // const ACTIVE_CAMPAIGN_IN_PERIOD = 'activeCampaignInPeriod';\n        // const SCAN_IN_PERIOD = 'scanInPeriod';\n\n        var period = WEEK;\n\n        $scope.chartConfig = {\n            'options': {\n                'chart': {\n                    'type': 'areaspline'\n                },\n                'xAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'yAxis': {\n                    'categories': [],\n                    'title': {\n                        'text': null\n                    },\n                    'labels': {\n                        'enabled': false\n                    },\n                    'minorTickLength': 0,\n                    'tickLength': 0,\n                    'gridLineColor': 'transparent',\n                    'tickWidth': 0,\n                    'minPadding': 0,\n                    'maxPadding': 0,\n                    'pointPadding': 0,\n                    'groupPadding': 0,\n                    'lineColor': '',\n                    'lineWidth': ''\n                },\n                'pane': {},\n                'tooltip': {},\n                'plotOptions': {\n                    'series': {\n                        'stacking': '',\n                        'marker': {\n                            'enabled': false\n                        }\n                    },\n                    'pie': {\n                        'size': 500\n                    }\n                },\n                'exporting': {\n                    'enabled': false\n                }\n            },\n            'series': [{\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n\n            }, {\n                'showInLegend': false,\n                'data': [],\n                'color': '',\n                'name': ''\n            }],\n            'title': {\n                'text': ''\n            },\n            'credits': {\n                'enabled': false\n            },\n            'loading': false,\n            'size': {\n                'height': 130\n            },\n            'tooltip': {},\n            'useHighStocks': false,\n            func: function func(chart) {}\n        };\n\n        var increaseColor = '#0fbd66';\n        var decreaseColor = '#E6315E';\n        $scope.$watch('analytic.filter', function (newVal, oldVal) {\n            init();\n        });\n\n        // ActiveTriggers\n        $scope.chartconfigSalesVsScans = angular.copy($scope.chartConfig);\n        $scope.chartconfigSalesVsScans.options.chart.type = 'line';\n        $scope.chartconfigSalesVsScans.size.height = 50;\n        $scope.chartconfigSalesVsScans.options.xAxis = {\n            title: {\n                text: null\n            },\n            labels: {\n                enabled: false\n            },\n            lineColor: '#FFFFFF',\n            lineWidth: 1,\n            gridLineWidth: 0,\n            tickColor: '#FFFFFF',\n            tickWidth: 0\n        };\n        $scope.chartconfigSalesVsScans.series = [{\n            name: '',\n            showInLegend: false,\n            data: [2, 2, 3, 2, 1, 4, 5, 7, 1, 5, 4],\n            color: decreaseColor\n        }];\n\n        // totalRevenueLineChar\n        var activeUsers = {\n            id: 'totalRevenueLineChar',\n            name: 'Weekly Users',\n            data: [1000, 1000, 2000, 2000, 3000, 3000, 4500, 4000, 4500, 5000, 6000, 5500, 4000, 3000, 4000, 4500, 4575, 4700, 5000, 5500, 5550, 5555, 4554, 6923, 3000, 3000, 3000, 3100, 3100, 3150, 3400, 3300, 3570, 3333, 3586, 3867, 3860, 3051, 3054, 3768, 3451, 3856, 3949, 3222, 3333, 3210, 3462, 3678, 2000, 1000, 4000, 3500, 10000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2222, 2000, 3200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 3000, 2000, 1200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 1000, 2000, 2400, 3300, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923],\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 3600 * 1000\n        };\n        $scope.activeUsers = activeUsers;\n\n        // conversionLineChar\n        var conversion = {\n            id: 'conversionLineChar',\n            name: 'Weekly Users',\n            data: [1000, 1000, 2000, 2000, 3000, 3000, 4500, 4000, 4500, 5000, 6000, 5500, 4000, 3000, 4000, 4500, 4575, 4700, 5000, 5500, 5550, 5555, 4554, 6923, 3000, 3000, 3000, 3100, 3100, 3150, 3400, 3300, 3570, 3333, 3586, 3867, 3860, 3051, 3054, 3768, 3451, 3856, 3949, 3222, 3333, 3210, 3462, 3678, 2000, 1000, 4000, 3500, 10000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2222, 2000, 3200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 3000, 2000, 1200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 1000, 2000, 2400, 3300, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923],\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 3600 * 1000\n        };\n        $scope.conversion = conversion;\n\n        // conversionLineChar\n        var daytimesSales = {\n            id: 'daytimesSalesLineChar',\n            name: 'Weekly Users',\n            data: [1000, 1000, 2000, 2000, 3000, 3000, 4500, 4000, 4500, 5000, 6000, 5500, 4000, 3000, 4000, 4500, 4575, 4700, 5000, 5500, 5550, 5555, 4554, 6923, 3000, 3000, 3000, 3100, 3100, 3150, 3400, 3300, 3570, 3333, 3586, 3867, 3860, 3051, 3054, 3768, 3451, 3856, 3949, 3222, 3333, 3210, 3462, 3678, 2000, 1000, 4000, 3500, 10000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2222, 2000, 3200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 3000, 2000, 1200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 1000, 2000, 2400, 3300, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923],\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 3600 * 1000\n        };\n        $scope.daytimesSales = daytimesSales;\n\n        // daytimesTransactionsLineChar\n        var daytimesTransactions = {\n            id: 'daytimesTransactionsLineChar',\n            name: 'Weekly Users',\n            data: [1000, 1000, 2000, 2000, 3000, 3000, 4500, 4000, 4500, 5000, 6000, 5500, 4000, 3000, 4000, 4500, 4575, 4700, 5000, 5500, 5550, 5555, 4554, 6923, 3000, 3000, 3000, 3100, 3100, 3150, 3400, 3300, 3570, 3333, 3586, 3867, 3860, 3051, 3054, 3768, 3451, 3856, 3949, 3222, 3333, 3210, 3462, 3678, 2000, 1000, 4000, 3500, 10000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2222, 2000, 3200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 3000, 2000, 1200, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 1000, 2000, 2400, 3300, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923, 2000, 1000, 4000, 3500, 2000, 6000, 5500, 7500, 4500, 6750, 8540, 9000, 8000, 6500, 4000, 4750, 2750, 8750, 9432, 1234, 5461, 2378, 3462, 6923],\n            pointStart: Date.UTC(2016, 0, 1),\n            pointInterval: 3600 * 1000\n        };\n        $scope.daytimesTransactions = daytimesTransactions;\n\n        // Begin: Function Zone //\n        function init() {\n            switch ($scope.analytic.filter) {\n                case 'Last 7 days':\n                    period = WEEK;\n                    break;\n                case 'Last month':\n                    period = MONTH;\n                    break;\n                default:\n                    break;\n            }\n\n            // REVENUE_IN_PERIOD\n            service.getDataOf(REVENUE_IN_PERIOD, period).then(function (response) {\n                $scope.chartconfigTotalRevenue = angular.copy($scope.chartConfig);\n                $scope.chartconfigTotalRevenue.options.chart.type = 'line';\n                $scope.chartconfigTotalRevenue.size.height = 50;\n                $scope.chartconfigTotalRevenue.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.totalRevenue = {};\n                $scope.totalRevenue.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.totalRevenue.percentage = response.percentage.toFixed(2) : $scope.totalRevenue.percentage = 100;\n                $scope.totalRevenue.total = response.total.toFixed(2);\n\n                $scope.chartconfigTotalRevenue.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.totalRevenue.data,\n                    color: $scope.totalRevenue.percentage > 0 ? increaseColor : decreaseColor\n                }];\n            });\n\n            // TRANSACTION_IN_PERIOD\n            service.getDataOf(TRANSACTION_IN_PERIOD, period).then(function (response) {\n                $scope.chartconfigTransaction = angular.copy($scope.chartConfig);\n                $scope.chartconfigTransaction.options.chart.type = 'line';\n                $scope.chartconfigTransaction.size.height = 50;\n                $scope.chartconfigTransaction.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.transaction = {};\n                $scope.transaction.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.transaction.percentage = response.percentage.toFixed(2) : $scope.transaction.percentage = 100;\n                $scope.transaction.total = response.total.toFixed(2);\n                $scope.chartconfigTransaction.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.transaction.data,\n                    color: $scope.transaction.percentage > 0 ? increaseColor : decreaseColor\n                }];\n            });\n\n            // AVG_PER_TRANS_IN_PERIOD\n            service.getDataOf(AVG_PER_TRANS_IN_PERIOD, period).then(function (response) {\n                $scope.chartconfigAvgRevenueSale = angular.copy($scope.chartConfig);\n                $scope.chartconfigAvgRevenueSale.options.chart.type = 'line';\n                $scope.chartconfigAvgRevenueSale.size.height = 50;\n                $scope.chartconfigAvgRevenueSale.options.xAxis = {\n                    title: {\n                        text: null\n                    },\n                    labels: {\n                        enabled: false\n                    },\n                    lineColor: '#FFFFFF',\n                    lineWidth: 1,\n                    gridLineWidth: 0,\n                    tickColor: '#FFFFFF',\n                    tickWidth: 0\n                };\n                $scope.avgRevenueSale = {};\n                $scope.avgRevenueSale.data = response.by_days.map(function (element) {\n                    return element.amount;\n                });\n                response.percentage ? $scope.avgRevenueSale.percentage = response.percentage.toFixed(2) : $scope.avgRevenueSale.percentage = 100;\n                $scope.avgRevenueSale.total = response.total.toFixed(2);\n                $scope.chartconfigAvgRevenueSale.series = [{\n                    name: '',\n                    showInLegend: false,\n                    data: $scope.avgRevenueSale.data,\n                    color: $scope.avgRevenueSale.percentage > 0 ? increaseColor : decreaseColor\n                }];\n            });\n\n            service.getDataOf(BY_AGE, period).then(function (response) {\n                var data = response.reduce(function (data, element) {\n                    data.push(['Age: ' + element.age[0] + '-' + element.age[1], element.count]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, function (item) {\n                    return item.count;\n                }).age;\n                maxText = maxText[0] + '-' + maxText[1];\n                var agePie = {\n                    id: 'agePie',\n                    title: {\n                        text: 'AGE'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: '/assets/images/analytics/pieImages/birthday_icon.svg',\n                    max: maxText ? maxText : 'None'\n                };\n                $scope.agePie = agePie;\n                // genderPie\n                drawPieChart($scope.agePie);\n            });\n\n            service.getDataOf(BY_GENDER, period).then(function (response) {\n                // genderPie\n                var data = [['Male', response.male], ['Female', response.female]];\n                var maxText = response.male >= response.female ? 'Male' : 'Female';\n                var maleImage = '/assets/images/analytics/pieImages/male_icon.svg';\n                var femaleImage = '/assets/images/analytics/pieImages/female_icon.svg';\n                var maxImage = response.male >= response.female ? maleImage : femaleImage;\n                var genderPie = {\n                    id: 'genderPie',\n                    title: {\n                        text: 'GENDER'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: maxImage,\n                    max: maxText ? maxText : 'None'\n                };\n                $scope.genderPie = genderPie;\n                drawPieChart($scope.genderPie);\n            });\n\n            service.getDataOf(BY_COUNTRY, period).then(function (response) {\n                // countryPie\n                var data = response.reduce(function (data, element) {\n                    data.push([element.owner__country__short_name, element.total]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, 'total').owner__country__short_name;\n                var countryPie = {\n                    id: 'countryPie',\n                    title: {\n                        text: 'COUNTRY'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: '/assets/images/analytics/pieImages/globe_icon.svg',\n                    max: maxText ? maxTextCountry(maxText) : 'None'\n                };\n                $scope.countryPie = countryPie;\n                drawPieChart($scope.countryPie);\n            });\n\n            // Change sort country for the USA and the UK\n            function maxTextCountry(maxText) {\n                var country = '';\n                switch (maxText) {\n                    case 'United Kingdom of Great Britain and Northern Ireland':\n                        country = 'The UK';\n                        break;\n                    case 'United States of America':\n                        country = 'The USA';\n                        break;\n                    default:\n                        country = maxText;\n                }\n                return country;\n            }\n            // End change sort country for the USA and the UK\n\n            service.getDataOf(BY_DEVICE_OS, period).then(function (response) {\n                // devicePie\n                var data = response.reduce(function (data, element) {\n                    data.push([element.phone_type, element.total]);\n                    return data;\n                }, []);\n                var maxText = _.max(response, 'total').phone_type;\n                var maxImage = void 0;\n                switch (maxText) {\n                    case 'iOS':\n                        maxImage = '/assets/images/analytics/pieImages/apple_icon.svg';\n                        break;\n                    case 'Android':\n                        maxImage = '/assets/images/analytics/pieImages/android_icon.svg';\n                        break;\n                    default:\n                        maxImage = '/assets/images/analytics/pieImages/apple_icon.svg';\n                        break;\n                }\n                var devicePie = {\n                    id: 'devicePie',\n                    title: {\n                        text: 'DEVICE'\n                    },\n                    series: [{\n                        name: 'Percent',\n                        data: data\n                    }],\n                    credits: {\n                        enabled: false\n                    },\n                    image: maxImage,\n                    max: maxText ? maxText : 'None',\n                    x: 126\n                };\n                $scope.devicePie = devicePie;\n                drawPieChart($scope.devicePie);\n            });\n\n            drawLineChart($scope.activeUsers);\n            drawLineChart($scope.conversion);\n            drawLineChart($scope.daytimesSales);\n            drawLineChart($scope.daytimesTransactions);\n\n            // drawPieChart($scope.agePie);\n            // drawPieChart($scope.genderPie);\n            // drawPieChart($scope.countryPie);\n            // drawPieChart($scope.devicePie);\n        }\n\n        function drawLineChart(chart) {\n            var c = chart;\n            var lineChart = Highcharts.stockChart(c.id, {\n                title: {\n                    text: ''\n                },\n                xAxis: {\n                    tickmarkPlacement: 'on',\n                    type: 'datetime',\n                    tickInterval: 24 * 3600 * 1000\n                },\n                yAxis: {\n                    title: {\n                        text: ''\n                    },\n                    opposite: false\n                },\n                rangeSelector: {\n                    enabled: false\n                },\n                navigator: {\n                    enabled: false\n                },\n                exporting: {\n                    enabled: false\n                },\n                rangeSelectorZoom: {\n                    enabled: false\n                },\n                scrollbar: {\n                    enabled: false\n                },\n                series: [{\n                    name: c.name,\n                    data: c.data,\n                    pointStart: c.pointStart,\n                    pointInterval: c.pointInterval\n                }],\n                credits: {\n                    enabled: false\n                },\n                legend: {\n                    enabled: true\n                }\n            });\n        }\n\n        function drawPieChart(chart) {\n            var c = chart;\n            var pieChart = Highcharts.chart(c.id, {\n                chart: {\n                    marginTop: -90,\n                    height: 200\n                },\n                title: {\n                    text: c.title.text, //'Browser<br>shares<br>2015',\n                    align: 'center', //'center',\n                    verticalAlign: 'bottom', //'bottom',\n                    y: -5 //40\n                },\n                subtitle: {\n                    text: '<div class=\"box-icon-pie\" style=\"width:25%;\"><img src=\"' + kachingAppConfig.wpTemplateUri + c.image + '\" /></div><div class=\"box-num-pie align-center\">' + c.max + '</div>',\n                    align: 'center',\n                    verticalAlign: 'middle',\n                    useHTML: true,\n                    y: -30\n                },\n                tooltip: {\n                    // pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>',\n                    useHTML: true,\n                    formatter: function formatter() {\n                        var name = this.point.name !== 'Slice' ? this.point.name : 'Other';\n                        return '<div>' + name + ' : ' + this.point.percentage.toFixed(2) + '%' + '</div>';\n                    }\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: false, //true,\n                            distance: -50, //-50,\n                            style: {\n                                fontWeight: 'bold', //'bold',\n                                color: 'white'\n                            }\n                        },\n                        startAngle: 0, //0,\n                        endAngle: 360, //360,\n                        center: ['50%', '65%'],\n                        showInLegend: true,\n                        size: '50%'\n                    }\n                },\n                legend: {\n                    enabled: false\n                    //     align: 'right',\n                    //     verticalAlign: 'middle',\n                    //     layout: 'vertical',\n                    //     symbolRadius: 100,\n                    //     symbolPadding: 5,\n                    //     itemMarginBottom: 10,\n                    //     itemStyle: {\n                    //         fontWeight: 100\n                    //     },\n                    //     symbolWidth: 16,\n                    //     symbolHeight: 16,\n                    //     y: 50\n                },\n                exporting: {\n                    enabled: false\n                },\n                series: [{\n                    type: 'pie',\n                    name: c.series[0].name, //'Browser share',\n                    innerSize: '70%',\n                    data: c.series[0].data\n                }],\n                credits: {\n                    enabled: false\n                }\n            });\n        }\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('orderHistoryCtrl', ['$scope', '$state', '$q', 'orderService', '$rootScope', function ($scope, $state, $q, orderService, $rootScope) {\n        $scope.updatingId = $state.params.updatingId;\n\n        $scope.data = {\n            orderHistorys: []\n        };\n        if (!$rootScope.kaching) $rootScope.kaching = {};\n        $rootScope.kaching.orderHistoryFilteredDataLength = 8;\n        function getOrderListHistory() {\n            var deferred = $q.defer();\n\n            $scope.data.orderHistorys = JSON.parse(localStorage.getItem('orderHistory'));\n            orderService.getOrderList().then(function (response) {\n                $scope.updatingId = null;\n                var localOrderLists = [];\n                $scope.data.orderHistorys = [];\n                $scope.data.orderHistorysCount = response.orders.length;\n                $scope.view.busy = false;\n                $scope.orderHistoryList = [];\n                var orderLists = response.orders;\n                angular.forEach(orderLists, function (value, key) {\n                    var dataItem = {\n                        orderNumber: value.id ? value.id : '',\n                        date: value.created_at === undefined ? '-' : moment(value.created_at).format('YYYY-MM-DD hh:mm'),\n                        buyer: value.user && value.user.first_name ? value.user.first_name : '',\n                        shippingAddress: value.shipping_address ? value.shipping_address : '',\n                        totalMount: value.total_amount ? parseFloat(value.total_amount.toFixed(2)) : '',\n                        totalItem: value.products && value.products.product_quantity ? value.products.product_quantity : '',\n                        status: value.process_status ? value.process_status : '',\n                        zipCode: value.shipping_zipcode ? value.shipping_zipcode : '',\n                        userEmail: value.user && value.user.email ? value.user.email : '',\n                        shippingCity: value.shipping_city ? value.shipping_city : '',\n                        shippingPhoneNumber: value.shipping_phone ? value.shipping_phone : '',\n                        shippingCountry: value.shipping_country ? value.shipping_country : '',\n                        products: value.products ? value.products : ''\n                    };\n\n                    if (value.products) {\n                        angular.forEach(value.products, function (item, key) {\n                            dataItem.totalItem += item.product_quantity;\n                        });\n                    }\n\n                    $scope.data.orderHistorys.push(dataItem);\n                    localOrderLists.push(dataItem);\n\n                    var csvItem = {\n                        orderNumber: dataItem.orderNumber,\n                        date: dataItem.date,\n                        buyer: dataItem.buyer,\n                        shippingAddress: dataItem.shippingAddress,\n                        totalMount: dataItem.totalMount,\n                        totalItem: dataItem.totalItem,\n                        status: dataItem.status\n                    };\n                    $scope.orderHistoryList.push(csvItem);\n                });\n                var localOrderListsString = JSON.stringify(localOrderLists);\n                localStorage.setItem('orderHistory', localOrderListsString);\n                deferred.resolve();\n            }, function (response) {\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        }\n\n        // Filter Zone\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            }\n        });\n\n        // End Filter Zone\n\n        // Pagination Zone\n        var itemsPerPage = 8;\n\n        $scope.view = {\n            initialLoadComplete: false,\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10,\n            filtersActive: false\n        };\n\n        $scope.changePage = function () {\n            getOrderListHistory();\n        };\n        // End Pagination Zone\n\n        $scope.editOrder = function (orderItem) {\n            $state.go('kaching.orderHistory.edit', { order: orderItem, orderNumber: orderItem.orderNumber });\n        };\n\n        function init() {\n            getOrderListHistory();\n        }\n\n        init();\n    }]);\n})();\n\n/**\n * API kaching\n */\n\n// (function(){\n//     'use strict';\n//\n//     angular.module('panelApp')\n//         .controller( 'orderHistoryCtrl', [\n//             '$scope',\n//             '$state',\n//             '$q',\n//             'orderService',\n//         function (\n//             $scope,\n//             $state,\n//             $q,\n//             orderService\n//         ) {\n//             $scope.updatingId = $state.params.updatingId;\n//\n//             $scope.data = {\n//                 orderHistorys: []\n//             };\n//\n//             function getOrderListHistory() {\n//                 var deferred = $q.defer();\n//\n//                 $scope.data.orderHistorys = JSON.parse(localStorage.getItem('orderHistory'));\n//                 orderService.getOrderList().then(\n//                     function(response) {\n//                         $scope.updatingId = null;\n//                         var localOrderLists = [];\n//                         $scope.data.orderHistorys = [];\n//                         // $scope.data.orderHistorysCount = response.orders.length;\n//                         $scope.data.orderHistorysCount = response.count;\n//                         $scope.view.busy = false;\n//                         $scope.orderHistoryList = [];\n//                         var orderLists = response.orders;\n//                         angular.forEach(orderLists, function (value, key) {\n//                             var dataItem = {\n//                                 orderNumber:            value.id                                            ? value.id : '',\n//                                 date:                   value.created_at === undefined                      ? '-' : moment(value.created_at).format('YYYY-MM-DD hh:mm'),\n//                                 buyer:                  value.owner && value.owner.name                     ? value.owner.name : '',\n//                                 shippingAddress:        value.shipping_address                              ? value.shipping_address : '',\n//                                 totalMount:             value.total_amount                                  ? '$' + parseFloat( value.total_amount.toFixed(2) ) : '-',\n//                                 totalItem:              value.products && value.products.product_quantity   ? value.products.product_quantity : '',\n//                                 status:                 value.process_status                                ? value.process_status : '',\n//                                 zipCode:                value.shipping_zipcode                              ? value.shipping_zipcode : '',\n//                                 userEmail:              value.owner && value.owner.email                      ? value.owner.email : '',\n//                                 shippingCity:           value.shipping_city                                 ? value.shipping_city : '',\n//                                 shippingPhoneNumber:    value.shipping_phone                                ? value.shipping_phone : 0,\n//                                 shippingCountry:        value.shipping_country                              ? value.shipping_country : '',\n//                                 products:               value.products                                      ? value.products : ''\n//                             };\n//\n//                             if (value.products) {\n//                                 angular.forEach(value.products, function(item, key) {\n//                                     dataItem.totalItem += item.product_quantity;\n//                                 });\n//                             }\n//\n//                             $scope.data.orderHistorys.push(dataItem);\n//                             localOrderLists.push(dataItem);\n//\n//                             var csvItem = {\n//                                 orderNumber: dataItem.orderNumber,\n//                                 date: dataItem.date,\n//                                 buyer: dataItem.buyer,\n//                                 shippingAddress: dataItem.shippingAddress,\n//                                 totalMount: dataItem.totalMount,\n//                                 totalItem: dataItem.totalItem,\n//                                 status: dataItem.status\n//                             }\n//                             $scope.orderHistoryList.push(csvItem);\n//                         });\n//                         var localOrderListsString = JSON.stringify(localOrderLists);\n//                         localStorage.setItem('orderHistory', localOrderListsString);\n//                         deferred.resolve();\n//                     },\n//                     function(response) {\n//                         $scope.view.busy = false;\n//                         deferred.reject();\n//                     }\n//                 );\n//\n//                 return deferred.promise;\n//             }\n//\n//             // Filter Zone\n//             $scope.daterange = {\n//                 dates: {\n//                     startDate: null,\n//                     endDate: null\n//                 },\n//                 min: moment().format('YYYY-MM-DD'),\n//                 display: 'Select date range'\n//             };\n//             $scope.$watch(function() {\n//                 return $scope.daterange.dates;\n//             }, function(newValue, oldValue) {\n//                 if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n//                     return;\n//                 }\n//                 $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n//             });\n//\n//             // End Filter Zone\n//\n//             // Pagination Zone\n//             var itemsPerPage = 8;\n//\n//             $scope.view = {\n//                 initialLoadComplete: false,\n//                 itemsPerPage: itemsPerPage,\n//                 currentPage: 1,\n//                 maxSize: 10,\n//                 filtersActive: false,\n//             };\n//\n//             $scope.changePage = function() {\n//                 getOrderListHistory();\n//             };\n//             // End Pagination Zone\n//\n//             $scope.editOrder = function(orderItem) {\n//                 $state.go('kaching.orderHistory.edit', {order: orderItem, orderNumber: orderItem.orderNumber});\n//             };\n//\n//             function init() {\n//                 getOrderListHistory();\n//             }\n//\n//             init();\n//\n//         }]);\n// })();\n\n/**\n *  End API kaching\n */","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('orderHistoryDetailCtrl', ['$scope', 'analyticsService', '$state', '$stateParams', 'orderService', 'kachingZonesHelpers', function ($scope, analyticsService, $state, $stateParams, orderService, kachingZonesHelpers) {\n        var helpers = kachingZonesHelpers;\n        $scope.goToOrderLists = goToOrderLists;\n\n        $scope.saveOrderItem = saveOrderItem;\n\n        $scope.changeOrderStatus = changeOrderStatus;\n\n        init();\n\n        function init() {\n            getOrderItem();\n        }\n\n        function getOrderItem() {\n\n            if (!$stateParams.order) {\n                $scope.orderData = JSON.parse(localStorage.getItem('orderItemHistory'));\n            } else {\n                $scope.orderData = $stateParams.order;\n            }\n\n            $scope.status = $scope.orderData.status;\n\n            // Save localStorage\n            var localStoreOrderItem = $scope.orderData;\n            var localOrderItemString = JSON.stringify(localStoreOrderItem);\n            localStorage.setItem('orderItemHistory', localOrderItemString);\n        }\n\n        function saveOrderItem() {\n            var orderData = this.orderData;\n            var data = {\n                cartID: orderData.orderNumber ? orderData.orderNumber : '',\n                shipping_address: orderData.shippingAddress ? orderData.shippingAddress : '',\n                user: {\n                    first_name: orderData.buyer ? orderData.buyer : ''\n                },\n                total_amount: orderData.totalMount ? orderData.totalMount : '',\n                products: orderData.products ? orderData.products : '',\n                process_status: orderData.status ? orderData.status : '',\n                shipping_zipcode: orderData.zipCode ? orderData.zipCode : '',\n                shipping_city: orderData.shippingCity ? orderData.shippingCity : '',\n                shipping_phone: orderData.shippingPhoneNumber ? orderData.shippingPhoneNumber : '',\n                shipping_country: orderData.shippingCountry ? orderData.shippingCountry : ''\n            };\n            orderService.updateOrder(data).then(function (response) {\n                helpers.alert('success', 'Order has been updated.');\n                $state.go('kaching.orderHistory', { updatingId: orderData.orderNumber });\n            }, function (error) {\n                helpers.alert('danger', 'Order has not been updated.');\n            });\n        }\n\n        function goToOrderLists() {\n            $state.go('kaching.orderHistory');\n        }\n\n        function changeOrderStatus(status) {\n            if ($scope.orderData && $scope.orderData.status) {\n                $scope.orderData.status = status;\n            }\n        }\n    }]);\n})();\n\n/**\n * API kaching\n */\n\n// (function(){\n//     'use strict';\n//\n//     angular.module('panelApp')\n//         .controller( 'orderHistoryDetailCtrl', [\n//             '$scope',\n//             'analyticsService',\n//             '$state',\n//             '$stateParams',\n//             'orderService',\n//             'kachingZonesHelpers',\n//         function (\n//             $scope,\n//             analyticsService,\n//             $state,\n//             $stateParams,\n//             orderService,\n//             kachingZonesHelpers\n//         ) {\n//             var helpers = kachingZonesHelpers;\n//\n//             $scope.onlyNumbers = '/^[a-zA-Z]*$/';\n//             $scope.regex = RegExp('^((https?|ftp)://)?([a-z]+[.])?[a-z0-9-]+([.][a-z]{1,4}){1,2}(/.*[?].*)?$', 'i');\n//\n//             $scope.goToOrderLists = goToOrderLists;\n//\n//             $scope.saveOrderItem = saveOrderItem;\n//\n//             $scope.changeOrderStatus = changeOrderStatus;\n//\n//             init();\n//\n//             function init() {\n//                 getOrderItem();\n//             }\n//\n//             function getOrderItem() {\n//\n//                 if(!$stateParams.order) {\n//                     $scope.orderData = JSON.parse(localStorage.getItem('orderItemHistory'));\n//                 } else {\n//                     $scope.orderData = $stateParams.order;\n//                 }\n//\n//                 $scope.status = $scope.orderData.status;\n//\n//                 // Save localStorage\n//                 var localStoreOrderItem = $scope.orderData;\n//                 var localOrderItemString = JSON.stringify(localStoreOrderItem);\n//                 localStorage.setItem('orderItemHistory', localOrderItemString);\n//             }\n//\n//             function saveOrderItem() {\n//                 let orderData = this.orderData;\n//                 let data = {\n//                     id:                 orderData.orderNumber ? orderData.orderNumber : '',\n//                     shipping_address:   orderData.shippingAddress ? orderData.shippingAddress : '',\n//                     // total_amount:       orderData.totalMount ? orderData.totalMount : '',\n//                     process_status:     orderData.status ? orderData.status : '',\n//                     shipping_zipcode:   orderData.zipCode ? orderData.zipCode : '',\n//                     shipping_city:      orderData.shippingCity ? orderData.shippingCity :'',\n//                     shipping_phone:     orderData.shippingPhoneNumber ? orderData.shippingPhoneNumber : 0,\n//                     shipping_country:   orderData.shippingCountry ? orderData.shippingCountry : ''\n//                 };\n//\n//                 if (orderData.products) {\n//                     angular.forEach(orderData.products, function(product, key) {\n//                         data.products = {\n//                             product: product.product ? product.product : '',\n//                             cart: product.cart ? product.cart : '',\n//                             product_quantity: product.product_quantity ? product.product_quantity : '',\n//                             product_price: product.product_price ? product.product_price : '',\n//                             product_name: product.product_name ? product.product_name : '',\n//                             product_description: product.product_description ? product.product_description : '',\n//                             product_image: product.product_image ? product.product_image : '',\n//                             product_url: product.product_url ? product.product_url : '',\n//                             product_currency: product.product_currency ? product.product_currency : ''\n//                         }\n//                     });\n//                 }\n//\n//                 orderService.saveOrder(data).then(\n//                     (response) => {\n//                         helpers.alert('success', 'Order has been updated.');\n//                         $state.go('kaching.orderHistory', { updatingId: orderData.orderNumber });\n//                     },\n//                     (error) => {\n//                         helpers.alert('danger', 'Order has not been updated.');\n//                     }\n//                 );\n//             }\n//\n//             function goToOrderLists() {\n//                 $state.go('kaching.orderHistory');\n//             }\n//\n//             function changeOrderStatus(status) {\n//                 if ($scope.orderData && $scope.orderData.status) {\n//                     $scope.orderData.status = status;\n//                 }\n//             }\n//         }]);\n// })();\n\n/**\n *  End API kaching\n */","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('billingCtrl', ['$scope', '$modal', '$filter', 'errorHandler', 'billingService', 'userService', function ($scope, $modal, $filter, errorHandler, billingService, userService) {\n\n        var itemsPerPage = 10;\n\n        $scope.view = {\n            initialLoadComplete: false,\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10\n        };\n\n        $scope.data = {\n            transactionsCount: 0,\n            transactions: [],\n            user: {\n                hasBillingDetails: false\n            }\n        };\n\n        $scope.filters = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            datepickerLabel: 'Select date range'\n        };\n\n        var init = function init() {\n\n            userService.getUser().then(function (user) {\n\n                $scope.data.user.firstName = user.firstName;\n                $scope.data.user.lastName = user.lastName;\n                $scope.data.user.company = user.company;\n                $scope.data.user.country = user.country;\n                $scope.data.user.city = user.city;\n                $scope.data.user.address = user.address;\n                $scope.data.user.postalCode = user.postalCode;\n                $scope.data.user.hasBillingDetails = userHasBillingDetails();\n\n                getTransactions();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        function userHasBillingDetails() {\n            if ($scope.data.user.firstName === '') {\n                return false;\n            }\n            if ($scope.data.user.lastName === '') {\n                return false;\n            }\n            if ($scope.data.user.company === '') {\n                return false;\n            }\n            if ($scope.data.user.country === undefined) {\n                return false;\n            }\n            if ($scope.data.user.city === '') {\n                return false;\n            }\n            if ($scope.data.user.address === '') {\n                return false;\n            }\n            if ($scope.data.user.postalCode === '') {\n                return false;\n            }\n            return true;\n        }\n\n        $scope.changePage = function () {\n            getTransactions();\n        };\n\n        $scope.reloadTransactions = function () {\n            $scope.view.currentPage = 1;\n            getTransactions();\n        };\n\n        function getTransactions() {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1)\n            };\n\n            if ($scope.filters.start_date) {\n                params.start_date = $scope.filters.start_date;\n            }\n            if ($scope.filters.end_date) {\n                params.end_date = $scope.filters.end_date;\n            }\n\n            billingService.getTransactions(params).then(function (transactions) {\n                $scope.data.transactionsCount = transactions.count;\n                $scope.data.transactions = transactions.results;\n                $scope.view.initialLoadComplete = true;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        $scope.updateFilters = function () {\n            $scope.reloadTransactions();\n        };\n\n        $scope.getInvoicePdf = function (transactionId) {\n\n            var modal = $modal({\n                templateUrl: '/panel-module/components/invoiceDownloadModal/modalTmpl.html',\n                animation: 'am-fade-and-scale',\n                placement: 'center'\n            });\n\n            billingService.getInvoicePdf(transactionId).then(function (response) {\n                modal.$promise.then(modal.hide);\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                modal.$promise.then(modal.hide);\n            });\n        };\n\n        $scope.$watch('daterange.dates.startDate', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            $scope.filters.start_date = moment.utc($scope.daterange.dates.startDate).hour(0).minute(0).second(0).format('YYYY-MM-DD');\n            $scope.filters.end_date = moment.utc($scope.daterange.dates.endDate).hour(23).minute(59).second(59).format('YYYY-MM-DD');\n            $scope.daterange.datepickerLabel = $filter('date')($scope.filters.start_date, 'yyyy-MM-dd') + ' - ' + $filter('date')($scope.filters.end_date, 'yyyy-MM-dd');\n            $scope.updateFilters();\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('paymentRequestCtrl', ['$scope', 'errorHandler', 'billingService', 'userService', '$filter', '$modal', function ($scope, errorHandler, billingService, userService, $filter, $modal) {\n        var itemsPerPage = 10;\n\n        $scope.view = {\n            initialLoadComplete: false,\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10\n        };\n\n        $scope.data = {\n            paymentCount: 0,\n            payments: []\n        };\n\n        $scope.filters = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            datepickerLabel: 'Select date range'\n        };\n\n        var init = function init() {\n\n            getPaymentRequest();\n        };\n\n        function getPaymentRequest() {\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1)\n            };\n\n            if ($scope.filters.start_date) {\n                params.start_date = $scope.filters.start_date;\n            }\n            if ($scope.filters.end_date) {\n                params.end_date = $scope.filters.end_date;\n            }\n\n            billingService.getPaymentRequest(params).then(function (response) {\n                console.log('payments: ', response);\n                $scope.data.paymentCount = response.count;\n                $scope.data.payments = response.results;\n                $scope.view.initialLoadComplete = true;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        $scope.updateFilters = function () {\n            $scope.reloadPayments();\n        };\n\n        $scope.reloadPayments = function () {\n            $scope.view.currentPage = 1;\n            getPaymentRequest();\n        };\n\n        $scope.$watch('daterange.dates.startDate', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            $scope.filters.start_date = moment.utc($scope.daterange.dates.startDate).hour(0).minute(0).second(0).format('YYYY-MM-DD');\n            $scope.filters.end_date = moment.utc($scope.daterange.dates.endDate).hour(23).minute(59).second(59).format('YYYY-MM-DD');\n            $scope.daterange.datepickerLabel = $filter('date')($scope.filters.start_date, 'yyyy-MM-dd') + ' - ' + $filter('date')($scope.filters.end_date, 'yyyy-MM-dd');\n            $scope.updateFilters();\n        });\n\n        $scope.showEditPaymentPopup = function (_paymentId) {\n            $modal({\n                // templateUrl: 'panel-module/components/campaignDetailsModal/modalTmpl.html',\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/controllers/billing/editPaymentRequestTmpl.html',\n                controller: 'editPaymentRequestCtrl',\n                animation: 'am-fade-and-scale',\n                resolve: {\n                    paymentId: function paymentId() {\n                        return _paymentId;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('editPaymentRequestCtrl', ['$scope', 'errorHandler', 'billingService', 'userService', '$filter', '$stateParams', '$state', 'paymentId', '$window', function ($scope, errorHandler, billingService, userService, $filter, $stateParams, $state, paymentId, $window) {\n\n        $scope.viewBusy = false;\n\n        $scope.data = null;\n\n        $scope.statusProp = {\n            'value': 1,\n            'status': [1, 2, 3]\n        };\n\n        $scope.saveForm = function () {\n\n            $scope.viewBusy = true;\n\n            billingService.updatePaymentRequestItem(paymentId, $scope.statusProp.value).then(function (response) {\n                $scope.viewBusy = false;\n                // $scope.$hide();\n                $window.location.reload();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        var init = function init() {\n            var cache = $stateParams;\n            getPaymentRequestItem();\n        };\n\n        function getPaymentRequestItem() {\n            $scope.viewBusy = true;\n\n            billingService.getPaymentRequestItem(paymentId).then(function (response) {\n                $scope.viewBusy = false;\n                $scope.payment = response;\n                $scope.statusProp.value = response.status;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('apiKeysCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'applicationsService', function ($scope, $alert, $modal, errorHandler, applicationsService) {\n\n        var itemsPerPage = 10;\n\n        $scope.view = {\n            busy: true,\n            currentPage: 1,\n            maxSize: 10,\n            itemsPerPage: itemsPerPage,\n            filtersActive: false,\n            initialLoadComplete: false\n        };\n\n        $scope.data = {\n            appsCount: 0,\n            apps: []\n        };\n\n        $scope.filters = {};\n\n        var init = function init() {\n            initFilters();\n            getApps();\n        };\n\n        function initFilters() {\n            $scope.filters = {\n                name: '',\n                api_key: ''\n            };\n        }\n\n        $scope.changePage = function () {\n            getApps();\n        };\n\n        $scope.reloadApps = function () {\n            $scope.view.currentPage = 1;\n            getApps();\n        };\n\n        function getApps(argsObj) {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1)\n            };\n\n            if ($scope.filters.name.length > 0) {\n                params.name = $scope.filters.name;\n            }\n            if ($scope.filters.api_key.length > 0) {\n                params.api_key = $scope.filters.api_key;\n            }\n\n            $scope.view.busy = true;\n            applicationsService.getApps(params).then(function (apps) {\n                $scope.data.appsCount = apps.count;\n                $scope.data.apps = apps.items;\n                $scope.view.busy = false;\n                $scope.view.initialLoadComplete = true;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        var deleteApp = function deleteApp(app) {\n            var name = app.name;\n            applicationsService.deleteApp(app.id).then(function () {\n                $alert({\n                    title: 'Application deleted.',\n                    content: 'Application \"' + name + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getApps();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showDeleteAppDialog = function (_app) {\n            var options = {\n                delete: function _delete(app) {\n                    console.log('delete app', app);\n                    deleteApp(app);\n                }\n            };\n            $modal({\n                templateUrl: 'panel-module/components/appDeleteModal/modalTmpl.html',\n                controller: 'appDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    app: function app() {\n                        return _app;\n                    }\n                }\n            });\n        };\n\n        $scope.showNewAppDialog = function () {\n            var options = {\n                submit: function submit(app) {\n                    $alert({\n                        title: 'Application added.',\n                        content: 'Application \"' + app.name + '\" has been added.',\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'success',\n                        show: true\n                    });\n                    $scope.reloadApps();\n                }\n            };\n            $modal({\n                templateUrl: 'panel-module/components/newAppModal/modalTmpl.html',\n                controller: 'newAppModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.showAppEditDialog = function (_app2) {\n            var options = {\n                submit: function submit(app) {\n                    $alert({\n                        title: 'Application updated.',\n                        content: '',\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'success',\n                        show: true\n                    });\n                    $scope.reloadApps();\n                }\n            };\n            $modal({\n                templateUrl: 'panel-module/components/appEditModal/modalTmpl.html',\n                controller: 'appEditModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    app: function app() {\n                        return _app2;\n                    }\n                }\n            });\n        };\n\n        $scope.showAppKeyDialog = function (_app3) {\n            $modal({\n                templateUrl: 'panel-module/components/appKeyModal/modalTmpl.html',\n                controller: 'appKeyModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    app: function app() {\n                        return _app3;\n                    }\n                }\n            });\n        };\n\n        $scope.updateFilters = function () {\n            $scope.reloadApps();\n        };\n\n        $scope.toggleFilters = function () {\n            if ($scope.view.filtersActive) {\n                $scope.clearFilters();\n            } else {\n                $scope.view.filtersActive = true;\n            }\n        };\n\n        $scope.clearFilters = function () {\n            $scope.view.filtersActive = false;\n            initFilters();\n            $scope.reloadApps();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('mediaCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'mediaService', function ($scope, $alert, $modal, errorHandler, mediaService) {\n\n        var itemsPerPage = 9;\n\n        $scope.view = {\n            busy: true,\n            currentPage: 1,\n            media: [],\n            maxSize: 10,\n            searchPhrase: '',\n            searchInput: '',\n            orderByOptions: [{\n                value: 'name',\n                label: 'Order by title'\n            }, {\n                value: '-date_added',\n                label: 'Newest first'\n            }],\n            orderBy: '-date_added',\n            itemsPerPage: itemsPerPage,\n            selectItem: false\n        };\n\n        $scope.data = {\n            mediaCount: 0,\n            media: []\n        };\n\n        var init = function init() {\n            getMedia();\n        };\n\n        $scope.reloadMedia = function () {\n            $scope.view.currentPage = 1;\n            getMedia();\n        };\n\n        $scope.changeOrder = function () {\n            $scope.view.currentPage = 1;\n            getMedia();\n        };\n\n        $scope.search = function () {\n            $scope.view.currentPage = 1;\n            $scope.view.searchPhrase = $scope.view.searchInput;\n            getMedia();\n        };\n\n        $scope.nextPage = function () {\n            //console.log(\"SCROLL\",$scope.data.media.length, $scope.data.mediaCount, $scope.view.currentPage)\n            if ($scope.view.busy || $scope.data.media.length === $scope.data.mediaCount) {\n                return;\n            }\n            $scope.view.currentPage++;\n            getMedia();\n        };\n\n        function getMedia(argsObj) {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1),\n                ordering: $scope.view.orderBy\n            };\n\n            if ($scope.view.searchPhrase.length > 0) {\n                params.name = $scope.view.searchPhrase;\n            }\n\n            $scope.view.busy = true;\n            mediaService.getMedia(params).then(function (media) {\n                $scope.data.mediaCount = media.count;\n                if ($scope.view.currentPage === 1) {\n                    $scope.data.media = media.items;\n                } else {\n                    $scope.data.media = $scope.data.media.concat(media.items);\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        }\n\n        var deleteMedia = function deleteMedia(media) {\n            var name = media.name;\n            mediaService.deleteMedia(media.id).then(function () {\n                $alert({\n                    title: 'Media deleted.',\n                    content: 'Media collection \"' + name + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $scope.reloadMedia();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showNewMediaDialog = function () {\n            var options = {\n                submit: function submit(mediaId) {\n                    console.log('mediaId', mediaId);\n                    $scope.reloadMedia();\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newMediaModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/newMediaModal/modalTmpl.html',\n                controller: 'newMediaModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.showDeleteMediaDialog = function (_media) {\n            var options = {\n                delete: function _delete(media) {\n                    console.log('delete media', media);\n                    deleteMedia(media);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/mediaDeleteModal/modalTmpl.html',\n                controller: 'mediaDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    media: function media() {\n                        return _media;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('mediaViewCtrl', ['$scope', '$state', '$stateParams', '$alert', '$modal', '$sce', 'errorHandler', 'mediaService', function ($scope, $state, $stateParams, $alert, $modal, $sce, errorHandler, mediaService) {\n\n        $scope.view = {\n            busy: false\n        };\n\n        $scope.data = {\n            mediaId: $stateParams.mediaId,\n            mediaItem: {}\n        };\n\n        $scope.videogular = { sources: [] };\n\n        $scope.externalLink = null;\n\n        var init = function init() {\n            $scope.view.busy = true;\n            mediaService.getMediaItem($scope.data.mediaId).then(function (mediaItem) {\n                $scope.data.mediaItem = mediaItem;\n                $scope.setVideo();\n                $scope.view.mediaLoaded = true;\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        };\n\n        var deleteMedia = function deleteMedia(media) {\n            var name = media.name;\n            mediaService.deleteMedia(media.id).then(function () {\n                $alert({\n                    title: 'Media deleted.',\n                    content: 'Media collection \"' + name + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $state.go('media');\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.setVideo = function () {\n            var videoLink = $scope.data.mediaItem.video || $scope.data.mediaItem.video_external_link;\n            if ($scope.data.mediaItem.video === null) {\n                $scope.externalLink = $sce.trustAsResourceUrl(videoLink);\n            } else {\n                $scope.videogular.sources = [\n                // {src: $sce.trustAsResourceUrl($scope.data.mediaItem.video), type: \"video/mp4\"}\n                { src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4' }];\n            }\n        };\n\n        $scope.showDeleteMediaDialog = function (_media) {\n            var options = {\n                delete: function _delete(media) {\n                    console.log('delete media', media);\n                    deleteMedia(media);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/mediaDeleteModal/modalTmpl.html',\n                controller: 'mediaDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    media: function media() {\n                        return _media;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('mediaEditCtrl', ['$scope', '$state', '$stateParams', '$alert', 'errorHandler', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', function ($scope, $state, $stateParams, $alert, errorHandler, apiUrl, authToken, utils, mediaService, FileUploader) {\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: false,\n            uploading: false,\n            submitted: false,\n            mediaCreated: false,\n\n            videoUploadStarted: false,\n            videoUploadProgress: 0,\n            videoUploadComplete: false,\n\n            imageUploadStarted: false,\n            imageUploadProgress: 0,\n            imageUploadComplete: false\n        };\n\n        $scope.data = {\n            mediaId: $stateParams.mediaId,\n            mediaItem: {},\n            videoFile: '',\n            imageFile: '',\n            newVideoAdded: false,\n            newImageAdded: false\n        };\n\n        $scope.mediaTypeProp = { 'type': 'select',\n            'name': 'media_type',\n            'mediaTypeSelect': 'Upload Media',\n            'values': ['Upload Media', 'External Link']\n        };\n\n        $scope.errors = {\n            video: {},\n            image: {}\n        };\n\n        var init = function init() {\n\n            utils.addUploaderTypeFilter(uploader, 'video', {\n                videoFilter: ['video/mp4', 'video/ogg', 'video/webm', 'video/mov', 'video/avi', 'video/quicktime']\n            });\n            utils.addUploaderTypeFilter(uploader, 'display', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n\n            $scope.view.busy = true;\n            mediaService.getMediaItem($scope.data.mediaId).then(function (mediaItem) {\n                $scope.data.mediaItem = mediaItem;\n                $scope.data.imageFile = mediaItem.display;\n                $scope.view.hasVideo = true;\n                $scope.view.mediaLoaded = true;\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n\n            utils.cleanupUploaderQueue(uploader);\n\n            if (newItem.alias === 'video') {\n                $scope.data.videoFile = newItem._file;\n                $scope.data.newVideoAdded = true;\n            }\n            if (newItem.alias === 'display') {\n                $scope.data.imageFile = newItem._file;\n                $scope.data.newImageAdded = true;\n\n                // mediaService.imageSizeHelper( newItem._file ).then(function( size ){\n                //     if ( ! mediaService.imageSizeValid( size.width, size.height ) ) {\n                //         $scope.errors.image.size = true;\n                //     } else {\n                //         delete $scope.errors.image.size;\n                //     }\n                // });\n            }\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            if (item.alias === 'video') {\n                $scope.view.videoUploadStarted = true;\n            }\n            if (item.alias === 'display') {\n                $scope.view.imageUploadStarted = true;\n            }\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            if (fileItem.alias === 'video') {\n                $scope.view.videoUploadComplete = true;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadComplete = true;\n            }\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            if (fileItem.alias === 'video') {\n                $scope.view.videoUploadProgress = progress;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadProgress = progress;\n            }\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n            $alert({\n                title: 'Media saved.',\n                content: '',\n                container: '#alerts-container',\n                placement: 'top',\n                duration: 3,\n                type: 'success',\n                show: true\n            });\n            $state.go('media');\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n        $scope.videoHasError = function () {\n            return $scope.data.newVideoAdded && _typeof($scope.data.videoFile) !== 'object';\n        };\n        $scope.imageHasError = function () {\n            // if ( $scope.data.newImageAdded && ( typeof $scope.data.imageFile !== 'object' || $scope.errors.image.size ) ) {\n            if ($scope.data.newImageAdded && _typeof($scope.data.imageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.saveMedia = function () {\n            $scope.view.submitted = true;\n\n            var mediaValid = false;\n\n            if ($scope.mediaTypeProp.mediaTypeSelect === 'Upload Media') {\n                mediaValid = $scope.form1.$valid && !$scope.imageHasError() && !$scope.videoHasError();\n            } else {\n                mediaValid = $scope.form1.$valid && !$scope.imageHasError();\n            }\n\n            // if ( $scope.form1.$valid && !$scope.imageHasError() && !$scope.videoHasError() ) {\n            if (mediaValid) {\n                $scope.view.uploading = true;\n                // mediaService.updateMedia( $scope.data.mediaItem ).then(\n                mediaService.updateMedia($scope.data.mediaItem, $scope.data.mediaLink).then(function () {\n                    if ($scope.data.newVideoAdded || $scope.data.newImageAdded) {\n                        uploader.uploadAll();\n                    } else {\n                        $alert({\n                            title: 'Media saved.',\n                            content: '',\n                            container: '#alerts-container',\n                            placement: 'top',\n                            duration: 3,\n                            type: 'success',\n                            show: true\n                        });\n                        $state.go('media');\n                    }\n                }, function () {\n                    // Show error message\n                    // $scope.$hide();\n                });\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('productsCtrl', ['$scope', '$alert', '$modal', '$http', 'apiUrl', 'authToken', 'errorHandler', 'productsService', function ($scope, $alert, $modal, $http, apiUrl, authToken, errorHandler, productsService) {\n\n        var itemsPerPage = 12;\n\n        $scope.view = {\n            busy: true,\n            currentPage: 1,\n            media: [],\n            maxSize: 10,\n            searchPhrase: '',\n            searchInput: '',\n            orderByOptions: [{\n                'value': 'title',\n                'label': 'Order by title'\n            }, {\n                'value': '-date_added',\n                'label': 'Newest first'\n            }],\n            orderBy: '-date_added',\n            itemsPerPage: itemsPerPage,\n            selectItem: false\n        };\n\n        $scope.data = {\n            deletedCount: 0,\n            productsCount: 0,\n            products: []\n        };\n\n        var init = function init() {\n            getProducts();\n        };\n\n        $scope.reloadProducts = function () {\n            $scope.view.currentPage = 1;\n            getProducts();\n        };\n\n        $scope.search = function () {\n            $scope.view.currentPage = 1;\n            $scope.view.searchPhrase = $scope.view.searchInput;\n            getProducts();\n        };\n\n        $scope.nextPage = function () {\n            if ($scope.view.busy || $scope.data.products.length === $scope.data.productsCount) {\n                return;\n            }\n            $scope.view.currentPage++;\n            getProducts();\n        };\n\n        function getProducts(argsObj) {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1) - $scope.data.deletedCount,\n                ordering: $scope.view.orderBy\n            };\n\n            if ($scope.view.searchPhrase.length > 0) {\n                params.title = $scope.view.searchPhrase;\n            }\n\n            $scope.view.busy = true;\n            productsService.getProducts(params).then(function (products) {\n                $scope.data.productsCount = products.count;\n                if ($scope.view.currentPage === 1) {\n                    $scope.data.products = products.items;\n                } else {\n                    $scope.data.products = $scope.data.products.concat(products.items);\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        }\n\n        var deleteProduct = function deleteProduct(product, index) {\n            var title = product.title;\n\n            productsService.deleteProduct(product.id).then(function () {\n                $alert({\n                    title: 'Product deleted.',\n                    content: '\"' + title + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $scope.data.products.splice(index, 1);\n                $scope.data.productsCount--;\n                $scope.data.deletedCount++;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showNewProductDialog = function () {\n            var options = {\n                submit: function submit(newProduct) {\n                    console.log('newProduct', newProduct);\n                    $scope.reloadProducts();\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newProductModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/newProductModal/modalTmpl.html',\n                controller: 'newProductModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                },\n                onHide: getProducts\n            });\n        };\n\n        $scope.showDeleteProductDialog = function (_product, _index) {\n            var options = {\n                delete: function _delete(product, index) {\n                    deleteProduct(product, index);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/productDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/productDeleteModal/modalTmpl.html',\n                controller: 'productDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    product: function product() {\n                        return _product;\n                    },\n                    index: function index() {\n                        return _index;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('questionsCtrl', ['$scope', '$alert', '$modal', '$http', 'apiUrl', 'authToken', 'errorHandler', 'productsService', 'questionsService', function ($scope, $alert, $modal, $http, apiUrl, authToken, errorHandler, productsService, questionsService) {\n\n        var itemsPerPage = 12;\n\n        $scope.view = {\n            busy: true,\n            currentPage: 1,\n            media: [],\n            maxSize: 10,\n            searchPhrase: '',\n            searchInput: '',\n            orderByOptions: [{\n                'value': 'title',\n                'label': 'Order by title'\n            }, {\n                'value': '-date_added',\n                'label': 'Newest first'\n            }],\n            orderBy: '-date_added',\n            itemsPerPage: itemsPerPage,\n            selectItem: false\n        };\n\n        $scope.data = {\n            deletedCount: 0,\n            questionsCount: 0,\n            questions: []\n        };\n\n        var init = function init() {\n            getQuestions();\n        };\n\n        $scope.reloadQuestions = function () {\n            $scope.view.currentPage = 1;\n            getQuestions();\n        };\n\n        $scope.search = function () {\n            $scope.view.currentPage = 1;\n            $scope.view.searchPhrase = $scope.view.searchInput;\n            getQuestions();\n        };\n\n        $scope.nextPage = function () {\n            if ($scope.view.busy || $scope.data.questions.length === $scope.data.questionsCount) {\n                return;\n            }\n            $scope.view.currentPage++;\n            getQuestions();\n        };\n\n        function getQuestions(argsObj) {\n\n            var params = {\n                page_size: itemsPerPage,\n                page: $scope.view.currentPage\n                // page: ( itemsPerPage * ($scope.view.currentPage - 1) ) - $scope.data.deletedCount,\n                // ordering: $scope.view.orderBy\n            };\n\n            if ($scope.view.searchPhrase.length > 0) {\n                params.content = $scope.view.searchPhrase;\n            }\n\n            $scope.view.busy = true;\n            questionsService.getQuestions(params).then(function (questions) {\n                $scope.data.questionsCount = questions.count;\n                if ($scope.view.currentPage === 1) {\n                    $scope.data.questions = questions.items;\n                } else {\n                    $scope.data.questions = $scope.data.questions.concat(questions.items);\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        }\n\n        var deleteProduct = function deleteProduct(product, index) {\n            var title = product.title;\n\n            productsService.deleteProduct(product.id).then(function () {\n                $alert({\n                    title: 'Product deleted.',\n                    content: '\"' + title + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $scope.data.questions.splice(index, 1);\n                $scope.data.questionsCount--;\n                $scope.data.deletedCount++;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        var deleteQuestion = function deleteQuestion(question) {\n            debugger;\n            // var title = product.title;\n\n            questionsService.deleteQuestion(question.id).then(function () {\n                $alert({\n                    // title: 'Question deleted.',\n                    content: 'Question has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $scope.data.questions.splice(question.index, 1);\n                $scope.data.questionsCount--;\n                $scope.data.deletedCount++;\n                // $scope.reloadQuestions();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showNewQuestionDialog = function () {\n            var options = {\n                type: 'new'\n            };\n            showQuestionDialog(options);\n        };\n\n        $scope.showEditQuestionDialog = function (id) {\n            var options = {\n                type: 'edit',\n                id: id\n            };\n            showQuestionDialog(options);\n        };\n\n        $scope.showViewQuestionDialog = function (id) {\n            var options = {\n                type: 'view',\n                id: id\n            };\n            showQuestionDialog(options);\n        };\n\n        var showQuestionDialog = function showQuestionDialog(options) {\n            var defaultOptions = {\n                submit: function submit() {\n                    $scope.reloadQuestions();\n                }\n            };\n            angular.extend(defaultOptions, options);\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newQuestionModal/questionModalTmpl.html',\n                controller: 'newQuestionModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return defaultOptions;\n                    }\n                },\n                onHide: getQuestions\n            });\n        };\n\n        $scope.showDeleteProductDialog = function (_product, _index) {\n            var options = {\n                delete: function _delete(product, index) {\n                    deleteProduct(product, index);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/productDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/productDeleteModal/modalTmpl.html',\n                controller: 'productDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    product: function product() {\n                        return _product;\n                    },\n                    index: function index() {\n                        return _index;\n                    }\n                }\n            });\n        };\n\n        $scope.showDeleteQuestionDialog = function (question, index) {\n\n            var questionData = {\n                id: question.id,\n                index: index\n            };\n\n            var options = {\n                okFunction: function okFunction() {\n                    deleteQuestion(questionData);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/confirmModal/modalTmpl.html',\n                controller: 'confirmModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    modalTitle: function modalTitle() {\n                        return 'Delete question?';\n                    },\n                    modalContent: function modalContent() {\n                        return 'Are you sure you want to delete this question?';\n                    },\n                    cancelText: function cancelText() {\n                        return 'Cancel';\n                    },\n                    okText: function okText() {\n                        return 'Delete';\n                    },\n                    modalData: function modalData() {\n                        return questionData;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('productViewCtrl', ['$scope', '$state', '$stateParams', '$alert', '$modal', 'errorHandler', 'productsService', function ($scope, $state, $stateParams, $alert, $modal, errorHandler, productsService) {\n\n        $scope.view = {\n            busy: false\n        };\n\n        $scope.data = {\n            productId: $stateParams.productId,\n            product: {}\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n            productsService.getProduct($scope.data.productId).then(function (product) {\n                console.log(product);\n                $scope.data.product = product;\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        };\n\n        var deleteProduct = function deleteProduct(product) {\n            var title = product.title;\n            productsService.deleteProduct(product.id).then(function () {\n                $alert({\n                    title: 'Product deleted.',\n                    content: '\"' + title + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                $state.go('kaching.products');\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showDeleteProductDialog = function (_product, _index) {\n            var options = {\n                delete: function _delete(product, index) {\n                    deleteProduct(product, index);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/productDeleteModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/productDeleteModal/modalTmpl.html',\n                controller: 'productDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    product: function product() {\n                        return _product;\n                    },\n                    index: function index() {\n                        return _index;\n                    }\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('productEditCtrl', ['$scope', '$state', '$stateParams', '$alert', 'apiUrl', 'utils', 'authToken', 'errorHandler', 'FileUploader', 'productsService', function ($scope, $state, $stateParams, $alert, apiUrl, utils, authToken, errorHandler, FileUploader, productsService) {\n\n        var uploader = $scope.uploader = new FileUploader({\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.urlRegex = utils.urlRegex();\n\n        $scope.view = {\n            busy: false,\n            submitted: false,\n            uploading: false,\n            uploadStarted: false,\n            uploadProgress: 0,\n            uploadComplete: false\n        };\n\n        $scope.data = {\n            productId: $stateParams.productId,\n            product: {},\n            imageFile: '',\n            newImageAdded: false\n        };\n\n        var init = function init() {\n\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n\n            $scope.view.busy = true;\n            productsService.getProduct($scope.data.productId).then(function (product) {\n                $scope.data.product = product;\n                $scope.data.imageFile = product.image || product.image_url;\n                $scope.view.busy = false;\n            }, function (response) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n                $scope.$hide();\n            });\n        };\n\n        var success = function success() {\n            $alert({\n                title: 'Product saved.',\n                content: '',\n                container: '#alerts-container',\n                placement: 'top',\n                duration: 3,\n                type: 'success',\n                show: true\n            });\n            $state.go('kaching.products');\n        };\n\n        uploader.onAfterAddingFile = function (item) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.imageFile = item._file;\n            $scope.data.newImageAdded = true;\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            $scope.view.uploading = true;\n            $scope.view.uploadStarted = true;\n            item.url = apiUrl + '/products/' + $scope.data.productId + '/';\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            $scope.view.uploadProgress = progress;\n        };\n\n        uploader.onSuccessItem = function (item, response, status, headers) {\n            $scope.view.uploadComplete = true;\n            success();\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.imageHasError = function () {\n            return $scope.data.newImageAdded && _typeof($scope.data.imageFile) !== 'object';\n        };\n\n        $scope.saveProduct = function () {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                $scope.view.uploading = true;\n                productsService.updateProduct($scope.data.product).then(function () {\n                    if ($scope.data.newImageAdded) {\n                        uploader.uploadAll();\n                    } else {\n                        success();\n                    }\n                }, function () {});\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', function ($scope, $state, $stateParams, campaignEditorService) {\n\n        var editor = campaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        editor.init($stateParams.campaignId);\n        $scope.currentStep = editor.currentStep;\n\n        $scope.states = {\n            step1: 'campaigns.' + editor.mode() + '.step1',\n            step2: 'campaigns.' + editor.mode() + '.step2',\n            step3: 'campaigns.' + editor.mode() + '.step3',\n            step4: 'campaigns.' + editor.mode() + '.step4',\n            step5: 'campaigns.' + editor.mode() + '.step5',\n            step6: 'campaigns.' + editor.mode() + '.step6'\n        };\n\n        $state.go($scope.states.step1);\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('newCampaignEditorCtrl', ['$scope', '$state', '$stateParams',\n    // 'campaignId',\n    function ($scope, $state, $stateParams\n    // campaignId\n    ) {\n\n        $scope.campaignTemplate = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/billboards/billboards-popup-tmpl.html';\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('editCampaignCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', 'campaignsService', 'errorHandler', '$alert', function ($scope, $state, $stateParams, campaignEditorService, campaignsService, errorHandler, $alert) {\n\n        var editor = campaignEditorService;\n\n        editor.init($stateParams.campaignId);\n\n        $scope.view = {\n            currentTab: 'details'\n        };\n\n        $scope.data = {\n            campaign: {}\n        };\n\n        campaignsService.getCampaign($stateParams.campaignId).then(function (campaign) {\n            if (campaign.status === 3) {\n                $state.go('campaigns');\n            }\n            $scope.data.campaign = campaign;\n        }, function (response) {\n            errorHandler.processApiResponse(response);\n        });\n\n        $scope.switchTab = function (tab) {\n            $scope.view.currentTab = tab;\n        };\n\n        $scope.isCurrentTab = function (tab) {\n            return $scope.view.currentTab === tab;\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep1Ctrl', ['$scope', '$state', '$stateParams', 'errorHandler', 'campaignEditorService', 'utils', function ($scope, $state, $stateParams, errorHandler, campaignEditorService, utils) {\n\n        var editor = campaignEditorService;\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.campaign = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        var init = function init() {\n\n            editor.currentStep('step1');\n            editor.previousState('campaigns.' + editor.mode() + '.step1');\n\n            $scope.campaign = editor.dataGet('campaign');\n\n            if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n            }\n\n            $scope.view.busy = false;\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n\n        $scope.nextStep = function () {\n\n            editor.stepSet('step1', 'submitted', true);\n\n            if ($scope.form1.$valid) {\n\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = moment($scope.daterange.dates.startDate).format('YYYY-MM-DD') + 'T00:00:00.000Z';\n                $scope.campaign.end_date = moment($scope.daterange.dates.endDate).format('YYYY-MM-DD') + 'T23:59:59.999Z';\n                editor.dataSet('campaign', $scope.campaign);\n\n                editor.save('step1').then(function () {\n                    $state.go('campaigns.' + editor.mode() + '.step2');\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n            }\n        };\n\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - campaign', angular.copy($scope.campaign));\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep2Ctrl', ['$scope', '$state', '$sce', 'utils', '$modal', 'errorHandler', 'campaignsService', 'campaignEditorService', function ($scope, $state, $sce, utils, $modal, errorHandler, campaignsService, campaignEditorService) {\n\n        var editor = campaignEditorService;\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: false,\n            showErrors: false,\n            errors: {},\n            ageRanges: []\n        };\n\n        $scope.data = {\n            allCategories: true,\n            allLocations: true,\n            categories: [],\n            locations: [],\n            gender: {\n                male: true,\n                female: true\n            },\n            os: {\n                ios: true,\n                android: true\n            },\n            ageRange: undefined\n        };\n\n        var init = function init() {\n\n            if (!editor.stepGet('step1', 'valid')) {\n                $state.go(editor.previousState());\n            }\n\n            editor.currentStep('step2');\n            editor.previousState('campaigns.' + editor.mode() + '.step2');\n\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n\n                $scope.data = targetingData;\n            } else {\n\n                $scope.view.busy = true;\n\n                campaignsService.getTargeting().then(function (response) {\n                    $scope.data.allCategories = response.allCategories;\n                    $scope.data.allLocations = response.allLocations;\n                    $scope.data.categories = response.categories;\n                    $scope.data.locations = response.locations;\n                    $scope.data.gender = response.gender;\n                    $scope.data.os = response.os;\n                    $scope.data.ageRange = response.ageRange;\n                    $scope.view.ageRanges = response.ageRanges;\n                    $scope.view.busy = false;\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        $scope.nextStep = function () {\n\n            $scope.view.busy = true;\n            editor.stepSet('step2', 'submitted', true);\n\n            campaignsService.saveTargeting(editor.dataGet('campaignId'), $scope.data).then(function (response) {\n                editor.stepSet('step2', 'valid', true);\n                editor.dataSet('targeting', $scope.data);\n                $state.go('campaigns.' + editor.mode() + '.step3');\n            }, function (response) {\n                $scope.view.busy = false;\n                editor.stepSet('step2', 'valid', false);\n                if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object' && !_.isEmpty(response.validationErrors)) {\n                    $scope.view.showErrors = true;\n                    $scope.view.errors = response.validationErrors;\n                } else {\n                    errorHandler.processApiResponse(response);\n                }\n            });\n        };\n\n        $scope.previousStep = function () {\n            $state.go('campaigns.' + editor.mode() + '.step1');\n        };\n\n        $scope.resetError = function (errorName) {\n            if (typeof $scope.view.errors[errorName] !== 'undefined') {\n                delete $scope.view.errors[errorName];\n            }\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep3Ctrl', ['$scope', '$state', 'utils', 'errorHandler', 'campaignsService', 'campaignEditorService', '$timeout', function ($scope, $state, utils, errorHandler, campaignsService, campaignEditorService, $timeout) {\n\n        var editor = campaignEditorService;\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.hasBudget = false;\n\n        $scope.view = {\n            busy: false,\n            showCharts: false\n        };\n\n        $scope.data = {\n            budgetType: 'ongoing',\n            bidAmount: undefined,\n            budgetAmount: undefined\n        };\n\n        $scope.estViews = {\n            daily: { percentage: 0, min: 0, max: 0 },\n            total: { percentage: 0, min: 0, max: 0 }\n        };\n\n        $scope.estDailyViewsChart = {\n            data: [$scope.estViews.daily.percentage, 100 - $scope.estViews.daily.percentage],\n            labels: ['', ''],\n            colours: ['#f9cd3f', '#dae2e5'],\n            options: {\n                animationEasing: 'easeOutQuart',\n                showTooltips: false,\n                segmentShowStroke: false,\n                percentageInnerCutout: 85\n            }\n        };\n\n        $scope.estTotalViewsChart = {\n            data: [$scope.estViews.total.percentage, 100 - $scope.estViews.total.percentage],\n            labels: ['', ''],\n            colours: ['#343b45', '#dae2e5'],\n            options: {\n                animationEasing: 'easeOutQuart',\n                showTooltips: false,\n                segmentShowStroke: false,\n                percentageInnerCutout: 85\n            }\n        };\n\n        var mapBudgetType = function mapBudgetType(type) {\n            var types = ['ongoing', 'fixed', 'daily'];\n            if (typeof type === 'number') {\n                return types[type - 1];\n            } else if (typeof type === 'string') {\n                type = types.indexOf(type);\n                return type + 1;\n            }\n        };\n\n        var init = function init() {\n\n            if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid')) {\n                $state.go(editor.previousState());\n            }\n\n            editor.currentStep('step3');\n            editor.previousState('campaigns.' + editor.mode() + '.step3');\n\n            var budgetingData = editor.dataGet('budgeting');\n\n            if (!_.isEmpty(budgetingData)) {\n\n                $scope.data = budgetingData;\n                $scope.hasBudget = true;\n\n                $timeout(function () {\n                    updateEstimatedViews();\n                }, 300);\n            } else {\n\n                $timeout(function () {\n                    updateEstimatedViews();\n                }, 300);\n            }\n        };\n\n        $scope.changedBid = function () {\n            updateEstimatedViews();\n        };\n\n        function updateEstimatedViews() {\n            if (typeof $scope.data.bidAmount === 'undefined') {\n                $scope.estViews = {\n                    daily: { percentage: 0, min: 0, max: 0 },\n                    total: { percentage: 0, min: 0, max: 0 }\n                };\n                updateCharts();\n                $scope.view.showCharts = true;\n            } else {\n                campaignsService.getEstimatedViews(editor.dataGet('campaignId'), $scope.data.bidAmount).then(function (response) {\n                    $scope.estViews = response;\n                    updateCharts();\n                    $scope.view.showCharts = true;\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        }\n\n        function updateCharts() {\n            $scope.estDailyViewsChart.data = [$scope.estViews.daily.percentage, 100 - $scope.estViews.daily.percentage];\n            $scope.estTotalViewsChart.data = [$scope.estViews.total.percentage, 100 - $scope.estViews.total.percentage];\n        }\n\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n\n        $scope.previousStep = function () {\n            $state.go('campaigns.' + editor.mode() + '.step2');\n        };\n\n        $scope.nextStep = function () {\n\n            editor.stepSet('step3', 'submitted', true);\n\n            if ($scope.form1.$valid) {\n\n                $scope.view.busy = true;\n\n                var data = {\n                    cost_per_view: $scope.data.bidAmount,\n                    amount: $scope.data.budgetAmount,\n                    type: mapBudgetType($scope.data.budgetType)\n                };\n\n                if ($scope.data.budgetType === 'ongoing') {\n                    data.amount = 0;\n                }\n\n                campaignsService.saveCampaignBudget(editor.dataGet('campaignId'), data, $scope.hasBudget).then(function (response) {\n                    editor.stepSet('step3', 'valid', true);\n                    editor.dataSet('budgeting', $scope.data);\n                    $state.go('campaigns.' + editor.mode() + '.step4');\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep4Ctrl', ['$scope', '$state', '$sce', 'utils', '$modal', 'errorHandler', 'mediaService', 'campaignEditorService', function ($scope, $state, $sce, utils, $modal, errorHandler, mediaService, campaignEditorService) {\n\n        var editor = campaignEditorService;\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.videogular = { sources: [] };\n        $scope.videogularApi = null;\n\n        $scope.externalLink = null;\n\n        var init = function init() {\n\n            if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid')) {\n                $state.go(editor.previousState());\n            }\n\n            editor.currentStep('step4');\n            editor.previousState('campaigns.' + editor.mode() + '.step4');\n\n            $scope.media = editor.dataGet('media');\n\n            $scope.view = {\n                busy: false,\n                busyMedia: false,\n                mediaLoaded: false,\n                playerReady: false,\n                videoSet: false\n            };\n\n            if (hasVideo()) {\n                $scope.view.mediaLoaded = true;\n                if ($scope.view.playerReady) {\n                    $scope.setVideo();\n                }\n            }\n        };\n\n        function hasVideo() {\n            // if ( typeof $scope.media.video === 'string' ) {\n            if (typeof $scope.media.video === 'string' || typeof $scope.media.video_external_link === 'string') {\n                return true;\n            } else {\n                return false;\n            }\n        }\n\n        $scope.hasMedia = function () {\n            if (Object.getOwnPropertyNames($scope.media).length === 0) {\n                return false;\n            } else {\n                return true;\n            }\n        };\n\n        $scope.onPlayerReady = function (API) {\n            $scope.videogularApi = API;\n            if (hasVideo() && !$scope.view.videoSet) {\n                $scope.setVideo();\n            }\n        };\n\n        $scope.setVideo = function () {\n            // $scope.videogularApi.stop();\n            // var videoLink = $scope.media.video || $scope.media.video_external_link;\n            // $scope.videogular.sources = [\n            //     {src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4'}\n            // ];\n            // $scope.view.videoSet = true;\n\n            $scope.videogularApi.stop();\n\n            var videoLink = $scope.media.video || $scope.media.video_external_link;\n            if ($scope.media.video === null) {\n                $scope.externalLink = $sce.trustAsResourceUrl(videoLink);\n            } else {\n                $scope.videogular.sources = [{ src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4' }];\n            }\n\n            $scope.view.videoSet = true;\n        };\n\n        $scope.showMediaLibrary = function () {\n            var options = {\n                submit: function submit(selectedMedia) {\n                    $scope.getMedia(selectedMedia.id);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaLibraryModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/mediaLibraryModal/modalTmpl.html',\n                controller: 'mediaLibraryModalCtrl',\n                animation: 'am-fade-and-scale',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.showNewMediaDialog = function () {\n            var options = {\n                mode: 'campaignEditor',\n                submit: function submit(mediaId) {\n                    console.log('mediaId', mediaId);\n                    $scope.getMedia(mediaId);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newMediaModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/newMediaModal/modalTmpl.html',\n                controller: 'newMediaModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.getMedia = function (mediaId) {\n            $scope.view.busyMedia = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.media = mediaItem;\n                $scope.view.busyMedia = false;\n                $scope.setVideo();\n                $scope.view.mediaLoaded = true;\n            }, function () {\n                $scope.view.busyMedia = false;\n            });\n        };\n\n        $scope.showErrors = function () {\n            return editor.stepGet('step4', 'submitted');\n        };\n\n        $scope.previousStep = function () {\n            $state.go('campaigns.' + editor.mode() + '.step3');\n        };\n\n        $scope.nextStep = function () {\n\n            editor.stepSet('step4', 'submitted', true);\n\n            if ($scope.form1.$valid) {\n\n                editor.stepSet('step4', 'valid', true);\n                editor.dataSet('media', $scope.media);\n\n                editor.save('step4').then(function () {\n                    $state.go('campaigns.' + editor.mode() + '.step5');\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            } else {\n                editor.stepSet('step4', 'valid', false);\n            }\n        };\n\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - media', angular.copy($scope.media));\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep5Ctrl', ['$scope', '$state', 'utils', '$modal', 'errorHandler', 'campaignsService', 'campaignEditorService', 'productsService', function ($scope, $state, utils, $modal, errorHandler, campaignsService, campaignEditorService, productsService) {\n\n        var editor = campaignEditorService;\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.urlRegex = utils.urlRegex();\n\n        $scope.products = [];\n        $scope.recommendedProducts = [];\n\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-chevron-left\"></span>', '<span class=\"glyphicon glyphicon-chevron-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n\n        var init = function init() {\n\n            if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid') || !editor.stepGet('step4', 'valid')) {\n                $state.go(editor.previousState());\n            }\n\n            editor.currentStep('step5');\n            editor.previousState('campaigns.' + editor.mode() + '.step5');\n\n            $scope.products = editor.dataGet('products');\n\n            productsService.getProducts({ limit: 16, offset: 0, ordering: '-last_used_date' }).then(function (products) {\n                $scope.recommendedProducts = products.items;\n            });\n\n            $scope.view = {\n                busy: false,\n                submitted: false\n            };\n        };\n\n        $scope.hasProducts = function () {\n            return !_.isEmpty($scope.products);\n        };\n\n        $scope.showErrors = function () {\n            return editor.stepGet('step5', 'submitted');\n        };\n\n        $scope.skipStep = function () {\n            editor.stepSet('step5', 'submitted', true);\n            editor.stepSet('step5', 'valid', true);\n            $state.go('campaigns.' + editor.mode() + '.step6');\n        };\n\n        $scope.previousStep = function () {\n            $state.go('campaigns.' + editor.mode() + '.step4');\n        };\n\n        $scope.nextStep = function () {\n\n            editor.stepSet('step5', 'submitted', true);\n\n            if ($scope.form1.$valid) {\n\n                editor.stepSet('step5', 'valid', true);\n                editor.dataSet('products', $scope.products);\n\n                editor.save('step5').then(function () {\n                    $state.go('campaigns.' + editor.mode() + '.step6');\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                });\n            } else {\n                editor.stepSet('step5', 'valid', false);\n            }\n        };\n\n        $scope.selectRecommendedProduct = function (selectedProduct) {\n\n            // var index = _.findIndex( $scope.recommendedProducts, function( product ) { return  product.id == selectedProduct.id });\n            // console.log('index', index);\n            // $scope.recommendedProducts.splice( index, 1 )\n\n            $scope.products.unshift(selectedProduct);\n        };\n\n        $scope.showProductsLibrary = function () {\n            var options = {\n                submit: function submit(selectedProduct) {\n                    $scope.products.unshift(selectedProduct);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/producstLibraryModal/modalTmpl.html',\n                // templateUrl: '/panel-module/components/producstLibraryModal/modalTmpl.html',\n                controller: 'producstLibraryModalCtrl',\n                animation: 'am-fade-and-scale',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.showNewProductDialog = function () {\n            var options = {\n                mode: 'campaignEditor',\n                submit: function submit(newProduct) {\n                    console.log('newProduct', newProduct);\n                    $scope.products.unshift(newProduct);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newProductModal/modalTmpl.html',\n                // templateUrl: '/panel-module/components/newProductModal/modalTmpl.html',\n                controller: 'newProductModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.removeProduct = function (index) {\n            $scope.products.splice(index, 1);\n            return;\n        };\n\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - products', angular.copy($scope.products));\n            return;\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignEditorStep6Ctrl', ['$scope', '$state', '$sce', 'utils', '$modal', 'campaignsService', 'campaignEditorService', 'errorHandler', function ($scope, $state, $sce, utils, $modal, campaignsService, campaignEditorService, errorHandler) {\n\n        var editor = campaignEditorService;\n\n        $scope.videogularApi = null;\n\n        $scope.campaign = {};\n        $scope.media = {};\n        $scope.products = [];\n        $scope.videogular = { sources: [] };\n\n        $scope.view = {\n            loading: true,\n            playerReady: false,\n            videoSet: false\n        };\n\n        $scope.externalLink = null;\n\n        var init = function init() {\n\n            if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid') || !editor.stepGet('step4', 'valid') || !editor.stepGet('step5', 'valid')) {\n                $state.go(editor.previousState());\n            }\n\n            editor.currentStep('step6');\n            editor.previousState('campaigns.' + editor.mode() + '.step6');\n\n            $scope.campaignId = editor.dataGet('campaignId');\n\n            $scope.view.loading = true;\n\n            campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n\n                $scope.campaign = campaign;\n\n                if (campaign.media.length > 0 && _typeof(campaign.media[0]) === 'object') {\n                    $scope.media = campaign.media[0];\n                    $scope.setVideo();\n                }\n\n                if (campaign.products.length > 0) {\n                    $scope.products = campaign.products;\n                }\n\n                $scope.view.loading = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.onPlayerReady = function (API) {\n            $scope.videogularApi = API;\n            $scope.view.playerReady = true;\n            $scope.setVideo();\n        };\n\n        $scope.setVideo = function () {\n            // $scope.videogularApi.stop();\n            // $scope.videogular.sources = [\n            //     {src: $sce.trustAsResourceUrl($scope.media.video), type: 'video/mp4'}\n            // ];\n            // $scope.view.videoSet = true;\n\n            $scope.videogularApi.stop();\n\n            var videoLink = $scope.media.video || $scope.media.video_external_link;\n            if ($scope.media.video === null) {\n                $scope.externalLink = $sce.trustAsResourceUrl(videoLink);\n            } else {\n                $scope.videogular.sources = [{ src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4' }];\n            }\n\n            $scope.view.videoSet = true;\n        };\n\n        $scope.previousStep = function () {\n            $state.go('campaigns.' + editor.mode() + '.step5');\n        };\n\n        $scope.finish = function () {\n            campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                $state.go('campaigns');\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.hasProducts = function () {\n            return $scope.products.length > 0 ? true : false;\n        };\n\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - media', angular.copy($scope.campaign), angular.copy($scope.media), angular.copy($scope.products));\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('permissionsService', ['statePermissions', 'authService', function (statePermissions, authService) {\n        return {\n            userHasAccess: userHasAccess\n        };\n        function userHasAccess(stateName) {\n            var usertype = authService.getUsertype();\n            return _.contains(statePermissions[usertype], stateName);\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('campaignEditorService', ['$q', 'campaignsService', 'clientsService', 'productsService', function ($q, campaignsService, clientsService, productsService) {\n        var view = {};\n        var data = {};\n        var flags = {};\n\n        return {\n            init: init,\n            flag: flag,\n            mode: mode,\n            save: save,\n            currentStep: currentStep,\n            previousState: previousState,\n            stepGet: stepGet,\n            stepSet: stepSet,\n            dataGet: dataGet,\n            dataSet: dataSet,\n            logData: logData\n        };\n\n        function init(campaignId) {\n\n            view = {\n                currentStep: 'step1',\n                previousState: 'campaigns.new.step1',\n                'step1': {\n                    valid: false,\n                    submitted: false\n                },\n                'step2': {\n                    valid: false,\n                    submitted: false\n                },\n                'step3': {\n                    valid: false,\n                    submitted: false\n                },\n                'step4': {\n                    valid: false,\n                    submitted: false\n                },\n                'step5': {\n                    valid: false,\n                    submitted: false\n                },\n                'step6': {\n                    valid: false,\n                    submitted: false\n                }\n            };\n\n            data = {\n                campaignId: undefined,\n                campaign: {\n                    name: undefined,\n                    start_date: undefined,\n                    end_date: undefined,\n                    budget: undefined\n                },\n                targeting: {},\n                media: [],\n                products: []\n            };\n\n            flags = {\n                mode: 'new',\n                campaignLoaded: false\n            };\n\n            if (typeof campaignId !== 'undefined') {\n                flag('mode', 'edit');\n                dataSet('campaignId', campaignId);\n            }\n        }\n\n        function mode() {\n            return flags.mode;\n        }\n\n        function flag(name, val) {\n            if (typeof val !== 'undefined') {\n                flags[name] = val;\n            } else {\n                if (typeof flags[name] !== 'undefined') {\n                    return flags[name];\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        function currentStep(step) {\n            if (typeof step === 'string') {\n                view.currentStep = step;\n            } else {\n                return view.currentStep;\n            }\n        }\n\n        function previousState(state) {\n            if (typeof state === 'string') {\n                view.previousState = state;\n            } else {\n                return view.previousState;\n            }\n        }\n\n        function stepGet(step, prop) {\n            if (typeof step !== 'string') {\n                return false;\n            }\n            if (typeof prop === 'string') {\n                return angular.copy(view[step][prop]);\n            }\n            return angular.copy(view[step]);\n        }\n\n        function stepSet(step, prop, val) {\n            if (typeof step !== 'string' || typeof prop !== 'string' || typeof val === 'undefined') {\n                return false;\n            }\n            view[step][prop] = val;\n            return stepGet(step);\n        }\n\n        function dataGet(prop) {\n            if (typeof prop !== 'undefined') {\n                if (typeof data[prop] !== 'undefined') {\n                    return angular.copy(data[prop]);\n                } else {\n                    return false;\n                }\n            }\n            return angular.copy(data);\n        }\n\n        function dataSet(prop, val) {\n            if (typeof prop !== 'string' || typeof val === 'undefined') {\n                return false;\n            }\n            data[prop] = val;\n            return dataGet();\n        }\n\n        function save(step) {\n            if (step === 'step1') {\n                return saveStep1();\n            } else if (step === 'step2') {\n                return saveStep2();\n            } else if (step === 'step3') {\n                return saveStep3();\n            } else if (step === 'step4') {\n                return saveStep4();\n            } else if (step === 'step5') {\n                return saveStep5();\n            }\n        }\n\n        function saveStep1() {\n\n            var deferred = $q.defer();\n\n            var campaign = dataGet('campaign');\n\n            saveCampagin(deferred);\n\n            return deferred.promise;\n        }\n\n        function saveCampagin(deferred) {\n\n            var campaign = dataGet('campaign');\n\n            var campaignData = {\n                name: campaign.name,\n                start_date: campaign.start_date,\n                end_date: campaign.end_date,\n                budget: campaign.budget\n            };\n\n            if (dataGet('campaignId')) {\n                campaignData.id = dataGet('campaignId');\n            }\n\n            campaignsService.saveCampagin(campaignData).then(function (campaign) {\n                dataSet('campaignId', campaign.id);\n                deferred.resolve(dataGet('campaign'));\n            }, function (response) {\n                deferred.reject(response);\n            });\n        }\n\n        function saveStep2() {\n\n            var deferred = $q.defer();\n\n            saveCampagin(deferred);\n\n            return deferred.promise;\n        }\n\n        function saveStep3() {\n\n            var deferred = $q.defer();\n\n            saveCampagin(deferred);\n\n            return deferred.promise;\n        }\n\n        function saveStep4() {\n\n            var deferred = $q.defer();\n\n            var media = dataGet('media');\n\n            var mediaData = {\n                campaignId: dataGet('campaignId'),\n                media: media.id,\n                media_title: 'empty',\n                media_description: 'empty'\n            };\n\n            campaignsService.saveMedia(mediaData).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveStep5() {\n\n            var deferred = $q.defer();\n\n            var campaignId = dataGet('campaignId');\n            var products = dataGet('products');\n\n            productsService.updateProducts(products).then(function () {\n                campaignsService.saveProducts(campaignId, products).then(function (campaign) {\n                    deferred.resolve(campaign);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function logData() {\n            console.log('campaignEditorService - data', angular.copy(data));\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('kachingZonecampaignEditorService', ['$q', 'campaignsService', 'clientsService', 'productsService', function ($q, campaignsService, clientsService, productsService) {\n\n        var view = {};\n        var data = {};\n        var flags = {};\n\n        return {\n            init: init,\n            flag: flag,\n            mode: mode,\n            save: save,\n            currentStep: currentStep,\n            previousState: previousState,\n            stepGet: stepGet,\n            stepSet: stepSet,\n            dataGet: dataGet,\n            dataSet: dataSet,\n            logData: logData\n        };\n\n        // Public function\n\n        function init(campaignId) {\n\n            view = {\n                currentStep: 1,\n                previousState: 1,\n                'step1': {\n                    valid: false,\n                    submitted: false\n                },\n                'step2': {\n                    valid: false,\n                    submitted: false\n                },\n                'step3': {\n                    valid: false,\n                    submitted: false\n                },\n                'step4': {\n                    valid: false,\n                    submitted: false\n                }\n            };\n\n            data = {\n                campaignId: undefined,\n                campaign: {\n                    type: undefined,\n                    name: undefined,\n                    client: '',\n                    start_date: undefined,\n                    end_date: undefined,\n                    // budget: undefined,\n                    logo_image: undefined,\n                    header_image: undefined,\n                    description: '',\n                    logo_description: '',\n                    header_description: ''\n                },\n                targeting: {\n                    // os: undefined,\n                    // gender: undefined,\n                    // ageRange: undefined,\n                    // locations: undefined,\n                    // categories: undefined\n                },\n                // media: {},\n                media: [],\n                products: []\n            };\n\n            flags = {\n                mode: 'new'\n            };\n\n            if (typeof campaignId !== 'undefined') {\n                flag('mode', 'edit');\n                dataSet('campaignId', campaignId);\n            }\n        }\n\n        function flag(name, val) {\n            if (typeof val !== 'undefined') {\n                flags[name] = val;\n            } else {\n                if (typeof flags[name] !== 'undefined') {\n                    return flags[name];\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        function mode() {\n            return flags.mode;\n        }\n\n        function save(step) {\n            if (step === 'step1') {\n                return saveStep1();\n            } else if (step === 'step2') {\n                return saveStep2();\n            } else if (step === 'step3') {\n                return saveStep3();\n            } else if (step === 'step4') {\n                return saveStep4();\n            }\n        }\n\n        function currentStep(step) {\n            if (typeof step === 'string') {\n                view.currentStep = step;\n            } else {\n                return view.currentStep;\n            }\n        }\n\n        function previousState(state) {\n            if (typeof state === 'string') {\n                view.previousState = state;\n            } else {\n                return view.previousState;\n            }\n        }\n\n        function stepGet(step, prop) {\n            if (typeof step !== 'string') {\n                return false;\n            }\n            if (typeof prop === 'string') {\n                return angular.copy(view[step][prop]);\n            }\n            return angular.copy(view[step]);\n        }\n\n        function stepSet(step, prop, val) {\n            if (typeof step !== 'string' || typeof prop !== 'string' || typeof val === 'undefined') {\n                return false;\n            }\n            view[step][prop] = val;\n            return stepGet(step);\n        }\n\n        function dataGet(prop) {\n            if (typeof prop !== 'undefined') {\n                if (typeof data[prop] !== 'undefined') {\n                    // return angular.copy(data[prop]);\n                    return _.clone(data[prop]);\n                } else {\n                    return false;\n                }\n            }\n            // return angular.copy(data);\n            return _.clone(data);\n        }\n\n        function dataSet(prop, val) {\n            if (typeof prop !== 'string' || typeof val === 'undefined') {\n                return false;\n            }\n            data[prop] = val;\n            return dataGet();\n        }\n\n        function logData() {\n            console.log('campaignEditorService - data', angular.copy(data));\n        }\n\n        // Private function\n\n        function b64toBlob(b64Data, contentType, sliceSize) {\n            b64Data = b64Data.substring(22);\n            contentType = contentType || '';\n            sliceSize = sliceSize || 512;\n\n            var byteCharacters = atob(b64Data);\n            var byteArrays = [];\n\n            for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n                var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n                var byteNumbers = new Array(slice.length);\n                for (var i = 0; i < slice.length; i++) {\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n\n                var byteArray = new Uint8Array(byteNumbers);\n\n                byteArrays.push(byteArray);\n            }\n\n            var blob = new Blob(byteArrays, { type: contentType });\n            return blob;\n        }\n\n        function saveCampagin() {\n\n            var deferred = $q.defer();\n            var campaign = dataGet('campaign');\n            var campaignData = {\n                id: dataGet('campaignId') || campaign.id,\n                type: campaign.type,\n                name: campaign.name,\n                // client: campaign.customerName,\n                start_date: campaign.start_date,\n                end_date: campaign.end_date,\n                fund: campaign.fund,\n                // description: campaign.description,\n                register: campaign.register || 0,\n                newFund: campaign.newFund\n            };\n\n            campaignData.client = campaign.client || '';\n            campaignData.description = campaign.description || '';\n            campaignData.logo_description = campaign.logo_description || '';\n            campaignData.header_description = campaign.header_description || '';\n\n            if (campaign.logo_image !== null && _typeof(campaign.logo_image) === 'object') {\n                campaignData.logo_image = campaign.logo_image;\n            } else {\n                if (typeof campaign.logo_image === 'string' && campaign.logo_image.indexOf('base64') > -1) {\n                    var blob = b64toBlob(campaign.logo_image, 'image/jpeg');\n                    var file = new File([blob], 'logo_image.jpeg');\n                    campaignData.logo_image = file;\n                }\n            }\n\n            if (campaign.header_image !== null && _typeof(campaign.header_image) === 'object') {\n                campaignData.header_image = campaign.header_image;\n            } else {\n                if (typeof campaign.header_image === 'string' && campaign.header_image.indexOf('base64') > -1) {\n                    var headerBlob = b64toBlob(campaign.header_image, 'image/jpeg');\n                    var headerFile = new File([headerBlob], 'header_image.jpeg');\n                    campaignData.header_image = headerFile;\n                }\n            }\n\n            campaignsService.saveKachingZoneCampagin(campaignData).then(function (campaign) {\n                dataSet('campaignId', campaign.id);\n                dataSet('campaign', campaign);\n                deferred.resolve(dataGet('campaign'));\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveTargeting() {\n\n            var deferred = $q.defer();\n            var targetingData = dataGet('targeting');\n            var selectedCountry = dataGet('selectedCountry');\n\n            campaignsService.saveTargeting(dataGet('campaignId'), targetingData).then(function (targeting) {\n                // dataSet('targeting', targeting);\n                deferred.resolve(dataGet('targeting'));\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveCampaignBudget() {\n\n            var deferred = $q.defer();\n\n            var budgeting = dataGet('budgeting');\n\n            campaignsService.saveCampaignBudget(dataGet('campaignId'), budgeting, budgeting.hasBudget, budgeting.id).then(function (budgeting) {\n                dataSet('budgeting', budgeting);\n                deferred.resolve(dataGet('budgeting'));\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        // function updateFund(id) {\n        //\n        //     var deferred = $q.defer();\n        //\n        //     // campaignsService.saveTargeting(dataGet('campaignId'), targetingData).then(\n        //     //     function(targeting) {\n        //     //         // dataSet('targeting', targeting);\n        //     //         deferred.resolve(dataGet('targeting'));\n        //     //     },\n        //     //     function(response) {\n        //     //         deferred.reject(response);\n        //     //     }\n        //     // );\n        //\n        //     return deferred.promise;\n        // }\n\n        function saveStep1() {\n\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise];\n\n            var campaign = dataGet('campaign');\n            var data = {};\n\n            saveCampagin().then(function (campaign) {\n                data.campaign = campaign;\n                deferred1.resolve();\n                saveTargeting().then(function (targeting) {\n                    data.targeting = targeting;\n                    deferred2.resolve();\n                }, function (response) {\n                    deferred2.reject(response);\n                });\n                saveCampaignBudget().then(function (budgeting) {\n                    data.budgeting = budgeting;\n                    deferred3.resolve();\n                }, function (response) {\n                    deferred3.reject(response);\n                });\n            }, function (response) {\n                deferred1.reject(response);\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve(data);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveStep2() {\n\n            var deferred = $q.defer();\n\n            var media = dataGet('media');\n\n            var mediaData = {\n                campaignId: dataGet('campaignId'),\n                media: media.id,\n                // media_title:  media.media_title,\n                // media_description:  media.media_description\n                media_title: 'empty',\n                media_description: 'empty'\n            };\n\n            campaignsService.saveMedia(mediaData).then(function () {\n                //dataSet('campaignId', campaign.id );\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveStep3() {\n\n            var deferred = $q.defer();\n\n            saveCampagin(deferred);\n\n            return deferred.promise;\n        }\n\n        function saveStep4() {}\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('campaignsService', ['$q', 'apiService', function ($q, apiService) {\n\n        return {\n            getCampaigns: getCampaigns,\n            getCampaign: getCampaign,\n            saveCampagin: saveCampagin,\n            deleteCampaign: deleteCampaign,\n            saveProducts: saveProducts,\n            saveMedia: saveMedia,\n            stopCampaign: stopCampaign,\n            startCampaign: startCampaign,\n            setPrepared: setPrepared,\n            saveTargeting: saveTargeting,\n            getTargeting: getTargeting,\n            getEstimatedViews: getEstimatedViews,\n            getCampaignBudget: getCampaignBudget,\n            saveCampaignBudget: saveCampaignBudget,\n            updateMedia: updateMedia,\n            deleteMedia: deleteMedia,\n            saveKachingZoneCampagin: saveKachingZoneCampagin,\n            updateMediaProduct: updateMediaProduct,\n            updateMediaQuestion: updateMediaQuestion,\n            updateMediaInstoreRewards: updateMediaInstoreRewards,\n            generateInStoreReward: generateInStoreReward\n        };\n\n        function getCampaigns(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 10,\n                offset: 0,\n                ordering: '-id'\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('ordering' in params) {\n                    requestParams.ordering = params.ordering;\n                }\n                if ('name' in params) {\n                    requestParams.name = params.name;\n                }\n                if ('client' in params) {\n                    requestParams.client = params.client;\n                }\n                if ('media_title' in params) {\n                    requestParams.media_title = params.media_title;\n                }\n                if ('start_date' in params) {\n                    requestParams.start_date = params.start_date;\n                }\n                if ('end_date' in params) {\n                    requestParams.end_date = params.end_date;\n                }\n                if ('status' in params) {\n                    requestParams.status = params.status;\n                }\n            }\n\n            apiService.get('/campaigns/', requestParams, true).then(function (response) {\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getCampaign(campaignId) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/campaigns/' + campaignId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteCampaign(campaignId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/campaigns/' + campaignId + '/', false, true).then(function (response) {\n                console.log('deleteCampaign() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('deleteCampaign() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function stopCampaign(campaignId) {\n            return changeCampaignStatus(campaignId, 5);\n        }\n\n        function startCampaign(campaignId) {\n            return changeCampaignStatus(campaignId, 3);\n        }\n\n        function setPrepared(campaignId) {\n            return changeCampaignStatus(campaignId, 2);\n        }\n\n        function changeCampaignStatus(campaignId, status) {\n\n            var deferred = $q.defer();\n\n            var data = { status: status };\n\n            apiService.put('/campaigns/' + campaignId + '/status/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveCampagin(campaign) {\n\n            var deferred = $q.defer();\n\n            if (typeof campaign.id === 'undefined') {\n                apiService.post('/campaigns/', campaign, true).then(function (response) {\n                    console.log('saveCampaign() success', response);\n                    deferred.resolve(response);\n                }, function (response) {\n                    console.log('saveCampaign() failure', response);\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.patch('/campaigns/' + campaign.id + '/', campaign, true).then(function (response) {\n                    console.log('saveCampaign() success', response);\n                    deferred.resolve(response);\n                }, function (response) {\n                    console.log('saveCampaign() failure', response);\n                    deferred.reject(response);\n                });\n            }\n            return deferred.promise;\n        }\n\n        function saveKachingZoneCampagin(campaign) {\n\n            var deferred = $q.defer();\n\n            if (typeof campaign.id === 'undefined') {\n                apiService.postMultiPart('/campaigns/', campaign, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                var campaignData = undefined;\n\n                apiService.patchMultiPart('/campaigns/' + campaign.id + '/', campaign, true).then(function (response) {\n                    campaignData = response;\n                    var fundData = {\n                        fund: campaign.newFund || 0\n                    };\n                    apiService.post('/campaigns/' + campaign.id + '/addFund/', fundData, true).then(function (response) {\n                        deferred.resolve(campaignData);\n                    }, function (response) {\n                        deferred.reject(response);\n                    });\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n            return deferred.promise;\n        }\n\n        function saveMedia(data) {\n\n            var deferred = $q.defer();\n\n            var campaignId = data.campaignId;\n            delete data.campaignId;\n\n            apiService.patch('/campaigns/' + campaignId + '/media/', data, true).then(function (response) {\n                console.log('saveMedia() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('saveMedia() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveProducts(campaignId, products) {\n\n            var deferred = $q.defer();\n\n            var productsData = {\n                products: []\n            };\n\n            angular.forEach(products, function (product) {\n                productsData.products.push(product.id);\n            });\n\n            apiService.patch('/campaigns/' + campaignId + '/products/', productsData, true).then(function (response) {\n                console.log('saveProducts() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('saveProducts() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getTargetingLocations(selectedLocations) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/countries/', null, true).then(function (response) {\n\n                // var allLocations = true;\n                // var locations = [];\n                //\n                // angular.forEach( response, function( name, id ){\n                //\n                //     // id = parseInt( id );\n                //     id = parseInt(name.id);\n                //     var item = { id: id, name: name, selected: true };\n                //\n                //     if ( typeof selectedLocations !== 'undefined'  && selectedLocations.indexOf( id ) === -1 ) {\n                //         item.selected = false;\n                //         allLocations = false;\n                //     }\n                //\n                //     locations.push( item );\n                // });\n                //\n                // deferred.resolve({\n                //     allLocations: allLocations,\n                //     locations: locations\n                // });\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getTargetingCategories(selectedCategories) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/campaigns/categories/', null, true).then(function (response) {\n\n                var allCategories = true;\n                var categories = [];\n\n                angular.forEach(response, function (name, id) {\n\n                    id = parseInt(id);\n                    var item = { id: id, name: name, selected: true };\n\n                    if (typeof selectedCategories !== 'undefined' && selectedCategories.indexOf(id) === -1) {\n                        item.selected = false;\n                        allCategories = false;\n                    }\n\n                    categories.push(item);\n                });\n\n                deferred.resolve({\n                    allCategories: allCategories,\n                    categories: categories\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getAgeRanges() {\n            return [{ value: 0, label: 'Any' }, { value: 2130, label: '21 - 30' }, { value: 3145, label: '31 - 45' }, { value: 4660, label: '46 - 60' }, { value: 6180, label: '61 - 80' }];\n        }\n\n        function getTargeting(campaignId) {\n\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            var data = {\n                gender: {},\n                os: {}\n            };\n\n            if (typeof campaignId === 'undefined') {\n\n                getTargetingCategories().then(function (response) {\n                    data.allCategories = response.allCategories;\n                    data.categories = response.categories;\n                    deferred1.resolve();\n                }, function (response) {\n                    deferred1.reject(response);\n                });\n\n                getTargetingLocations().then(function (response) {\n                    data.allLocations = response.allLocations;\n                    data.locations = response;\n                    data.selectedCountry = response.selectedCountry || _.findWhere(response, { alpha2_code: kachingAppConfig.localeData ? kachingAppConfig.localeData.country : 'SG' }) || _.findWhere(response, { alpha2_code: 'SG' });\n                    deferred2.resolve();\n                }, function (response) {\n                    deferred2.reject(response);\n                });\n\n                $q.all(promisses).then(function () {\n                    data.gender = { male: true, female: true };\n                    data.os = { android: true, ios: true };\n                    data.ageRanges = getAgeRanges();\n                    data.ageRange = data.ageRanges[0];\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n\n                apiService.get('/campaigns/' + campaignId + '/targeting_options/', false, true).then(function (targetingData) {\n                    data.selectedCountry = targetingData.location[0] || undefined;\n\n                    getTargetingCategories(targetingData.app_categories).then(function (response) {\n                        data.allCategories = response.allCategories;\n                        data.categories = response.categories;\n                        deferred1.resolve();\n                    }, function (response) {\n                        deferred1.reject(response);\n                    });\n\n                    getTargetingLocations().then(function (response) {\n                        // data.allLocations = response.allLocations;\n                        // data.locations    = response.locations;\n                        data.locations = response;\n\n                        if (!data.selectedCountry) {\n                            data.selectedCountry = _.findWhere(response, { alpha2_code: kachingAppConfig.localeData.country }) || _.findWhere(response, { alpha2_code: 'SG' });\n                        } else {\n                            data.selectedCountry = _.findWhere(response, { id: data.selectedCountry });\n                        }\n                        deferred2.resolve();\n                    }, function (response) {\n                        deferred2.reject(response);\n                    });\n\n                    $q.all(promisses).then(function () {\n\n                        // gender: 'F', 'M', 'A' (M+F)\n                        data.gender.male = targetingData.gender === 'M' || targetingData.gender === 'A' ? true : false;\n                        data.gender.female = targetingData.gender === 'F' || targetingData.gender === 'A' ? true : false;\n\n                        // os: 0 - any, 1 - android, 2 - ios\n                        data.os.android = targetingData.os === 1 || targetingData.os === 0 ? true : false;\n                        data.os.ios = targetingData.os === 2 || targetingData.os === 0 ? true : false;\n\n                        // Age ranges\n                        data.ageRanges = getAgeRanges();\n\n                        if (targetingData.age_range.length > 1) {\n                            data.ageRange = data.ageRanges[0];\n                        } else {\n                            var selectedAgeRange = targetingData.age_range[0];\n                            data.ageRange = _.findWhere(data.ageRanges, { value: selectedAgeRange });\n                        }\n\n                        deferred.resolve(data);\n                    }, function (response) {\n                        deferred.reject(response);\n                    });\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        function saveTargeting(campaignId, settings) {\n\n            var deferred = $q.defer();\n            var data = {};\n            var error = {\n                validationErrors: {}\n            };\n\n            // Operating system\n            if (settings.os.android === true && settings.os.ios === true) {\n                data.os = 0;\n            } else if (settings.os.android === true) {\n                data.os = 1;\n            } else if (settings.os.ios === true) {\n                data.os = 2;\n            } else {\n                error.validationErrors.os = true;\n            }\n\n            // Gender\n            if (settings.gender.male === true && settings.gender.female === true) {\n                data.gender = 'A';\n            } else if (settings.gender.male === true) {\n                data.gender = 'M';\n            } else if (settings.gender.female === true) {\n                data.gender = 'F';\n            } else {\n                error.validationErrors.gender = true;\n            }\n\n            // Age range\n            if (settings.ageRange.value === 0) {\n                data.age_range = [];\n                angular.forEach(getAgeRanges(), function (range) {\n                    if (range.value !== 0) {\n                        data.age_range.push(range.value);\n                    }\n                });\n            } else {\n                data.age_range = [settings.ageRange.value];\n            }\n\n            // Locations\n            // data.location = [];\n            // angular.forEach( settings.locations, function( location ){\n            //     if ( settings.allLocations === true || location.selected === true ) {\n            //         data.location.push( location.id );\n            //     }\n            // });\n            data.location = [];\n            data.location.push(settings.locations.id);\n            if (data.location.length === 0) {\n                error.validationErrors.locations = true;\n            }\n\n            // Categories\n            data.app_categories = [];\n            angular.forEach(settings.categories, function (category) {\n                if (settings.allCategories === true || category.selected === true) {\n                    data.app_categories.push(category.id);\n                }\n            });\n            if (data.app_categories.length === 0) {\n                error.validationErrors.categories = true;\n            }\n\n            if (_.isEmpty(error.validationErrors)) {\n                // Save data in the backend\n                apiService.put('/campaigns/' + campaignId + '/targeting_options/', data, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                deferred.reject(error);\n            }\n\n            return deferred.promise;\n        }\n\n        function getEstimatedViews(campaignId, cpv) {\n\n            var deferred = $q.defer();\n            var requestParams = {};\n\n            if (typeof cpv !== 'undefined') {\n                requestParams.cpv = cpv;\n            }\n\n            apiService.get('/campaigns/' + campaignId + '/estimated_views/', requestParams, true).then(function (response) {\n                console.log('getEstimatedViews() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getEstimatedViews() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getCampaignBudget(campaignId) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/campaigns/' + campaignId + '/budget/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveCampaignBudget(campaignId, data, hasBudget, budgetId) {\n\n            var deferred = $q.defer();\n\n            if (hasBudget) {\n                apiService.put('/campaigns/' + campaignId + '/budget/' + budgetId + '/', data, true).then(function (response) {\n                    console.log('saveCampaignBudget() success', response);\n                    deferred.resolve(response);\n                }, function (response) {\n                    console.log('saveCampaignBudget() failure', response);\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.post('/campaigns/' + campaignId + '/budget/', data, true).then(function (response) {\n                    console.log('saveCampaignBudget() success', response);\n                    deferred.resolve(response);\n                }, function (response) {\n                    console.log('saveCampaignBudget() failure', response);\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        function campaignHasBudget(campaignId) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/campaigns/' + campaignId + '/budget/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateMedia(media) {\n\n            var deferred = $q.defer();\n\n            apiService.patch('/media/' + media.id + '/', media, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteMedia(campaignId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/media/' + campaignId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateMediaProduct(media) {\n\n            var deferred = $q.defer();\n\n            apiService.patch('/media/' + media.id + '/products/', media, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateMediaQuestion(media) {\n\n            var deferred = $q.defer();\n\n            apiService.patch('/media/' + media.id + '/questions/', media, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateMediaInstoreRewards(media) {\n            var deferred = $q.defer();\n            apiService.post('/media/' + media.id + '/instoreRewards/', media.instore_rewards, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        }\n\n        function generateInStoreReward(media, reward) {\n            var deferred = $q.defer();\n            apiService.post('/media/' + media.id + '/instoreReward/', reward, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('analyticsService', ['$q', 'apiService', function ($q, apiService) {\n\n        return {\n            getStatisticCampaigns: getStatisticCampaigns\n        };\n\n        function getStatisticCampaigns(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                page_size: 10,\n                page: 1\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('page_size' in params) {\n                    requestParams.page_size = params.page_size;\n                }\n                if ('page' in params) {\n                    requestParams.page = params.page;\n                }\n            }\n\n            apiService.get('/users/profile/statistic-campaigns/', requestParams, true).then(function (response) {\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results,\n                    next: response.next,\n                    previous: response.previous\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('clientsService', ['$q', 'apiService', function ($q, apiService) {\n        return {\n            getClients: getClients,\n            saveClient: saveClient\n        };\n        function getClients() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/clients/', false, true).then(function (response) {\n                console.log('getClients() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getClients() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveClient(name) {\n\n            var deferred = $q.defer();\n\n            var data = { name: name };\n\n            apiService.post('/clients/', data, true).then(function (client) {\n                console.log('saveClient() success', client);\n                getClients().then(function (clients) {\n                    deferred.resolve(client, clients);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }, function (response) {\n                console.log('saveClient() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('mediaService', ['$q', 'apiService', function ($q, apiService) {\n        return {\n            getMedia: getMedia,\n            getMediaItem: getMediaItem,\n            deleteMedia: deleteMedia,\n            createMedia: createMedia,\n            updateMedia: updateMedia,\n            updateBeacons: updateBeacons,\n            imageSizeHelper: imageSizeHelper,\n            imageSizeValid: imageSizeValid,\n            createMediaNew: createMediaNew,\n            saveKachingZoneMedia: saveKachingZoneMedia,\n            getShapes: getShapes,\n            getMarkerStand: getMarkerStand,\n            getMarkerSize: getMarkerSize,\n            getMaterials: getMaterials,\n            updateReward: updateReward,\n            getMakerDimension: getMakerDimension,\n            getDistance: getDistance,\n            getGroups: getGroups,\n            saveGroups: saveGroups\n        };\n\n        function getMedia(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 6,\n                offset: 0,\n                ordering: 'name'\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('ordering' in params) {\n                    requestParams.ordering = params.ordering;\n                }\n                if ('name' in params) {\n                    requestParams.name = params.name;\n                }\n            }\n\n            apiService.get('/media/', requestParams, true).then(function (response) {\n                console.log('getMedia() success', response);\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results\n                });\n            }, function (response) {\n                console.log('getMedia() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getMediaItem(mediaId) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/media/' + mediaId + '/', false, true).then(function (response) {\n                console.log('getMediaItem() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getMediaItem() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteMedia(mediaId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/media/' + mediaId + '/', false, true).then(function (response) {\n                console.log('deleteMedia() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('deleteMedia() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createMedia(mediaName, externalLink) {\n\n            var deferred = $q.defer();\n\n            var data = {\n                name: mediaName\n            };\n            if (externalLink) {\n                data.video_external_link = externalLink;\n            }\n\n            apiService.post('/media/', data, true).then(function (response) {\n                console.log('getMediaItem() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getMediaItem() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createMediaNew(media) {\n\n            var deferred = $q.defer();\n\n            var mediaData = {\n                name: media.name,\n                description: media.description,\n                ar_name: media.ar_name,\n                ar_appearance: 2,\n                image_name: media.image_name,\n                image_format: 'bill_board',\n                latitude: 10.123223,\n                longitude: 11.22322,\n                inclusion_zone: 100.4,\n                inclusion_zone_unit: 'KM',\n                ar_resource_type: 'image',\n                ar_resource: media.arResource,\n                display: media.display,\n                floor: media.floor,\n                address_group: media.address_group\n            };\n\n            var data = new FormData();\n            data.append('name', mediaData.name);\n            data.append('description', mediaData.description);\n            data.append('ar_name', mediaData.ar_name);\n            data.append('ar_appearance', mediaData.ar_appearance);\n            data.append('image_name', mediaData.image_name);\n            data.append('image_format', mediaData.image_format);\n            data.append('latitude', mediaData.latitude);\n            data.append('longitude', mediaData.longitude);\n            data.append('inclusion_zone', mediaData.inclusion_zone);\n            data.append('inclusion_zone_unit', mediaData.inclusion_zone_unit);\n            data.append('ar_resource_type', mediaData.ar_resource_type);\n            data.append('ar_resource', mediaData.ar_resource);\n            data.append('display', mediaData.display);\n\n            apiService.postMultiPartForm('/media/', data, true).then(function (response) {\n                console.log('getMediaItem() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getMediaItem() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateMedia(mediaItem, externalLink, id) {\n            var deferred = $q.defer();\n\n            // var data = {\n            //     name: mediaItem.name\n            // };\n            var data = mediaItem;\n            if (externalLink) {\n                data.video_external_link = externalLink;\n            }\n\n            apiService.patch('/media/' + id + '/', data, true).then(function (response) {\n                console.log('updateMedia() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('updateMedia() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateBeacons(media, beacons) {\n            var deferred = $q.defer();\n\n            apiService.post('/media/' + media.id + '/beacons/', beacons, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function imageSizeHelper(imageFile) {\n\n            var deferred = $q.defer();\n\n            var reader = new FileReader();\n            reader.readAsDataURL(imageFile);\n            reader.onload = function (e) {\n                var image = new Image();\n                image.src = e.target.result;\n                image.onload = function () {\n                    deferred.resolve({\n                        width: this.width,\n                        height: this.height\n                    });\n                };\n            };\n\n            return deferred.promise;\n        }\n\n        function imageSizeValid(width, height) {\n            if (width !== 1280) {\n                return false;\n            }\n            if (height !== 1200) {\n                return false;\n            }\n            return true;\n        }\n\n        function saveKachingZoneMedia(media) {\n\n            var deferred = $q.defer();\n\n            if (typeof media.id === 'undefined') {\n                apiService.postMultiPart('/media/', media, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.patchMultiPart('/media/' + media.id + '/', media, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        // Api address groups control\n\n        function getGroups() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/address_groups/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveGroups(data) {\n\n            var deferred = $q.defer();\n\n            apiService.post('/address_groups/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n        // End Api address groups control\n\n        function getShapes() {\n            return [{\n                value: 'circle',\n                label: 'Circle'\n            }, {\n                value: 'rectangle',\n                label: 'Rectangle'\n            }, {\n                value: 'square',\n                label: 'Square'\n            }];\n        }\n\n        function getMarkerStand() {\n            return [{\n                value: 0,\n                label: 'None'\n            }, {\n                value: 1,\n                label: 'Medium'\n            }, {\n                value: 2,\n                label: 'High'\n            }];\n        }\n\n        function getMarkerSize() {\n            return [{\n                value: 2,\n                label: 'Large'\n            }, {\n                value: 1,\n                label: 'Medium'\n            }, {\n                value: 0,\n                label: 'Small'\n            }];\n        }\n\n        function getMaterials() {\n            return ['wood', 'steel', 'aluminium'];\n        }\n\n        function getMakerDimension() {\n            return [{\n                label: 'Small',\n                value: '100,100'\n            }, {\n                label: 'Medium',\n                value: '150,150'\n            }, {\n                label: 'Large',\n                value: '257,257'\n            }];\n        }\n\n        function getDistance() {\n            return [{\n                label: 'Very close (< 5m)',\n                value: 1\n            }, {\n                label: 'Close (< 20m)',\n                value: 10\n            }, {\n                label: 'Near by (100m)',\n                value: 100\n            }, {\n                label: 'Far (500m)',\n                value: 500\n            }, {\n                label: 'Very far away (1 km)',\n                value: 1000\n            }, {\n                label: '5km (developer mode only)',\n                value: 5000\n            }];\n        }\n\n        function updateReward(mediaId, data) {\n\n            var deferred = $q.defer();\n\n            apiService.post('/media/' + mediaId + '/reward/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('productsService', ['$http', '$q', 'apiService', function ($http, $q, apiService) {\n        return {\n            getProduct: getProduct,\n            getProducts: getProducts,\n            deleteProduct: deleteProduct,\n            updateProduct: updateProduct,\n            updateProducts: updateProducts,\n            searchExternalProducts: searchExternalProducts,\n            createProductFromExternal: createProductFromExternal,\n            createProduct: createProduct\n        };\n\n        function getProducts(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 6,\n                offset: 0,\n                ordering: 'title'\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('ordering' in params) {\n                    requestParams.ordering = params.ordering;\n                }\n                if ('title' in params) {\n                    requestParams.title = params.title;\n                }\n            }\n\n            apiService.get('/products/', requestParams, true).then(function (response) {\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getProduct(productId) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/products/' + productId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function searchExternalProducts(params) {\n\n            var deferred = $q.defer();\n\n            $http({\n                url: 'http://search.ulab.com/wrapper/get_data',\n                method: 'POST',\n                data: {\n                    url: 'http://staging.shopide.com/api/v1/products?search=' + encodeURIComponent(params.search) + '&page=' + params.page + '&per=' + params.per,\n                    type: 'GET'\n                },\n                headers: {\n                    Accept: 'application/vnd.ulab.v0+json'\n                }\n            }).then(function (response) {\n                console.log('searchExternalProducts() success', response);\n                deferred.resolve(JSON.parse(response.data.data));\n            }, function (response) {\n                console.log('searchExternalProducts() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteProduct(productId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/products/' + productId + '/', false, true).then(function (response) {\n                console.log('deleteProduct() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('deleteProduct() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateProduct(product) {\n\n            var deferred = $q.defer();\n\n            var data = {\n                title: product.title,\n                url: product.url,\n                price: product.price,\n                description: product.description\n            };\n\n            if (data.url.match(/^http[s]?:\\/\\//i) === null) {\n                data.url = 'http://' + data.url;\n            }\n\n            apiService.patch('/products/' + product.id + '/', data, true).then(function (response) {\n                console.log('updateProduct() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('updateProduct() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateProducts(products) {\n\n            var deferred = $q.defer();\n\n            var promisses = [];\n\n            angular.forEach(products, function (product) {\n\n                var prodDeferred = $q.defer();\n\n                promisses.push(prodDeferred.promise);\n\n                updateProduct(product).then(function (response) {\n                    prodDeferred.resolve(response);\n                }, function (response) {\n                    prodDeferred.reject(response);\n                });\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n\n            return deferred.promise;\n        }\n\n        function createProductFromExternal(product) {\n\n            var deferred = $q.defer();\n\n            var data = {\n                title: product.title,\n                description: product.description,\n                price: product.price,\n                image_url: product.image_url,\n                url: product.url,\n                external_id: product.external_id,\n                product: product.external_id + '.png'\n            };\n\n            if (data.url.match(/^http[s]?:\\/\\//i) === null) {\n                data.url = 'http://' + data.url;\n            }\n\n            apiService.post('/products/', data, true).then(function (response) {\n                console.log('createProductFromExternal() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('createProductFromExternal() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createProduct(product) {\n\n            var deferred = $q.defer();\n\n            if (typeof product.id === 'undefined') {\n                apiService.postMultiPart('/products/', product, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.patchMultiPart('/products/' + product.id + '/', product, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('questionsService', ['$http', '$q', 'apiService', function ($http, $q, apiService) {\n        return {\n            createQuestion: createQuestion,\n            createAnswer: createAnswer,\n            getQuestions: getQuestions,\n            getQuestionDetail: getQuestionDetail,\n            createAnswers: createAnswers,\n            deleteQuestion: deleteQuestion\n        };\n\n        function createQuestion(question) {\n\n            var deferred = $q.defer();\n\n            if (typeof question.id === 'undefined') {\n                apiService.post('/questions/', question, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.patch('/questions/' + question.id + '/', question, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        function createAnswer(data) {\n\n            var deferred = $q.defer();\n\n            var url = '/questions/' + data.questionID + '/createAnswer/';\n            var answer = {\n                content: data.content\n            };\n\n            apiService.post(url, answer, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getQuestions(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                page_size: 6,\n                page: 1\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('page_size' in params) {\n                    requestParams.page_size = params.page_size;\n                }\n                if ('page' in params) {\n                    requestParams.page = params.page;\n                }\n                // if ('ordering' in params) {\n                //     requestParams.ordering = params.ordering;\n                // }\n                if ('content' in params) {\n                    requestParams.content = params.content;\n                }\n            }\n\n            apiService.get('/questions/', requestParams, true).then(function (response) {\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getQuestionDetail(id) {\n            var deferred = $q.defer();\n\n            apiService.get('/questions/' + id + '/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createAnswers(data) {\n\n            var deferred = $q.defer();\n\n            var url = '/questions/' + data.questionID + '/answer/';\n            // var answer = {\n            //     content: data.content\n            // };\n\n            apiService.patch(url, data.contents, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteQuestion(id) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/questions/' + id + '/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('orderService', ['$http', '$q', 'ulabService', 'apiUlabService', function ($http, $q, ulabService, apiUlabService) {\n        return {\n            getOrderList: getOrderList,\n            updateOrder: updateOrder\n        };\n\n        function getOrderList() {\n            var deferred = $q.defer();\n\n            apiUlabService.post('/order/list', {}, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (error) {\n                deferred.reject(error);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateOrder(params) {\n            var deferred = $q.defer();\n\n            apiUlabService.post('/order/update?', params, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (error) {\n                deferred.reject(error);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('applicationsService', ['$q', 'apiService', 'userService', function ($q, apiService, userService) {\n        return {\n            getApps: getApps,\n            deleteApp: deleteApp,\n            addApp: addApp,\n            updateApp: updateApp,\n            getCategories: getCategories\n        };\n        function getApps(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 10,\n                offset: 0\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('name' in params) {\n                    requestParams.name = params.name;\n                }\n                if ('api_key' in params) {\n                    requestParams.api_key = params.api_key;\n                }\n            }\n\n            apiService.get('/applications/', requestParams, true).then(function (data) {\n                console.log('getApps() success', data);\n                deferred.resolve({\n                    count: data.count,\n                    items: data.results\n                });\n            }, function (response) {\n                console.log('getApps() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteApp(appId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/applications/' + appId + '/', false, true).then(function (data) {\n                console.log('deleteApp() success', data);\n                deferred.resolve(data);\n            }, function (response) {\n                console.log('deleteApp() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function addApp(appName, selectedCategories) {\n\n            var deferred = $q.defer();\n\n            userService.getUser().then(function (user) {\n\n                var data = {\n                    name: appName,\n                    publisher: user.id,\n                    app_categories: selectedCategories\n                };\n\n                apiService.post('/applications/', data, true).then(function (data) {\n                    console.log('addApp() success', data);\n                    deferred.resolve(data);\n                }, function (response) {\n                    console.log('addApp() failure', response);\n                    deferred.reject(response);\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateApp(id, appName, selectedCategories) {\n\n            var deferred = $q.defer();\n\n            var data = {\n                name: appName,\n                app_categories: selectedCategories\n            };\n\n            apiService.patch('/applications/' + id + '/', data, true).then(function (data) {\n                console.log('updateApp() success', data);\n                deferred.resolve(data);\n            }, function (response) {\n                console.log('updateApp() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getCategories(selectedCategories) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/campaigns/categories/', null, true).then(function (response) {\n\n                var categories = [];\n\n                angular.forEach(response, function (name, id) {\n\n                    id = parseInt(id);\n                    var item = { id: id, name: name, selected: false };\n\n                    if (typeof selectedCategories !== 'undefined' && selectedCategories.indexOf(id) !== -1) {\n                        item.selected = true;\n                    }\n\n                    categories.push(item);\n                });\n\n                deferred.resolve(categories);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('billingService', ['$q', 'apiService', '$timeout', '$http', 'apiUrl', 'authToken', function ($q, apiService, $timeout, $http, apiUrl, authToken) {\n        return {\n            getCards: getCards,\n            addCard: addCard,\n            deleteCard: deleteCard,\n            setMainCard: setMainCard,\n            getMainCard: getMainCard,\n            getClientToken: getClientToken,\n            buyCredits: buyCredits,\n            getTransactions: getTransactions,\n            getInvoicePdf: getInvoicePdf,\n            getPaymentRequest: getPaymentRequest,\n            getPaymentRequestItem: getPaymentRequestItem,\n            updatePaymentRequestItem: updatePaymentRequestItem\n        };\n        function getCards() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/payments/cards/', false, true).then(function (response) {\n                var cards = response.results;\n                if (cards.length > 0) {\n                    apiService.get('/payments/cards/default/', false, true).then(function (response) {\n                        angular.forEach(cards, function (card) {\n                            card.default = card.payment_method_id === response.payment_method_id ? true : false;\n                        });\n                        deferred.resolve(cards);\n                    }, function (response) {\n                        angular.forEach(cards, function (card) {\n                            card.default = false;\n                        });\n                        deferred.resolve(cards);\n                    });\n                } else {\n                    deferred.resolve(cards);\n                }\n            }, function (response) {\n                console.log('getCards() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function addCard(data) {\n\n            var deferred = $q.defer();\n\n            apiService.post('/payments/cards/', data, true).then(function (response) {\n                console.log('addCard() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('addCard() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteCard(id) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/payments/cards/' + id + '/', false, true).then(function (response) {\n                console.log('deleteCard() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('deleteCard() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function setMainCard(id) {\n\n            var deferred = $q.defer();\n\n            apiService.post('/payments/cards/' + id + '/default/', false, true).then(function (response) {\n                console.log('setMainCard() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('setMainCard() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getMainCard() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/payments/cards/default/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getClientToken() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/payments/cards/client_token/', false, true).then(function (response) {\n                console.log('getClientToken() success', response);\n                deferred.resolve(response.client_token);\n            }, function (response) {\n                console.log('getClientToken() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function buyCredits(paymentMethodId, credits) {\n\n            var deferred = $q.defer();\n\n            var data = {\n                credits: credits\n            };\n\n            apiService.post('/payments/cards/' + paymentMethodId + '/buy_credits/', data, true).then(function (response) {\n                console.log('buyCredits() success', response);\n                deferred.resolve(response.client_token);\n            }, function (response) {\n                console.log('buyCredits() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getTransactions(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 10,\n                offset: 0,\n                ordering: '-id'\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('start_date' in params) {\n                    requestParams.start_date = params.start_date;\n                }\n                if ('end_date' in params) {\n                    requestParams.end_date = params.end_date;\n                }\n            }\n\n            apiService.get('/payments/transactions/', requestParams, true).then(function (response) {\n                console.log('getTransactions() success', response);\n                deferred.resolve(response);\n            }, function (response) {\n                console.log('getTransactions() failure', response);\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getInvoicePdf(transactionId) {\n\n            var deferred = $q.defer();\n\n            var request = {\n                method: 'GET',\n                responseType: 'blob',\n                url: apiUrl + '/payments/transactions/' + transactionId + '/invoice/',\n                headers: {\n                    'Authorization': 'Token ' + authToken.get(true)\n                }\n            };\n\n            $http(request).then(function (response) {\n                var blob = new Blob([response.data], {\n                    type: 'application/pdf'\n                });\n                var link = document.createElement('a');\n                link.href = window.URL.createObjectURL(blob);\n                link.download = 'kaching_transaction_' + transactionId + '.pdf';\n                link.click();\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getPaymentRequest(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                limit: 10,\n                offset: 0,\n                ordering: '-id'\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('limit' in params) {\n                    requestParams.limit = params.limit;\n                }\n                if ('offset' in params) {\n                    requestParams.offset = params.offset;\n                }\n                if ('start_date' in params) {\n                    requestParams.start_date = params.start_date;\n                }\n                if ('end_date' in params) {\n                    requestParams.end_date = params.end_date;\n                }\n            }\n\n            apiService.get('/payments/admin/withdraw/', requestParams, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getPaymentRequestItem(id) {\n\n            var deferred = $q.defer();\n\n            var requestUrl = '/payments/admin/withdraw/' + id + '/';\n\n            apiService.get(requestUrl, false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updatePaymentRequestItem(id, status) {\n            var deferred = $q.defer();\n\n            var requestUrl = '/payments/admin/withdraw/' + id + '/status/';\n\n            var param = {\n                'status': status\n            };\n\n            apiService.patch(requestUrl, param, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('scansService', ['$q', 'apiService', function ($q, apiService) {\n\n        var WITH = '/';\n\n        return {\n            getDataOf: get\n        };\n\n        function get(taskName, period) {\n            switch (period.toLowerCase()) {\n                case 'week':\n                    period = '?statistic_range=7';\n                    break;\n                case 'month':\n                    period = '?statistic_range=30';\n                    break;\n                default:\n                    break;\n            }\n            var deferred = $q.defer();\n            var params = {};\n            var request = '/statistic/';\n            request += taskName + WITH + period;\n            apiService.get(request, '', true).then(function (response) {\n                deferred.resolve(response);\n            }, function (error) {\n                deferred.reject(error);\n            });\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('salesService', ['$q', 'apiService', function ($q, apiService) {\n\n        var WITH = '/';\n\n        return {\n            getDataOf: get\n        };\n\n        function get(taskName, period) {\n            switch (period.toLowerCase()) {\n                case 'week':\n                    period = '?statistic_range=7';\n                    break;\n                case 'month':\n                    period = '?statistic_range=30';\n                    break;\n                default:\n                    break;\n            }\n            var deferred = $q.defer();\n            var params = {};\n            var request = '/statistic/';\n            request += taskName + WITH + period;\n            apiService.get(request, '', true).then(function (response) {\n                deferred.resolve(response);\n            }, function (error) {\n                deferred.reject(error);\n            });\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('siteNav', function () {\n        return {\n            restrict: 'AE',\n            // replace: true,\n            templateUrl: kachingAppConfig.mainMenuTmpls\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('owlCarousel', function () {\n        return {\n            restrict: 'EA',\n            transclude: false,\n            link: function link(scope, element, attrs) {\n                scope.initCarousel = function () {\n\n                    var defaultOptions = {};\n                    var customOptions = scope.$eval(angular.element(element).attr('data-options'));\n\n                    for (var key in customOptions) {\n                        if (customOptions.hasOwnProperty(key)) {\n                            defaultOptions[key] = customOptions[key];\n                        }\n                    }\n\n                    var $owl = angular.element(element);\n                    $owl.trigger('destroy.owl.carousel');\n                    $owl.owlCarousel(defaultOptions);\n                    $owl.on('changed.owl.carousel', function (event) {\n                        var owlStageOuter = event.currentTarget.children[0];\n                        var owlStage = owlStageOuter.children[0];\n                        if (event.item.index != null) {\n                            if (owlStage.children === undefined) {\n                                return;\n                            }\n                            var owlItem = owlStage.children[event.item.index + 1];\n                            if (owlItem !== undefined && owlItem.children.length === 0) {\n                                $owl.trigger('prev.owl.carousel');\n                            }\n                        }\n                    });\n                };\n\n                scope.destroyCarousel = function () {\n                    angular.element(element).owlCarousel('destroy');\n                };\n            }\n        };\n    });\n\n    angular.module('panelApp').directive('owlCarouselItem', [function () {\n        return {\n            restrict: 'A',\n            transclude: false,\n            link: function link(scope, element) {\n                // wait for the last item in the ng-repeat then call init\n                if (scope.$last) {\n                    scope.initCarousel();\n                }\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignProduct', ['utils', function (utils) {\n        return {\n            restrict: 'A',\n            scope: {\n                product: '=campaignProduct',\n                index: '=productIndex',\n                showLabels: '=showLabels',\n                onRemove: '&'\n            },\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignProduct/campaignProductTmpl.html',\n            // templateUrl: 'panel-module/directives/campaignProduct/campaignProductTmpl.html',\n            controller: ['$scope', function ($scope) {\n\n                $scope.urlRegex = utils.urlRegex();\n\n                $scope.remove = function (index) {\n                    $scope.onRemove({ index: index });\n                };\n            }]\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmUploaderPreviewImage', ['$window', '$parse', function ($window, $parse) {\n        var helper = {\n            support: !!$window.FileReader,\n            isFile: function isFile(item) {\n                return angular.isObject(item) && item instanceof $window.File;\n            },\n            isImage: function isImage(file) {\n                var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|jpg|png|jpeg|'.indexOf(type) !== -1;\n            },\n            isAudio: function isAudio(file) {\n                var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|mp3|'.indexOf(type) !== -1;\n            },\n            isVideo: function isVideo(file) {\n                var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|mkv|flv|vob|ogv|ogg|avi|wmv|mpg|m4v|mp4|mov|'.indexOf(type) !== -1;\n            }\n        };\n        return {\n            restrict: 'A',\n            link: function link(scope, el, attr, ctrl) {\n\n                var reader;\n\n                if (!helper.support) {\n                    return;\n                }\n\n                scope.$watch(attr.ifmUploaderPreviewImage, function (newValue, oldValue) {\n                    if (!newValue) return;\n                    if (typeof newValue === 'string' && newValue.length > 0) {\n                        var url = $parse(attr.ifmUploaderPreviewImage)(scope);\n                        el.css('background-image', 'url(' + url + ')').addClass('image-selected');\n                    } else {\n                        // check wikitude file -- .wt3\n                        if (newValue === undefined || newValue === null || newValue === '') {\n                            return;\n                        } else if (newValue.type === '' && newValue.name.indexOf('.wt3') > -1) {\n                            var newUrl = kachingAppConfig.wpTemplateUri + '/assets/images/wikitude_logo.jpg';\n                            el.css('background-image', 'url(' + newUrl + ')').addClass('image-selected');\n                        } else if (helper.isAudio(newValue)) {\n                            var audioUrl = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                            el.css('background-image', 'url(' + audioUrl + ')').addClass('image-selected');\n                        } else if (helper.isVideo(newValue)) {\n                            var videoUrl = kachingAppConfig.wpTemplateUri + '/assets/images/video-play.png';\n                            el.css('background-image', 'url(' + videoUrl + ')').addClass('image-selected');\n                        } else {\n                            if (!helper.isFile(newValue)) {\n                                return;\n                            }\n                            if (!helper.isImage(newValue)) {\n                                return;\n                            }\n                            reader = new FileReader();\n                            reader.onload = function (e) {\n                                el.css('background-image', 'url(' + e.target.result + ')').addClass('image-selected');\n                            };\n                            reader.readAsDataURL(newValue);\n                        }\n                    }\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmUploaderPreviewVideo', ['$window', function ($window) {\n        return {\n            restrict: 'A',\n            link: function link(scope, el, attr, ctrl) {\n\n                scope.$watch(attr.ifmUploaderPreviewVideo, function (newValue, oldValue) {\n                    console.log('ifmUploaderPreviewVideo - newValue', newValue);\n                    if ((typeof newValue === 'undefined' ? 'undefined' : _typeof(newValue)) === 'object') {\n                        el.addClass('video-selected');\n                    }\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmMin', function () {\n        return {\n            restrict: 'A',\n            require: 'ngModel',\n            link: function link(scope, el, attr, ctrl) {\n                var minVal = parseFloat(attr.ifmMin);\n                ctrl.$validators.ifmMin = function (modelValue, viewValue) {\n                    if (ctrl.$isEmpty(modelValue)) {\n                        return true;\n                    }\n                    var val = parseFloat(viewValue);\n                    if (isNaN(val)) {\n                        return false;\n                    }\n                    return val >= minVal;\n                };\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmMax', function () {\n        return {\n            restrict: 'A',\n            require: 'ngModel',\n            link: function link(scope, el, attr, ctrl) {\n                var maxVal = parseFloat(attr.ifmMax);\n                ctrl.$validators.ifmMax = function (modelValue, viewValue) {\n                    if (ctrl.$isEmpty(modelValue)) {\n                        return true;\n                    }\n                    var val = parseFloat(viewValue);\n                    if (isNaN(val)) {\n                        return false;\n                    }\n                    return val <= maxVal;\n                };\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('ifmNumber', function () {\n        return {\n            restrict: 'A',\n            require: 'ngModel',\n            link: function link(scope, el, attr, ctrl) {\n                ctrl.$validators.ifmNumber = function (modelValue, viewValue) {\n                    if (ctrl.$isEmpty(modelValue)) {\n                        return true;\n                    }\n                    return !isNaN(parseFloat(viewValue)) && isFinite(viewValue);\n                };\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignEditDetails', ['$alert', '$state', '$stateParams', '$filter', 'utils', 'errorHandler', 'campaignsService', function ($alert, $state, $stateParams, $filter, utils, errorHandler, campaignsService) {\n        return {\n            restrict: 'A',\n            scope: {},\n            // templateUrl: 'panel-module/directives/campaignEditDetails/campaignEditDetailsTmpl.html',\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignEditDetails/campaignEditDetailsTmpl.html',\n            controller: function controller($scope) {\n\n                $scope.fieldHasError = utils.fieldHasError;\n\n                $scope.view = {\n                    busy: false,\n                    submitted: false\n                };\n\n                $scope.data = {\n                    campaignId: $stateParams.campaignId,\n                    campaign: {}\n                };\n\n                $scope.daterange = {\n                    dates: {\n                        startDate: null,\n                        endDate: null\n                    },\n                    min: moment().format('YYYY-MM-DD'),\n                    display: 'Select date range'\n                };\n\n                var init = function init() {\n\n                    $scope.view.busy = true;\n\n                    campaignsService.getCampaign($scope.data.campaignId).then(function (campaign) {\n                        $scope.data.campaign = campaign;\n\n                        if (typeof campaign.start_date !== 'undefined' && typeof campaign.end_date !== 'undefined') {\n                            $scope.daterange.dates.startDate = moment.utc(campaign.start_date);\n                            $scope.daterange.dates.endDate = moment.utc(campaign.end_date);\n                            $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                        }\n\n                        $scope.view.busy = false;\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                    });\n                };\n\n                $scope.$watch(function () {\n                    return $scope.daterange.dates;\n                }, function (newValue, oldValue) {\n                    if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                        return;\n                    }\n                    $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n                });\n\n                $scope.showErrors = function () {\n                    return $scope.view.submitted;\n                };\n\n                $scope.saveForm = function () {\n\n                    $scope.view.submitted = true;\n\n                    if ($scope.form1.$valid) {\n\n                        var data = {\n                            id: $scope.data.campaignId,\n                            name: $scope.data.campaign.name,\n                            start_date: moment($scope.daterange.dates.startDate).format('YYYY-MM-DD') + 'T00:00:00.000Z',\n                            end_date: moment($scope.daterange.dates.endDate).format('YYYY-MM-DD') + 'T23:59:59.999Z'\n                        };\n\n                        console.log('save', data);\n\n                        campaignsService.saveCampagin(data).then(function () {\n                            $alert({\n                                title: 'Campaign details have been saved.',\n                                content: '',\n                                container: '#alerts-container',\n                                placement: 'top',\n                                duration: 3,\n                                type: 'success',\n                                show: true\n                            });\n                            campaignsService.setPrepared($scope.data.campaignId);\n                        }, function (response) {\n                            errorHandler.processApiResponse(response);\n                        });\n                    }\n                };\n\n                $scope.cancelEdit = function () {\n                    $state.go('campaigns');\n                };\n\n                init();\n            }\n        };\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignEditTargeting', ['$q', '$alert', '$state', '$stateParams', 'campaignsService', 'errorHandler', 'utils', function ($q, $alert, $state, $stateParams, campaignsService, errorHandler, utils) {\n        return {\n            restrict: 'A',\n            scope: {},\n            // templateUrl: 'panel-module/directives/campaignEditTargeting/campaignEditTargetingTmpl.html',\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignEditTargeting/campaignEditTargetingTmpl.html',\n            controller: function controller($scope) {\n\n                $scope.fieldHasError = utils.fieldHasError;\n\n                $scope.view = {\n                    busy: false,\n                    showErrors: false,\n                    errors: {},\n                    ageRanges: []\n                };\n\n                $scope.data = {\n                    allCategories: true,\n                    allLocations: true,\n                    categories: [],\n                    locations: [],\n                    gender: {\n                        male: true,\n                        female: true\n                    },\n                    os: {\n                        ios: true,\n                        android: true\n                    },\n                    ageRange: undefined\n                };\n\n                $scope.campaignId = $stateParams.campaignId;\n\n                var init = function init() {\n\n                    $scope.view.busy = true;\n\n                    campaignsService.getTargeting($scope.campaignId).then(function (response) {\n                        $scope.data.allCategories = response.allCategories;\n                        $scope.data.allLocations = response.allLocations;\n                        $scope.data.categories = response.categories;\n                        $scope.data.locations = response.locations;\n                        $scope.data.gender = response.gender;\n                        $scope.data.os = response.os;\n                        $scope.data.ageRange = response.ageRange;\n                        $scope.view.ageRanges = response.ageRanges;\n                        $scope.view.busy = false;\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                    });\n                };\n\n                $scope.saveForm = function () {\n\n                    $scope.view.busy = true;\n\n                    campaignsService.saveTargeting($scope.campaignId, $scope.data).then(function (response) {\n                        $scope.view.showErrors = false;\n                        $scope.view.busy = false;\n                        $alert({\n                            title: 'Campaign details have been saved.',\n                            content: '',\n                            container: '#alerts-container',\n                            placement: 'top',\n                            duration: 3,\n                            type: 'success',\n                            show: true\n                        });\n                        campaignsService.setPrepared($scope.data.campaignId);\n                    }, function (response) {\n                        $scope.view.busy = false;\n                        if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object' && !_.isEmpty(response.validationErrors)) {\n                            $scope.view.showErrors = true;\n                            $scope.view.errors = response.validationErrors;\n                        } else {\n                            errorHandler.processApiResponse(response);\n                        }\n                    });\n                };\n\n                $scope.resetError = function (errorName) {\n                    if (typeof $scope.view.errors[errorName] !== 'undefined') {\n                        delete $scope.view.errors[errorName];\n                    }\n                };\n\n                $scope.cancelEdit = function () {\n                    $state.go('campaigns');\n                };\n\n                init();\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignEditBudgeting', ['$alert', '$state', '$stateParams', '$timeout', 'campaignsService', 'errorHandler', 'utils', function ($alert, $state, $stateParams, $timeout, campaignsService, errorHandler, utils) {\n        return {\n            restrict: 'A',\n            scope: {},\n            // templateUrl: 'panel-module/directives/campaignEditBudgeting/campaignEditBudgetingTmpl.html',\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignEditBudgeting/campaignEditBudgetingTmpl.html',\n            controller: function controller($scope) {\n\n                $scope.fieldHasError = utils.fieldHasError;\n\n                $scope.hasBudget = true;\n\n                $scope.view = {\n                    busy: false,\n                    showCharts: false,\n                    submitted: false\n                };\n\n                $scope.data = {\n                    campaignId: $stateParams.campaignId,\n                    budgetId: undefined,\n                    budgetType: 'ongoing',\n                    bidAmount: undefined,\n                    budgetAmount: undefined\n                };\n\n                $scope.estViews = {\n                    daily: { percentage: 0, min: 0, max: 0 },\n                    total: { percentage: 0, min: 0, max: 0 }\n                };\n\n                $scope.estDailyViewsChart = {\n                    data: [$scope.estViews.daily.percentage, 100 - $scope.estViews.daily.percentage],\n                    labels: ['', ''],\n                    colours: ['#f9cd3f', '#dae2e5'],\n                    options: {\n                        animationEasing: 'easeOutQuart',\n                        showTooltips: false,\n                        segmentShowStroke: false,\n                        percentageInnerCutout: 85\n                    }\n                };\n\n                $scope.estTotalViewsChart = {\n                    data: [$scope.estViews.total.percentage, 100 - $scope.estViews.total.percentage],\n                    labels: ['', ''],\n                    colours: ['#343b45', '#dae2e5'],\n                    options: {\n                        animationEasing: 'easeOutQuart',\n                        showTooltips: false,\n                        segmentShowStroke: false,\n                        percentageInnerCutout: 85\n                    }\n                };\n\n                var mapBudgetType = function mapBudgetType(type) {\n                    var types = ['ongoing', 'fixed', 'daily'];\n                    if (typeof type === 'number') {\n                        return types[type - 1];\n                    } else if (typeof type === 'string') {\n                        type = types.indexOf(type);\n                        return type + 1;\n                    }\n                };\n\n                var init = function init() {\n\n                    $scope.view.busy = true;\n\n                    campaignsService.getCampaignBudget($scope.data.campaignId).then(function (response) {\n                        if (typeof response === 'undefined') {\n                            $scope.hasBudget = false;\n                        } else {\n                            // $scope.data.budgetId = response.id;\n                            // $scope.data.bidAmount = response.cost_per_view;\n                            // $scope.data.budgetAmount = response.amount;\n                            // $scope.data.budgetType = mapBudgetType( response.type );\n                            if (response.results && response.results[0]) {\n                                var data = response.results[0];\n                                $scope.data.budgetId = data.id;\n                                $scope.data.bidAmount = data.cost_per_view;\n                                $scope.data.budgetAmount = data.amount;\n                                $scope.data.budgetType = mapBudgetType(data.type);\n                            }\n                        }\n                        $scope.view.busy = false;\n                        updateEstimatedViews();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                    });\n                };\n\n                $scope.changedBid = function () {\n                    updateEstimatedViews();\n                };\n\n                function updateEstimatedViews() {\n                    if (typeof $scope.data.bidAmount === 'undefined') {\n                        $scope.estViews = {\n                            daily: { percentage: 0, min: 0, max: 0 },\n                            total: { percentage: 0, min: 0, max: 0 }\n                        };\n                        updateCharts();\n                        $scope.view.showCharts = true;\n                    } else {\n                        campaignsService.getEstimatedViews($scope.data.campaignId, $scope.data.bidAmount).then(function (response) {\n                            $scope.estViews = response;\n                            updateCharts();\n                            $scope.view.showCharts = true;\n                        }, function (response) {\n                            errorHandler.processApiResponse(response);\n                        });\n                    }\n                }\n\n                function updateCharts() {\n                    $scope.estDailyViewsChart.data = [$scope.estViews.daily.percentage, 100 - $scope.estViews.daily.percentage];\n                    $scope.estTotalViewsChart.data = [$scope.estViews.total.percentage, 100 - $scope.estViews.total.percentage];\n                }\n\n                $scope.showErrors = function () {\n                    return $scope.view.submitted;\n                };\n\n                $scope.saveForm = function () {\n\n                    $scope.view.submitted = true;\n\n                    if ($scope.form1.$valid) {\n\n                        var data = {\n                            cost_per_view: $scope.data.bidAmount,\n                            amount: $scope.data.budgetAmount,\n                            type: mapBudgetType($scope.data.budgetType)\n                        };\n\n                        if ($scope.data.budgetType === 'ongoing') {\n                            data.amount = 0;\n                        }\n\n                        campaignsService.saveCampaignBudget($scope.data.campaignId, data, $scope.hasBudget, $scope.data.budgetId).then(function (response) {\n                            $alert({\n                                title: 'Campaign details have been saved.',\n                                content: '',\n                                container: '#alerts-container',\n                                placement: 'top',\n                                duration: 3,\n                                type: 'success',\n                                show: true\n                            });\n\n                            campaignsService.setPrepared($scope.data.campaignId);\n                        }, function (response) {\n                            errorHandler.processApiResponse(response);\n                        });\n                    }\n                };\n\n                $scope.cancelEdit = function () {\n                    $state.go('campaigns');\n                };\n\n                init();\n            }\n        };\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignEditMedia', ['$state', '$stateParams', '$alert', '$sce', 'apiUrl', 'utils', '$modal', 'errorHandler', 'mediaService', 'campaignsService', function ($state, $stateParams, $alert, $sce, apiUrl, utils, $modal, errorHandler, mediaService, campaignsService) {\n        return {\n            restrict: 'A',\n            scope: {},\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignEditMedia/campaignEditMediaTmpl.html',\n            // templateUrl: 'panel-module/directives/campaignEditMedia/campaignEditMediaTmpl.html',\n            controller: function controller($scope) {\n\n                $scope.fieldHasError = utils.fieldHasError;\n                $scope.videogular = { sources: [] };\n                $scope.videogularApi = null;\n\n                $scope.view = {\n                    loading: false,\n                    submitted: false,\n                    loadingMedia: false,\n                    mediaLoaded: false,\n                    playerReady: false,\n                    videoSet: false\n                };\n\n                $scope.data = {\n                    campaignId: $stateParams.campaignId,\n                    campaign: {},\n                    media: {},\n                    mediaTitle: '',\n                    mediaDesc: ''\n                };\n\n                $scope.externalLink = null;\n\n                var init = function init() {\n\n                    $scope.view.loading = true;\n                    campaignsService.getCampaign($scope.data.campaignId).then(function (campaign) {\n                        $scope.data.campaign = campaign;\n                        if (campaign.media.length > 0 && _typeof(campaign.media[0]) === 'object') {\n                            $scope.data.media = campaign.media[0];\n                            $scope.data.mediaTitle = campaign.media[0].media_title;\n                            $scope.data.mediaDesc = campaign.media[0].media_description;\n                        }\n                        $scope.view.loading = false;\n\n                        if (hasVideo()) {\n                            $scope.view.mediaLoaded = true;\n                            if ($scope.view.playerReady) {\n                                $scope.setVideo();\n                            }\n                        }\n                    });\n                };\n\n                function hasVideo() {\n                    if (typeof $scope.data.media.video === 'string' || typeof $scope.data.media.video_external_link === 'string') {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                }\n\n                $scope.hasMedia = function () {\n                    if (Object.getOwnPropertyNames($scope.data.media).length === 0) {\n                        return false;\n                    } else {\n                        return true;\n                    }\n                };\n\n                $scope.onPlayerReady = function (API) {\n                    $scope.view.playerReady = true;\n                    $scope.videogularApi = API;\n                    if (hasVideo() && !$scope.view.videoSet) {\n                        $scope.setVideo();\n                    }\n                };\n\n                $scope.setVideo = function () {\n                    $scope.videogularApi.stop();\n\n                    var videoLink = $scope.data.media.video || $scope.data.media.video_external_link;\n                    if ($scope.data.media.video === null) {\n                        $scope.externalLink = $sce.trustAsResourceUrl(videoLink);\n                    } else {\n                        $scope.videogular.sources = [{ src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4' }];\n                    }\n\n                    $scope.view.videoSet = true;\n                };\n\n                $scope.showMediaLibrary = function () {\n                    var options = {\n                        submit: function submit(selectedMedia) {\n                            $scope.getMedia(selectedMedia.id);\n                        }\n                    };\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaLibraryModal/modalTmpl.html',\n                        // templateUrl: 'panel-module/components/mediaLibraryModal/modalTmpl.html',\n                        controller: 'mediaLibraryModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            }\n                        }\n                    });\n                };\n\n                $scope.showNewMediaDialog = function () {\n                    var options = {\n                        mode: 'campaignEditor',\n                        submit: function submit(mediaId) {\n                            console.log('mediaId', mediaId);\n                            $scope.getMedia(mediaId);\n                        }\n                    };\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newMediaModal/modalTmpl.html',\n                        // templateUrl: 'panel-module/components/newMediaModal/modalTmpl.html',\n                        controller: 'newMediaModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        backdrop: 'static',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            }\n                        }\n                    });\n                };\n\n                $scope.getMedia = function (mediaId) {\n                    $scope.view.loadingMedia = true;\n                    $scope.view.mediaLoaded = false;\n                    mediaService.getMediaItem(mediaId).then(function (media) {\n                        $scope.data.media = media;\n                        $scope.setVideo();\n                        $scope.view.loadingMedia = false;\n                        $scope.view.mediaLoaded = true;\n                    }, function () {\n                        $scope.view.loadingMedia = false;\n                    });\n                };\n\n                $scope.showErrors = function () {\n                    return $scope.view.submitted;\n                };\n\n                $scope.saveForm = function () {\n\n                    $scope.view.submitted = true;\n\n                    if ($scope.form1.$valid) {\n\n                        var mediaData = {\n                            campaignId: $scope.data.campaignId,\n                            media: $scope.data.media.id,\n                            media_title: $scope.data.mediaTitle,\n                            media_description: $scope.data.mediaDesc\n                        };\n\n                        console.log('save : mediaData', mediaData);\n\n                        campaignsService.saveMedia(mediaData).then(function () {\n                            $alert({\n                                title: 'Campaign details have been saved.',\n                                content: '',\n                                container: '#alerts-container',\n                                placement: 'top',\n                                duration: 3,\n                                type: 'success',\n                                show: true\n                            });\n                            campaignsService.setPrepared($scope.data.campaignId);\n                        }, function (response) {\n                            errorHandler.processApiResponse(response);\n                        });\n                    }\n                };\n\n                $scope.cancelEdit = function () {\n                    $state.go('campaigns');\n                };\n\n                init();\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('campaignEditProducts', ['$state', '$stateParams', '$alert', '$sce', 'apiUrl', 'utils', '$modal', 'errorHandler', 'productsService', 'campaignsService', function ($state, $stateParams, $alert, $sce, apiUrl, utils, $modal, errorHandler, productsService, campaignsService) {\n        return {\n            restrict: 'A',\n            scope: {},\n            // templateUrl: 'panel-module/directives/campaignEditProducts/campaignEditProductsTmpl.html',\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignEditProducts/campaignEditProductsTmpl.html',\n            controller: function controller($scope) {\n\n                $scope.fieldHasError = utils.fieldHasError;\n                $scope.videogular = { sources: [] };\n                $scope.videogularApi = null;\n\n                $scope.view = {\n                    loading: false,\n                    submitted: false,\n                    loadingMedia: false,\n                    mediaLoaded: false,\n                    playerReady: false,\n                    videoSet: false\n                };\n\n                $scope.data = {\n                    campaignId: $stateParams.campaignId,\n                    campaign: {},\n                    products: []\n                };\n\n                var init = function init() {\n\n                    $scope.view.loading = true;\n                    campaignsService.getCampaign($scope.data.campaignId).then(function (campaign) {\n                        $scope.data.campaign = campaign;\n                        if (campaign.products.length > 0) {\n                            $scope.data.products = campaign.products;\n                        }\n                        $scope.view.loading = false;\n                    });\n                };\n\n                $scope.hasProducts = function () {\n                    return !_.isEmpty($scope.data.products);\n                };\n\n                $scope.removeProduct = function (index) {\n                    $scope.data.products.splice(index, 1);\n                    return;\n                };\n\n                $scope.showErrors = function () {\n                    return $scope.view.submitted;\n                };\n\n                $scope.showProductsLibrary = function () {\n                    var options = {\n                        submit: function submit(selectedProduct) {\n                            $scope.data.products.unshift(selectedProduct);\n                        }\n                    };\n                    $modal({\n                        // templateUrl: 'panel-module/components/producstLibraryModal/modalTmpl.html',\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/producstLibraryModal/modalTmpl.html',\n                        controller: 'producstLibraryModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            }\n                        }\n                    });\n                };\n\n                $scope.showNewProductDialog = function () {\n                    var options = {\n                        mode: 'campaignEditor',\n                        submit: function submit(newProduct) {\n                            console.log('newProduct', newProduct);\n                            $scope.data.products.unshift(newProduct);\n                        }\n                    };\n                    $modal({\n                        // templateUrl: 'panel-module/components/newProductModal/modalTmpl.html',\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newProductModal/modalTmpl.html',\n                        controller: 'newProductModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        backdrop: 'static',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            }\n                        }\n                    });\n                };\n\n                $scope.saveForm = function () {\n\n                    $scope.view.submitted = true;\n\n                    if ($scope.form1.$valid) {\n\n                        console.log('save : data', $scope.data.campaignId, $scope.data.products);\n\n                        productsService.updateProducts($scope.data.products).then(function () {\n                            campaignsService.saveProducts($scope.data.campaignId, $scope.data.products).then(function (response) {\n                                $alert({\n                                    title: 'Campaign details have been saved.',\n                                    content: '',\n                                    container: '#alerts-container',\n                                    placement: 'top',\n                                    duration: 3,\n                                    type: 'success',\n                                    show: true\n                                });\n\n                                campaignsService.setPrepared($scope.data.campaignId);\n                            }, function (response) {\n                                errorHandler.processApiResponse(response);\n                            });\n                        }, function (response) {\n                            errorHandler.processApiResponse(response);\n                        });\n                    }\n                };\n\n                $scope.cancelEdit = function () {\n                    $state.go('campaigns');\n                };\n\n                init();\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('panelApp').directive('campaignActionSettings', ['$state', '$stateParams', '$timeout', 'campaignsService', 'errorHandler', 'utils', function ($state, $stateParams, $timeout, campaignsService, errorHandler, utils) {\n    return {\n      restrict: 'E',\n      scope: {\n        data: '=injectedData'\n      },\n      templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/campaignActionSettings/campaignActionSettingsTmpl.html',\n      controller: function controller($scope) {}\n    };\n  }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('adDollars', ['$modal', '$q', 'campaignsService', function ($modal, $q, campaignsService) {\n        return {\n            restrict: 'E',\n            scope: {\n                medias: '=',\n                campaign: '=',\n                selectedMedia: '=',\n                availableCoin: '=',\n                grandTotal: '=',\n                onSignup: '='\n            },\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/adDollars/adDollarsTmpl.html',\n            link: function link(scope, ele, attrs) {\n                ele.on('click', '.media-preview-collapsed', function () {\n                    if (scope.onSignup) {\n                        return;\n                    }\n                    var $storeArea = angular.element(this).closest('.store-header-area');\n                    var $expandItem = $storeArea.find('.media-preview-expanded');\n\n                    $storeArea.find('.glyphicon').toggleClass('glyphicon-menu-down').toggleClass('glyphicon-menu-right');\n                    $storeArea.toggleClass('has-darkgray');\n                    $expandItem.slideToggle();\n\n                    var $others = angular.element('.store-header-area').not($storeArea);\n                    $others.find('.glyphicon').removeClass('glyphicon-menu-down').addClass('glyphicon-menu-right');\n                    $others.find('.media-preview-expanded').slideUp();\n                    $others.removeClass('has-darkgray');\n                });\n            },\n            controller: function controller($scope) {\n                $scope.grandTotal = 0;\n                $scope.selectedMediaContentTab = 1;\n\n                $scope.increaseRewardSetting = function ($event, media, setting, value) {\n                    $event.stopPropagation();\n                    $event.preventDefault();\n                    media.reward[setting] = 1 * value + 1;\n                    $scope.updateAmount();\n                    $scope.updateMediaItem(media);\n                };\n                $scope.decreaseRewardSetting = function ($event, media, setting, value) {\n                    $event.stopPropagation();\n                    $event.preventDefault();\n                    if (media.reward[setting] > 0) {\n                        media.reward[setting] = 1 * value - 1;\n                        $scope.updateAmount();\n                        $scope.updateMediaItem(media);\n                    }\n                };\n\n                $scope.increaseSetting = function ($event, campaign, setting, value) {\n                    $event.stopPropagation();\n                    campaign[setting] = 1 * value + 1;\n                    $scope.updateAmount();\n                    $scope.updateMediaItem(campaign);\n                };\n                $scope.decreaseSetting = function ($event, campaign, setting, value) {\n                    $event.stopPropagation();\n                    if (campaign[setting] > 0) {\n                        campaign[setting] = 1 * value - 1;\n                        $scope.updateAmount();\n                        $scope.updateMediaItem(campaign);\n                    }\n                };\n                $scope.updateAmount = function (media) {\n                    $scope.grandTotal = 0;\n\n                    angular.forEach($scope.medias, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n\n                        var totalSetting = 0;\n\n                        // totalSetting = totalSetting + 1*value.reward.send_information;\n                        totalSetting = totalSetting + 1 * value.reward.share;\n                        totalSetting = totalSetting + 1 * value.reward.product;\n                        totalSetting = totalSetting + 1 * value.reward.survey;\n\n                        $scope.grandTotal += totalSetting;\n                    });\n\n                    if ($scope.campaign) {\n                        $scope.grandTotal += 1 * $scope.campaign.register;\n                    }\n\n                    if (media) {\n                        $scope.updateMediaItem(media);\n                    }\n                };\n                $scope.updateMediaItem = function (media) {\n                    media.subTotal = 1 * media.bets_per_view;\n                    media.subTotal += 1 * media.reward.share;\n                    media.subTotal += 1 * media.reward.product;\n                    media.subTotal += 1 * media.reward.survey;\n                };\n                $scope.toggleSelectedMedia = function (media) {\n                    if ($scope.onSignup) {\n                        return;\n                    }\n                    if (!$scope.selectedMedia) {\n                        $scope.selectedMedia = media;\n                    } else {\n                        if ($scope.selectedMedia.id !== media.id) {\n                            $scope.selectedMedia = media;\n                        } else {\n                            $scope.selectedMedia = null;\n                        }\n                    }\n                    $scope.selectedMediaContentTab = 1;\n                };\n                $scope.removeProduct = function (media, product) {\n                    product.selected = false;\n                    media.products = _.without(media.products, _.findWhere(media.products, { id: product.id }));\n                };\n                $scope.removeQuestion = function (media, question) {\n                    question.selected = false;\n                    media.questions = _.without(media.questions, _.findWhere(media.questions, { id: question.id }));\n                };\n                $scope.stopEvent = function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    return false;\n                };\n                $scope.selectMediaContentTab = function (selectedContentTab) {\n                    $scope.selectedMediaContentTab = selectedContentTab;\n                };\n                $scope.addInstoreReward = function (media) {\n                    media.instore_rewards = media.instore_rewards || [];\n                    var currentId = media.instore_rewards.length;\n                    media.instore_rewards.push({ id: currentId, coins: 1, action_note: '$1' });\n                };\n                $scope.removeReward = function (media, instoreReward) {\n                    var indexOfReward = media.instore_rewards.indexOf(instoreReward);\n                    if (indexOfReward > -1) {\n                        media.instore_rewards.splice(indexOfReward, 1);\n                    }\n                };\n\n                function showQrCode(actionImage, _actionText) {\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/imagePreviewModal/imagePreviewModalTmpl.html',\n                        controller: 'imagePreviewModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        backdrop: 'static',\n                        resolve: {\n                            imageUrl: function imageUrl() {\n                                return actionImage;\n                            },\n                            actionText: function actionText() {\n                                return _actionText;\n                            }\n                        }\n                    });\n                }\n\n                $scope.generateQRCode = function (media, reward) {\n                    if (reward.disableGenerate) {\n                        return;\n                    }\n\n                    reward.disableGenerate = true;\n                    if (reward.action_image) {\n                        showQrCode(reward.action_image, 'Download QR Code');\n                        reward.disableGenerate = false;\n                    } else {\n                        // Create reward and get qr code image url\n                        var generateRewardDeferred = $q.defer();\n                        campaignsService.generateInStoreReward(media, reward).then(function (response) {\n                            if (!response.action_image) {\n                                showQrCode('', 'Cannot generate QR code, please check input and try again.');\n                                return;\n                            }\n\n                            reward.action_image = response.action_image;\n                            reward.action_type = response.action_type;\n                            showQrCode(response.action_image, 'Download QR Code');\n                            reward.disableGenerate = false;\n                        }, function () {\n                            showQrCode('', 'Cannot generate QR code, please check input and try again.');\n                            reward.disableGenerate = false;\n                        });\n                    }\n                };\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('productList', ['productsService', 'errorHandler', '$modal', function (productsService, errorHandler) {\n        return {\n            restrict: 'E',\n            scope: {\n                selectedMedia: '='\n            },\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/productList/productListTmpl.html',\n            controller: function controller($scope, errorHandler, productsService, $modal) {\n                var itemsPerPage = 8;\n\n                $scope.view = {\n                    busyProduct: true,\n                    currentPage: 1,\n                    productsCount: 0,\n                    products: [],\n                    maxSize: 10,\n                    searchPhrase: '',\n                    searchInput: '',\n                    orderByOptions: [{\n                        'value': 'name',\n                        'label': 'Order by title'\n                    }, {\n                        'value': '-date_added',\n                        'label': 'Newest first'\n                    }],\n                    orderBy: '-date_added',\n                    itemsPerPage: itemsPerPage,\n                    selectItem: false\n                };\n\n                $scope.search = function () {\n                    $scope.view.currentPage = 1;\n                    $scope.view.searchPhrase = $scope.view.searchInput;\n                    getProducts();\n                };\n\n                $scope.changePage = function () {\n                    getProducts();\n                };\n\n                $scope.toggleItem = function (item) {\n                    if (!$scope.selectedMedia.products) {\n                        $scope.selectedMedia.products = [];\n                    }\n                    if (item.selected) {\n                        item.selected = false;\n                        $scope.selectedMedia.products = _.without($scope.selectedMedia.products, _.findWhere($scope.selectedMedia.products, { id: item.id }));\n                    } else {\n                        item.selected = true;\n                        $scope.selectedMedia.products.push(item);\n                    }\n                };\n\n                $scope.reloadProducts = function () {\n                    $scope.view.currentPage = 1;\n                    getProducts();\n                };\n\n                $scope.showNewProductDialog = function () {\n                    var options = {\n                        submit: function submit(newProduct) {\n                            console.log('newProduct', newProduct);\n                            $scope.reloadProducts();\n                        }\n                    };\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newProductModal/modalTmpl.html',\n                        // templateUrl: 'panel-module/components/newProductModal/modalTmpl.html',\n                        controller: 'newProductModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        backdrop: 'static',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            }\n                        },\n                        onHide: getProducts\n                    });\n                };\n\n                var init = function init() {\n                    getProducts();\n                };\n\n                var mapSelectedProduct = function mapSelectedProduct() {\n                    if ($scope.view.products && $scope.view.products.length > 0) {\n                        $scope.view.products.forEach(function (item) {\n                            item.selected = false;\n                        });\n\n                        if ($scope.selectedMedia && $scope.selectedMedia.products && $scope.selectedMedia.products.length > 0) {\n                            $scope.selectedMedia.products.forEach(function (item) {\n                                var matchedItem = _.findWhere($scope.view.products, { id: item.id });\n                                if (matchedItem) {\n                                    matchedItem.selected = true;\n                                }\n                            });\n                        }\n                    }\n                };\n\n                function getProducts(argsObj) {\n\n                    var params = {\n                        limit: itemsPerPage,\n                        offset: itemsPerPage * ($scope.view.currentPage - 1),\n                        ordering: $scope.view.orderBy\n                    };\n\n                    if ($scope.view.searchPhrase.length > 0) {\n                        params.title = $scope.view.searchPhrase;\n                    }\n\n                    $scope.view.busyProduct = true;\n                    productsService.getProducts(params).then(function (products) {\n                        $scope.view.productsCount = products.count;\n                        $scope.view.products = products.items;\n                        $scope.view.busyProduct = false;\n                        mapSelectedProduct();\n                    }, function (response) {\n                        $scope.view.busyProduct = false;\n                        errorHandler.processApiResponse(response);\n                        $scope.$hide();\n                    });\n                }\n\n                init();\n\n                $scope.$watch('selectedMedia', function (newVal, oldVal) {\n                    if (newVal) {\n                        mapSelectedProduct();\n                    }\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('questionList', ['errorHandler', 'questionsService', function (errorHandler, questionsService) {\n        return {\n            restrict: 'E',\n            scope: {\n                selectedMedia: '='\n            },\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/questionList/questionListTmpl.html',\n            controller: function controller($scope, errorHandler) {\n                var itemsPerPage = 8;\n\n                $scope.view = {\n                    busyQuestion: true,\n                    currentPage: 1,\n                    questionsCount: 0,\n                    questions: [],\n                    maxSize: 10,\n                    searchPhrase: '',\n                    searchInput: '',\n                    orderByOptions: [{\n                        'value': 'name',\n                        'label': 'Order by title'\n                    }, {\n                        'value': '-date_added',\n                        'label': 'Newest first'\n                    }],\n                    orderBy: '-date_added',\n                    itemsPerPage: itemsPerPage,\n                    selectItem: false\n                };\n\n                $scope.search = function () {\n                    $scope.view.currentPage = 1;\n                    $scope.view.searchPhrase = $scope.view.searchInput;\n                    getQuestions();\n                };\n\n                $scope.changePage = function () {\n                    getQuestions();\n                };\n\n                $scope.toggleItem = function (item) {\n                    if (!$scope.selectedMedia.questions) {\n                        $scope.selectedMedia.questions = [];\n                    }\n                    if (item.selected) {\n                        item.selected = false;\n                        $scope.selectedMedia.questions = _.without($scope.selectedMedia.questions, _.findWhere($scope.selectedMedia.questions, { id: item.id }));\n                    } else {\n                        item.selected = true;\n                        $scope.selectedMedia.questions.push(item);\n                    }\n                };\n\n                var init = function init() {\n                    getQuestions();\n                };\n\n                var mapSelectedQuestion = function mapSelectedQuestion() {\n                    if ($scope.view.questions && $scope.view.questions.length > 0) {\n                        $scope.view.questions.forEach(function (item) {\n                            item.selected = false;\n                        });\n\n                        if ($scope.selectedMedia && $scope.selectedMedia.questions && $scope.selectedMedia.questions.length > 0) {\n                            $scope.selectedMedia.questions.forEach(function (item) {\n                                var matchedItem = _.findWhere($scope.view.questions, { id: item.id });\n                                if (matchedItem) {\n                                    matchedItem.selected = true;\n                                }\n                            });\n                        }\n                    }\n                };\n\n                function getQuestions() {\n\n                    var params = {\n                        page_size: itemsPerPage,\n                        page: $scope.view.currentPage\n                    };\n\n                    if ($scope.view.searchPhrase.length > 0) {\n                        params.content = $scope.view.searchPhrase;\n                    }\n\n                    $scope.view.busyQuestion = true;\n                    questionsService.getQuestions(params).then(function (questions) {\n                        $scope.view.questionsCount = questions.count;\n                        $scope.view.questions = questions.items;\n                        $scope.view.busyQuestion = false;\n                        mapSelectedQuestion();\n                    }, function (response) {\n                        $scope.view.busyQuestion = false;\n                        errorHandler.processApiResponse(response);\n                        // $scope.$hide();\n                    });\n                }\n\n                init();\n\n                $scope.$watch('selectedMedia', function (newVal, oldVal) {\n                    if (newVal) {\n                        mapSelectedQuestion();\n                    }\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('arPreview', ['errorHandler', 'utils', '$sce', function (errorHandler, utils, $sce) {\n        return {\n            restrict: 'E',\n            scope: {\n                media: '='\n            },\n            templateUrl: templateDirUri + '/assets/kaching/panel-module/directives/arPreview/arPreviewTmpl.html',\n            link: function link(scope, ele, attrs) {},\n            controller: function controller($scope) {\n                $scope.arType = false;\n\n                $scope.$watch('media', function (newVal, oldVal) {\n                    if (!newVal) {\n                        $scope.arType = false;\n                        return false;\n                    }\n\n                    var previewItem = newVal.ar_resource;\n                    if (!newVal.ar_resource) {\n                        previewItem = newVal.target;\n                    }\n\n                    $scope.arType = utils.getArType(previewItem);\n\n                    if ($scope.arType === false) {\n                        return false;\n                    }\n\n                    $scope.arResource = previewItem;\n\n                    if ($scope.arType == 'video') {\n                        $scope.arResource = $sce.trustAsResourceUrl(previewItem);\n                    }\n\n                    if ($scope.arType == 'audio') {\n                        $scope.arResource = $sce.trustAsResourceUrl(previewItem);\n                    }\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('cropperImage', ['$uibModal', '$window', function ($uibModal, $window) {\n        var cropperModal;\n\n        return {\n            restrict: 'E',\n            scope: {\n                imageNeedCrop: '=',\n                canvasName: '='\n            },\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/panel-module/directives/cropper-image/cropper-image.html',\n            link: function link(scope, element, attr) {\n                scope.canvas = document.getElementsByTagName('CANVAS')[0];\n                var targetBrowser = detectBrowser();\n                if (targetBrowser !== 'safari') {\n                    scope.$watch('imageNeedCrop', function (newValue, preValue) {\n                        // scope.hasImage = scope.imageNeedCrop ? true : false;\n                        if (!scope.imageNeedCrop) {\n                            scope.hasImage = false;\n                        } else {\n                            if (_typeof(scope.imageNeedCrop) === 'object') {\n                                if (scope.imageNeedCrop.type.indexOf('image') > -1) {\n                                    scope.hasImage = true;\n                                } else {\n                                    scope.hasImage = false;\n                                }\n                            } else {\n                                if (typeof scope.imageNeedCrop === 'string' && scope.imageNeedCrop.indexOf('data:image') > -1) {\n                                    scope.hasImage = true;\n                                } else {\n                                    var type = '|' + scope.imageNeedCrop.slice(scope.imageNeedCrop.lastIndexOf('.') + 1) + '|';\n                                    scope.hasImage = '|jpg|png|jpeg|'.indexOf(type) !== -1;\n                                }\n                            }\n                        }\n                    });\n                } else {\n                    scope.hasImage = false;\n                }\n                scope.openCropper = function () {\n                    var imageNeedCrop = scope.imageNeedCrop;\n                    openModal(imageNeedCrop, scope);\n                };\n                scope.closeModal = closeModal;\n            }\n        };\n\n        function openModal(imageNeedCrop, scope) {\n            cropperModal = $uibModal.open({\n                animation: true,\n                size: 'lg',\n                templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/panel-module/directives/cropper-image/image-cropper-modal/image-cropper-modal.html',\n                controller: 'cropperImageController',\n                scope: scope\n            });\n            cropperModal.rendered.then(function () {\n\n                function getRectangleCanvas(sourceCanvas) {\n                    var canvas = document.createElement('canvas');\n                    var context = canvas.getContext('2d');\n                    var width = sourceCanvas.width;\n                    var height = sourceCanvas.height;\n                    context.imageSmoothingEnabled = true;\n\n                    canvas.width = width;\n                    canvas.height = height;\n\n                    context.drawImage(sourceCanvas, 0, 0, width, height);\n                    context.globalCompositeOperation = 'destination-in';\n                    context.beginPath();\n                    context.rect(0, 0, width, height);\n                    context.fill();\n\n                    return canvas;\n                }\n\n                var image = document.getElementById('image');\n\n                if (typeof imageNeedCrop === 'string') {\n                    if (image.src.indexOf('base64') === -1) {\n                        image.src += '?cache=false';\n                    }\n                    init();\n                } else {\n                    if ((typeof imageNeedCrop === 'undefined' ? 'undefined' : _typeof(imageNeedCrop)) === 'object') {\n                        var reader = new FileReader();\n                        reader.onload = function (e) {\n                            image.src = e.target.result;\n                            init();\n                        };\n                        reader.readAsDataURL(imageNeedCrop);\n                    }\n                }\n\n                function init() {\n                    var cropButton = document.getElementById('crop-button');\n                    var saveButton = document.getElementById('save-button');\n                    var cancelButton = document.getElementById('cancel-button');\n\n                    var result = document.getElementById('result');\n                    var minAspectRatio = 0.5;\n                    var maxAspectRatio = 1.5;\n\n                    var cropper = new window.Cropper(image, {\n                        ready: function ready() {\n                            var cropper = this.cropper;\n                            var containerData = cropper.getContainerData();\n                            var cropBoxData = cropper.getCropBoxData();\n                            var aspectRatio = cropBoxData.width / cropBoxData.height;\n                            var newCropBoxWidth;\n\n                            // if (aspectRatio < minAspectRatio || aspectRatio > maxAspectRatio) {\n                            //   newCropBoxWidth = cropBoxData.height * ((minAspectRatio + maxAspectRatio) / 2);\n                            //\n                            //   cropper.setCropBoxData({\n                            //     left: (containerData.width - newCropBoxWidth) / 2,\n                            //     width: newCropBoxWidth\n                            //   });\n                            // }\n\n                            cropper.setCropBoxData({\n                                left: (containerData.width - cropBoxData.width) / 2,\n                                width: cropBoxData.width\n                            });\n                        },\n                        cropmove: function cropmove() {\n                            var cropper = this.cropper;\n                            var cropBoxData = cropper.getCropBoxData();\n                            var aspectRatio = cropBoxData.width / cropBoxData.height;\n\n                            // if (aspectRatio < minAspectRatio) {\n                            //   cropper.setCropBoxData({\n                            //     width: cropBoxData.height * minAspectRatio\n                            //   });\n                            // } else if (aspectRatio > maxAspectRatio) {\n                            //   cropper.setCropBoxData({\n                            //     width: cropBoxData.height * maxAspectRatio\n                            //   });\n                            // }\n\n                            cropper.setCropBoxData({\n                                width: cropBoxData.width\n                            });\n                        }\n                    });\n\n                    cropButton.onclick = function () {\n                        var croppedCanvas;\n                        var rectangleCanvas;\n                        var rectangleImage;\n                        // Crop\n                        croppedCanvas = cropper.getCroppedCanvas();\n\n                        // Rectangle\n                        rectangleCanvas = getRectangleCanvas(croppedCanvas);\n\n                        // Show\n                        rectangleImage = document.createElement('img');\n                        rectangleImage.src = rectangleCanvas.toDataURL();\n                        result.innerHTML = '';\n                        result.appendChild(rectangleImage);\n                    };\n\n                    cancelButton.onclick = function () {\n                        closeModal();\n                    };\n\n                    saveButton.onclick = function () {\n                        scope.imageNeedCrop = result.childNodes[0].src;\n                        closeModal();\n                    };\n                };\n            });\n        }\n\n        function closeModal() {\n            cropperModal.close();\n        }\n\n        function detectBrowser() {\n            var userAgent = $window.navigator.userAgent;\n\n            var browsers = { chrome: /chrome/i, safari: /safari/i, firefox: /firefox/i, ie: /internet explorer/i };\n\n            for (var key in browsers) {\n                if (browsers[key].test(userAgent)) {\n                    return key;\n                }\n            };\n\n            return 'safari';\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('cropperImageController', ['$scope', 'kachingZonesHelpers', '$uibModal', function ($scope, kachingZonesHelpers, $uibModal) {}]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('doFocus', function () {\n        return {\n            restrict: 'A',\n            link: function link(scope, ele, attrs) {\n                scope.$watch(attrs.doFocus, function (value) {\n                    if (value === true || value === '') {\n                        ele[0].focus();\n                    }\n                });\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('campaignStatus', function () {\n        return function (statusCode) {\n            var statusMap = ['Incomplete', 'Billing', // campaign that was created but the payment has to been yet processed\n            'Prepared', // campaign created and waiting to go LIVE in their planned lottery\n            'Live', // campaign currently available in KaChing\n            'Completed', 'Stopped'];\n            return statusMap[parseInt(statusCode)];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('transactionStatus', function () {\n        return function (statusCode) {\n            var statusMap = ['Pending', 'Completed', 'Failed'];\n            return statusMap[parseInt(statusCode) - 1];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('transactionType', function () {\n        return function (code) {\n            var statusMap = ['One time pay'];\n            return statusMap[parseInt(code) - 1];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('budgetType', function () {\n        return function (type) {\n            var types = ['Ongoing', 'Fixed', 'Daily'];\n            return types[type - 1];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('answerType', function () {\n        return function (type) {\n            var types = ['One Choice', 'Multiple Choice', 'Open Answer'];\n            return types[parseInt(type)];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('trustUrl', ['$sce', function ($sce) {\n        return function (recordingUrl) {\n            return $sce.trustAsResourceUrl(recordingUrl);\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('mediaType', function () {\n\n        var isAudio = function isAudio(fileType) {\n            var type = '|' + fileType + '|';\n            return '|mp3|'.indexOf(type) !== -1;\n        };\n\n        var isVideo = function isVideo(fileType) {\n            var type = '|' + fileType + '|';\n            return '|mkv|flv|vob|ogv|ogg|avi|wmv|mpg|m4v|mp4|mov|'.indexOf(type) !== -1;\n        };\n\n        var isWikiTude = function isWikiTude(fileType) {\n            var type = '|' + fileType + '|';\n            return '|wt3|'.indexOf(type) !== -1;\n        };\n\n        var audioUrl = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n        var videoUrl = kachingAppConfig.wpTemplateUri + '/assets/images/video-play.png';\n        var wikiTudeUrl = kachingAppConfig.wpTemplateUri + '/assets/images/wikitude_logo.jpg';\n\n        return function (media) {\n\n            if (!media) {\n                return;\n            }\n\n            var mediaType = media.substr(media.lastIndexOf('.') + 1);\n\n            if (isVideo(mediaType)) {\n                return videoUrl;\n            }\n\n            if (isAudio(mediaType)) {\n                return audioUrl;\n            }\n\n            if (isWikiTude(mediaType)) {\n                return wikiTudeUrl;\n            }\n\n            return media;\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('paymentRequestStatus', function () {\n        return function (statusCode) {\n            var statusMap = ['Pending', 'Completed', 'Cancel'];\n            return statusMap[parseInt(statusCode) - 1];\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('orderHistoryFilter', ['$window', '$rootScope', function ($window, $rootScope) {\n        return function (items, from, to, orderNo, buyerName) {\n            var fromDate = new Date(from).getTime();\n            var toDate = new Date(to).getTime();\n            var dataFilterDate = from && to ? items.filter(function (item) {\n                var itemTime = new Date(item.date.split(' ')[0]).getTime();\n                return itemTime >= fromDate && itemTime <= toDate;\n            }) : items;\n\n            var dataFilterOrder = orderNo ? dataFilterDate.filter(function (item) {\n                return item.orderNumber.indexOf(orderNo) > -1 ? true : false;\n            }) : dataFilterDate;\n\n            var dataFilterBuyer = buyerName ? dataFilterOrder.filter(function (item) {\n                return item.buyer.toLowerCase().indexOf(buyerName.toLowerCase()) > -1 ? true : false;\n            }) : dataFilterOrder;\n\n            var filteredData = dataFilterBuyer;\n            $rootScope.kaching.orderHistoryFilteredDataLength = filteredData.length;\n            return filteredData;\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('fundManagementFilter', ['$window', '$rootScope', function ($window, $rootScope) {\n        return function (items, name) {\n\n            var dataFilterName = name ? items.filter(function (item) {\n                return item.name.toLowerCase().indexOf(name.toLowerCase()) > -1 ? true : false;\n            }) : items;\n            // $rootScope.kaching.fundManagementFilteredDataLength = dataFilterName.length;\n\n            return dataFilterName;\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('onlyNumberFilter', function () {\n        return function (number) {\n            if (!number) return number;\n            var val = '' + number;\n            return val.replace(/\\+|\\-/g, '');\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('advertisementsCtrl', ['$scope', '$alert', '$modal', 'errorHandler', 'advertisementEditorService', 'campaignsService', function ($scope, $alert, $modal, errorHandler, advertisementEditorService, campaignsService) {\n        var itemsPerPage = 10;\n        $scope.view = {\n            initialLoadComplete: false,\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10,\n            filtersActive: false,\n            advertTypes: []\n        };\n\n        // $scope.view.statusFilterModel = $scope.view.advertTypes[0];\n\n        $scope.data = {\n            campaignsCount: 0,\n            campaigns: []\n        };\n\n        $scope.filters = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD')\n        };\n\n        var init = function init() {\n            initFilters();\n            getAdvertList();\n        };\n\n        function initFilters() {\n            $scope.filters = {\n                name: '',\n                client: '',\n                media_title: '',\n                start_date: '',\n                end_date: '',\n                status: undefined\n            };\n        }\n\n        $scope.changePage = function () {\n            getAdvertList();\n        };\n\n        $scope.reloadCampaigns = function () {\n            $scope.view.currentPage = 1;\n            getAdvertList();\n        };\n\n        function getAdvertList(argsObj) {\n\n            var params = {\n                limit: itemsPerPage,\n                offset: itemsPerPage * ($scope.view.currentPage - 1)\n            };\n\n            if ($scope.filters.name.length > 0) {\n                params.name = $scope.filters.name;\n            }\n            if ($scope.filters.client.length > 0) {\n                params.client = $scope.filters.client;\n            }\n            if ($scope.filters.media_title.length > 0) {\n                params.media_title = $scope.filters.media_title;\n            }\n            if ($scope.filters.start_date.length > 0) {\n                params.start_date = $scope.filters.start_date;\n            }\n            if ($scope.filters.end_date.length > 0) {\n                params.end_date = $scope.filters.end_date;\n            }\n            if (typeof $scope.filters.status !== 'undefined') {\n                params.status = $scope.filters.status;\n            }\n\n            advertisementEditorService.getAdvertismentsByCategory().then(function (data) {\n                var newArrays = [];\n                var firstItem = { 'id': 0, 'name': 'All', 'visibility': true };\n                newArrays.push(firstItem);\n\n                for (var i = 0; i < data.results.length; i++) {\n                    newArrays.push(data.results[i]);\n                }\n\n                $scope.view.advertTypes = newArrays;\n\n                if ($scope.view.statusFilterModel === undefined) {\n                    $scope.view.statusFilterModel = newArrays[0];\n                }\n\n                if ($scope.view.statusFilterModel.id === 0) {\n                    advertisementEditorService.getAdvertisments().then(function (data) {\n                        updateAdvertList(data);\n                    });\n                } else {\n                    advertisementEditorService.getAdvertismentsByCategoryId($scope.view.statusFilterModel.id).then(function (data) {\n                        updateAdvertList(data);\n                    });\n                }\n\n                $scope.view.initialLoadComplete = true;\n            });\n        }\n\n        function updateAdvertList(data) {\n            var arrays = [];\n\n            for (var i = 0; i < data.length; i++) {\n                var categoryResults = data[i].items;\n\n                for (var j = 0; j < categoryResults.length; j++) {\n                    arrays.push(categoryResults[j]);\n                }\n            }\n\n            $scope.data.advertListCount = arrays.length;\n            $scope.data.advertList = arrays;\n        }\n\n        // var deleteCampaign = function( advert ) {\n        //     var name = campaign.name;\n        //     advertisementEditorService.deleteAdvert( advert.id ).then(\n        //         function() {\n        //             $alert({\n        //                 title: 'Advertisement deleted.',\n        //                 content: 'Advertisement '' + name + '' has been deleted.',\n        //                 container: '#alerts-container',\n        //                 placement: 'top',\n        //                 duration: 3,\n        //                 type: 'success',\n        //                 show: true\n        //             });\n        //             getAdvertList();\n        //         },\n        //         function( response ) {\n        //             errorHandler.processApiResponse( response );\n        //         }\n        //     );\n        // };\n\n        function deleteAdvert(advert) {\n            var name = advert.name;\n            advertisementEditorService.deleteAdvert(advert.id).then(function () {\n                $alert({\n                    title: 'Advertisement deleted.',\n                    content: 'Advertisement \"' + name + '\" has been deleted.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getAdvertList();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        }\n\n        $scope.startCampaign = function (campaign) {\n            var name = campaign.name;\n            campaignsService.startCampaign(campaign.id).then(function () {\n\n                $alert({\n                    title: 'Advertisement started.',\n                    content: 'Advertisement \"' + name + '\" is now live.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n\n                getAdvertList();\n            }, function (response) {\n\n                var processingError = _.findWhere(response.data.errorDetails.logicProcessing.processingErrors, { code: 3 });\n\n                if (typeof processingError !== 'undefined') {\n                    $alert({\n                        title: 'Incorrect advert settings.',\n                        content: 'Please review your advertisement settings then start the advertisement!',\n                        container: '#alerts-container',\n                        placement: 'top',\n                        duration: 3,\n                        type: 'danger',\n                        show: true\n                    });\n                } else {\n                    errorHandler.processApiResponse(response);\n                }\n            });\n        };\n\n        var _stopCampaign = function _stopCampaign(campaign) {\n            var name = campaign.name;\n            campaignsService.stopCampaign(campaign.id).then(function () {\n                $alert({\n                    title: 'Advertisement stopped.',\n                    content: 'Advertisement \"' + name + '\" has been stopped.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getAdvertList();\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        $scope.showAdvertDetails = function (_advertId) {\n            $modal({\n                // templateUrl: 'panel-module/components/campaignDetailsModal/modalTmpl.html',\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/advertDetailsModal/modalTmpl.html',\n                controller: 'advertDetailsModalCtrl',\n                animation: 'am-fade-and-scale',\n                resolve: {\n                    advertId: function advertId() {\n                        return _advertId;\n                    }\n                }\n            });\n        };\n\n        $scope.showDeleteAdvertDialog = function (_advert) {\n            var options = {\n                delete: function _delete(advert) {\n                    deleteAdvert(advert);\n                }\n            };\n            $modal({\n                // templateUrl: 'panel-module/components/campaignDeleteModal/modalTmpl.html',\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/advertDeleteModal/modalTmpl.html',\n                controller: 'advertDeleteModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    advert: function advert() {\n                        return _advert;\n                    }\n                }\n            });\n        };\n\n        $scope.checkCampaignActive = function (e, campaign) {\n            e.preventDefault();\n            if (campaign.status === 3) {\n                $scope.showStopCampaignDialog(campaign);\n            } else if (campaign.status === 5) {\n                $scope.startCampaign(campaign);\n            }\n        };\n\n        $scope.showStopCampaignDialog = function (_campaign) {\n            var _callbacks = {\n                stopCampaign: function stopCampaign(campaign) {\n                    console.log('stop advertisement', campaign);\n                    _stopCampaign(campaign);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/advertStopModal/modalTmpl.html',\n                controller: 'advertStopModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    callbacks: function callbacks() {\n                        return _callbacks;\n                    },\n                    campaign: function campaign() {\n                        return _campaign;\n                    }\n                }\n            });\n        };\n\n        $scope.updateFilters = function () {\n            $scope.filters.status = $scope.view.statusFilterModel.id === 0 ? undefined : $scope.view.statusFilterModel.id;\n            $scope.reloadCampaigns();\n        };\n\n        $scope.$watch('daterange.dates.startDate', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            $scope.filters.start_date = moment($scope.daterange.dates.startDate).format('YYYY-MM-DD');\n            $scope.filters.end_date = moment($scope.daterange.dates.endDate).format('YYYY-MM-DD');\n            $scope.updateFilters();\n        });\n\n        $scope.toggleFilters = function () {\n            if ($scope.view.filtersActive) {\n                $scope.clearFilters();\n            } else {\n                $scope.view.filtersActive = true;\n            }\n        };\n\n        $scope.clearFilters = function () {\n            $scope.view.filtersActive = false;\n            initFilters();\n            $scope.reloadCampaigns();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('editAdvertisementCtrl', ['$scope', '$state', '$stateParams', 'advertisementEditorService', '$modal', 'mediaService', '$sce', 'utils', 'errorHandler', function ($scope, $state, $stateParams, advertisementEditorService, $modal, mediaService, $sce, utils, errorHandler) {\n\n        // $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.advertisement = {\n            id: undefined,\n            name: undefined,\n            start_date: undefined,\n            end_date: undefined\n        };\n\n        $scope.data = {\n            allCategories: true,\n            categories: []\n        };\n\n        $scope.view = {\n            busy: false,\n            busyMedia: false,\n            mediaLoaded: false,\n            playerReady: false,\n            videoSet: false\n        };\n\n        $scope.externalLink = null;\n        $scope.videogularApi = null;\n        $scope.videogular = { sources: [] };\n\n        $scope.showMediaLibrary = function () {\n            var options = {\n                submit: function submit(selectedMedia) {\n                    $scope.getMedia(selectedMedia.id);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaLibraryModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/mediaLibraryModal/modalTmpl.html',\n                controller: 'mediaLibraryModalCtrl',\n                animation: 'am-fade-and-scale',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        $scope.showNewMediaDialog = function () {\n            var options = {\n                mode: 'campaignEditor',\n                submit: function submit(mediaId) {\n                    console.log('mediaId', mediaId);\n                    $scope.getMedia(mediaId);\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/newMediaModal/modalTmpl.html',\n                // templateUrl: 'panel-module/components/newMediaModal/modalTmpl.html',\n                controller: 'newMediaModalCtrl',\n                animation: 'am-fade-and-scale',\n                backdrop: 'static',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                }\n            });\n        };\n\n        var hasVideo = function hasVideo() {\n            // if ( typeof $scope.media.video === 'string' ) {\n            if (typeof $scope.media.video === 'string' || typeof $scope.media.video_external_link === 'string') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.hasMedia = function () {\n            // if ( Object.getOwnPropertyNames( $scope.media ).length === 0 ) {\n            //     return false;\n            // } else {\n            //     return true;\n            // }\n            return _.isEmpty($scope.media) ? false : true;\n        };\n\n        $scope.getMedia = function (mediaId) {\n            $scope.view.busyMedia = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.media = mediaItem;\n                $scope.view.busyMedia = false;\n                $scope.setVideo();\n                $scope.view.mediaLoaded = true;\n            }, function () {\n                $scope.view.busyMedia = false;\n            });\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n        };\n\n        $scope.showErrors = function () {\n            // return editor.stepGet('step4', 'submitted');\n            return true;\n        };\n\n        $scope.onPlayerReady = function (API) {\n            $scope.videogularApi = API;\n            if (hasVideo() && !$scope.view.videoSet) {\n                $scope.setVideo();\n            }\n        };\n\n        $scope.setVideo = function () {\n\n            $scope.videogularApi.stop();\n\n            var videoLink = $scope.media.video || $scope.media.video_external_link;\n            if ($scope.media.video === null) {\n                $scope.externalLink = $sce.trustAsResourceUrl(videoLink);\n            } else {\n                $scope.videogular.sources = [{ src: $sce.trustAsResourceUrl(videoLink), type: 'video/mp4' }];\n            }\n\n            $scope.view.videoSet = true;\n        };\n\n        $scope.finish = function () {\n\n            if ($scope.advertisement.id === undefined) {\n                if ($scope.form1.$valid) {\n                    console.log(true);\n\n                    $scope.advertisement.start_date = moment($scope.daterange.dates.startDate).format('YYYY-MM-DD') + 'T00:00:00.000Z';\n                    $scope.advertisement.end_date = moment($scope.daterange.dates.endDate).format('YYYY-MM-DD') + 'T23:59:59.999Z';\n\n                    advertisementEditorService.saveAdvertisement($scope.advertisement).then(function (response) {\n                        console.log(response);\n                        $scope.advertisement.id = response.id;\n                        // update categories\n                        updateCategories();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                    });\n                } else {\n                    console.log(false);\n                }\n            } else {\n                // pass step 1: advertisement existed\n                // update categories and media\n                updateCategories();\n            }\n        };\n\n        function updateCategories() {\n            advertisementEditorService.updateCategories($scope.advertisement.id, $scope.data).then(function (response) {\n                updateMedia();\n            }, function (response) {\n                // $scope.view.busy = false;\n                // editor.stepSet('step2', 'valid', false);\n                if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object' && !_.isEmpty(response.validationErrors)) {\n                    $scope.view.showErrors = true;\n                    $scope.view.errors = response.validationErrors;\n                } else {\n                    errorHandler.processApiResponse(response);\n                }\n            });\n        }\n\n        function updateMedia() {\n\n            if ($scope.form3.$valid) {\n                if ($scope.media.id) {\n                    var mediaData = {\n                        media: $scope.media.id,\n                        media_title: $scope.media.media_title,\n                        media_description: $scope.media.media_description\n                    };\n\n                    advertisementEditorService.updateMedia($scope.advertisement.id, mediaData).then(function (response) {\n                        $state.go('advertisements');\n                    }, function (response) {\n                        // $scope.view.busy = false;\n                        // editor.stepSet('step2', 'valid', false);\n                        if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object' && !_.isEmpty(response.validationErrors)) {\n                            $scope.view.showErrors = true;\n                            $scope.view.errors = response.validationErrors;\n                        } else {\n                            errorHandler.processApiResponse(response);\n                        }\n                    });\n                }\n            }\n        }\n\n        var initNew = function initNew() {\n            $scope.advertTitle = 'New Advertisement';\n\n            if (typeof $scope.advertisement.start_date !== 'undefined' && typeof $scope.advertisement.end_date !== 'undefined') {\n                $scope.daterange.dates.startDate = moment($scope.advertisement.start_date);\n                $scope.daterange.dates.endDate = moment($scope.advertisement.end_date);\n                $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n            }\n\n            // $scope.view.busy = false;\n\n            advertisementEditorService.getCategories().then(function (response) {\n                $scope.data.allCategories = response.allCategories;\n                $scope.data.categories = response.categories;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n\n            // $scope.media = editor.dataGet('media');\n\n            $scope.media = {};\n        };\n\n        var initUpdate = function initUpdate() {\n            $scope.view.busy = true;\n            $scope.advertTitle = 'Update Advertisement';\n\n            $scope.media = {};\n\n            advertisementEditorService.getCategories().then(function (response) {\n                $scope.data.allCategories = response.allCategories;\n                $scope.data.categories = response.categories;\n\n                // get advert\n                advertisementEditorService.getAdvertisments($stateParams.advertId).then(function (advert) {\n                    if (typeof advert.start_date !== 'undefined' && typeof advert.end_date !== 'undefined') {\n                        $scope.daterange.dates.startDate = moment(advert.start_date);\n                        $scope.daterange.dates.endDate = moment(advert.end_date);\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n\n                    $scope.view.mediaLoaded = false;\n\n                    if (advert.media.length > 0) {\n                        $scope.media = advert.media[0];\n                        $scope.setVideo();\n                        $scope.view.mediaLoaded = true;\n                    }\n\n                    $scope.advertisement = advert;\n\n                    angular.forEach($scope.data.categories, function (category) {\n                        category.selected = false;\n                        angular.forEach(advert.category, function (item) {\n                            if (item.id === category.id) {\n                                category.selected = true;\n                            }\n                        });\n                    });\n\n                    $scope.data.allCategories = advert.category.length > 0 ? false : true;\n                }, function (response) {\n                    $scope.view.busy = false;\n                    errorHandler.processApiResponse(response);\n                    $scope.$hide();\n                });\n                // end of get advert\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        var init = function init() {\n            if ($stateParams.advertId) {\n                initUpdate();\n            } else {\n                initNew();\n            }\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('format', ['$filter', function ($filter) {\n        return {\n            require: '?ngModel',\n            link: function link(scope, elem, attrs, ctrl) {\n                if (!ctrl) {\n                    return;\n                }\n\n                ctrl.$formatters.unshift(function (a) {\n                    return $filter(attrs.format)(ctrl.$modelValue);\n                });\n\n                ctrl.$parsers.unshift(function (viewValue) {\n                    var plainNumber = viewValue.replace(/[^\\d|\\-+|\\.+]/g, '');\n                    elem.val($filter(attrs.format)(plainNumber));\n                    return plainNumber;\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('onlyDigits', ['$filter', function ($filter) {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function link(scope, element, attrs, modelCtrl) {\n                modelCtrl.$parsers.push(function (inputValue) {\n                    if (inputValue == undefined) return '';\n                    var transformedInput = inputValue.replace(/[^0-9]/g, '');\n                    transformedInput = $filter('number')(transformedInput);\n                    if (transformedInput !== inputValue) {\n                        modelCtrl.$setViewValue(transformedInput);\n                        modelCtrl.$render();\n                    }\n                    return transformedInput;\n                });\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('advertisementEditorService', ['$q', 'apiService', function ($q, apiService) {\n        return {\n            getAdvertisments: getAdvertisments,\n            getAdvertismentsByCategory: getAdvertismentsByCategory,\n            getAdvertismentsByCategoryId: getAdvertismentsByCategoryId,\n            getCategories: getCategories,\n            saveAdvertisement: saveAdvertisement,\n            updateCategories: updateCategories,\n            updateMedia: updateMedia,\n            deleteAdvert: deleteAdvert\n        };\n        function getAdvertisments(advertId) {\n            var deferred = $q.defer();\n            var url = '/advertisement/';\n\n            if (advertId) {\n                url = url + advertId + '/';\n            }\n\n            apiService.get(url, null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getAdvertismentsByCategory() {\n            var deferred = $q.defer();\n\n            apiService.get('/advertisement/category/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getAdvertismentsByCategoryId(id) {\n            var deferred = $q.defer();\n\n            apiService.get('/advertisement/?category=' + id, null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getCategories(selectedCategories) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/advertisement/category/', null, true).then(function (response) {\n\n                var allCategories = true;\n                var categories = [];\n\n                angular.forEach(response.results, function (name, id) {\n\n                    name.selected = true;\n                    categories.push(name);\n                });\n\n                deferred.resolve({\n                    allCategories: allCategories,\n                    categories: categories\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveAdvertisement(advertisement) {\n\n            var deferred = $q.defer();\n\n            if (typeof advertisement.id === 'undefined') {\n                apiService.post('/advertisement/', advertisement, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        function updateCategories(advertisementId, settings) {\n\n            var deferred = $q.defer();\n            var data = {};\n            var error = {\n                validationErrors: {}\n            };\n\n            // Categories\n            data.app_categories = [];\n            angular.forEach(settings.categories, function (category) {\n                if (settings.allCategories === true || category.selected === true) {\n                    data.app_categories.push(category.id);\n                }\n            });\n            if (data.app_categories.length === 0) {\n                error.validationErrors.categories = true;\n            }\n\n            if (_.isEmpty(error.validationErrors)) {\n                // Save data in the backend\n                //  http://127.0.0.1:8080/cms-api/advertisement/1/category/\n                apiService.patch('/advertisement/' + advertisementId + '/category/', data.app_categories, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                deferred.reject(error);\n            }\n\n            return deferred.promise;\n        }\n\n        function updateMedia(advertisementId, media) {\n\n            var deferred = $q.defer();\n\n            // Categories\n            apiService.patch('/advertisement/' + advertisementId + '/media/', media, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function deleteAdvert(advertId) {\n\n            var deferred = $q.defer();\n\n            //http://54.179.156.207/cms-api/advertisement/9\n            apiService.delete('/advertisement/' + advertId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('kachingZonesHelpers', ['$q', 'apiService', '$alert', '$anchorScroll', '$location', function ($q, apiService, $alert, $anchorScroll, $location) {\n        return {\n            clearForm: clearForm,\n            alert: alert,\n            resetAngularFields: resetAngularFields,\n            clearFileUploader: clearFileUploader,\n            getMediaPreviewFromUrl: getMediaPreviewFromUrl,\n            scrollToFirstError: scrollToFirstError,\n            preventDefaultByPressingEnter: preventDefaultByPressingEnter\n        };\n\n        function clearForm() {\n            angular.element('input[type=\"text\"], textarea').val(null);\n            var imageElements = angular.element('.image-selected');\n            angular.forEach(imageElements, function (imageElement) {\n                if (imageElement.style.backgroundImage) {\n                    imageElement.style.backgroundImage = null;\n                }\n            });\n            imageElements.removeClass('image-selected');\n        }\n\n        function alert(type, title, duration) {\n            $alert({\n                title: title,\n                content: '',\n                container: '#alerts-container',\n                placement: 'top-right',\n                duration: duration || 3,\n                type: type,\n                show: true\n            });\n        }\n\n        function resetAngularFields(scope) {\n            return true;\n            for (var key in scope) {\n                if (scope.hasOwnProperty(key)) {\n                    if (typeof scope[key] === 'string') {\n                        scope[key] = '';\n                    }\n                    if (key === 'data') {\n                        for (var item in scope[key]) {\n                            if (scope[key].hasOwnProperty(item)) {\n                                scope[key][item] = null;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        function clearFileUploader(selector) {\n            angular.element(selector).removeClass('image-selected');\n            angular.element(selector).removeAttr('style');\n        }\n\n        function isAudio(fileType) {\n            var type = '|' + fileType + '|';\n            return '|mp3|'.indexOf(type) !== -1;\n        }\n\n        function isVideo(fileType) {\n            var type = '|' + fileType + '|';\n            return '|mkv|flv|vob|ogv|ogg|avi|wmv|mpg|m4v|mp4|mov|'.indexOf(type) !== -1;\n        }\n\n        function isWikiTude(fileType) {\n            var type = '|' + fileType + '|';\n            return '|wt3|'.indexOf(type) !== -1;\n        }\n\n        function getMediaPreviewFromUrl(media) {\n            var audioUrl = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n            var videoUrl = kachingAppConfig.wpTemplateUri + '/assets/images/video-play.png';\n            var wikiTudeUrl = kachingAppConfig.wpTemplateUri + '/assets/images/wikitude_logo.jpg';\n\n            if (!media) {\n                return;\n            }\n\n            var mediaType = media.substr(media.lastIndexOf('.') + 1);\n\n            if (isVideo(mediaType)) {\n                return videoUrl;\n            }\n\n            if (isAudio(mediaType)) {\n                return audioUrl;\n            }\n\n            if (isWikiTude(mediaType)) {\n                return wikiTudeUrl;\n            }\n\n            return media;\n        }\n\n        function scrollToFirstError(scope) {\n            if (scope.form1.$error.required && scope.form1.$error.required[0]) {\n                var elementName = scope.form1.$error.required[0].$name;\n                var firstErrorId = document.getElementsByName(elementName)[0].id;\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        }\n\n        function preventDefaultByPressingEnter() {\n            document.getElementById('form1').onkeypress = function (e) {\n                var key = e.charCode || e.keyCode || 0;\n                if (key === 13) {\n                    e.preventDefault();\n                }\n            };\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('billboardsCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', '$timeout',\n    // 'campaignId',\n    // 'viewDetail',\n    'kachingZonecampaignEditorService', 'campaignsService', '$q', 'utils', function ($scope, $state, $stateParams, campaignEditorService, $timeout,\n    // campaignId,\n    // viewDetail,\n    kachingZonecampaignEditorService, campaignsService, $q, utils) {\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        var campaignId = $stateParams.campaignId;\n        var viewDetail = utils.getViewDetail() || $state.current.name === 'kaching.campaigns.view';\n\n        editor.init(campaignId);\n\n        $scope.step = 1;\n\n        if (viewDetail) {\n            $scope.step = 4;\n            $scope.viewDetail = viewDetail;\n        }\n\n        $scope.progress = 1;\n        $scope.balance = undefined;\n        $scope.availableCoin = undefined;\n        $scope.selectedCountry = undefined;\n        $scope.isCreated = false;\n        $scope.countryList = [];\n\n        if (campaignId !== undefined) {\n            $scope.editId = campaignId;\n            $scope.loadEditMode = false;\n            $scope.progress = 4;\n        } else {\n            $scope.createMode = true;\n        }\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/billboards/steps/';\n        $scope.billboardsStep = {\n            step1: templateFolder + 'step1.html',\n            step2: templateFolder + 'step2.html',\n            step3: templateFolder + 'step3.html',\n            step4: templateFolder + 'step4.html'\n        };\n\n        $scope.goNext = function () {\n            $scope.step += 1;\n            $scope.progress += 1;\n        };\n\n        $scope.goPrev = function () {\n            $scope.step -= 1;\n        };\n\n        $scope.updateStep = function (newVal, progress) {\n            if ($scope.campaignType === 'On Signup' && newVal === 2) return;\n            if (progress) {\n                $scope.progress = progress;\n            }\n            if ($scope.editId) {\n                $scope.step = newVal;\n            } else {\n                $scope.createMode = false;\n                if (newVal <= $scope.progress) {\n                    $scope.step = newVal;\n                } else {\n                    return;\n                }\n            }\n        };\n\n        $scope.updateCreated = function () {\n            $scope.isCreated = true;\n        };\n\n        $scope.activateCampaign = function () {\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n            // var campaign = editor.dataGet('campaign');\n            var campaignId = editor.dataGet('campaignId');\n\n            campaignsService.getCampaign(campaignId).then(function (data) {\n                if (data.media && data.media.length > 0) {\n                    if (campaignStatus === 'start' || campaignStatus === false || !$scope.editId && !campaignStatus) {\n                        $scope.campaignId = editor.dataGet('campaignId');\n                        campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                            deferred.resolve(response);\n                        }, function (response) {\n                            deferred.reject(response);\n                        });\n                    }\n                } else {\n                    deferred.reject();\n                }\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.showMapFunds = function () {\n            $scope.isShowMapFunds = true;\n        };\n\n        $scope.hideMapFunds = function () {\n            $timeout(function () {\n                $scope.isShowMapFunds = false;\n            }, 1000);\n        };\n\n        $scope.updateBalance = function (value) {\n            $scope.balance = value;\n            $scope.updateAvailableCoin();\n        };\n\n        $scope.updateSelectedCountry = function (value) {\n            $scope.selectedCountry = value;\n            $scope.updateAvailableCoin();\n        };\n\n        $scope.updateAvailableCoin = function () {\n            if ($scope.balance && $scope.selectedCountry) {\n                var rate = $scope.selectedCountry.rate_exchange;\n                if (rate && rate == 0) {\n                    rate = 1;\n                }\n                $scope.availableCoin = Math.floor($scope.balance / rate);\n            }\n        };\n\n        $scope.updateCountryList = function (value) {\n            $scope.countryList = value;\n        };\n\n        $scope.campaignType = '';\n        $scope.updateCampaignType = function (value) {\n\n            if (value === 'billboard') {\n                $scope.campaignType = 'billboard';\n            }\n\n            if (value === 'in_store') {\n                $scope.campaignType = 'instore';\n            }\n\n            if (value === 'magazine') {\n                $scope.campaignType = 'magazine ads';\n            }\n\n            if (value === 'radio') {\n                $scope.campaignType = 'radio ads';\n            }\n\n            if (value === 'tv-ads') {\n                $scope.campaignType = 'tv ads';\n            }\n\n            if (value === 'on-signup') {\n                $scope.campaignType = 'On Signup';\n            }\n        };\n\n        $scope.goToFund = function (modal) {\n            $scope.$broadcast('fund-broadcast');\n            $state.go('funds');\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('step1Ctrl', ['$scope', '$state', '$stateParams', 'apiUrl', 'authToken', 'errorHandler', 'campaignEditorService', 'utils', 'FileUploader', 'campaignsService', '$q', '$http', '$location', '$anchorScroll', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'userService', '$uibModal', 'mediaService', function ($scope, $state, $stateParams, apiUrl, authToken, errorHandler, campaignEditorService, utils, FileUploader, campaignsService, $q, $http, $location, $anchorScroll, kachingZonesHelpers, kachingZonecampaignEditorService, userService, $uibModal, mediaService) {\n        var helper = kachingZonesHelpers;\n        // var editor = campaignEditorService;\n        var editor = kachingZonecampaignEditorService;\n\n        if (!$state.params.campaignId) {\n            $scope.campaignId = utils.getCampaignId();\n        } else {\n            $scope.campaignId = $state.params.campaignId;\n        }\n\n        $scope.view = {\n            busy: true\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.campaignTypes = [{ value: 'billboard', label: 'Billboard' }, { value: 'in_store', label: 'Instore Campaign' }, { value: 'magazine', label: 'Magazine Ads' }, { value: 'radio', label: 'Radio Ads' }, { value: 'tv-ads', label: 'Tv Ads' }, { value: 'on-signup', label: 'On Signup' }];\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        var imageFilter = { imageFilter: ['image/png', 'image/jpg', 'image/jpeg'] };\n\n        utils.addUploaderTypeFilter(uploader, 'customerLogo', imageFilter);\n        utils.addUploaderTypeFilter(uploader, 'backgroundImage', imageFilter);\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'customerLogo') {\n                $scope.campaign.logo_image = newItem._file;\n            }\n            if (newItem.alias === 'backgroundImage') {\n                $scope.campaign.header_image = newItem._file;\n            }\n        };\n\n        $scope.campaign = {};\n        $scope.targeting = {};\n        $scope.budgeting = {};\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.data = {\n            campaign: $scope.campaign,\n            targeting: $scope.targeting,\n            budgeting: $scope.budgeting,\n            daterange: $scope.daterange\n        };\n        $scope.hasBudget = false;\n\n        // campaign status\n        // INCOMPLETE = 0\n        // BILLING = 1\n        // PREPARED = 2\n        // LIVE = 3\n        // COMPLETED = 4\n        // STOPPED = 5\n        $scope.campaignStatus = {\n            status: 'start'\n        };\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            if ($scope.editId !== undefined) {\n                campaignsService.getCampaign($scope.editId).then(function successful(campaign) {\n                    $scope.campaign = campaign;\n                    $scope.campaign.logo_image = campaign.logo_image;\n                    $scope.campaign.header_image = campaign.header_image;\n                    $scope.campaign.client = campaign.client;\n                    $scope.campaign.description = campaign.description;\n                    $scope.campaign.spentCoins = campaign.spent;\n                    $scope.campaign.remainningCoins = campaign.fund - campaign.spent;\n\n                    if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                        $scope.daterange.dates = {\n                            startDate: moment($scope.campaign.start_date),\n                            endDate: moment($scope.campaign.end_date)\n                        };\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n                    // $scope.campaign.type = 'billboard';\n                    $scope.selectedCampaignType = _.findWhere($scope.campaignTypes, { value: $scope.campaign.type });\n                    deferred.resolve();\n                }, function failed(error) {\n                    errorHandler.processApiResponse(error);\n                    deferred.reject();\n                });\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                    $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                    $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                    $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                }\n                // if ($scope.campaign.id) {\n                //     $scope.editId = $scope.campaign.id;\n                // }\n                // $scope.campaign.type = 'billboard';\n                if ($scope.campaign.type) {\n                    $scope.selectedCampaignType = _.findWhere($scope.campaignTypes, { value: $scope.campaign.type });\n                } else {\n                    $scope.selectedCampaignType = $scope.campaignTypes[0];\n                }\n                deferred.resolve();\n            }\n            return deferred.promise;\n        };\n\n        function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                $scope.selectedLocation = $scope.targeting.locations;\n                $scope.locations = $scope.targeting.locationList;\n                $scope.locations = _.sortBy($scope.locations, function (o) {\n                    return o.short_name;\n                });\n                $scope.updateCountryList($scope.locations);\n                deferred.resolve();\n            } else {\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function successful(response) {\n                    $scope.targeting.categories = response.categories;\n                    $scope.locations = response.locations;\n                    $scope.locations = _.sortBy($scope.locations, function (o) {\n                        return o.short_name;\n                    });\n                    $scope.updateCountryList($scope.locations);\n                    $scope.selectedLocation = response.selectedCountry;\n                    $scope.updateSelectedCountry($scope.selectedLocation);\n                    $scope.targeting.gender = response.gender;\n                    $scope.targeting.os = response.os;\n                    $scope.targeting.ageRange = response.ageRange;\n                    $scope.targeting.ageRanges = response.ageRanges;\n                    deferred.resolve();\n                }, function failed(error) {\n                    errorHandler.processApiResponse(error);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        }\n        function initBudgeting() {\n            var deferred = $q.defer();\n            var budgetingData = editor.dataGet('budgeting');\n            if (!_.isEmpty(budgetingData)) {\n                $scope.budgeting = budgetingData;\n                $scope.hasBudget = true;\n            } else {\n                if ($scope.editId) {\n                    campaignsService.getCampaignBudget($scope.editId).then(function successful(data) {\n                        $scope.budgeting = data.results[0];\n                        $scope.hasBudget = true;\n                        deferred.resolve();\n                    }, function failed(error) {\n                        errorHandler.processApiResponse(error);\n                        deferred.reject();\n                    });\n                }\n            }\n            deferred.resolve();\n            return deferred.promise;\n        }\n\n        function initBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function successful(response) {\n                $scope.balance = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                $scope.updateBalance($scope.balance);\n                deferred.resolve(response);\n            }, function failed(error) {\n                deferred.reject(error);\n            });\n            return deferred.promise;\n        }\n        function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            initCampaign().then(function successful() {\n                $scope.updateCampaignType($scope.campaign.type);\n                deferred1.resolve();\n            }, function failed() {\n                deferred1.reject();\n            });\n            initTargetings().then(function successful() {\n                deferred2.resolve();\n            }, function failed() {\n                deferred2.reject();\n            });\n            initBudgeting().then(function successful() {\n                deferred3.resolve();\n            }, function failed() {\n                deferred3.reject();\n            });\n\n            initBalance().then(function successful() {\n                deferred4.resolve();\n            }, function failed() {\n                deferred4.reject();\n            });\n\n            $q.all(promisses).then(function successful() {\n                deferred.resolve();\n            }, function failed(response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function init() {\n            $scope.selectedCountry = null;\n            editor.currentStep(1);\n            editor.previousState(1);\n            $scope.fundError = false;\n\n            $scope.catAccordionStatus = {\n                open: true\n            };\n\n            $scope.countriesAccordionStatus = {\n                open: true\n            };\n\n            $scope.view.busy = true;\n            initData().then(function () {\n                if ($scope.editId) {\n                    $scope.campaign.id = $scope.editId;\n                    // $scope.hasBudget = true;\n                }\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        }\n\n        $scope.changeStatusGender = function (isMale) {\n            if (!$scope.targeting.gender.male && !$scope.targeting.gender.female) {\n                if (isMale) {\n                    $scope.targeting.gender.male = true;\n                } else {\n                    $scope.targeting.gender.female = true;\n                }\n                helper.alert('danger', 'Please choose at least one Gender.');\n            }\n        };\n\n        $scope.changeStatusOS = function (iOS) {\n            if (!$scope.targeting.os.ios && !$scope.targeting.os.android) {\n                if (iOS) {\n                    $scope.targeting.os.ios = true;\n                } else {\n                    $scope.targeting.os.android = true;\n                }\n                helper.alert('danger', 'Please choose at least one OS.');\n            }\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n\n                // angular.element()\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        function createOnSignUpMedia() {\n            var deferred = $q.defer();\n            if ($scope.editId) {\n                deferred.resolve();\n            } else {\n                var mediaData = {\n                    campaign: $scope.campaignId,\n                    type: 'on-signup'\n                };\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n\n            return deferred.promise;\n        }\n\n        $scope.nextStep = function () {\n            editor.stepSet('step1', 'submitted', true);\n\n            editor.dataSet('campaignStatus', $scope.campaignStatus.status);\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = $scope.daterange.dates.startDate.toISOString();\n                $scope.campaign.end_date = $scope.daterange.dates.endDate.toISOString();\n\n                $scope.campaign.client = 'test';\n                $scope.campaign.type = $scope.selectedCampaignType.value;\n                // update fund\n                var total = 1 * $scope.campaign.spentCoins + 1 * $scope.campaign.remainningCoins;\n                var newFund = 1 * $scope.campaign.fund - total;\n\n                $scope.campaign.newFund = newFund;\n                editor.dataSet('campaign', $scope.campaign);\n\n                $scope.targeting.locations = $scope.selectedLocation;\n                $scope.targeting.locationList = $scope.locations;\n                editor.dataSet('targeting', $scope.targeting);\n                editor.dataSet('selectedCountry', $scope.selectedCountry);\n\n                // dummy budgeting data - TODO: replace this with real data\n                if ($scope.editId === undefined && !$scope.hasBudget) {\n                    $scope.budgeting = {\n                        cost_per_view: 12,\n                        amount: 0,\n                        type: 1\n                    };\n                }\n                $scope.budgeting.hasBudget = $scope.hasBudget;\n\n                editor.dataSet('budgeting', $scope.budgeting);\n\n                $scope.fundError = false;\n                editor.save('step1').then(function (data) {\n                    $scope.updateCampaignType($scope.campaign.type);\n                    $scope.campaignId = data.campaign.id;\n                    // $scope.editId = data.campaign.id;\n                    // $scope.goNext();\n                    if ($scope.selectedCampaignType.value === 'on-signup') {\n                        if (!$scope.campaignId) {\n                            editor.stepSet('step2', 'submitted', true);\n                            editor.stepSet('step2', 'valid', true);\n                            $scope.updateStep(3, 3);\n                            return;\n                        } else {\n                            createOnSignUpMedia().then(function () {\n                                editor.stepSet('step2', 'submitted', true);\n                                editor.stepSet('step2', 'valid', true);\n                                $scope.updateStep(3, 3);\n                            }, function () {\n                                // error\n                            });\n                        }\n                    } else {\n                        $scope.goNext();\n                    }\n                    $scope.view.busy = false;\n                    if ($scope.editId !== undefined && editor.stepGet('step1', 'submitted')) {\n                        helper.alert('success', 'Campaign has been updated.');\n                    } else {\n                        helper.alert('success', 'Campaign has been created.');\n                    }\n                    // $scope.activateCampaign();\n                    $scope.updateCreated();\n                }, function (response) {\n                    if (response.status === 400 && response.data.errorDetails.logicProcessing.processingErrors[0].code === 44) {\n                        helper.alert('danger', response.data.errorDetails.logicProcessing.processingErrors[0].message);\n                        $scope.fundError = true;\n                    } else {\n                        errorHandler.processApiResponse(response);\n                    }\n                    $scope.view.busy = false;\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n                if (angular.element('.ng-invalid').length > 0) {\n                    angular.element('.ng-invalid').focus();\n                }\n                if (angular.element('.image-error').length > 0) {\n                    angular.element('.image-error').focus();\n                }\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n            }\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        $scope.$watch('selectedLocation', function (newValue, oldValue) {\n            $scope.updateSelectedCountry(newValue);\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('step2Ctrl', ['$scope', '$state', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', 'countryService', 'campaignEditorService', 'campaignsService', '$http', '$q', 'errorHandler', '$anchorScroll', '$location', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', '$modal', function ($scope, $state, apiUrl, authToken, utils, mediaService, FileUploader, countryService, campaignEditorService, campaignsService, $http, $q, errorHandler, $anchorScroll, $location, kachingZonesHelpers, kachingZonecampaignEditorService, $modal) {\n        var editor = kachingZonecampaignEditorService;\n        var helper = kachingZonesHelpers;\n        var kachingCrownIconUrl = kachingAppConfig.wpTemplateUri + '/assets/images/crowblackedit.png';\n        var kachingCrownIconStyle = 'background-image: url(\"' + kachingCrownIconUrl + '\")';\n\n        $scope.onlyNumbers = /^\\d+$/;\n        $scope.urlRegex = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/;\n\n        helper.preventDefaultByPressingEnter();\n        document.getElementById('map').onkeypress = function (e) {\n            var key = e.charCode || e.keyCode || 0;\n            if (key === 13) {\n                e.preventDefault();\n            }\n        };\n\n        $scope.formSummited = false;\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        var geocodePosition = function geocodePosition(marker) {\n            marker.icon.url = $scope.updateLogoIcon();\n            $scope.position = marker.getPosition();\n            $scope.$apply();\n            $scope.geocoder.geocode({\n                latLng: $scope.position\n            }, function (responses) {\n                if (responses && responses.length > 0) {\n                    $scope.address = responses[0].formatted_address;\n                } else {\n                    $scope.address = 'Cannot determine address at this location.';\n                }\n                var dumpImage = '/wp-content/themes/kaching3/assets/images/billboards/media-thumb.png';\n                var dumpLogo = '/wp-content/themes/kaching3/assets/images/logo.png';\n                var mapPopup = '<div class=\\'popup\\'>\\n                            <img class=\"popup-logo\" src=\"' + dumpLogo + '\">\\n                            <label class=\"popup-name\">' + $scope.campaign.name + '</label>\\n                            <h6 class=\"popup-address\">' + responses[0].formatted_address + '</h6>\\n                        </div>';\n\n                $scope.infoWindow.setContent(mapPopup);\n                $scope.infoWindow.open($scope.map, marker);\n                $scope.map.setZoom(16);\n                $scope.map.setCenter($scope.selectedMarker.getPosition());\n                $scope.$apply();\n            });\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: true,\n            uploading: false,\n            submitted: false,\n            mediaCreated: false\n        };\n\n        $scope.data = {\n            arImageFile: '',\n            imageFile: '',\n            mediaId: '',\n            brandImageFile: ''\n        };\n\n        $scope.position = null;\n        $scope.measures = [{\n            name: 'Meters',\n            code: 'meter'\n        }, {\n            name: 'Kilometres',\n            code: 'kilometre'\n        }];\n        var imageStyle = 'background-image: none;border-color: #ccc;';\n\n        $scope.selectedMarker = null;\n        $scope.searchBoxMarker = [];\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.magezines = ['Tatler', 'GQ', 'Time', 'The Economist', 'Cosmopolitan', 'National Geographic', 'Sports Illustrated', 'Glamour', 'Other'];\n\n        $scope.connector = {};\n\n        // Check other values of selected\n        $scope.changeSelect = function () {\n            if ($scope.selectedMagezine.toUpperCase() === 'OTHER') {\n                if (!$scope.magazineOther) {\n                    $scope.magazineOther = '';\n                }\n                $scope.isOther = true;\n            } else {\n                $scope.isOther = false;\n            }\n        };\n\n        var tvStations = [{\n            id: 'ABC',\n            name: 'ABC'\n        }, {\n            id: 'CNN',\n            name: 'CNN'\n        }, {\n            id: 'DBS',\n            name: 'DBS'\n        }, {\n            id: 'HTK',\n            name: 'HTK'\n        }, {\n            id: 'SKY',\n            name: 'SKY'\n        }, {\n            id: 'BBC',\n            name: 'BBC'\n        }, {\n            id: 'TV_NEWS',\n            name: 'TV NEWS'\n        }, {\n            id: 'other',\n            name: 'Other'\n        }];\n\n        var radioStation = [{\n            id: 'Z100_FM',\n            name: 'FZ 100'\n        }, {\n            id: 'Z200_AM',\n            name: 'FZ_200'\n        }, {\n            id: 'Jazz_FM',\n            name: 'Jazz FM'\n        }, {\n            id: '101.9_FM',\n            name: '101.9 FM'\n        }, {\n            id: 'KISS_FM',\n            name: 'KISS FM'\n        }, {\n            id: '95_FM',\n            name: '95 FM'\n        }, {\n            id: 'other',\n            name: 'Other'\n        }];\n        $scope.stations = radioStation;\n        $scope.selectedStation = $scope.stations[0];\n        $scope.changeStation = function () {\n            if ($scope.selectedStation.name.toUpperCase() === 'OTHER') {\n                if (!$scope.stationOther) {\n                    $scope.stationOther = '';\n                }\n                $scope.isOther = true;\n            } else {\n                $scope.isOther = false;\n            }\n        };\n\n        var mapOptions = {\n            zoom: 4,\n            center: new google.maps.LatLng(40.0000, -98.0000),\n            mapTypeId: google.maps.MapTypeId.TERRAIN\n        };\n\n        var placeMarker = function placeMarker(location, keepAddress) {\n            $scope.updateLogoIcon();\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n            }\n\n            $scope.selectedMarker = new google.maps.Marker({\n                position: location,\n                map: $scope.map,\n                draggable: true,\n                icon: $scope.iconMarker\n            });\n\n            var marker = $scope.selectedMarker;\n            var pos = marker.getPosition();\n\n            $scope.geocoder.geocode({\n                latLng: pos\n            }, function (responses) {\n                var address = 'Cannot determine address at this location.';\n                if (!keepAddress) {\n                    if (responses && responses.length > 0) {\n                        $scope.address = address = responses[0].formatted_address;\n                        if (!$scope.previewMediaId) {\n                            $scope.data.display_address = '';\n                            if (!$scope.data.display_address) {\n                                $scope.data.display_address = responses[0].formatted_address;\n                            }\n                        } else {\n                            if (!$scope.data.display_address) {\n                                $scope.data.display_address = responses[0].formatted_address;\n                            }\n                        }\n                    }\n                } else {\n                    if (responses[0]) {\n                        address = responses[0].formatted_address;\n                    }\n                }\n\n                $scope.$apply();\n                var dumpImage = '/wp-content/themes/kaching3/assets/images/billboards/media-thumb.png';\n                var dumpLogo = '/wp-content/themes/kaching3/assets/images/logo.png';\n                var mapPopup = '<div class=\\'popup\\'>\\n                            <img class=\"popup-logo\" src=\"' + dumpLogo + '\">\\n                            <label class=\"popup-name\">' + $scope.campaign.name + '</label>\\n                            <h6 class=\"popup-address\">' + address + '</h6>\\n                        </div>';\n\n                $scope.infoWindow.setContent(mapPopup);\n                $scope.infoWindow.open($scope.map, marker);\n                $scope.map.setZoom(16);\n                $scope.map.setCenter($scope.selectedMarker.getPosition());\n            });\n\n            google.maps.event.addListener(marker, 'dragend', function (event) {\n                $scope.position = event.latLng;\n                $scope.latitude = $scope.position.lat();\n                $scope.longitude = $scope.position.lng();\n                $scope.searchBoxMarker.forEach(function (marker) {\n                    marker.setMap(null);\n                });\n                $scope.searchBoxMarker = [];\n                $scope.$apply();\n                geocodePosition(marker);\n            });\n        };\n\n        $scope.iconMarker = {\n            url: kachingCrownIconUrl,\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(17, 34),\n            scaledSize: new google.maps.Size(50, 50)\n        };\n        $scope.updateLogoIcon = function (useDefault) {\n            var imageUrl = '';\n            if (useDefault) {\n                $scope.data.brandImageFile = '';\n                helper.clearFileUploader('#brandImageFile');\n            }\n            if ($scope.data.brandImageFile) {\n                imageUrl = document.getElementById('brandImageFile').style.backgroundImage.replace('url(', '').replace(')', '').replace(/\\\"/gi, '');\n                if (!imageUrl) {\n                    var idx = $scope.data.brandImageFile.lastIndexOf('.');\n                    if (idx !== -1) {\n                        if ('|jpg|png|jpeg|'.indexOf($scope.data.brandImageFile.substr(idx + 1)) !== -1) {\n                            imageUrl = $scope.data.brandImageFile;\n                        }\n                    }\n                }\n            }\n\n            if (!imageUrl) {\n                imageUrl = kachingCrownIconUrl;\n            }\n\n            $scope.iconMarker = {\n                url: imageUrl,\n                origin: new google.maps.Point(0, 0),\n                anchor: new google.maps.Point(17, 34),\n                scaledSize: new google.maps.Size(50, 50)\n            };\n\n            return imageUrl;\n        };\n\n        $scope.map = new google.maps.Map(document.getElementById('map'), mapOptions);\n        google.maps.event.addListenerOnce($scope.map, 'mouseover', function () {\n            // This method is a trick to re-render map for the first time map renders.\n            google.maps.event.trigger($scope.map, 'resize');\n        });\n        google.maps.event.addListenerOnce($scope.map, 'idle', function () {\n            // This method is a trick to re-render map for the first time map renders.\n            google.maps.event.trigger($scope.map, 'resize');\n        });\n        $scope.geocoder = new google.maps.Geocoder();\n\n        $scope.infoWindow = new google.maps.InfoWindow();\n\n        // Create the search box and link it to the UI element.\n        var input = document.getElementById('pac-input');\n        var searchBox = new google.maps.places.SearchBox(input);\n        $scope.map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\n\n        // Bias the SearchBox results towards current map's viewport.\n        $scope.map.addListener('bounds_changed', function () {\n            searchBox.setBounds($scope.map.getBounds());\n        });\n\n        $scope.searchBoxMarker = [];\n        // Listen for the event fired when the user selects a prediction and retrieve\n        // more details for that place.\n        searchBox.addListener('places_changed', function () {\n            $scope.updateLogoIcon();\n            var places = searchBox.getPlaces();\n\n            if (places.length === 0) {\n                return;\n            }\n            // Clear out the old markers.\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n\n            // For each place, get the icon, name and location.\n            var bounds = new google.maps.LatLngBounds();\n\n            if (places.length > 0) {\n                $scope.position = places[0].geometry.location;\n                $scope.address = places[0].formatted_address;\n                if (!$scope.previewMediaId) {\n                    $scope.data.display_address = '';\n                    if (!$scope.data.display_address) {\n                        $scope.data.display_address = places[0].formatted_address;\n                    }\n                } else {\n                    if (!$scope.data.display_address) {\n                        $scope.data.display_address = places[0].formatted_address;\n                    }\n                }\n                $scope.latitude = $scope.position.lat();\n                $scope.longitude = $scope.position.lng();\n                $scope.$apply();\n            }\n\n            placeMarker(places[0].geometry.location);\n\n            places.forEach(function (place) {\n                if (!place.geometry) {\n                    return;\n                }\n                var newMarker = new google.maps.Marker({\n                    map: $scope.map,\n                    icon: $scope.iconMarker,\n                    title: place.name,\n                    position: place.geometry.location\n                });\n\n                google.maps.event.addListener(newMarker, 'dragend', function () {\n                    geocodePosition(newMarker);\n                });\n\n                $scope.searchBoxMarker.push(newMarker);\n\n                if (place.geometry.viewport) {\n                    // Only geocodes have viewport.\n                    bounds.union(place.geometry.viewport);\n                } else {\n                    bounds.extend(place.geometry.location);\n                }\n            });\n            $scope.map.fitBounds(bounds);\n            $scope.$apply();\n        });\n\n        google.maps.event.addListener($scope.map, 'click', function (event) {\n            $scope.position = event.latLng;\n            $scope.latitude = $scope.position.lat();\n            $scope.longitude = $scope.position.lng();\n            placeMarker(event.latLng);\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n            $scope.$apply();\n        });\n\n        $scope.updateMapManually = function () {\n            if (isNaN($scope.latitude)) {\n                if ($scope.latitude === '-') {\n                    return;\n                } else {\n                    $scope.latitude = 0;\n                }\n            }\n            if (isNaN($scope.longitude)) {\n                if ($scope.longitude === '-') {\n                    return;\n                } else {\n                    $scope.longitude = 0;\n                }\n            }\n            $scope.position = {\n                lat: Number($scope.latitude),\n                lng: Number($scope.longitude)\n            };\n            placeMarker($scope.position);\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n        };\n\n        var imageFilter = { imageFilter: ['image/png', 'image/jpg', 'image/jpeg'] };\n\n        utils.addUploaderTypeFilter(uploader, 'brandImage', imageFilter);\n        utils.addUploaderTypeFilter(uploader, 'imageFile', imageFilter);\n\n        utils.addUploaderTypeFilter(uploader, 'video', {\n            videoFilter: ['video/mp4', 'video/ogg', 'video/webm', 'video/mov', 'video/avi', 'video/quicktime']\n        });\n\n        utils.addUploaderTypeFilter(uploader, 'audio', {\n            audioFilter: ['audio/mp3']\n        });\n\n        utils.addUploaderTypeFilter(uploader, 'wt3AndImage', {\n            wt3AndImageFilter: ['image/png', 'image/jpg', 'image/jpeg', '']\n        });\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'arDisplay') {\n                $scope.data.arImageFile = newItem._file;\n                var arType = newItem._file.type;\n                $scope.isAnimationField = arType === '' ? true : false;\n            }\n            if (newItem.alias === 'brandImage') {\n                $scope.data.brandImageFile = newItem._file;\n                setTimeout(function () {\n                    var $review = angular.element('#brandImageFile.uploader-dropzone.image-selected');\n                    $scope.reviewMarker = $review.attr('style');\n                    $scope.$apply();\n                }, 100);\n            }\n            // Check upload for image and wt3.\n            if (newItem.alias === 'wt3AndImage') {\n                $scope.data.arImageFile = newItem._file;\n                var arType = newItem._file.type;\n                $scope.isAnimationField = arType === '' ? true : false;\n            }\n            // End check upload for image and wt3.\n            if (newItem.alias === 'imageFile') {\n                $scope.data.imageFile = newItem._file;\n            }\n            if (newItem.alias === 'video') {\n                $scope.data.imageFile = newItem._file;\n            }\n            if (newItem.alias === 'audio') {\n                $scope.data.imageFile = newItem._file;\n            }\n        };\n\n        $scope.showErrors = function () {\n            return $scope.mediaList && $scope.mediaList.length === 0 && editor.stepGet('step2', 'submitted') || $scope.validateError;\n        };\n\n        $scope.videoHasError = function () {\n            return _typeof($scope.data.videoFile) !== 'object';\n        };\n\n        $scope.imageHasError = function () {\n            if (_typeof($scope.data.imageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n        $scope.arImageHasError = function () {\n            if (_typeof($scope.data.arImageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.viewMedia = function () {\n            $scope.$hide();\n            $state.go('media.view', {\n                mediaId: $scope.data.mediaId\n            });\n        };\n\n        var getSixDigit = function getSixDigit(num) {\n            var number = '' + num;\n            var dotIndex = number.indexOf('.');\n            var intStr = number.substr(0, dotIndex + 1);\n            var decimalStr = number.substr(dotIndex + 1, 6);\n            return 1 * intStr.concat(decimalStr);\n        };\n\n        $scope.changeFormat = function () {\n            if ($scope.selectedStoreType && $scope.selectedStoreType === 'in_store') {\n                $scope.selectedStore = $scope.mediaList[0];\n                $scope.latitude = $scope.selectedStore.media[0].latitude;\n                $scope.longitude = $scope.selectedStore.media[0].longitude;\n            } else {\n                $scope.latitude = null;\n                $scope.longitude = null;\n            }\n        };\n\n        // Private function\n        function b64toBlob(b64Data, contentType, sliceSize) {\n            b64Data = b64Data.substring(22);\n            contentType = contentType || '';\n            sliceSize = sliceSize || 512;\n\n            var byteCharacters = atob(b64Data);\n            var byteArrays = [];\n\n            for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n                var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n                var byteNumbers = new Array(slice.length);\n                for (var i = 0; i < slice.length; i++) {\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n\n                var byteArray = new Uint8Array(byteNumbers);\n\n                byteArrays.push(byteArray);\n            }\n\n            var blob = new Blob(byteArrays, { type: contentType });\n            return blob;\n        }\n\n        $scope.checkForm = function () {\n            var formValid = false;\n            var targetFormat = undefined;\n\n            if ($scope.campaign && $scope.campaign.type) {\n                var hasAr = !!$scope.data.arImageFile;\n                switch ($scope.campaign.type) {\n                    case 'magazine':\n                        formValid = $scope.form1.$valid && hasAr;\n                        targetFormat = 'magazine';\n                        break;\n                    case 'radio':\n                        formValid = $scope.form1.$valid && !!$scope.data.imageFile;\n                        targetFormat = 'radio';\n                        break;\n                    case 'billboard':\n                        var interactionType = $scope.targetOption;\n                        if (interactionType === 'approach_beacon' || interactionType === 'share') {\n                            hasAr = true;\n                        }\n                        formValid = $scope.form1.$valid && (hasAr || ($scope.mediaList ? $scope.mediaList.length > 0 : false)) && ($scope.latitude || $scope.longitude);\n                        targetFormat = 'bill_board';\n                        break;\n                    case 'in_store':\n                    case 'store_front':\n                        var interactionType = $scope.targetOption;\n                        if (interactionType === 'approach_beacon' || interactionType === 'share') {\n                            hasAr = true;\n                        }\n                        formValid = $scope.form1.$valid && (hasAr || ($scope.mediaList ? $scope.mediaList.length > 0 : false)) && ($scope.latitude || $scope.longitude);\n                        targetFormat = 'in_store';\n                        $scope.campaign.type = $scope.selectedStoreType;\n                        break;\n                    case 'tv-ads':\n                        formValid = $scope.form1.$valid && !!$scope.data.imageFile;\n                        targetFormat = 'tv-ads';\n                        break;\n                    default:\n                        break;\n                }\n            }\n\n            return {\n                formValid: formValid,\n                targetFormat: targetFormat\n            };\n        };\n\n        function saveMedia() {\n\n            var deferred = $q.defer();\n\n            var formValid = false;\n            var targetFormat = undefined;\n\n            var checkForm = $scope.checkForm();\n            formValid = checkForm.formValid;\n            targetFormat = checkForm.targetFormat;\n\n            if (formValid) {\n                $scope.validateError = false;\n                $scope.formSummited = false;\n\n                var mediaData = {\n                    description: $scope.data.description || '',\n                    type: $scope.campaign.type,\n                    target_format: targetFormat,\n                    marker_shape: $scope.shape && $scope.shape.value ? $scope.shape.value : null,\n                    marker_stand: $scope.markerStand.value,\n                    marker_size: $scope.markerSize.value,\n                    marker_dimension: $scope.selectedDimension.value,\n                    campaign: $scope.campaign.id || editor.dataGet('campaignId'),\n                    shop_name: $scope.data.display_address, // TODO: replace this with shop_name\n                    interaction_type: $scope.targetOption\n                };\n\n                if ($scope.groups.length > 0 && $scope.group && $scope.group.id !== '') {\n                    mediaData.address_group = $scope.group.id;\n                } else {\n                    delete mediaData.address_group;\n                }\n\n                if ($scope.editMode) {\n                    mediaData.id = $scope.previewMediaId;\n                }\n\n                // Add display_address\n                mediaData.address = $scope.data.display_address ? $scope.data.display_address : $scope.address;\n\n                if ($scope.selectedStore && $scope.selectedStore.id) {\n                    mediaData.front_store_shop = $scope.selectedStore.id;\n                }\n\n                if ($scope.inclusionZone) {\n                    mediaData.inclusion_zone = $scope.inclusionZone.value || 0;\n                }\n\n                if ($scope.latitude) {\n                    mediaData.latitude = getSixDigit($scope.latitude);\n                }\n\n                if ($scope.longitude) {\n                    mediaData.longitude = getSixDigit($scope.longitude);\n                }\n\n                if ($scope.data.animation) {\n                    mediaData.animation_type = $scope.data.animation;\n                }\n\n                if ($scope.data.floor) {\n                    mediaData.floor = $scope.data.floor;\n                }\n\n                // Apply base64 image\n                if ($scope.data.arImageFile && _typeof($scope.data.arImageFile) === 'object') {\n                    mediaData.ar_resource = $scope.data.arImageFile;\n                } else {\n                    if (typeof $scope.data.arImageFile === 'string' && $scope.data.arImageFile.indexOf('base64') > -1) {\n                        var ar_resource_blob = b64toBlob($scope.data.arImageFile, 'image/jpeg');\n                        var ar_resource_file = new File([ar_resource_blob], 'arImageFile.jpeg');\n                        mediaData.ar_resource = ar_resource_file;\n                    }\n                }\n\n                if ($scope.data.imageFile && _typeof($scope.data.imageFile) === 'object') {\n                    mediaData.target = $scope.data.imageFile;\n                    mediaData.radio = $scope.data.imageFile;\n                } else {\n                    if (typeof $scope.data.imageFile === 'string' && $scope.data.imageFile.indexOf('base64') > -1) {\n                        var imageFile_blob = b64toBlob($scope.data.imageFile, 'image/jpeg');\n                        var imageFile_file = new File([imageFile_blob], 'imageFile.jpeg');\n                        mediaData.target = imageFile_file;\n                    } else {\n                        if (!$scope.data.imageFile) {\n                            mediaData.target = '';\n                        }\n                    }\n                }\n\n                if ($scope.data.brandImageFile && _typeof($scope.data.brandImageFile) === 'object') {\n                    mediaData.brand_image = $scope.data.brandImageFile;\n                } else {\n                    if (typeof $scope.data.brandImageFile === 'string' && $scope.data.brandImageFile.indexOf('base64') > -1) {\n                        var brandImageFile_blob = b64toBlob($scope.data.brandImageFile, 'image/jpeg');\n                        var brandImageFile_file = new File([brandImageFile_blob], 'brandImageFile.jpeg');\n                        mediaData.brand_image = brandImageFile_file;\n                    } else {\n                        if (!$scope.data.imageFile) {\n                            mediaData.target = '';\n                        }\n                    }\n                }\n                // End apply base64 image\n\n                if ($scope.selectedMagezine) {\n                    if ($scope.selectedMagezine.toUpperCase() === 'OTHER') {\n                        mediaData.magazine_name = $scope.magazineOther;\n                        $scope.magazineOther = '';\n                    } else {\n                        mediaData.magazine_name = $scope.selectedMagezine;\n                    }\n                }\n\n                if ($scope.selectedStation) {\n                    if ($scope.selectedStation.name.toUpperCase() === 'OTHER') {\n                        mediaData.radio_station = $scope.stationOther;\n                        mediaData.tv_station = $scope.stationOther;\n                        $scope.stationOther = '';\n                    } else {\n                        mediaData.radio_station = $scope.selectedStation.name;\n                        mediaData.tv_station = $scope.selectedStation.name;\n                    }\n                }\n\n                if ($scope.data.url) {\n                    mediaData.target_url = $scope.data.url;\n                }\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                $scope.validateError = true;\n                $scope.formSummited = true;\n                editor.stepSet('step2', 'valid', false);\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n                deferred.reject();\n            }\n            return deferred.promise;\n        }\n\n        $scope.submitMedia = function () {\n\n            var deferred = $q.defer();\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                $scope.validateError = false;\n                saveMedia().then(function saveMediaSuccess(media) {\n                    if ($scope.form1) {\n                        $scope.form1.$setPristine();\n                    }\n                    if ($scope.editMode) {\n                        $scope.editMode = false;\n                        helper.alert('success', 'Media has been updated.');\n                    } else {\n                        editor.dataSet('mediaList', $scope.mediaList);\n                    }\n                    $scope.refreshMediaList().then(function () {\n                        deferred.resolve();\n                        $scope.clearForm();\n                        if ($scope.form1) {\n                            $scope.form1.$setPristine();\n                        }\n                        $scope.view.busy = false;\n                        $scope.displayMediaDetail = false;\n                        if ($scope.connector.resetInStoreSelectedMedia) {\n                            $scope.connector.resetInStoreSelectedMedia();\n                        }\n                        if ($scope.connector.resetSelectedMedia) {\n                            $scope.connector.resetSelectedMedia();\n                        }\n                        $scope.beacons = [];\n                    }, function () {\n                        deferred.resolve();\n                        $scope.clearForm();\n                        if ($scope.form1) {\n                            $scope.form1.$setPristine();\n                        }\n                        $scope.view.busy = false;\n                        $scope.displayMediaDetail = false;\n                        if ($scope.connector.resetInStoreSelectedMedia) {\n                            $scope.connector.resetInStoreSelectedMedia();\n                        }\n                        if ($scope.connector.resetSelectedMedia) {\n                            $scope.connector.resetSelectedMedia();\n                        }\n                        $scope.beacons = [];\n                    });\n\n                    mediaService.updateBeacons(media, $scope.beacons).then(function () {}, function () {\n                        helper.alert('danger', 'Media\\'s beacons is not updated. Please try again.');\n                    });\n                }, function saveMediaFail(error) {\n                    if ($scope.form1) {\n                        $scope.form1.$setPristine();\n                    }\n                    $scope.view.busy = false;\n                    if (error) {\n                        var errorObj = error.data.errorDetails.logicProcessing.processingErrors[0];\n                        if (errorObj.code === 49) {\n                            // helper.alert('danger', 'Fail to upload wikiTude.');\n                            helper.alert('danger', 'The target image already exists in your target collection. Please use a different target.');\n                            helper.alert('warning', \"Wikitude supports only jpg's for image uploads or png's without transparent pixels\");\n                        } else {\n                            helper.alert('danger', errorObj.message);\n                        }\n                    } else {\n                        helper.scrollToFirstError($scope);\n                        helper.alert('danger', 'Please fill all required fields.');\n                    }\n\n                    deferred.reject();\n                    $scope.view.busy = false;\n                });\n            } else {\n                $scope.validateError = true;\n                helper.scrollToFirstError($scope);\n                helper.alert('danger', 'Please fill all required fields.');\n                deferred.reject();\n            }\n\n            return deferred.promise;\n        };\n\n        $scope.clearImageUploader = function (string) {\n            if (string === 'geo') {\n                $scope.data.imageFile = '';\n                helper.clearFileUploader('#imageFile');\n            }\n            if (string === 'default') {\n                $scope.data.brandImageFile = '';\n                helper.clearFileUploader('#brandImageFile');\n                $scope.reviewMarker = kachingCrownIconStyle;\n            }\n        };\n\n        $scope.clearForm = function () {\n            helper.clearForm();\n\n            $scope.data = {\n                arImageFile: null,\n                imageFile: null,\n                mediaId: '',\n                brandImageFile: '',\n                display_address: '',\n                floor: ''\n            };\n            $scope.shape = $scope.shapes[0] || undefined;\n            $scope.group = $scope.groups[0] || undefined;\n            $scope.markerStand = $scope.markerStands[0] || undefined;\n            $scope.markerSize = $scope.markerSizes[0] || undefined;\n            $scope.selectedDimension = $scope.dimensions[0] || undefined;\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('#arImageFile');\n            helper.clearFileUploader('#brandImageFile');\n\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n                $scope.position = null;\n                $scope.latitude = null;\n                $scope.longitude = null;\n                $scope.address = null;\n            }\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.reviewMarker = kachingCrownIconStyle;\n        };\n\n        $scope.cancelEdit = function () {\n            $scope.clearForm();\n            $scope.editMode = false;\n            $scope.isAnimationField = false;\n            $scope.magazineOther = '';\n            $scope.stationOther = '';\n            $scope.validateError = false;\n            $scope.displayMediaDetail = false;\n            if ($scope.connector.resetInStoreSelectedMedia) {\n                $scope.connector.resetInStoreSelectedMedia();\n            }\n            if ($scope.connector.resetSelectedMedia) {\n                $scope.connector.resetSelectedMedia();\n            }\n            $scope.beacons = [];\n        };\n\n        $scope.editMedia = function (mediaId) {\n            $scope.clearForm();\n            helper.alert('info', 'You are in edit mode!');\n            $scope.editMode = true;\n            helper.resetAngularFields($scope);\n            $scope.previewMediaId = mediaId.id;\n            $scope.stationOther = '';\n            $scope.displayMediaDetail = true;\n            mediaService.getMediaItem($scope.previewMediaId).then(function (response) {\n                $scope.data.arImageFile = helper.getMediaPreviewFromUrl(response.ar_resource);\n                $scope.data.imageFile = helper.getMediaPreviewFromUrl(response.target);\n                $scope.latitude = response.latitude;\n                $scope.longitude = response.longitude;\n                $scope.inclusionZone = _.findWhere($scope.distances, { value: response.inclusion_zone }) || $scope.distances[0];\n                $scope.address = response.address;\n                $scope.data.brandImageFile = helper.getMediaPreviewFromUrl(response.brand_image);\n                $scope.shape = _.findWhere($scope.shapes, { value: response.marker_shape }) || $scope.shapes[0];\n                $scope.markerStand = _.findWhere($scope.markerStands, { value: response.marker_stand }) || $scope.markerStands[0];\n                $scope.markerSize = _.findWhere($scope.markerSizes, { value: response.marker_size }) || $scope.markerSizes[0];\n                $scope.selectedDimension = _.findWhere($scope.dimensions, { value: response.marker_dimension }) || $scope.dimensions[0];\n                $scope.beacons = _.map(response.beacons, function (beacon) {\n                    return {\n                        uuid: beacon.uuid,\n                        major: Number(beacon.major),\n                        minor: Number(beacon.minor)\n                    };\n                });\n                if ($scope.groups.length > 0) {\n                    $scope.group = response.address_group ? _.findWhere($scope.groups, { id: response.address_group.id }) || $scope.groups[0] : $scope.groups[0];\n                }\n                $scope.data.url = response.target_url;\n                $scope.selectedStoreType = response.type;\n                $scope.selectedStore = _.find($scope.mediaList, { id: response.front_store_shop });\n                placeMarker({\n                    lat: Number($scope.latitude),\n                    lng: Number($scope.longitude)\n                }, true);\n\n                // Add display_address\n                $scope.data.display_address = response.address;\n                $scope.data.floor = response.floor;\n\n                $scope.targetOption = response.target ? 'scan' : 'geo';\n\n                if (response.interaction_type === 'approach_beacon' || response.interaction_type === 'share') {\n                    $scope.targetOption = response.interaction_type;\n                }\n                $scope.markerOption = response.brand_image ? 'custom' : 'default';\n                if (response.ar_resource) {\n                    $scope.isAnimationField = response.ar_resource.split('.wt3').length > 1 ? true : false;\n                }\n\n                if ($scope.isAnimationField) {\n                    $scope.data.animation = response.animation_type;\n                }\n\n                if ($scope.data.brandImageFile) {\n                    $scope.reviewMarker = 'background-image: url(\"' + $scope.data.brandImageFile + '\")';\n                } else {\n                    $scope.reviewMarker = kachingCrownIconStyle;\n                }\n\n                var currentStation = undefined;\n\n                if ($scope.campaign.type === 'radio') {\n                    currentStation = _.find($scope.stations, {\n                        name: response.radio_station\n                    });\n                } else {\n                    if ($scope.campaign.type === 'tv-ads') {\n                        currentStation = _.find($scope.stations, {\n                            name: response.tv_station\n                        });\n                    }\n                }\n\n                if (currentStation) {\n                    $scope.isOther = false;\n                    $scope.selectedStation = currentStation;\n                } else {\n                    $scope.isOther = true;\n                    if ($scope.campaign.type === 'radio') {\n                        $scope.stationOther = response.radio_station;\n                    } else {\n                        if ($scope.campaign.type === 'tv-ads') {\n                            $scope.stationOther = response.tv_station;\n                        }\n                    }\n\n                    $scope.selectedStation = _.find($scope.stations, {\n                        name: 'Other'\n                    });\n                }\n\n                // Response magazine name\n                if ($scope.campaign.type === 'magazine') {\n                    if ($scope.selectedMagezine) {\n                        $scope.selectedMagezine = response.magazine_name;\n\n                        if (_.find($scope.magezines, function (item) {\n                            return item == $scope.selectedMagezine;\n                        })) {\n                            $scope.isOther = false;\n                        } else {\n                            $scope.isOther = true;\n                            $scope.magazineOther = $scope.selectedMagezine;\n                            $scope.selectedMagezine = 'Other';\n                        }\n                    }\n                }\n            });\n            $scope.editMediaMode = true;\n            $scope.beacons = [];\n        };\n\n        $scope.deleteMedia = function (media) {\n            $scope.cancelEdit();\n            $scope.previewMediaId = media.id;\n            campaignsService.deleteMedia($scope.previewMediaId).then(function (response) {\n                helper.alert('success', 'Media has been deleted.');\n                $scope.refreshMediaList();\n            }, function (response) {\n                helper.alert('danger', 'Media has not been deleted');\n            });\n        };\n\n        $scope.refreshMediaList = function () {\n            var deferred = $q.defer();\n\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    initMediaList(response);\n                    deferred.resolve();\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                deferred.reject();\n            }\n\n            return deferred.promise;\n        };\n\n        $scope.updateMap = function (data) {\n            var info = {\n                lat: data.lat,\n                lng: data.lng,\n                title: data.name\n            };\n\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n            }\n            $scope.map.setCenter(new google.maps.LatLng(info.lat, info.lng));\n            $scope.map.setZoom(17);\n        };\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        var initMediaMarker = function initMediaMarker() {\n            $scope.shapes = mediaService.getShapes();\n            $scope.shape = $scope.shapes[0] || undefined;\n            $scope.markerStands = mediaService.getMarkerStand();\n            $scope.markerStand = $scope.markerStands[0] || undefined;\n            $scope.markerSizes = mediaService.getMarkerSize();\n            $scope.markerSize = $scope.markerSizes[0] || undefined;\n            $scope.dimensions = mediaService.getMakerDimension();\n            $scope.selectedDimension = $scope.dimensions[0];\n            $scope.distances = mediaService.getDistance();\n            $scope.inclusionZone = $scope.distances[0];\n            mediaService.getGroups().then(function success(response) {\n                $scope.groups = response.results;\n                if ($scope.groups.length === 0) {\n                    return;\n                }\n                var item = {\n                    id: '',\n                    name: ''\n                };\n                $scope.groups.unshift(item);\n                $scope.group = $scope.groups[0] || undefined;\n            }, function fail(error) {\n                console.log(error);\n            });\n        };\n\n        $scope.init = function () {\n            $scope.markerSizeClass = 'marker-preview-small';\n            $scope.markerShapeClass = 'marker-preview-circle';\n            $scope.targetOption = 'geo';\n            $scope.markerOption = 'default';\n            $scope.reviewMarker = kachingCrownIconStyle;\n            initMediaMarker();\n            $scope.validateError = false;\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n            editor.currentStep(2);\n            editor.previousState(2);\n            $scope.selectedStoreType = 'store_front';\n\n            if (editor.dataGet('campaignId')) {\n                $scope.initEditMode(editor.dataGet('campaignId'));\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if ($scope.campaign.type === 'tv-ads') {\n                    $scope.stations = tvStations;\n                    $scope.selectedStation = $scope.stations[0];\n                }\n                var mediaListData = editor.dataGet('mediaList');\n                if (!_.isEmpty(mediaListData)) {\n                    $scope.mediaList = mediaListData;\n                }\n                $scope.view.busy = false;\n            }\n            $scope.editMediaMode = false;\n            $scope.editMode = false;\n        };\n\n        var initMediaList = function initMediaList(data) {\n            $scope.mediaList = [];\n            if (data.type === 'in_store') {\n                if (data.media.length > 0) {\n                    angular.forEach(data.media, function (item, id) {\n                        if (item.type === 'store_front') {\n                            var storefrontItem = {\n                                id: item.id,\n                                name: item.front_store_shop_name || 'undefined',\n                                media: _.where(data.media, { front_store_shop: item.id })\n                            };\n                            storefrontItem.media.unshift(item);\n                            $scope.mediaList.push(storefrontItem);\n                        }\n                    });\n\n                    $scope.selectedStore = $scope.mediaList[0];\n                }\n            } else {\n                $scope.mediaList = data.media;\n            }\n        };\n\n        $scope.initEditMode = function (id) {\n            var id = id || $scope.editId;\n            campaignsService.getCampaign(id).then(function (data) {\n                $scope.campaign = data;\n                // $scope.selectedStoreType = $scope.campaign.type;\n                if (data.type === 'tv-ads') {\n                    $scope.stations = tvStations;\n                    $scope.selectedStation = $scope.stations[0];\n                }\n                $scope.validateError = false;\n\n                initMediaList(data);\n\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        function checkFormPristine() {\n            if (!$scope.form1.$pristine) {\n                return false;\n            } else {\n                if ($scope.latitude || $scope.longitude) {\n                    return false;\n                }\n                for (var property in $scope.data) {\n                    if ($scope.data[property]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n\n        $scope.nextStep = function () {\n            $scope.form1.$setSubmitted();\n            if (checkFormPristine() && $scope.mediaList.length > 0) {\n                editor.stepSet('step2', 'submitted', true);\n                if ($scope.mediaList.length > 0) {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.goNext();\n                } else {\n                    editor.stepSet('step2', 'valid', false);\n                    setTimeout(function () {\n                        $scope.scrollToFirstError();\n                    }, 100);\n                    helper.alert('danger', 'Please add at least one AR');\n                }\n            } else {\n                var formValid = $scope.checkForm().formValid;\n                if ($scope.mediaList.length > 0 && !formValid) {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.showForceToStep3Confirm();\n                } else {\n                    $scope.submitMedia().then(function () {\n                        editor.stepSet('step2', 'submitted', true);\n                        editor.stepSet('step2', 'valid', true);\n                        $scope.goNext();\n                    }, function () {\n                        editor.stepSet('step2', 'valid', false);\n                    });\n                }\n            }\n        };\n\n        $scope.showForceToStep3Confirm = function (media) {\n            var options = {\n                okFunction: function okFunction() {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.goNext();\n                }\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/confirmModal/modalTmpl.html',\n                controller: 'confirmModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    modalTitle: function modalTitle() {\n                        return 'Confirmation';\n                    },\n                    modalContent: function modalContent() {\n                        return 'New media is not added yet. Are you sure to continue ?';\n                    },\n                    cancelText: function cancelText() {\n                        return 'Cancel';\n                    },\n                    okText: function okText() {\n                        return 'Continue';\n                    },\n                    modalData: function modalData() {\n                        return media;\n                    }\n                }\n            });\n        };\n\n        $scope.goPrev = function () {\n            $scope.updateStep(1);\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        $scope.needBasicValidateZone = function () {\n            if (!$scope.campaign || !$scope.campaign.type) {\n                return true;\n            }\n\n            if ($scope.data.imageFile && $scope.campaign.type != 'radio') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.needBrandValidationZone = function () {\n            if ($scope.data.brandImageFile) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.displayMediaDetail = false;\n\n        $scope.addMedia = function () {\n            $scope.displayMediaDetail = true;\n            $scope.selectedStoreType = 'store_front';\n        };\n\n        $scope.beacons = [];\n        $scope.addBeacon = function () {\n            var currentId = $scope.beacons.length;\n            $scope.beacons.push({\n                id: currentId,\n                uuid: '',\n                major: 0,\n                minor: 0\n            });\n        };\n        $scope.removeBeacon = function (beacon) {\n            var indexOfBeacon = $scope.beacons.indexOf(beacon);\n            if (indexOfBeacon > -1) {\n                $scope.beacons.splice(indexOfBeacon, 1);\n            }\n        };\n\n        $scope.$watch('markerSize', function (newVal, oldVal) {\n            switch (newVal.label) {\n                case 'Small':\n                    $scope.markerSizeClass = 'marker-preview-small';\n                    break;\n                case 'Medium':\n                    $scope.markerSizeClass = 'marker-preview-medium';\n                    break;\n                case 'Large':\n                    $scope.markerSizeClass = 'marker-preview-large';\n                    break;\n                default:\n                    $scope.markerSizeClass = 'marker-preview-small';\n                    break;\n\n            }\n        });\n\n        $scope.$watch('shape', function (newVal, oldVal) {\n            switch (newVal.label) {\n                case 'Circle':\n                    $scope.markerShapeClass = 'marker-preview-circle';\n                    break;\n                case 'Rectangle':\n                    $scope.markerShapeClass = 'marker-preview-rectangle';\n                    break;\n                case 'Square':\n                    $scope.markerShapeClass = 'marker-preview-square';\n                    break;\n                default:\n                    $scope.markerShapeClass = 'marker-preview-circle';\n                    break;\n\n            }\n        });\n\n        $scope.$watch('selectedStore', function () {\n            if ($scope.selectedStore) {\n                $scope.form1.$setPristine();\n            }\n        });\n\n        $scope.$watch('reviewMarker', function () {\n            if ($scope.data.brandImageFile) {\n                var $review = angular.element('#brandImageFile.uploader-dropzone.image-selected');\n                $scope.reviewMarker = $review.attr('style');\n            } else {\n                $scope.reviewMarker = kachingCrownIconStyle;\n            }\n        });\n\n        $scope.$watch('data.brandImageFile', function () {\n            setTimeout(function () {\n                var $review = angular.element('#brandImageFile.uploader-dropzone.image-selected');\n                $scope.reviewMarker = $review.attr('style');\n                $scope.$apply();\n            }, 100);\n        });\n\n        $scope.$watch('mediaList', function (newVal, oldVal) {\n            if (newVal && newVal.length === 0) {\n                $scope.selectedStoreType = 'store_front';\n            }\n        });\n\n        $scope.$watch('data.url', function (newVal, oldVal) {\n            if (newVal) {\n                if ($scope.urlRegex.test($scope.data.url)) {\n                    $scope.showUrlError = false;\n                } else {\n                    $scope.showUrlError = true;\n                }\n            } else {\n                $scope.showUrlError = false;\n            }\n        });\n\n        $scope.init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('step3Ctrl', ['$scope', 'productsService', 'campaignEditorService', 'campaignsService', 'utils', 'FileUploader', 'apiUrl', 'authToken', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'mediaService', function ($scope, productsService, campaignEditorService, campaignsService, utils, FileUploader, apiUrl, authToken, $http, $q, errorHandler, kachingZonesHelpers, kachingZonecampaignEditorService, mediaService) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/products/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        function addProductToCampaign(product) {\n            var deferred = $q.defer();\n\n            campaignsService.saveProducts($scope.campaignId, product).then(function (data) {\n                helper.alert('success', 'Product has been added');\n                deferred.resolve(data);\n            }, function (response) {\n                // $scope.view.busy = false;\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createProduct() {\n\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n\n            if (_typeof($scope.data.productImageFile) === 'object') {\n                productData.image = $scope.data.productImageFile;\n            }\n\n            if ($scope.editMode === true) {\n                productData.id = $scope.data.productIdInEdit;\n            }\n\n            var deferred = $q.defer();\n\n            productsService.createProduct(productData).then(function (data) {\n                deferred.resolve(data);\n                $scope.data.productIdInEdit = undefined;\n                $scope.editMode = false;\n            }, function (response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        $scope.previewData = {\n            isInstore: false,\n            followIBeacon: { enabled: false },\n            scanReceipt: { enabled: false },\n            issueQR: { enabled: false },\n            buyProducts: { enabled: false },\n            sendInformation: { enabled: false },\n            register: { enabled: false },\n            share: { enabled: false },\n            openMicrophone: { enabled: false },\n            watchVideo: { enabled: false }\n        };\n\n        $scope.view = {\n            busy: true,\n            productImageUploadStarted: false,\n            productImageUploadProgress: 0,\n            productImageUploadComplete: false\n        };\n\n        $scope.data = {\n            'title': '',\n            'description': '',\n            'pirce': '',\n            'url': ''\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.productImageFile = newItem._file;\n        };\n        $scope.recommendedProducts = [];\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-triangle-left\"></span>', '<span class=\"glyphicon glyphicon-triangle-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n        $scope.products = editor.dataGet('products');\n\n        var getRecommendedProducts = function getRecommendedProducts() {\n            productsService.getProducts({ limit: 16, offset: 0, ordering: '-last_used_date' }).then(function (products) {\n                $scope.recommendedProducts = products.items;\n            });\n        };\n\n        var myArr = [{\n            type: 'type',\n            perDollarPerClick: 3\n        }, {\n            type: 'another type',\n            perDollarPerClick: 2\n        }];\n        $scope.purchaseAds = myArr;\n        $scope.saveProduct = function () {\n            var deferred = $q.defer();\n            createProduct().then(function (data) {\n                if (data && data.id) {\n                    addProductToCampaign($scope.addedProducts.concat([data])).then(function () {\n                        campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                            $scope.addedProducts = campaign.products;\n                        }, function (response) {});\n                    }, function () {});\n                }\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n            });\n            return deferred.promise;\n        };\n        $scope.selectRecommendedProduct = function (product) {\n            $scope.editMode = true;\n            $scope.data.productIdInEdit = product.id;\n            $scope.data.title = product.title;\n            $scope.data.description = product.description;\n            $scope.data.price = product.price;\n            $scope.data.url = product.url;\n            $scope.data.productImageFile = product.image;\n            helper.alert('info', 'Product in edit mode!');\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n        $scope.nextStep = function () {\n            if ($scope.grandTotal > $scope.availableCoin) {\n                helper.alert('danger', 'Total coins allocation is greater than available coins. Please adjust it.');\n            } else {\n                editor.stepSet('step3', 'submitted', true);\n\n                if ($scope.form1.$valid) {\n                    $scope.view.busy = true;\n                    editor.stepSet('step3', 'valid', true);\n                    $scope.updateAllMedia($scope.medias).then(function () {\n                        $scope.goNext();\n                        helper.alert('success', 'All media has been updated');\n                        $scope.view.busy = false;\n                    }, function (response) {\n                        $scope.view.busy = false;\n                        errorHandler.processApiResponse(response);\n                    });\n                } else {\n                    $scope.validateError = true;\n                    helper.scrollToFirstError($scope);\n                    helper.alert('danger', 'Please fill all required fields.');\n                }\n            }\n        };\n        $scope.updateAllMedia = function (medias) {\n            var deferred = $q.defer();\n            var promisses = [];\n\n            angular.forEach(medias, function (media) {\n                var prodDeferred = $q.defer();\n                promisses.push(prodDeferred.promise);\n\n                var mediaData = {\n                    id: media.id,\n                    bets_per_view: media.bets_per_view,\n                    type: media.type\n                };\n\n                campaignsService.updateMedia(mediaData).then(function (response) {\n                    prodDeferred.resolve(response);\n                }, function (response) {\n                    prodDeferred.reject(response);\n                });\n\n                // products\n                var mediaProdDeferred = $q.defer();\n                promisses.push(mediaProdDeferred.promise);\n\n                var productIds = [];\n                media.products.forEach(function (item) {\n                    productIds.push(item.id);\n                });\n\n                campaignsService.updateMediaProduct({ id: media.id, products: productIds }).then(function (response) {\n                    mediaProdDeferred.resolve(response);\n                }, function (response) {\n                    mediaProdDeferred.reject(response);\n                });\n\n                // questions\n                var mediaQuestionDeferred = $q.defer();\n                promisses.push(mediaQuestionDeferred.promise);\n\n                var questionIds = [];\n                media.questions.forEach(function (item) {\n                    questionIds.push(item.id);\n                });\n\n                campaignsService.updateMediaQuestion({ id: media.id, questions: questionIds }).then(function (response) {\n                    mediaQuestionDeferred.resolve(response);\n                }, function (response) {\n                    mediaQuestionDeferred.reject(response);\n                });\n\n                // instore rewards\n                var mediaRewardDeferred = $q.defer();\n                promisses.push(mediaRewardDeferred.promise);\n\n                campaignsService.updateMediaInstoreRewards(media).then(function (response) {\n                    mediaRewardDeferred.resolve(response);\n                }, function (response) {\n                    mediaRewardDeferred.reject(response);\n                });\n\n                // update media\n                var rewardDeferred = $q.defer();\n                promisses.push(rewardDeferred.promise);\n                var rewardData = {\n                    // send_information: media.reward.send_information,\n                    share: media.reward.share,\n                    product: media.reward.product,\n                    share_message: media.reward.share_message,\n                    survey: media.reward.survey\n                };\n                mediaService.updateReward(media.id, rewardData).then(function (response) {\n                    rewardDeferred.resolve(response);\n                }, function (response) {\n                    rewardDeferred.reject(response);\n                });\n\n                // update register\n                var registerDeferred = $q.defer();\n                promisses.push(registerDeferred.promise);\n                var campaign = {\n                    id: $scope.campaignId,\n                    register: $scope.campaign.register\n                };\n\n                campaignsService.saveKachingZoneCampagin(campaign).then(function () {\n                    registerDeferred.resolve();\n                }, function () {\n                    registerDeferred.reject();\n                });\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n            return deferred.promise;\n        };\n\n        var init = function init() {\n\n            $scope.isSignupCampaign = $scope.campaignType === 'On Signup';\n\n            $scope.selectedMedia = null;\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(3);\n            editor.previousState(3);\n\n            if ($scope.editId) {\n                $scope.campaignId = $scope.editId;\n            } else {\n                $scope.campaignId = editor.dataGet('campaignId');\n            }\n\n            $scope.addedProducts = [];\n            getRecommendedProducts();\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n            $scope.grandTotal = 0;\n            campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                $scope.isSignupCampaign = campaign.type === 'on-signup';\n                $scope.addedProducts = campaign.products;\n                $scope.campaign = campaign;\n                if (!$scope.campaign.register) {\n                    $scope.campaign.register = 0;\n                }\n                if (campaign.media.length > 0) {\n                    $scope.medias = campaign.media;\n                    angular.forEach($scope.medias, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                        if (!value.reward) {\n                            value.reward = {\n                                share: 0,\n                                // send_information: 0,\n                                product: 0\n                            };\n                        }\n                    });\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        init();\n\n        $scope.$watchCollection('medias', function (newVal, oldVal) {});\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.saveProduct();\n                $scope.nextStep();\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('step4Ctrl', ['$scope', 'productsService', 'campaignsService', 'campaignEditorService', 'kachingZonecampaignEditorService', '$q', '$modal', 'errorHandler', '$state', 'NgMap', function ($scope, productsService, campaignsService, campaignEditorService, kachingZonecampaignEditorService, $q, $modal, errorHandler, $state, NgMap) {\n        var editor = kachingZonecampaignEditorService;\n        var flagUrl = kachingAppConfig.wpTemplateUri + '/assets/images/flag/';\n\n        $scope.flagUrl = flagUrl + 'SG.gif';\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.locations = {};\n        $scope.categories = {};\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        $scope.goToCampaign = function () {\n            $state.go('kaching.campaigns');\n        };\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            var mediaListData = editor.dataGet('mediaList');\n            if (!_.isEmpty(mediaListData)) {\n                $scope.mediaList = mediaListData;\n                if ($scope.mediaList.length > 0) {\n                    $scope.noMedia = false;\n                }\n                $scope.campaignId = editor.dataGet('campaignId');\n                $scope.media = editor.dataGet('media');\n                campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                    $scope.campaign = response;\n                    initMediaList($scope.campaign);\n                    deferred.resolve($scope.campaign);\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                campaignsService.getCampaign($scope.campaignId).then(function (data) {\n                    if ($scope.viewDetail) {\n                        $scope.updateCampaignType(data.type);\n                    }\n                    $scope.mediaList = data.media;\n                    if ($scope.mediaList.length > 0) {\n                        $scope.noMedia = false;\n                    }\n                    $scope.campaign = data;\n                    initMediaList($scope.campaign);\n                    angular.forEach($scope.mediaList, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                    });\n                    deferred.resolve($scope.campaign);\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                var arrLocations = [],\n                    arrCategories = [];\n                // Get a location have selected true\n                angular.forEach($scope.targeting.locations, function (item, id) {\n                    if (item.selected === true) {\n                        arrLocations.push(item);\n                    }\n                });\n                // Get a category have selected true\n                angular.forEach($scope.targeting.categories, function (item, id) {\n                    if (item.selected === true) {\n                        arrCategories.push(item);\n                    }\n                });\n                $scope.locations = arrLocations;\n                $scope.categories = arrCategories;\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                // var id = editor.dataGet('campaignId') || $scope.editId || undefined;\n                campaignsService.getTargeting($scope.campaignId).then(function (response) {\n                    $scope.targeting = response;\n                    var arrLocations = [],\n                        arrCategories = [];\n                    // Get a location have selected true\n                    angular.forEach($scope.targeting.locations, function (item, id) {\n                        if (item.selected === true) {\n                            arrLocations.push(item);\n                        }\n                    });\n                    // Get a category have selected true\n                    angular.forEach($scope.targeting.categories, function (item, id) {\n                        if (item.selected === true) {\n                            arrCategories.push(item);\n                        }\n                    });\n                    $scope.locations = arrLocations;\n                    $scope.categories = arrCategories;\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initMediaList = function initMediaList(data) {\n            // $scope.mediaList = [];\n            $scope.mediaList = [];\n            if (data.type === 'in_store') {\n                if (data.media.length > 0) {\n                    angular.forEach(data.media, function (item, id) {\n                        if (item.type === 'store_front') {\n                            var storefrontItem = {\n                                id: item.id,\n                                name: item.front_store_shop_name || 'undefined',\n                                media: _.where(data.media, { front_store_shop: item.id })\n                            };\n\n                            storefrontItem.media.unshift(item);\n                            $scope.mediaList.push(storefrontItem);\n                        }\n                    });\n\n                    $scope.selectedStore = $scope.mediaList[0];\n                }\n            } else {\n                $scope.mediaList = data.media;\n            }\n        };\n\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            initCampaign().then(function () {\n                initMap();\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n            $scope.selectedMedia = null;\n            $scope.isSignupCampaign = $scope.campaignType === 'On Signup';\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(4);\n            editor.previousState(4);\n\n            $scope.loadSubmittedProducts();\n            // $scope.view.busy = false;\n\n            $scope.noMedia = true;\n\n            $scope.mediaList = [];\n            $scope.grandTotal = 0;\n            $scope.campaignId = $scope.editId || editor.dataGet('campaignId');\n\n            if ($scope.selectedCountry) {\n                $scope.flagUrl = flagUrl + $scope.selectedCountry.alpha2_code + '.gif';\n            } else {\n                campaignsService.getTargeting($scope.campaignId).then(function (response) {\n                    $scope.selectedCountry = response.selectedCountry;\n                    $scope.flagUrl = flagUrl + $scope.selectedCountry.alpha2_code + '.gif';\n                });\n            }\n\n            initData().then(function () {\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        var initMap = function initMap() {\n            $scope.points = [];\n            if ($scope.campaign && $scope.campaign.media) {\n                angular.forEach($scope.campaign.media, function (value, key) {\n                    var item = {\n                        latitude: value.latitude,\n                        longitude: value.longitude,\n                        customIcon: {\n                            \"scaledSize\": [32, 32],\n                            \"url\": value.brand_image || kachingAppConfig.wpTemplateUri + '/assets/images/crowblackedit.png'\n                        }\n\n                    };\n                    $scope.points.push(item);\n                });\n\n                $scope.mapCenter = [];\n\n                if ($scope.points.length > 0) {\n                    $scope.mapCenter.push($scope.points[0].latitude);\n                    $scope.mapCenter.push($scope.points[0].longitude);\n                }\n            }\n        };\n\n        $scope.showFinishPopup = function (campaign) {\n            var options = {\n                activateCampaign: $scope.activateCampaign\n            };\n            $modal({\n                templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/billboards/steps/finish.html',\n                controller: 'campaignFinishModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    }\n                },\n                onHide: function onHide() {\n                    $scope.goToCampaign();\n                }\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('campaignFinishModalCtrl', ['$scope', '$alert', 'campaignsService', 'modalOptions', function ($scope, $alert, campaignsService, modalOptions) {\n\n        $scope.activate = function () {\n            modalOptions.activateCampaign().then(function () {\n                $scope.$hide();\n                $alert({\n                    // title: 'Campagin deleted.',\n                    content: 'Activation successful',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n            }, function () {\n\n                $scope.$hide();\n                $alert({\n                    // title: 'Campagin deleted.',\n                    content: 'Cannot activation this campaign',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'error',\n                    show: true\n                });\n            });\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('magazineAdsCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', 'campaignId', 'viewDetail', 'kachingZonecampaignEditorService', 'campaignsService', '$q', function ($scope, $state, $stateParams, campaignEditorService, campaignId, viewDetail, kachingZonecampaignEditorService, campaignsService, $q) {\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        editor.init(campaignId);\n\n        $scope.step = 2;\n        if (viewDetail) {\n            $scope.step = 4;\n            $scope.viewDetail = viewDetail;\n        }\n        $scope.progress = 1;\n        $scope.balance = undefined;\n\n        if (campaignId !== undefined) {\n            $scope.editId = campaignId;\n            $scope.loadEditMode = false;\n            $scope.progress = 4;\n            $scope.createMode = false;\n        } else {\n            $scope.createMode = true;\n        }\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/magazine-ads/steps/';\n        $scope.magazineAdsStep = {\n            step1: templateFolder + 'step1.html',\n            step2: templateFolder + 'step2.html',\n            step3: templateFolder + 'step3.html',\n            step4: templateFolder + 'step4.html'\n        };\n\n        $scope.goNext = function () {\n            $scope.step += 1;\n            $scope.progress += 1;\n        };\n\n        $scope.goPrev = function () {\n            $scope.step -= 1;\n        };\n\n        $scope.updateStep = function (newVal) {\n            if ($scope.editId) {\n                $scope.step = newVal;\n            } else {\n                $scope.createMode = false;\n                if (newVal <= $scope.progress) {\n                    $scope.step = newVal;\n                } else {\n                    return;\n                }\n            }\n        };\n\n        $scope.updateBalance = function (value) {\n            $scope.balance = value;\n        };\n\n        $scope.activeCampaign = function () {\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n\n            var campaignId = editor.dataGet('campaignId');\n            campaignsService.getCampaign(campaignId).then(function (data) {\n                if (data.media && data.media.length > 0) {\n                    if (campaignStatus === 'start' || campaignStatus === false || !$scope.editId && !campaignStatus) {\n                        $scope.campaignId = editor.dataGet('campaignId');\n                        campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                            deferred.resolve(response);\n                        }, function (response) {\n                            deferred.reject(response);\n                        });\n                    }\n                } else {\n                    deferred.reject();\n                }\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.goToFund = function (modal) {\n            $scope.$broadcast('fund-broadcast');\n            modal.$hide();\n            $state.go('funds');\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('magStep1Ctrl', ['$scope', '$state', '$stateParams', 'apiUrl', 'authToken', 'errorHandler', 'campaignEditorService', 'utils', 'FileUploader', 'campaignsService', '$q', '$http', '$location', '$anchorScroll', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'userService', function ($scope, $state, $stateParams, apiUrl, authToken, errorHandler, campaignEditorService, utils, FileUploader, campaignsService, $q, $http, $location, $anchorScroll, kachingZonesHelpers, kachingZonecampaignEditorService, userService) {\n        var helper = kachingZonesHelpers;\n        // var editor = campaignEditorService;\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.view = {\n            busy: true\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'customerLogo') {\n                $scope.campaign.logo_image = newItem._file;\n            }\n            if (newItem.alias === 'backgroundImage') {\n                $scope.campaign.header_image = newItem._file;\n            }\n        };\n\n        $scope.campaign = {};\n        $scope.targeting = {};\n        $scope.budgeting = {};\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.data = {\n            campaign: $scope.campaign,\n            targeting: $scope.targeting,\n            budgeting: $scope.budgeting,\n            daterange: $scope.daterange\n        };\n        $scope.hasBudget = false;\n\n        $scope.campaignStatus = {\n            status: 'start'\n        };\n\n        // flatform\n        $scope.allFlatform = {\n            all: 'true'\n        };\n        $scope.flatform = {\n            os: 'ios'\n        };\n\n        $scope.$watch('allFlatform.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.flatform.os === null) {\n                    $scope.flatform.os = 'ios';\n                }\n            }\n        });\n\n        $scope.$watch('flatform.os', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allFlatform.all = 'false';\n            }\n        });\n\n        // gender\n        $scope.allGender = {\n            all: 'true'\n        };\n        $scope.gender = {\n            sex: 'male'\n        };\n\n        $scope.$watch('allGender.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.gender.sex === null) {\n                    $scope.gender.sex = 'male';\n                }\n            }\n        });\n\n        $scope.$watch('gender.sex', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allGender.all = 'false';\n            }\n        });\n\n        // community\n\n        $scope.communityOption = {\n            all: true\n        };\n        $scope.unSelectAllCommunities = function () {\n            $scope.targeting.selectedCommunity = [];\n        };\n        $scope.firstSelectCommunity = function () {\n            if ($scope.data.selectedCommunity.length === 0) {\n                $scope.data.selectedCommunity = ['Urban'];\n            }\n        };\n        $scope.toggleCommunity = function (item, list) {\n            var idx = list.indexOf(item);\n            if (idx > -1) {\n                list.splice(idx, 1);\n            } else {\n                list.push(item);\n            }\n\n            $scope.communityOption.all = false;\n        };\n        $scope.communityExists = function (item, list) {\n            return list.indexOf(item) > -1;\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n            console.log($scope.data);\n        };\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            if ($scope.editId !== undefined) {\n                campaignsService.getCampaign($scope.editId).then(function (campaign) {\n                    $scope.campaign = campaign;\n                    $scope.campaign.logo_image = campaign.logo_image;\n                    $scope.campaign.header_image = campaign.header_image;\n                    // $scope.campaign.amount = campaign.fund;\n                    $scope.campaign.customerName = campaign.client;\n                    $scope.campaign.description = campaign.description;\n                    $scope.campaign.logo_description = campaign.logo_description;\n                    $scope.campaign.header_description = campaign.header_description;\n\n                    if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                        $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                        $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n                    $scope.campaign.type = 'magazine';\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                    $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                    $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                    $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                }\n                $scope.campaign.type = 'magazine';\n                deferred.resolve();\n            }\n            return deferred.promise;\n        };\n\n        var updateGender = function updateGender() {\n            if ($scope.targeting.gender.male && $scope.targeting.gender.female) {\n                $scope.allGender.all = 'true';\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.targeting.gender.male) {\n                    $scope.gender.sex = 'male';\n                } else {\n                    $scope.gender.sex = 'female';\n                }\n                $scope.allGender.all = 'false';\n            }\n        };\n\n        var updatePlatform = function updatePlatform() {\n            if ($scope.targeting.os.ios && $scope.targeting.os.android) {\n                $scope.allFlatform.all = 'true';\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.targeting.os.ios) {\n                    $scope.flatform.os = 'ios';\n                } else {\n                    $scope.flatform.os = 'android';\n                }\n                $scope.allFlatform.all = 'false';\n            }\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                updateGender();\n                updatePlatform();\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting.allCategories = response.allCategories;\n                    $scope.targeting.allLocations = response.allLocations;\n                    $scope.targeting.categories = response.categories;\n                    $scope.targeting.locations = response.locations;\n                    $scope.targeting.gender = response.gender;\n                    $scope.targeting.os = response.os;\n                    $scope.targeting.ageRange = response.ageRange;\n                    $scope.targeting.ageRanges = response.ageRanges;\n                    // $scope.view.busy = false;\n                    updateGender();\n                    updatePlatform();\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n        var initBudgeting = function initBudgeting() {\n            var deferred = $q.defer();\n            var budgetingData = editor.dataGet('budgeting');\n            if (!_.isEmpty(budgetingData)) {\n                $scope.budgeting = budgetingData;\n                $scope.hasBudget = true;\n            } else {\n                if ($scope.editId) {\n                    campaignsService.getCampaignBudget($scope.editId).then(function (data) {\n                        $scope.budgeting = data.results[0];\n                        $scope.hasBudget = true;\n                        deferred.resolve();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                        deferred.reject();\n                    });\n                }\n            }\n            deferred.resolve();\n            return deferred.promise;\n        };\n        var initBalance = function initBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function (response) {\n                $scope.balance = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                console.log('balance: ', $scope.balance);\n                $scope.updateBalance($scope.balance);\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        };\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n            initBudgeting().then(function () {\n                deferred3.resolve();\n            }, function () {\n                deferred3.reject();\n            });\n\n            initBalance().then(function () {\n                deferred4.resolve();\n            }, function () {\n                deferred4.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            editor.currentStep(1);\n            editor.previousState(1);\n            $scope.fundError = false;\n\n            $scope.catAccordionStatus = {\n                open: true\n            };\n\n            $scope.countriesAccordionStatus = {\n                open: true\n            };\n\n            $scope.view.busy = true;\n            initData().then(function () {\n                if ($scope.editId) {\n                    $scope.campaign.id = $scope.editId;\n                    // $scope.hasBudget = true;\n                }\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n        function checkAllOption(allVal, arrVal) {\n            var all = true;\n            angular.forEach(arrVal, function (item, index) {\n                if (item.selected === false) {\n                    all = false;\n                    return;\n                }\n            });\n            return all;\n        }\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n\n                // angular.element()\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step1', 'submitted', true);\n            editor.dataSet('campaignStatus', $scope.campaignStatus.status);\n\n            $scope.targeting.allCategories = checkAllOption($scope.targeting.allCategories, $scope.targeting.categories);\n            $scope.targeting.allLocations = checkAllOption($scope.targeting.allLocations, $scope.targeting.locations);\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = $scope.daterange.dates.startDate.toISOString();\n                $scope.campaign.end_date = $scope.daterange.dates.endDate.toISOString();\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('campaign', $scope.campaign);\n\n                if ($scope.allFlatform.all === 'true') {\n                    $scope.targeting.os.android = true;\n                    $scope.targeting.os.ios = true;\n                } else {\n                    if ($scope.flatform.os === 'ios') {\n                        $scope.targeting.os.ios = true;\n                        $scope.targeting.os.android = false;\n                    } else {\n                        $scope.targeting.os.ios = false;\n                        $scope.targeting.os.android = true;\n                    }\n                }\n\n                if ($scope.allGender.all === 'true') {\n                    $scope.targeting.gender.male = true;\n                    $scope.targeting.gender.female = true;\n                } else {\n                    if ($scope.gender.sex === 'male') {\n                        $scope.targeting.gender.male = true;\n                        $scope.targeting.gender.female = false;\n                    } else {\n                        $scope.targeting.gender.male = false;\n                        $scope.targeting.gender.female = true;\n                    }\n                }\n\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('targeting', $scope.targeting);\n\n                // dummy budgeting data - TODO: replace this with real data\n                if ($scope.editId === undefined && !$scope.hasBudget) {\n                    $scope.budgeting = {\n                        cost_per_view: 12,\n                        amount: 0,\n                        type: 1\n                    };\n                }\n                $scope.budgeting.hasBudget = $scope.hasBudget;\n\n                editor.dataSet('budgeting', $scope.budgeting);\n\n                $scope.fundError = false;\n                editor.save('step1').then(function (data) {\n                    $scope.goNext();\n                    $scope.view.busy = false;\n                    if ($scope.editId !== undefined && editor.stepGet('step1', 'submitted')) {\n                        helper.alert('success', 'Campaign has been updated.');\n                    } else {\n                        helper.alert('success', 'Campaign has been created.');\n                    }\n                    $scope.activeCampaign();\n                }, function (response) {\n                    if (response.status == 400 && response.data.errorDetails.logicProcessing.processingErrors[0].code == 44) {\n                        helper.alert('danger', response.data.errorDetails.logicProcessing.processingErrors[0].message);\n                        $scope.fundError = true;\n                    } else {\n                        errorHandler.processApiResponse(response);\n                    }\n                    $scope.view.busy = false;\n                    console.log('create campaign error');\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n                if (angular.element('.ng-invalid').length > 0) {\n                    angular.element('.ng-invalid').focus();\n                }\n                if (angular.element('.image-error').length > 0) {\n                    angular.element('.image-error').focus();\n                }\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n            }\n        };\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - campaign', angular.copy($scope.campaign));\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('magStep2Ctrl', ['$scope', '$state', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', 'countryService', 'kachingZonecampaignEditorService', 'campaignsService', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', '$anchorScroll', '$location', function ($scope, $state, apiUrl, authToken, utils, mediaService, FileUploader, countryService, kachingZonecampaignEditorService, campaignsService, $http, $q, errorHandler, kachingZonesHelpers, $anchorScroll, $location) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: true,\n            uploading: false,\n            submitted: false,\n            mediaCreated: false,\n\n            videoUploadStarted: false,\n            videoUploadProgress: 0,\n            videoUploadComplete: false,\n\n            imageUploadStarted: false,\n            imageUploadProgress: 0,\n            imageUploadComplete: false,\n\n            arImageUploadStarted: false,\n            arImageUploadProgress: 0,\n            arImageUploadComplete: false,\n\n            brandImageUploadStarted: false,\n            brandImageUploadProgress: 0,\n            brandImageUploadComplete: false\n        };\n\n        $scope.data = {\n            arImageFile: '',\n            imageFile: '',\n            mediaName: '',\n            mediaId: '',\n            imageName: '',\n            arImageName: '',\n            description: '',\n            brandImageFile: '',\n            brandDescription: '',\n            animation: ''\n        };\n\n        $scope.magezines = ['Tatler', 'GQ', 'Time', 'The Economist', 'Cosmopolitan', 'National Geographic', 'Sports Illustrated', 'Glamour', 'Other'];\n\n        // Check other values of selected\n        $scope.changeSelect = function () {\n            if ($scope.selectedMagezine.toUpperCase() === 'OTHER') {\n                if (!$scope.magazineOther) {\n                    $scope.magazineOther = '';\n                }\n                $scope.isOther = true;\n            } else {\n                $scope.isOther = false;\n            }\n        };\n\n        $scope.mediaTypeProp = {\n            'type': 'select',\n            'name': 'media_type',\n            'mediaTypeSelect': 'Upload Media',\n            'values': ['Upload Media', 'External Link']\n        };\n\n        $scope.errors = {\n            video: {},\n            image: {},\n            arImage: {}\n        };\n\n        var imageStyle = 'background-image: none;border-color: #ccc;';\n        $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n        $scope.imageFileList = [];\n        $scope.imageReviewIdx = 0;\n\n        $scope.mediaList = [];\n\n        var checkFormPristine = function checkFormPristine() {\n            if (!$scope.form1.$pristine) {\n                return false;\n            } else {\n                // if ($scope.latitude || $scope.longitude) {\n                //     return false;\n                // }\n                for (var property in $scope.data) {\n                    if ($scope.data[property]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        };\n\n        $scope.nextStep = function () {\n            $scope.form1.$setSubmitted();\n            if (checkFormPristine() && $scope.mediaList.length > 0) {\n                editor.stepSet('step2', 'submitted', true);\n                if ($scope.mediaList.length > 0) {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.finish().then(function () {\n                        $scope.goNext();\n                    });\n                } else {\n                    editor.stepSet('step2', 'valid', false);\n                    setTimeout(function () {\n                        $scope.scrollToFirstError();\n                    }, 100);\n                    helper.alert('danger', 'Please add at least one AR');\n                }\n            } else {\n                $scope.saveMedia().then(function () {\n                    editor.stepSet('step2', 'submitted', true);\n                    if ($scope.mediaList.length > 0) {\n                        editor.stepSet('step2', 'valid', true);\n                        $scope.finish().then(function () {\n                            $scope.goNext();\n                        });\n                    } else {\n                        editor.stepSet('step2', 'valid', false);\n                        setTimeout(function () {\n                            $scope.scrollToFirstError();\n                        }, 100);\n                        helper.alert('danger', 'Please add at least one AR');\n                    }\n                }, function () {});\n            }\n        };\n\n        $scope.goPrev = function () {\n            $scope.updateStep(1);\n        };\n\n        $scope.updateReviewIndex = function (idx) {\n            $scope.imageReviewIdx = idx;\n            $scope.data.imageFile = $scope.imageFileList[$scope.imageReviewIdx];\n            console.log($scope.data.imageFile);\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'arDisplay') {\n                $scope.data.arImageFile = newItem._file;\n            }\n            if (newItem.alias === 'brandImage') {\n                $scope.data.brandImageFile = newItem._file;\n            }\n            if (newItem.alias === 'display') {\n                $scope.data.imageFile = newItem._file;\n                setTimeout(function () {\n                    var $review = angular.element('.uploader-dropzone.image-selected');\n                    var imgStyle = $review.attr('style');\n                    $scope.imageList[$scope.imageReviewIdx] = imgStyle;\n                    $scope.imageFileList[$scope.imageReviewIdx] = $scope.data.imageFile;\n                    $scope.imageReviewIdx++;\n                    if ($scope.imageReviewIdx === 4) {\n                        $scope.imageReviewIdx = 0;\n                    }\n                    $scope.$apply();\n                }, 100);\n            }\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            if (item.alias === 'arDisplay') {\n                $scope.view.arImageUploadStarted = true;\n            }\n            if (item.alias === 'display') {\n                $scope.view.imageUploadStarted = true;\n            }\n            if (item.alias === 'brandImage') {\n                $scope.view.brandImageUploadStarted = true;\n            }\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            if (fileItem.alias === 'arDisplay') {\n                $scope.view.arImageUploadComplete = true;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadComplete = true;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.brandImageUploadComplete = true;\n            }\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            if (fileItem.alias === 'arDisplay') {\n                $scope.view.arImageUploadProgress = progress;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadProgress = progress;\n            }\n            if (fileItem.alias === 'brandImage') {\n                $scope.view.brandImageUploadProgress = progress;\n            }\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.videoHasError = function () {\n            return _typeof($scope.data.videoFile) !== 'object';\n        };\n\n        $scope.imageHasError = function () {\n            if (_typeof($scope.data.imageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.viewMedia = function () {\n            $scope.$hide();\n            $state.go('media.view', {\n                mediaId: $scope.data.mediaId\n            });\n        };\n\n        $scope.editMedia = function (mediaId) {\n            helper.alert('info', 'You are in edit mode!');\n            $scope.editMode = true;\n            helper.resetAngularFields($scope);\n            $scope.previewMediaId = mediaId.id;\n            mediaService.getMediaItem($scope.previewMediaId).then(function (response) {\n                $scope.data.description = response.description;\n                $scope.data.arImageFile = helper.getMediaPreviewFromUrl(response.ar_resource);\n                $scope.data.arImageName = response.ar_name;\n                $scope.appearance = response.ar_appearance;\n                $scope.imageType = response.ar_resource_type;\n                $scope.data.imageName = response.target_name;\n                $scope.data.url = response.target_url;\n                $scope.data.imageFile = response.target;\n                $scope.data.brandImageFile = response.brand_image;\n                $scope.selectedGender = response.gender;\n                $scope.selectedCategory = response.category;\n                $scope.data.animation = response.animation_type;\n                $scope.selectedMagezine = response.magazine_name;\n\n                if (_.find($scope.magezines, function (item) {\n                    return item == $scope.selectedMagezine;\n                })) {\n                    $scope.isOther = false;\n                } else {\n                    $scope.isOther = true;\n                    $scope.magazineOther = $scope.selectedMagezine;\n                    $scope.selectedMagezine = 'Other';\n                }\n\n                $scope.imageList = [];\n                $scope.imageFileList = [];\n                $scope.imageReviewIdx = 0;\n                if ($scope.data.imageFile) {\n                    setTimeout(function () {\n                        var $review = angular.element('.uploader-dropzone.image-selected');\n                        var imgStyle = $review.attr('style');\n                        $scope.imageList.push(imgStyle);\n                        $scope.imageFileList.push(imgStyle);\n                        $scope.imageReviewIdx = 1;\n                        var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                        while ($scope.imageList.length < 4) {\n                            $scope.imageList.push(emptyImageStyle);\n                        }\n                        if ($scope.imageList.length > 0) {\n                            $scope.isAddImage = true;\n                        }\n                    }, 100);\n                } else {\n                    var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                    while ($scope.imageList.length < 4) {\n                        $scope.imageList.push(emptyImageStyle);\n                    }\n                }\n            });\n        };\n\n        var saveMedia = function saveMedia() {\n\n            var deferred = $q.defer();\n\n            if ($scope.form1.$valid && $scope.data.arImageFile !== null) {\n                $scope.validateError = false;\n                $scope.isAddImage = false;\n\n                var mediaData = {\n                    description: $scope.data.description,\n                    type: 'magazine',\n                    ar_name: $scope.data.arImageName,\n                    ar_appearance: $scope.appearance,\n                    ar_resource_type: $scope.imageType,\n                    target_name: $scope.data.imageName,\n                    target_format: 'magazine'\n                    // target_url: $scope.data.url,\n                };\n                if ($scope.selectedMagezine) {\n                    if ($scope.selectedMagezine.toUpperCase() === 'OTHER') {\n                        mediaData.magazine_name = $scope.magazineOther;\n                        $scope.magazineOther = '';\n                    } else {\n                        mediaData.magazine_name = $scope.selectedMagezine;\n                    }\n                }\n\n                if ($scope.data.url) {\n                    mediaData.target_url = $scope.data.url;\n\n                    if (mediaData.target_url.indexOf('http://') === -1) {\n                        mediaData.target_url = 'http://' + mediaData.target_url;\n                    }\n                } else {\n                    if (!$scope.data.url) {\n                        mediaData.target_url = '';\n                    }\n                }\n\n                if ($scope.editMode) {\n                    mediaData.id = $scope.previewMediaId;\n                }\n\n                if ($scope.data.arImageFile !== null && _typeof($scope.data.arImageFile) === 'object') {\n                    mediaData.ar_resource = $scope.data.arImageFile;\n                }\n                if ($scope.data.imageFile !== null && _typeof($scope.data.imageFile) === 'object') {\n                    mediaData.target = $scope.data.imageFile;\n                } else {\n                    if (!$scope.data.imageFile) {\n                        mediaData.target = '';\n                    }\n                }\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                $scope.validateError = true;\n                editor.stepSet('step2', 'valid', false);\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.saveMedia = function () {\n            var deferred = $q.defer();\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                saveMedia().then(function (data) {\n                    $scope.form1.$setPristine();\n                    if ($scope.editMode) {\n                        $scope.editMode = false;\n                        helper.alert('success', 'Media has been updated.');\n                        $scope.view.busy = false;\n                        $scope.clearForm();\n                        $scope.loadSubmittedMedia();\n                        deferred.resolve();\n                    } else {\n                        $scope.mediaList.push(data);\n                        editor.dataSet('mediaList', $scope.mediaList);\n                        $scope.getMedia(data.id).then(function () {\n                            deferred.resolve();\n                        }, function () {\n                            deferred.reject();\n                        });\n                        $scope.clearForm();\n                    }\n                }, function (response) {\n                    $scope.form1.$setPristine();\n                    $scope.view.busy = false;\n                    deferred.reject();\n                });\n            } else {\n                $scope.scrollToFirstError();\n                helper.alert('danger', 'Please fill all required fields');\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.deleteMedia = function (mediaId) {\n            $scope.previewMediaId = mediaId.id;\n            campaignsService.deleteMedia($scope.previewMediaId).then(function (response) {\n                console.log(response);\n                helper.alert('success', 'Media has been deleted');\n                $scope.loadSubmittedMedia();\n            }, function (response) {\n                console.log(response);\n                helper.alert('danger', 'Media has not been deleted.');\n            });\n        };\n\n        $scope.removeAddImageForm = function () {\n            $scope.data.description = '';\n            $scope.data.imageName = '';\n            $scope.data.imageFile = '';\n            $scope.data.url = '';\n            $scope.selectedMagezine = $scope.magezines[0];\n            $scope.magazineOther = '';\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('.image-review-list');\n            $scope.imageList = [];\n            $scope.imageReviewIdx = 0;\n            var imageStyle = 'background-image: none;border-color: #ccc;';\n            $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n\n            var mediaData = {\n                description: '',\n                target: '',\n                target_name: '',\n                target_format: '',\n                target_url: '',\n                magazine_name: ''\n            };\n\n            $scope.isAddImage = false;\n            $scope.isOther = false;\n            $scope.form1.description.$pristine;\n            $scope.form1.imageName.$pristine;\n            $scope.form1.imageFile.$pristine;\n            $scope.form1.url.$pristine;\n        };\n\n        $scope.clearForm = function () {\n            helper.clearForm();\n\n            $scope.data = {\n                arImageFile: '',\n                imageFile: '',\n                mediaName: '',\n                mediaId: '',\n                imageName: '',\n                arImageName: '',\n                description: '',\n                brandImageFile: '',\n                brandDescription: '',\n                animation: ''\n            };\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('#arImageFile');\n            helper.clearFileUploader('.image-review-list');\n\n            $scope.imageList = [];\n            var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n            while ($scope.imageList.length < 4) {\n                $scope.imageList.push(emptyImageStyle);\n            }\n            $scope.imageFileList = [];\n            $scope.imageReviewIdx = 0;\n        };\n\n        $scope.cancelEdit = function () {\n            $scope.clearForm();\n            $scope.editMode = false;\n            $scope.magazineOther = '';\n            $scope.isAddImage = false;\n        };\n\n        $scope.getMedia = function (mediaId) {\n            var deferred = $q.defer();\n            // $scope.view.busyMedia = true;\n            $scope.view.busy = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.view.busy = false;\n                $scope.media = mediaItem;\n                editor.dataSet('media', $scope.media);\n\n                editor.save('step2').then(function () {\n                    $scope.campaignId = editor.dataGet('campaignId');\n                    campaignsService.getCampaign($scope.campaignId);\n                    // show notification\n                    helper.alert('success', 'Media has been created.');\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }, function () {\n                // $scope.view.busyMedia = false;\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n        $scope.getFormats = function () {\n            $scope.formats = ['Commercial'];\n        };\n\n        $scope.getFormats();\n\n        $scope.loadSubmittedMedia = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.mediaList = response.media;\n                });\n            }\n        };\n\n        $scope.finish = function () {\n\n            var deferred = $q.defer();\n\n            var campaignStatus = editor.dataGet('campaignStatus');\n            var campaign = editor.dataGet('campaign');\n\n            if (campaignStatus === 'start' && !campaign.status || $scope.editId) {\n                // $scope.view.busy = true;\n                // $scope.campaignId = editor.dataGet( 'campaignId' );\n                // campaignsService.setPrepared( $scope.campaignId ).then(\n                //     function( response ) {\n                //         $scope.view.busy = false;\n                //         deferred.resolve(response);\n                //     },\n                //     function( response ) {\n                //         errorHandler.processApiResponse( response );\n                //         $scope.view.busy = false;\n                //         deferred.reject(response);\n                //     }\n                // );\n                $scope.activeCampaign().then(function () {\n                    deferred.resolve();\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                deferred.resolve();\n            }\n\n            return deferred.promise;\n        };\n\n        $scope.scrollToFirstError = function () {\n            var elementName = $scope.form1.$error.required[0].$name;\n            var firstErrorId = document.getElementsByName(elementName)[0].id;\n            $location.hash(firstErrorId);\n            $anchorScroll();\n        };\n\n        $scope.needBasicValidateZone = function () {\n            if ($scope.data.imageName || $scope.data.imageFile) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.init = function () {\n            // //BEGIN: fake data\n            // $scope.data.imageName       = \"image name\";\n            // $scope.data.description     = \"description\";\n            // $scope.data.arImageName     = \"ar image name\";\n            // $scope.data.url             = \"http://abc.com\";\n            // $scope.inclusionZone        = 10;\n            // $scope.address              = \"14/2 Trng Chinh, Phng 15, Tn Bnh, H Ch Minh, Vietnam\";\n            // //END: fake data\n            $scope.editMode = false;\n            $scope.isAddImage = false;\n            $scope.loadSubmittedMedia();\n            var targetingData = editor.dataGet('targeting');\n            $scope.view.busy = false;\n        };\n\n        function checkMediaValidation() {\n            if ($scope.data.arImageName === '') {\n                helper.alert('danger', 'Please fill all required fields');\n                return false;\n            }\n            return true;\n        }\n        function checkCampaignValidation() {\n            if ($scope.mediaList.length !== 0) {\n                return true;\n            }\n            helper.alert('danger', 'Please, submit at least one media');\n            return false;\n        }\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        $scope.init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('magStep3Ctrl', ['$scope', 'productsService', 'kachingZonecampaignEditorService', 'campaignsService', 'mediaService', 'utils', 'FileUploader', 'apiUrl', 'authToken', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', function ($scope, productsService, kachingZonecampaignEditorService, campaignsService, mediaService, utils, FileUploader, apiUrl, authToken, $http, $q, errorHandler, kachingZonesHelpers) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/products/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.view = {\n            busy: true,\n            productImageUploadStarted: false,\n            productImageUploadProgress: 0,\n            productImageUploadComplete: false\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.productImageFile = newItem._file;\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            $scope.view.productImageUploadStarted = true;\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            $scope.view.productImageUploadComplete = true;\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            $scope.view.productImageUploadProgress = progress;\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n        };\n\n        $scope.data = {\n            'title': '',\n            'description': '',\n            'pirce': '',\n            'url': ''\n        };\n\n        $scope.previewData = {\n            isInstore: false,\n            followIBeacon: { enabled: false },\n            scanReceipt: { enabled: false },\n            issueQR: { enabled: false },\n            buyProducts: { enabled: false },\n            sendInformation: { enabled: false },\n            register: { enabled: false },\n            share: { enabled: false },\n            openMicrophone: { enabled: false },\n            watchVideo: { enabled: false }\n        };\n\n        $scope.recommendedProducts = [];\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-triangle-left\"></span>', '<span class=\"glyphicon glyphicon-triangle-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n        $scope.products = editor.dataGet('products');\n\n        var myArr = [{\n            type: 'type',\n            perDollarPerClick: 3\n        }, {\n            type: 'another type',\n            perDollarPerClick: 2\n        }];\n        $scope.purchaseAds = myArr;\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step3', 'submitted', true);\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step3', 'valid', true);\n                $scope.updateAllMedia($scope.medias).then(function () {\n                    $scope.goNext();\n                    helper.alert('success', 'All media has been updated');\n                    $scope.view.busy = false;\n                    $scope.activeCampaign();\n                }, function (response) {\n                    $scope.view.busy = false;\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        $scope.selectRecommendedProduct = function (product) {\n            $scope.editMode = true;\n            $scope.data.productIdInEdit = product.id;\n            $scope.data.title = product.title;\n            $scope.data.description = product.description;\n            $scope.data.price = product.price;\n            $scope.data.url = product.url;\n            $scope.data.productImageFile = product.image;\n            helper.alert('info', 'Product in edit mode!');\n        };\n\n        $scope.updateAllMedia = function (medias) {\n            var deferred = $q.defer();\n            var promisses = [];\n\n            angular.forEach(medias, function (media) {\n                var prodDeferred = $q.defer();\n                promisses.push(prodDeferred.promise);\n                var mediaData = {\n                    id: media.id,\n                    bets_per_view: media.bets_per_view,\n                    type: 'magazine'\n                };\n                campaignsService.updateMedia(mediaData).then(function (response) {\n                    prodDeferred.resolve(response);\n                }, function (response) {\n                    prodDeferred.reject(response);\n                });\n\n                // Update Media\n                var rewardDeferred = $q.defer();\n                promisses.push(rewardDeferred.promise);\n                var rewardData = {\n                    send_information: media.reward.send_information,\n                    share: media.reward.share,\n                    product: media.reward.product\n                };\n                mediaService.updateReward(media.id, rewardData).then(function (response) {\n                    rewardDeferred.resolve(response);\n                }, function (response) {\n                    rewardDeferred.reject(response);\n                });\n\n                // Update Campaign\n                var registerDeferred = $q.defer();\n                promisses.push(registerDeferred.promise);\n                var campaign = {\n                    id: $scope.campaignId,\n                    register: $scope.campaign.register\n                };\n                campaignsService.saveKachingZoneCampagin(campaign).then(function (response) {\n                    registerDeferred.resolve(response);\n                }, function (response) {\n                    registerDeferred.reject(response);\n                });\n            });\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n            return deferred.promise;\n        };\n\n        $scope.saveProduct = function () {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url,\n                image: $scope.data.productImageFile\n            };\n\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.updateProduct = function (productId) {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                id: productId,\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n            if (_typeof($scope.data.productImageFile) === 'object' && $scope.data.productImageFile != null) {\n                productData.image = $scope.data.productImageFile;\n            }\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n            return deferred.promise;\n        };\n\n        $scope.submitProduct = function () {\n            if ($scope.editMode) {\n                $scope.updateProduct($scope.data.productIdInEdit).then(function (response) {\n                    helper.alert('success', 'Product have been updated');\n                    $scope.loadSubmittedProducts();\n                    $scope.editMode = false;\n                }, function (error) {\n                    errorHandler.processApiResponse(error);\n                    $scope.editMode = false;\n                });\n            } else {\n                $scope.view.busy = true;\n                $scope.saveProduct().then(function (response) {\n                    console.log(response);\n                    productsService.getProduct(response.id).then(function (product) {\n                        $scope.recommendedProducts.push(product);\n                        campaignsService.saveProducts($scope.campaignId, $scope.recommendedProducts).then(function (reponse) {\n                            $scope.view.busy = false;\n                            helper.alert('success', 'Product have been added');\n                        }, function (error) {\n                            errorHandler.processApiResponse(error);\n                        });\n                    }, function (error) {\n                        errorHandler.processApiResponse(error);\n                    });\n                }, function (error) {\n                    console.log(error);\n                    $scope.view.busy = false;\n                });\n            }\n        };\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        var init = function init() {\n            // //BEGIN: fake data\n            // $scope.data.title = 'product title';\n            // $scope.data.url = 'testProduct.com';\n            // $scope.data.price = '12';\n            // $scope.data.description ='product description';\n            // //END: fake data\n\n            $scope.loadSubmittedProducts();\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n            $scope.campaignId = editor.dataGet('campaignId');\n            $scope.grandTotal = 0;\n            campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                $scope.campaign = campaign;\n\n                if (!$scope.campaign.register) {\n                    $scope.campaign.register = 0;\n                }\n\n                if (campaign.media.length > 0) {\n                    $scope.medias = campaign.media;\n                    angular.forEach($scope.medias, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                        if (!value.reward) {\n                            value.reward = {\n                                send_information: 0,\n                                share: 0,\n                                product: 0\n                            };\n                        }\n                    });\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        init();\n\n        $scope.$watchCollection('medias', function (newVal, oldVal) {});\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.saveProduct();\n                $scope.nextStep();\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('magStep4Ctrl', ['$scope', 'productsService', 'campaignsService', 'campaignEditorService', 'kachingZonecampaignEditorService', '$q', 'errorHandler', function ($scope, productsService, campaignsService, campaignEditorService, kachingZonecampaignEditorService, $q, errorHandler) {\n        var editor = kachingZonecampaignEditorService;\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.locations = {};\n        $scope.categories = {};\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            var mediaListData = editor.dataGet('mediaList');\n            if (!_.isEmpty(mediaListData)) {\n                $scope.mediaList = mediaListData;\n                $scope.campaignId = editor.dataGet('campaignId');\n                $scope.media = editor.dataGet('media');\n                campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                    $scope.campaign = response;\n                });\n                deferred.resolve();\n            } else {\n                campaignsService.getCampaign($scope.editId).then(function (data) {\n                    $scope.mediaList = data.media;\n                    $scope.campaign = data;\n                    angular.forEach($scope.mediaList, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                    });\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                var arrLocations = [],\n                    arrCategories = [];\n                // Get a location have selected true\n                angular.forEach($scope.targeting.locations, function (item, id) {\n                    if (item.selected === true) {\n                        arrLocations.push(item);\n                    }\n                });\n                // Get a category have selected true\n                angular.forEach($scope.targeting.categories, function (item, id) {\n                    if (item.selected === true) {\n                        arrCategories.push(item);\n                    }\n                });\n                $scope.locations = arrLocations;\n                $scope.categories = arrCategories;\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting = response;\n                    var arrLocations = [],\n                        arrCategories = [];\n                    // Get a location have selected true\n                    angular.forEach($scope.targeting.locations, function (item, id) {\n                        if (item.selected === true) {\n                            arrLocations.push(item);\n                        }\n                    });\n                    // Get a category have selected true\n                    angular.forEach($scope.targeting.categories, function (item, id) {\n                        if (item.selected === true) {\n                            arrCategories.push(item);\n                        }\n                    });\n                    $scope.locations = arrLocations;\n                    $scope.categories = arrCategories;\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(4);\n            editor.previousState(4);\n\n            $scope.loadSubmittedProducts();\n            $scope.mediaList = [];\n            $scope.grandTotal = 0;\n\n            initData().then(function () {\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('instoreCampaignCtrl', ['$scope', '$state', '$stateParams', 'campaignId', 'viewDetail', 'campaignEditorService', 'kachingZonecampaignEditorService', 'campaignsService', '$q', function ($scope, $state, $stateParams, campaignId, viewDetail, campaignEditorService, kachingZonecampaignEditorService, campaignsService, $q) {\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        editor.init(campaignId);\n\n        $scope.step = 1;\n        if (viewDetail) {\n            $scope.step = 4;\n            $scope.viewDetail = viewDetail;\n        }\n        $scope.progress = 1;\n        $scope.balance = undefined;\n\n        if (campaignId !== undefined) {\n            $scope.editId = campaignId;\n            $scope.loadEditMode = false;\n            $scope.progress = 4;\n        } else {\n            $scope.createMode = true;\n        }\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/instore-campaign/steps/';\n        $scope.instoreCampaignStep = {\n            step1: templateFolder + 'step2.html',\n            step2: templateFolder + 'step2.html',\n            step3: templateFolder + 'step3.html',\n            step4: templateFolder + 'step4.html'\n        };\n\n        $scope.goNext = function () {\n            $scope.step += 1;\n            $scope.progress += 1;\n        };\n\n        $scope.goPrev = function () {\n            $scope.step -= 1;\n        };\n\n        $scope.updateStep = function (newVal) {\n            if ($scope.editId) {\n                $scope.step = newVal;\n            } else {\n                $scope.createMode = false;\n                if (newVal <= $scope.progress) {\n                    $scope.step = newVal;\n                } else {\n                    return;\n                }\n            }\n        };\n\n        $scope.updateBalance = function (value) {\n            $scope.balance = value;\n        };\n\n        $scope.activeCampaign = function () {\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n            var campaignId = editor.dataGet('campaignId');\n            // var campaign = editor.dataGet('campaign');\n            campaignsService.getCampaign(campaignId).then(function (data) {\n                if (data.media && data.media.length > 0) {\n                    if (campaignStatus === 'start' || campaignStatus === false || !$scope.editId && !campaignStatus) {\n                        $scope.campaignId = editor.dataGet('campaignId');\n                        campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                            deferred.resolve(response);\n                        }, function (response) {\n                            deferred.reject(response);\n                        });\n                    }\n                } else {\n                    deferred.reject();\n                }\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.goToFund = function (modal) {\n            $scope.$broadcast('fund-broadcast');\n            modal.$hide();\n            $state.go('funds');\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('instoreStep1Ctrl', ['$scope', '$state', '$stateParams', 'apiUrl', 'authToken', 'errorHandler', 'campaignEditorService', 'utils', 'FileUploader', 'campaignsService', '$q', '$http', '$location', '$anchorScroll', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'userService', function ($scope, $state, $stateParams, apiUrl, authToken, errorHandler, campaignEditorService, utils, FileUploader, campaignsService, $q, $http, $location, $anchorScroll, kachingZonesHelpers, kachingZonecampaignEditorService, userService) {\n        var helper = kachingZonesHelpers;\n        // var editor = campaignEditorService;\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.view = {\n            busy: true\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'customerLogo') {\n                $scope.campaign.logo_image = newItem._file;\n            }\n            if (newItem.alias === 'backgroundImage') {\n                $scope.campaign.header_image = newItem._file;\n            }\n        };\n\n        $scope.campaign = {};\n        $scope.targeting = {};\n        $scope.budgeting = {};\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.data = {\n            campaign: $scope.campaign,\n            targeting: $scope.targeting,\n            budgeting: $scope.budgeting,\n            daterange: $scope.daterange\n        };\n        $scope.hasBudget = false;\n\n        $scope.campaignStatus = {\n            status: 'start'\n        };\n\n        // flatform\n        $scope.allFlatform = {\n            all: 'true'\n        };\n        $scope.flatform = {\n            os: 'ios'\n        };\n\n        $scope.$watch('allFlatform.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.flatform.os === null) {\n                    $scope.flatform.os = 'ios';\n                }\n            }\n        });\n\n        $scope.$watch('flatform.os', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allFlatform.all = 'false';\n            }\n        });\n\n        // gender\n        $scope.allGender = {\n            all: 'true'\n        };\n        $scope.gender = {\n            sex: 'male'\n        };\n\n        $scope.$watch('allGender.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.gender.sex === null) {\n                    $scope.gender.sex = 'male';\n                }\n            }\n        });\n\n        $scope.$watch('gender.sex', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allGender.all = 'false';\n            }\n        });\n\n        // community\n\n        $scope.communityOption = {\n            all: true\n        };\n        $scope.unSelectAllCommunities = function () {\n            $scope.targeting.selectedCommunity = [];\n        };\n        $scope.firstSelectCommunity = function () {\n            if ($scope.data.selectedCommunity.length === 0) {\n                $scope.data.selectedCommunity = ['Urban'];\n            }\n        };\n        $scope.toggleCommunity = function (item, list) {\n            var idx = list.indexOf(item);\n            if (idx > -1) {\n                list.splice(idx, 1);\n            } else {\n                list.push(item);\n            }\n\n            $scope.communityOption.all = false;\n        };\n        $scope.communityExists = function (item, list) {\n            return list.indexOf(item) > -1;\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n            console.log($scope.data);\n        };\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            if ($scope.editId !== undefined) {\n                campaignsService.getCampaign($scope.editId).then(function (campaign) {\n                    $scope.campaign = campaign;\n                    $scope.campaign.logo_image = campaign.logo_image;\n                    $scope.campaign.header_image = campaign.header_image;\n                    // $scope.campaign.amount = campaign.fund;\n                    $scope.campaign.customerName = campaign.client;\n                    $scope.campaign.description = campaign.description;\n                    $scope.campaign.logo_description = campaign.logo_description;\n                    $scope.campaign.header_description = campaign.header_description;\n\n                    if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                        $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                        $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n                    $scope.campaign.type = 'in_store';\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                    $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                    $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                    $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                }\n                $scope.campaign.type = 'in_store';\n                deferred.resolve();\n            }\n            return deferred.promise;\n        };\n\n        var updateGender = function updateGender() {\n            if ($scope.targeting.gender.male && $scope.targeting.gender.female) {\n                $scope.allGender.all = 'true';\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.targeting.gender.male) {\n                    $scope.gender.sex = 'male';\n                } else {\n                    $scope.gender.sex = 'female';\n                }\n                $scope.allGender.all = 'false';\n            }\n        };\n\n        var updatePlatform = function updatePlatform() {\n            if ($scope.targeting.os.ios && $scope.targeting.os.android) {\n                $scope.allFlatform.all = 'true';\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.targeting.os.ios) {\n                    $scope.flatform.os = 'ios';\n                } else {\n                    $scope.flatform.os = 'android';\n                }\n                $scope.allFlatform.all = 'false';\n            }\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                updateGender();\n                updatePlatform();\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting.allCategories = response.allCategories;\n                    $scope.targeting.allLocations = response.allLocations;\n                    $scope.targeting.categories = response.categories;\n                    $scope.targeting.locations = response.locations;\n                    $scope.targeting.gender = response.gender;\n                    $scope.targeting.os = response.os;\n                    $scope.targeting.ageRange = response.ageRange;\n                    $scope.targeting.ageRanges = response.ageRanges;\n                    // $scope.view.busy = false;\n                    updateGender();\n                    updatePlatform();\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n        var initBudgeting = function initBudgeting() {\n            var deferred = $q.defer();\n            var budgetingData = editor.dataGet('budgeting');\n            if (!_.isEmpty(budgetingData)) {\n                $scope.budgeting = budgetingData;\n                $scope.hasBudget = true;\n            } else {\n                if ($scope.editId) {\n                    campaignsService.getCampaignBudget($scope.editId).then(function (data) {\n                        $scope.budgeting = data.results[0];\n                        $scope.hasBudget = true;\n                        deferred.resolve();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                        deferred.reject();\n                    });\n                }\n            }\n            deferred.resolve();\n            return deferred.promise;\n        };\n        var initBalance = function initBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function (response) {\n                $scope.balance = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                console.log('balance: ', $scope.balance);\n                $scope.updateBalance($scope.balance);\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        };\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n            initBudgeting().then(function () {\n                deferred3.resolve();\n            }, function () {\n                deferred3.reject();\n            });\n\n            initBalance().then(function () {\n                deferred4.resolve();\n            }, function () {\n                deferred4.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            editor.currentStep(1);\n            editor.previousState(1);\n            $scope.fundError = false;\n\n            $scope.catAccordionStatus = {\n                open: true\n            };\n\n            $scope.countriesAccordionStatus = {\n                open: true\n            };\n\n            $scope.view.busy = true;\n            initData().then(function () {\n                if ($scope.editId) {\n                    $scope.campaign.id = $scope.editId;\n                    // $scope.hasBudget = true;\n                }\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n        function checkAllOption(allVal, arrVal) {\n            var all = true;\n            angular.forEach(arrVal, function (item, index) {\n                if (item.selected === false) {\n                    all = false;\n                    return;\n                }\n            });\n            return all;\n        }\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n\n                // angular.element()\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step1', 'submitted', true);\n\n            editor.dataSet('campaignStatus', $scope.campaignStatus.status);\n\n            $scope.targeting.allCategories = checkAllOption($scope.targeting.allCategories, $scope.targeting.categories);\n            $scope.targeting.allLocations = checkAllOption($scope.targeting.allLocations, $scope.targeting.locations);\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = $scope.daterange.dates.startDate.toISOString();\n                $scope.campaign.end_date = $scope.daterange.dates.endDate.toISOString();\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('campaign', $scope.campaign);\n\n                if ($scope.allFlatform.all === 'true') {\n                    $scope.targeting.os.android = true;\n                    $scope.targeting.os.ios = true;\n                } else {\n                    if ($scope.flatform.os === 'ios') {\n                        $scope.targeting.os.ios = true;\n                        $scope.targeting.os.android = false;\n                    } else {\n                        $scope.targeting.os.ios = false;\n                        $scope.targeting.os.android = true;\n                    }\n                }\n\n                if ($scope.allGender.all === 'true') {\n                    $scope.targeting.gender.male = true;\n                    $scope.targeting.gender.female = true;\n                } else {\n                    if ($scope.gender.sex === 'male') {\n                        $scope.targeting.gender.male = true;\n                        $scope.targeting.gender.female = false;\n                    } else {\n                        $scope.targeting.gender.male = false;\n                        $scope.targeting.gender.female = true;\n                    }\n                }\n\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('targeting', $scope.targeting);\n\n                // dummy budgeting data - TODO: replace this with real data\n                if ($scope.editId === undefined && !$scope.hasBudget) {\n                    $scope.budgeting = {\n                        cost_per_view: 12,\n                        amount: 0,\n                        type: 1\n                    };\n                }\n                $scope.budgeting.hasBudget = $scope.hasBudget;\n\n                editor.dataSet('budgeting', $scope.budgeting);\n\n                $scope.fundError = false;\n                editor.save('step1').then(function (data) {\n                    $scope.goNext();\n                    $scope.view.busy = false;\n                    if ($scope.editId !== undefined && editor.stepGet('step1', 'submitted')) {\n                        helper.alert('success', 'Campaign has been updated.');\n                    } else {\n                        helper.alert('success', 'Campaign has been created.');\n                    }\n                    $scope.editId = data.campaign.id; // in case create new campaign\n                    $scope.activeCampaign();\n                }, function (response) {\n                    if (response.status == 400 && response.data.errorDetails.logicProcessing.processingErrors[0].code == 44) {\n                        helper.alert('danger', response.data.errorDetails.logicProcessing.processingErrors[0].message);\n                        $scope.fundError = true;\n                    } else {\n                        errorHandler.processApiResponse(response);\n                    }\n                    $scope.view.busy = false;\n                    console.log('create campaign error');\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n                if (angular.element('.ng-invalid').length > 0) {\n                    angular.element('.ng-invalid').focus();\n                }\n                if (angular.element('.image-error').length > 0) {\n                    angular.element('.image-error').focus();\n                }\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n            }\n        };\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - campaign', angular.copy($scope.campaign));\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('instoreStep2Ctrl', ['$scope', '$state', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', 'countryService', 'campaignEditorService', 'campaignsService', '$http', '$q', 'errorHandler', '$anchorScroll', '$location', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', function ($scope, $state, apiUrl, authToken, utils, mediaService, FileUploader, countryService, campaignEditorService, campaignsService, $http, $q, errorHandler, $anchorScroll, $location, kachingZonesHelpers, kachingZonecampaignEditorService) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n        helper.preventDefaultByPressingEnter();\n        $scope.formSummited = false;\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.$watch('selectedStore', function (newVal, oldVal) {\n            $scope.form1.$setPristine();\n        });\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'arDisplay') {\n                $scope.data.arImageFile = newItem._file;\n            }\n            if (newItem.alias === 'brandImage') {\n                $scope.data.brandImageFile = newItem._file;\n            }\n            if (newItem.alias === 'display') {\n                $scope.data.imageFile = newItem._file;\n                setTimeout(function () {\n                    var $review = angular.element('.uploader-dropzone.image-selected');\n                    var imgStyle = $review.attr('style');\n                    $scope.imageList[$scope.imageReviewIdx] = imgStyle;\n                    $scope.imageFileList[$scope.imageReviewIdx] = $scope.data.imageFile;\n                    $scope.imageReviewIdx++;\n                    if ($scope.imageReviewIdx === 4) {\n                        $scope.imageReviewIdx = 0;\n                    }\n\n                    $scope.$apply();\n                }, 100);\n            }\n        };\n\n        function geocodePosition(marker) {\n            marker.icon.url = $scope.updateLogoIcon();\n            $scope.position = marker.getPosition();\n            $scope.$apply();\n            $scope.geocoder.geocode({\n                latLng: $scope.position\n            }, function (responses) {\n                if (responses && responses.length > 0) {\n                    $scope.address = responses[0].formatted_address;\n                } else {\n                    $scope.address = 'Cannot determine address at this location.';\n                }\n                var dumpImage = '/wp-content/themes/kaching3/assets/images/billboards/media-thumb.png';\n                var dumpLogo = '/wp-content/themes/kaching3/assets/images/logo.png';\n                var mapPopup = '<div class=\\'popup\\'>\\n                            <img class=\"popup-logo\" src=\"' + dumpLogo + '\">\\n                            <label class=\"popup-name\">' + $scope.campaign.name + '</label>\\n                            <h6 class=\"popup-address\">' + responses[0].formatted_address + '</h6>\\n                        </div>';\n\n                $scope.infoWindow.setContent(mapPopup);\n                $scope.infoWindow.open($scope.map, marker);\n                $scope.map.setZoom(16);\n                $scope.map.setCenter($scope.selectedMarker.getPosition());\n                $scope.$apply();\n            });\n        }\n        function getSixDigit(num) {\n            var number = '' + num;\n            var dotIndex = number.indexOf('.');\n            var intStr = number.substr(0, dotIndex + 1);\n            var decimalStr = number.substr(dotIndex + 1, 6);\n            return 1 * intStr.concat(decimalStr);\n        }\n        function saveMedia() {\n\n            var deferred = $q.defer();\n            var hasAr = $scope.data.arImageFile !== null && _typeof($scope.data.arImageFile) === 'object';\n\n            if ($scope.form1.$valid && (hasAr || $scope.storeList.length > 0) || $scope.selectedFormat.value === 'In-Store' && $scope.lastLocation !== undefined) {\n                $scope.validateError = false;\n                $scope.isAddImage = false;\n\n                var mediaData = {\n                    description: $scope.data.description,\n                    type: $scope.selectedFormat.value,\n                    ar_name: $scope.data.arImageName,\n                    ar_appearance: $scope.appearance,\n                    ar_resource_type: $scope.imageType,\n                    target_name: $scope.data.imageName,\n                    target_format: 'in_store',\n                    inclusion_zone_unit: $scope.measure.code,\n                    gender: $scope.selectedGender,\n                    category: $scope.selectedCategory,\n                    animation_type: $scope.data.animation,\n                    marker_shape: $scope.shape && $scope.shape.value ? $scope.shape.value : null,\n                    marker_material: $scope.material,\n                    shop_name: $scope.address,\n                    address: $scope.address\n                };\n\n                mediaData.inclusion_zone = $scope.inclusionZone || 0;\n\n                if ($scope.selectedStore && $scope.selectedStore.id) {\n                    mediaData.front_store_shop = $scope.selectedStore.id;\n                }\n\n                if ($scope.selectedFormat.value === 'In-Store' && !$scope.latitude && !$scope.longitude && $scope.lastLocation !== undefined) {\n                    mediaData.address = $scope.lastLocation.address;\n                    mediaData.latitude = $scope.lastLocation.latitude;\n                    mediaData.longitude = $scope.lastLocation.longitude;\n                } else {\n                    mediaData.latitude = $scope.latitude;\n                    mediaData.longitude = $scope.longitude;\n                }\n\n                if ($scope.data.url) {\n                    mediaData.target_url = $scope.data.url;\n\n                    if (mediaData.target_url.indexOf('http://') === -1) {\n                        mediaData.target_url = 'http://' + mediaData.target_url;\n                    }\n                }\n\n                if ($scope.editMode) {\n                    mediaData.id = $scope.previewMediaId;\n                }\n\n                mediaData.latitude = getSixDigit(mediaData.latitude);\n                mediaData.longitude = getSixDigit(mediaData.longitude);\n\n                if ($scope.data.arImageFile && _typeof($scope.data.arImageFile) === 'object') {\n                    mediaData.ar_resource = $scope.data.arImageFile;\n                }\n                if ($scope.data.imageFile && _typeof($scope.data.imageFile) === 'object') {\n                    mediaData.target = $scope.data.imageFile;\n                } else {\n                    if (!$scope.data.imageFile) {\n                        mediaData.target = '';\n                    }\n                }\n                if ($scope.data.brandImageFile && _typeof($scope.data.brandImageFile) === 'object') {\n                    mediaData.brand_image = $scope.data.brandImageFile;\n                }\n                if ($scope.dimensionWidth && $scope.dimensionHeight) {\n                    mediaData.marker_dimension = $scope.dimensionWidth + ',' + $scope.dimensionHeight;\n                    mediaData.marker_shape = $scope.shape && $scope.shape.value ? $scope.shape.value : null;\n                }\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                $scope.validateError = true;\n                editor.stepSet('step2', 'valid', false);\n                setTimeout(function () {\n                    helper.scrollToFirstError();\n                }, 100);\n                deferred.reject();\n            }\n            return deferred.promise;\n        }\n        function clearForm() {\n            helper.clearForm();\n\n            $scope.data = {\n                arImageFile: '',\n                imageFile: '',\n                mediaName: '',\n                mediaId: '',\n                imageName: '',\n                arImageName: '',\n                description: '',\n                brandImageFile: '',\n                brandDescription: '',\n                animation: ''\n            };\n\n            $scope.dimensionWidth = undefined;\n            $scope.dimensionHeight = undefined;\n            $scope.shape = $scope.shapes[0] || undefined;\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('#arImageFile');\n            helper.clearFileUploader('#brandImageFile');\n            helper.clearFileUploader('.image-review-list');\n\n            $scope.imageList = [];\n            var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n            while ($scope.imageList.length < 4) {\n                $scope.imageList.push(emptyImageStyle);\n            }\n            $scope.imageFileList = [];\n            $scope.imageReviewIdx = 0;\n\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n            }\n\n            $scope.position = null;\n            $scope.latitude = null;\n            $scope.longitude = null;\n            $scope.address = null;\n        }\n        function getMedia(mediaId) {\n            var deferred = $q.defer();\n            $scope.view.busy = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.view.busy = false;\n                $scope.media = mediaItem;\n                editor.dataSet('media', $scope.media);\n\n                editor.save('step2').then(function () {\n                    $scope.campaignId = editor.dataGet('campaignId');\n                    // show notification\n                    helper.alert('success', 'Media has been created.');\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }, function () {\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n            return deferred.promise;\n        }\n        function getCities(cities) {\n            angular.forEach(cities, function (item, id) {\n                countryService.getCities(item).then(function (data) {\n                    $scope.cityList = $scope.cityList.concat(data.geonames);\n                    $scope.selectedCity = $scope.cityList[0];\n                });\n            });\n        }\n        function getFormats() {\n            $scope.formats = [{ value: 'store_front', label: 'Storefront' }];\n            $scope.selectedFormat = $scope.formats[0];\n        }\n        function finish() {\n\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n            var campaign = editor.dataGet('campaign');\n\n            if (campaignStatus === 'start' && !campaign.status || $scope.editId) {\n                $scope.activeCampaign().then(function () {\n                    deferred.resolve();\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                deferred.resolve();\n            }\n\n            return deferred.promise;\n        }\n        function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n\n            if (!_.isEmpty(targetingData)) {\n                var cities = [];\n                angular.forEach(targetingData.locations, function (item, id) {\n                    if (item.selected) {\n                        cities.push(item.name.alpha2_code);\n                    }\n                });\n                deferred.resolve(cities);\n            } else {\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (data) {\n                    var cities = [];\n                    angular.forEach(data.locations, function (item, id) {\n                        if (item.selected) {\n                            cities.push(item.name.alpha2_code);\n                        }\n                    });\n                    deferred.resolve(cities);\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        }\n        function initShapeDimension() {\n            $scope.dimensionWidth = undefined;\n            $scope.dimensionHeight = undefined;\n            $scope.shapes = mediaService.getShapes();\n            $scope.shape = $scope.shapes[0] || undefined;\n        }\n        function init() {\n\n            if ($scope.form1) {\n                $scope.form1.$setPristine();\n            }\n\n            $scope.storeList = [];\n            $scope.editId = $scope.editId || editor.dataGet('campaignId');\n            $scope.validateError = false;\n            $scope.isAddImage = false;\n            getFormats();\n            initShapeDimension();\n            $scope.materials = mediaService.getMaterials();\n            initStorefrontData();\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(2);\n            editor.previousState(2);\n\n            $scope.storeList = [];\n            if ($scope.editId) {\n                initStorefrontData($scope.editId);\n            } else {\n                var storeListData = editor.dataGet('storeList');\n                if (!_.isEmpty(storeListData)) {\n                    $scope.storeList = storeListData;\n                }\n            }\n\n            $scope.districtList = [];\n            $scope.cityList = [];\n\n            initTargetings().then(function (data) {\n                getCities(data);\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n\n            $scope.editMediaMode = false;\n            $scope.editMode = false;\n        }\n        function initStorefrontData() {\n            var deferred = $q.defer();\n            campaignsService.getCampaign($scope.editId).then(function (data) {\n                $scope.campaign = data;\n                $scope.storeList = data.media;\n                $scope.storeList = [];\n\n                if (data.media.length > 0) {\n                    angular.forEach(data.media, function (item, id) {\n                        if (item.type === 'store_front') {\n                            var storefrontItem = {\n                                id: item.id,\n                                name: item.front_store_shop_name || 'undefined',\n                                media: _.where(data.media, { front_store_shop: item.id })\n                            };\n\n                            if (item.ar_resource_type === 'video') {\n                                storefrontItem.hasVideo = true;\n                                storefrontItem.hasImage = _.find(storefrontItem.media, { ar_resource_type: 'image' }) ? true : false;\n                            } else {\n                                if (item.ar_resource_type === 'image') {\n                                    storefrontItem.hasImage = true;\n                                    storefrontItem.hasVideo = _.find(storefrontItem.media, { ar_resource_type: 'video' }) ? true : false;\n                                } else {\n                                    storefrontItem.hasVideo = _.find(storefrontItem.media, { ar_resource_type: 'video' }) ? true : false;\n                                    storefrontItem.hasImage = _.find(storefrontItem.media, { ar_resource_type: 'image' }) ? true : false;\n                                }\n                            }\n                            storefrontItem.media.unshift(item);\n                            $scope.storeList.push(storefrontItem);\n                        }\n                    });\n\n                    $scope.selectedStore = $scope.storeList[0];\n                    if ($scope.storeList.length > 0) {\n                        $scope.formats = [{ value: 'store_front', label: 'Storefront' }, { value: 'in_store', label: 'In-Store' }];\n                    } else {\n                        $scope.formats = [{ value: 'store_front', label: 'Storefront' }];\n                    }\n\n                    deferred.resolve();\n                } else {\n                    $scope.formats = [{ value: 'store_front', label: 'Storefront' }];\n                    deferred.reject();\n                }\n            });\n            return deferred.promise;\n        }\n        function checkFormPristine() {\n            if (!$scope.form1.$pristine) {\n                return false;\n            } else {\n                if ($scope.latitude || $scope.longitude) {\n                    return false;\n                }\n                for (var property in $scope.data) {\n                    if ($scope.data[property]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n        function placeMarker(location, keepAddress) {\n            $scope.updateLogoIcon();\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n            }\n\n            $scope.selectedMarker = new google.maps.Marker({\n                position: location,\n                map: $scope.map,\n                draggable: true,\n                icon: $scope.iconMarker\n            });\n\n            var marker = $scope.selectedMarker;\n            var pos = marker.getPosition();\n\n            $scope.geocoder.geocode({\n                latLng: pos\n            }, function (responses) {\n                var address = 'Cannot determine address at this location.';\n                if (!keepAddress) {\n                    if (responses && responses.length > 0) {\n                        $scope.address = address = responses[0].formatted_address;\n                    }\n                } else {\n                    address = responses[0].formatted_address;\n                }\n\n                $scope.$apply();\n                var dumpImage = '/wp-content/themes/kaching3/assets/images/billboards/media-thumb.png';\n                var dumpLogo = '/wp-content/themes/kaching3/assets/images/logo.png';\n                var mapPopup = '<div class=\\'popup\\'>\\n                            <img class=\"popup-logo\" src=\"' + dumpLogo + '\">\\n                            <label class=\"popup-name\">' + $scope.campaign.name + '</label>\\n                            <h6 class=\"popup-address\">' + address + '</h6>\\n                        </div>';\n\n                $scope.infoWindow.setContent(mapPopup);\n                $scope.infoWindow.open($scope.map, marker);\n                $scope.map.setZoom(16);\n                $scope.map.setCenter($scope.selectedMarker.getPosition());\n            });\n\n            google.maps.event.addListener(marker, 'dragend', function (event) {\n                $scope.position = event.latLng;\n                $scope.latitude = $scope.position.lat();\n                $scope.longitude = $scope.position.lng();\n                $scope.searchBoxMarker.forEach(function (marker) {\n                    marker.setMap(null);\n                });\n                $scope.searchBoxMarker = [];\n                $scope.$apply();\n                geocodePosition(marker);\n            });\n        }\n\n        var imageStyle = 'background-image: none;border-color: #ccc;';\n        $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n        $scope.imageFileList = [];\n        $scope.imageReviewIdx = 0;\n        $scope.selectedMarker = null;\n        $scope.searchBoxMarker = [];\n\n        var mapOptions = {\n            zoom: 4,\n            center: new google.maps.LatLng(40.0000, -98.0000),\n            mapTypeId: google.maps.MapTypeId.TERRAIN\n        };\n\n        $scope.updateLogoIcon = function (useDefault) {\n            var imageUrl = '';\n            if (useDefault) {\n                $scope.data.brandImageFile = '';\n                helper.clearFileUploader('#brandImageFile');\n            }\n            if ($scope.data.brandImageFile) {\n                imageUrl = document.getElementById('brandImageFile').style.backgroundImage.replace('url(', '').replace(')', '').replace(/\\\"/gi, '');\n                if (!imageUrl) {\n                    var idx = $scope.data.brandImageFile.lastIndexOf('.');\n                    if (idx !== -1) {\n                        if ('|jpg|png|jpeg|'.indexOf($scope.data.brandImageFile.substr(idx + 1)) !== -1) {\n                            imageUrl = $scope.data.brandImageFile;\n                        }\n                    }\n                }\n            }\n\n            if (!imageUrl) {\n                imageUrl = kachingAppConfig.wpTemplateUri + '/assets/images/crowblackedit.png';\n            }\n\n            $scope.iconMarker = {\n                url: imageUrl,\n                origin: new google.maps.Point(0, 0),\n                anchor: new google.maps.Point(17, 34),\n                scaledSize: new google.maps.Size(50, 50)\n            };\n\n            return imageUrl;\n        };\n\n        $scope.map = new google.maps.Map(document.getElementById('map'), mapOptions);\n        google.maps.event.addListenerOnce($scope.map, 'mouseover', function () {\n            // This method is a trick to re-render map for the first time map renders.\n            google.maps.event.trigger($scope.map, 'resize');\n        });\n        google.maps.event.addListenerOnce($scope.map, 'idle', function () {\n            // This method is a trick to re-render map for the first time map renders.\n            google.maps.event.trigger($scope.map, 'resize');\n        });\n        $scope.geocoder = new google.maps.Geocoder();\n        $scope.infoWindow = new google.maps.InfoWindow();\n\n        // Create the search box and link it to the UI element.\n        var input = document.getElementById('pac-input');\n        var searchBox = new google.maps.places.SearchBox(input);\n        $scope.map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\n\n        // Bias the SearchBox results towards current map's viewport.\n        $scope.map.addListener('bounds_changed', function () {\n            searchBox.setBounds($scope.map.getBounds());\n        });\n\n        // var markers = [];\n        $scope.searchBoxMarker = [];\n        // Listen for the event fired when the user selects a prediction and retrieve\n        // more details for that place.\n        searchBox.addListener('places_changed', function () {\n            $scope.updateLogoIcon();\n            // searchBox.set($scope.map, null);\n            var places = searchBox.getPlaces();\n\n            if (places.length === 0) {\n                return;\n            }\n            // Clear out the old markers.\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n\n            // For each place, get the icon, name and location.\n            var bounds = new google.maps.LatLngBounds();\n\n            if (places.length > 0) {\n                $scope.position = places[0].geometry.location;\n                $scope.address = places[0].formatted_address;\n                $scope.latitude = $scope.position.lat();\n                $scope.longitude = $scope.position.lng();\n                $scope.$apply();\n            }\n\n            placeMarker(places[0].geometry.location);\n\n            places.forEach(function (place) {\n                if (!place.geometry) {\n                    console.log('Returned place contains no geometry');\n                    return;\n                }\n                var newMarker = new google.maps.Marker({\n                    map: $scope.map,\n                    icon: $scope.iconMarker,\n                    title: place.name,\n                    position: place.geometry.location\n                });\n\n                google.maps.event.addListener(newMarker, 'dragend', function () {\n                    geocodePosition(newMarker);\n                });\n\n                $scope.searchBoxMarker.push(newMarker);\n\n                if (place.geometry.viewport) {\n                    // Only geocodes have viewport.\n                    bounds.union(place.geometry.viewport);\n                } else {\n                    bounds.extend(place.geometry.location);\n                }\n            });\n            $scope.map.fitBounds(bounds);\n            $scope.$apply();\n        });\n\n        google.maps.event.addListener($scope.map, 'click', function (event) {\n            $scope.position = event.latLng;\n            $scope.latitude = $scope.position.lat();\n            $scope.longitude = $scope.position.lng();\n            placeMarker(event.latLng);\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n            $scope.$apply();\n        });\n\n        $scope.view = {\n            busy: true,\n            uploading: false,\n            submitted: false,\n            mediaCreated: false\n        };\n        $scope.data = {\n            arImageFile: '',\n            imageFile: '',\n            mediaName: '',\n            mediaId: '',\n            imageName: '',\n            arImageName: '',\n            description: '',\n            brandImageFile: '',\n            brandDescription: '',\n            animation: ''\n        };\n        $scope.genders = ['Male', 'Female'];\n        $scope.categories = ['T-shirt'];\n        $scope.position = null;\n        $scope.measures = [{ name: 'Meters', code: 'meter' }, { name: 'Kilometres', code: 'kilometre' }];\n        $scope.mediaTypeProp = {\n            'type': 'select',\n            'name': 'media_type',\n            'mediaTypeSelect': 'Upload Media',\n            'values': ['Upload Media', 'External Link']\n        };\n        $scope.iconMarker = {\n            url: kachingAppConfig.wpTemplateUri + '/assets/images/crowblackedit.png',\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(17, 34),\n            scaledSize: new google.maps.Size(50, 50)\n        };\n        $scope.errors = {\n            video: {},\n            image: {},\n            arImage: {}\n        };\n\n        $scope.updateMapManually = function () {\n            if (isNaN($scope.latitude)) {\n                if ($scope.latitude === '-') {\n                    return;\n                } else {\n                    $scope.latitude = 0;\n                }\n            }\n            if (isNaN($scope.longitude)) {\n                if ($scope.longitude === '-') {\n                    return;\n                } else {\n                    $scope.longitude = 0;\n                }\n            }\n            $scope.position = { lat: Number($scope.latitude), lng: Number($scope.longitude) };\n            placeMarker($scope.position);\n            $scope.searchBoxMarker.forEach(function (marker) {\n                marker.setMap(null);\n            });\n            $scope.searchBoxMarker = [];\n        };\n        $scope.updateReviewIndex = function (idx) {\n            $scope.imageReviewIdx = idx;\n            $scope.data.imageFile = $scope.imageFileList[$scope.imageReviewIdx];\n            console.log($scope.data.imageFile);\n        };\n        $scope.showErrors = function () {\n            return $scope.storeList.length === 0 && editor.stepGet('step2', 'submitted') || $scope.validateError;\n        };\n        $scope.imageHasError = function () {\n            if (_typeof($scope.data.imageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n        $scope.arImageHasError = function () {\n            if (_typeof($scope.data.arImageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n        $scope.changeFormat = function () {\n            if ($scope.selectedFormat && $scope.selectedFormat.value === 'in_store') {\n                $scope.latitude = $scope.selectedStore.media[0].latitude;\n                $scope.longitude = $scope.selectedStore.media[0].longitude;\n            } else {\n                $scope.latitude = null;\n                $scope.longitude = null;\n            }\n        };\n        $scope.submitMedia = function () {\n            var deferred = $q.defer();\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                saveMedia().then(function (data) {\n                    $scope.form1.$setPristine();\n                    if ($scope.editMode) {\n                        $scope.editMode = false;\n                        helper.alert('success', 'Media has been updated.');\n                        $scope.view.busy = false;\n                        clearForm();\n                        initStorefrontData();\n                        deferred.resolve();\n                    } else {\n                        $scope.storeList.push(data);\n                        editor.dataSet('storeList', $scope.storeList);\n                        getMedia(data.id).then(function () {\n                            initStorefrontData();\n                            deferred.resolve();\n                        }, function () {\n                            deferred.reject();\n                        });\n                        clearForm();\n                    }\n\n                    $scope.lastLocation = {\n                        address: data.address,\n                        latitude: data.latitude,\n                        longitude: data.longitude\n                    };\n                    $scope.form1.$setPristine();\n                }, function (response) {\n                    $scope.form1.$setPristine();\n                    $scope.view.busy = false;\n                    deferred.reject();\n                });\n            } else {\n                helper.scrollToFirstError($scope);\n                helper.alert('danger', 'Please fill all required fields');\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n        $scope.removeAddImageForm = function () {\n            $scope.data.description = '';\n            $scope.data.imageName = '';\n            $scope.data.imageFile = '';\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('.image-review-list');\n            $scope.imageList = [];\n            $scope.imageReviewIdx = 0;\n            var imageStyle = 'background-image: none;border-color: #ccc;';\n            $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n\n            var mediaData = {\n                description: '',\n                target: '',\n                target_name: '',\n                target_format: ''\n            };\n\n            $scope.isAddImage = false;\n        };\n        $scope.cancelEdit = function () {\n            clearForm();\n            $scope.editMode = false;\n            $scope.isAddImage = false;\n        };\n        $scope.editMedia = function (mediaId) {\n            clearForm();\n            helper.alert('info', 'You are in edit mode!');\n            $scope.editMode = true;\n            helper.resetAngularFields($scope);\n            $scope.previewMediaId = mediaId.id;\n            $scope.dimensionWidth = undefined;\n            $scope.dimensionHeight = undefined;\n            mediaService.getMediaItem($scope.previewMediaId).then(function (response) {\n                $scope.data.description = response.description;\n                $scope.data.arImageFile = helper.getMediaPreviewFromUrl(response.ar_resource);\n                $scope.data.arImageName = response.ar_name;\n                $scope.appearance = response.ar_appearance;\n                $scope.imageType = response.ar_resource_type;\n                $scope.data.imageName = response.target_name;\n                $scope.data.url = response.target_url;\n                $scope.data.imageFile = response.target;\n                $scope.latitude = response.latitude;\n                $scope.longitude = response.longitude;\n                $scope.inclusionZone = response.inclusion_zone;\n                $scope.measure.code = response.inclusion_zone_unit;\n                $scope.address = response.front_store_shop_name;\n                $scope.data.brandImageFile = response.brand_image;\n                $scope.selectedGender = response.gender;\n                $scope.selectedCategory = response.category;\n                $scope.data.animation = response.animation_type;\n                $scope.material = response.marker_material;\n                $scope.shape = _.findWhere($scope.shapes, { value: response.marker_shape });\n                $scope.selectedFormat = _.find($scope.formats, { value: response.type });\n                $scope.selectedStore = _.find($scope.storeList, { id: response.front_store_shop });\n\n                if (response.marker_dimension) {\n                    $scope.dimensionWidth = response.marker_dimension.split(',')[0];\n                    $scope.dimensionHeight = response.marker_dimension.split(',')[1];\n                }\n                placeMarker({ lat: Number($scope.latitude), lng: Number($scope.longitude) }, true);\n\n                $scope.imageList = [];\n                $scope.imageFileList = [];\n                $scope.imageReviewIdx = 0;\n                if ($scope.data.imageFile) {\n                    setTimeout(function () {\n                        var $review = angular.element('.uploader-dropzone.image-selected');\n                        var imgStyle = $review.attr('style');\n                        $scope.imageList.push(imgStyle);\n                        $scope.imageFileList.push(imgStyle);\n                        $scope.imageReviewIdx = 1;\n                        var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                        while ($scope.imageList.length < 4) {\n                            $scope.imageList.push(emptyImageStyle);\n                        }\n                        if ($scope.imageList.length > 0) {\n                            $scope.isAddImage = true;\n                        }\n                    }, 100);\n                } else {\n                    var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                    while ($scope.imageList.length < 4) {\n                        $scope.imageList.push(emptyImageStyle);\n                    }\n                }\n            });\n            $scope.editMediaMode = true;\n        };\n        $scope.deleteMedia = function (media) {\n            $scope.previewMediaId = media.id;\n            campaignsService.deleteMedia($scope.previewMediaId).then(function (response) {\n                console.log(response);\n                helper.alert('success', 'Media has been deleted.');\n                initStorefrontData();\n            }, function (response) {\n                console.log(response);\n                helper.alert('danger', 'Media has not been deleted');\n            });\n        };\n        $scope.lastLocation = undefined;\n        $scope.updateDistrict = function () {\n            $scope.updateMap($scope.selectedCity);\n            countryService.getDistricts($scope.selectedCity.countryCode, $scope.selectedCity.name).then(function (data) {\n                $scope.districtList = data.geonames;\n                $scope.selectedDistrict = $scope.districtList[0];\n            });\n        };\n        $scope.updateMap = function (data) {\n            var info = {\n                lat: data.lat,\n                lng: data.lng,\n                title: data.name\n            };\n\n            if (!!$scope.selectedMarker) {\n                $scope.selectedMarker.setMap(null);\n            }\n            $scope.map.setCenter(new google.maps.LatLng(info.lat, info.lng));\n            $scope.map.setZoom(17);\n        };\n        $scope.nextStep = function () {\n            $scope.form1.$setSubmitted();\n            if (checkFormPristine() && $scope.storeList.length > 0) {\n                editor.stepSet('step2', 'submitted', true);\n                if ($scope.storeList.length > 0) {\n                    editor.stepSet('step2', 'valid', true);\n                    finish().then(function () {\n                        $scope.goNext();\n                    });\n                } else {\n                    editor.stepSet('step2', 'valid', false);\n                    setTimeout(function () {\n                        helper.scrollToFirstError();\n                    }, 100);\n                    helper.alert('danger', 'Please add at least one AR');\n                }\n            } else {\n                $scope.submitMedia().then(function () {\n                    editor.stepSet('step2', 'submitted', true);\n                    if ($scope.storeList.length > 0) {\n                        editor.stepSet('step2', 'valid', true);\n                        finish().then(function () {\n                            $scope.goNext();\n                        });\n                    } else {\n                        editor.stepSet('step2', 'valid', false);\n                        setTimeout(function () {\n                            helper.scrollToFirstError();\n                        }, 100);\n                        helper.alert('danger', 'Please add at least one AR');\n                    }\n                });\n            }\n        };\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n        $scope.needBasicValidateZone = function () {\n            return $scope.data.imageFile || $scope.data.imageName || $scope.data.url || $scope.data.description;\n        };\n        $scope.needBrandValidationZone = function () {\n            return $scope.data.brandImageFile || $scope.data.shoppingMall || $scope.data.shopNumber || $scope.data.brandIconLogo || $scope.dimensionWidth || $scope.dimensionHeight;\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('instoreStep3Ctrl', ['$scope', 'productsService', 'campaignEditorService', 'campaignsService', 'utils', 'FileUploader', 'apiUrl', 'authToken', '$http', '$q', '$element', 'errorHandler', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'mediaService', function ($scope, productsService, campaignEditorService, campaignsService, utils, FileUploader, apiUrl, authToken, $http, $q, $element, errorHandler, kachingZonesHelpers, kachingZonecampaignEditorService, mediaService) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/products/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        function addProductToCampaign(product) {\n            var deferred = $q.defer();\n\n            campaignsService.saveProducts($scope.campaignId, product).then(function (data) {\n                helper.alert('success', 'Product has been added');\n                deferred.resolve(data);\n            }, function (response) {\n                // $scope.view.busy = false;\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createProduct() {\n\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n\n            if ($scope.data.arImageFile !== null && _typeof($scope.data.productImageFile) === 'object') {\n                productData.image = $scope.data.productImageFile;\n            }\n\n            if ($scope.editMode === true) {\n                productData.id = $scope.data.productIdInEdit;\n            }\n\n            var deferred = $q.defer();\n\n            productsService.createProduct(productData).then(function (data) {\n                deferred.resolve(data);\n                $scope.data.productIdInEdit = undefined;\n                $scope.editMode = false;\n            }, function (response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        $scope.view = {\n            busy: true,\n            productImageUploadStarted: false,\n            productImageUploadProgress: 0,\n            productImageUploadComplete: false\n        };\n\n        $scope.data = {\n            'title': '',\n            'description': '',\n            'pirce': '',\n            'url': ''\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.productImageFile = newItem._file;\n        };\n        $scope.recommendedProducts = [];\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-triangle-left\"></span>', '<span class=\"glyphicon glyphicon-triangle-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n        $scope.products = editor.dataGet('products');\n\n        var myArr = [{\n            type: 'type',\n            perDollarPerClick: 3\n        }, {\n            type: 'another type',\n            perDollarPerClick: 2\n        }];\n        $scope.purchaseAds = myArr;\n\n        // $scope.increaseAmount = function(media) {\n        //     media.bets_per_view = 1*media.bets_per_view + 1;\n        //     $scope.updateAmount();\n        // };\n        // $scope.decreaseAmount = function(media) {\n        //     if (media.bets_per_view > 1) {\n        //         media.bets_per_view = 1*media.bets_per_view - 1;\n        //         $scope.updateAmount();\n        //     }\n        // };\n        $scope.increaseSetting = function (store, setting, value) {\n            store[setting] = 1 * value + 1;\n            $scope.updateAmount();\n        };\n        $scope.decreaseSetting = function (store, setting, value) {\n            if (store[setting] > 0) {\n                store[setting] = 1 * value - 1;\n                $scope.updateAmount();\n            }\n        };\n        $scope.updateAmount = function (media) {\n            $scope.grandTotal = 0;\n            angular.forEach($scope.storeList, function (storefront, key) {\n                var totalSetting = 0;\n\n                totalSetting = totalSetting + storefront.follow_beacon;\n                totalSetting = totalSetting + storefront.scan_receipt;\n                totalSetting = totalSetting + storefront.issue_qr;\n                totalSetting = totalSetting + storefront.send_information;\n                totalSetting = totalSetting + storefront.share;\n                totalSetting = totalSetting + storefront.product;\n\n                $scope.grandTotal += totalSetting;\n\n                angular.forEach(storefront.media, function (inStore, key) {\n                    $scope.grandTotal += 1 * inStore.bets_per_view;\n                });\n            });\n            if ($scope.campaign) {\n                $scope.grandTotal += 1 * $scope.campaign.register;\n            }\n        };\n\n        $scope.saveProduct = function () {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url,\n                image: $scope.data.productImageFile\n            };\n\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.updateProduct = function (productId) {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                id: productId,\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n            if (_typeof($scope.data.productImageFile) === 'object' && $scope.data.productImageFile != null) {\n                productData.image = $scope.data.productImageFile;\n            }\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n            return deferred.promise;\n        };\n\n        $scope.submitProduct = function () {\n            if ($scope.editMode) {\n                $scope.updateProduct($scope.data.productIdInEdit).then(function (response) {\n                    helper.alert('success', 'Product have been updated');\n                    $scope.loadSubmittedProducts();\n                    $scope.editMode = false;\n                }, function (error) {\n                    errorHandler.processApiResponse(error);\n                    $scope.editMode = false;\n                });\n            } else {\n                $scope.view.busy = true;\n                $scope.saveProduct().then(function (response) {\n                    productsService.getProduct(response.id).then(function (product) {\n                        $scope.recommendedProducts.push(product);\n                        campaignsService.saveProducts($scope.campaignId, $scope.recommendedProducts).then(function (reponse) {\n                            $scope.view.busy = false;\n                            helper.alert('success', 'Product have been added');\n                        }, function (error) {\n                            errorHandler.processApiResponse(error);\n                        });\n                    }, function (error) {\n                        errorHandler.processApiResponse(error);\n                    });\n                }, function (error) {\n                    console.log(error);\n                    $scope.view.busy = false;\n                });\n            }\n        };\n\n        $scope.selectRecommendedProduct = function (product) {\n            $scope.editMode = true;\n            $scope.data.productIdInEdit = product.id;\n            $scope.data.title = product.title;\n            $scope.data.description = product.description;\n            $scope.data.price = product.price;\n            $scope.data.url = product.url;\n            $scope.data.productImageFile = product.image;\n            helper.alert('info', 'Product in edit mode!');\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n        $scope.nextStep = function () {\n            editor.stepSet('step3', 'submitted', true);\n\n            $scope.view.busy = true;\n            editor.stepSet('step3', 'valid', true);\n            $scope.updateAllMedia().then(function () {\n                $scope.goNext();\n                helper.alert('success', 'All media has been updated');\n                $scope.view.busy = false;\n                $scope.activeCampaign();\n            }, function (error) {\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(error);\n            });\n        };\n        $scope.updateAllMedia = function () {\n            var deferred = $q.defer();\n            var promisses = [];\n\n            angular.forEach($scope.storeList, function (store) {\n                angular.forEach(store.media, function (media) {\n                    var prodDeferred = $q.defer();\n                    promisses.push(prodDeferred.promise);\n                    var mediaData = {\n                        id: media.id,\n                        bets_per_view: media.bets_per_view,\n                        type: 'in_store'\n                    };\n                    campaignsService.updateMedia(mediaData).then(function (response) {\n                        prodDeferred.resolve(response);\n                    }, function (response) {\n                        prodDeferred.reject(response);\n                    });\n                });\n\n                // update media\n                var rewardDeferred = $q.defer();\n                promisses.push(rewardDeferred.promise);\n                var rewardData = {\n                    follow_beacon: store.follow_beacon,\n                    scan_receipt: store.scan_receipt,\n                    issue_qr: store.issue_qr,\n                    send_information: store.send_information,\n                    share: store.share,\n                    product: store.product\n                };\n                mediaService.updateReward(store.id, rewardData).then(function (response) {\n                    rewardDeferred.resolve(response);\n                }, function (response) {\n                    rewardDeferred.reject(response);\n                });\n\n                // update register\n                var registerDeferred = $q.defer();\n                promisses.push(registerDeferred.promise);\n                var campaign = {\n                    id: $scope.campaignId,\n                    register: $scope.campaign.register\n                };\n\n                campaignsService.saveKachingZoneCampagin(campaign).then(function () {\n                    registerDeferred.resolve();\n                }, function () {\n                    registerDeferred.reject();\n                });\n            });\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n            return deferred.promise;\n        };\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        $scope.toggleExpand = function (event) {\n            var target = angular.element(event.target);\n            var $storeArea = angular.element(target).closest('.store-header-area');\n            var $expandItem = $storeArea.find('.media-preview-expanded');\n\n            $expandItem.slideToggle();\n\n            var $others = angular.element('.store-header-area').not($storeArea);\n            $others.find('.media-preview-expanded').slideUp();\n        };\n\n        var init = function init() {\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(3);\n            editor.previousState(3);\n\n            if ($scope.editId) {\n                $scope.campaignId = $scope.editId;\n            } else {\n                $scope.campaignId = editor.dataGet('campaignId');\n            }\n\n            $scope.addedProducts = [];\n            $scope.loadSubmittedProducts();\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n\n            $scope.initStorefrontData($scope.campaignId).then(function () {\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n            });\n        };\n\n        $scope.initStorefrontData = function (campaignId) {\n            var deferred = $q.defer();\n\n            campaignsService.getCampaign(campaignId).then(function (data) {\n\n                $scope.campaign = data;\n                if (!$scope.campaign.register) {\n                    $scope.campaign.register = 0;\n                }\n\n                $scope.mediaList = data.media;\n                $scope.storeList = [];\n                if (data.media.length > 0) {\n                    angular.forEach(data.media, function (item, id) {\n                        if (item.type === 'store_front') {\n                            var storefrontItem = {\n                                id: item.id,\n                                name: item.front_store_shop_name || 'undefined',\n                                media: _.where(data.media, { front_store_shop: item.id }),\n                                // action setting\n                                follow_beacon: 0,\n                                scan_receipt: 0,\n                                issue_qr: 0,\n                                send_information: 0,\n                                share: 0,\n                                product: 0\n                            };\n\n                            if (item.reward) {\n                                storefrontItem.follow_beacon = item.reward.follow_beacon;\n                                storefrontItem.scan_receipt = item.reward.scan_receipt;\n                                storefrontItem.issue_qr = item.reward.issue_qr;\n                                storefrontItem.send_information = item.reward.send_information;\n                                storefrontItem.share = item.reward.share;\n                                storefrontItem.product = item.reward.product;\n                            }\n                            storefrontItem.media.unshift(item);\n                            $scope.storeList.push(storefrontItem);\n                        }\n                    });\n\n                    $scope.updateAmount();\n                }\n                deferred.resolve();\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.saveProduct();\n                $scope.nextStep();\n            }\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('instoreStep4Ctrl', ['$scope', 'productsService', 'campaignsService', 'campaignEditorService', 'kachingZonecampaignEditorService', '$q', 'errorHandler', function ($scope, productsService, campaignsService, campaignEditorService, kachingZonecampaignEditorService, $q, errorHandler) {\n        var editor = kachingZonecampaignEditorService;\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.locations = {};\n        $scope.categories = {};\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            var storeListData = editor.dataGet('storeList');\n\n            if (!_.isEmpty(storeListData)) {\n                $scope.campaignId = editor.dataGet('campaignId');\n                campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                    $scope.campaign = response;\n                });\n                deferred.resolve();\n            } else {\n                campaignsService.getCampaign($scope.editId).then(function (data) {\n                    $scope.mediaList = data.media;\n                    $scope.storeList = [];\n                    $scope.campaign = data;\n\n                    if (data.media.length > 0) {\n                        angular.forEach(data.media, function (item, id) {\n                            if (item.type === 'store_front') {\n                                var storefrontItem = {\n                                    id: item.id,\n                                    name: item.front_store_shop_name || 'undefined',\n                                    media: _.where(data.media, { front_store_shop: item.id })\n                                };\n                                storefrontItem.media.unshift(item);\n                                $scope.storeList.push(storefrontItem);\n                            }\n                        });\n\n                        $scope.selectedStore = $scope.storeList[0];\n                    }\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                var arrLocations = [],\n                    arrCategories = [];\n                // Get a location have selected true\n                angular.forEach($scope.targeting.locations, function (item, id) {\n                    if (item.selected === true) {\n                        arrLocations.push(item);\n                    }\n                });\n                // Get a category have selected true\n                angular.forEach($scope.targeting.categories, function (item, id) {\n                    if (item.selected === true) {\n                        arrCategories.push(item);\n                    }\n                });\n                $scope.locations = arrLocations;\n                $scope.categories = arrCategories;\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting = response;\n                    var arrLocations = [],\n                        arrCategories = [];\n                    // Get a location have selected true\n                    angular.forEach($scope.targeting.locations, function (item, id) {\n                        if (item.selected === true) {\n                            arrLocations.push(item);\n                        }\n                    });\n                    // Get a category have selected true\n                    angular.forEach($scope.targeting.categories, function (item, id) {\n                        if (item.selected === true) {\n                            arrCategories.push(item);\n                        }\n                    });\n                    $scope.locations = arrLocations;\n                    $scope.categories = arrCategories;\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n\n            // if (!$scope.editId) {\n            //     if (! editor.stepGet('step1', 'valid') || ! editor.stepGet('step2', 'valid') || ! editor.stepGet('step3', 'valid')) {\n            //         $scope.updateStep(editor.currentStep());\n            //     }\n            // }\n\n            if (!$scope.editId) {\n                $scope.editId = editor.dataGet('campaignId');\n            }\n\n            editor.currentStep(4);\n            editor.previousState(4);\n\n            $scope.campaignId = editor.dataGet('campaignId');\n            $scope.media = editor.dataGet('media');\n\n            $scope.loadSubmittedProducts();\n\n            $scope.storeList = [];\n            $scope.grandTotal = 0;\n\n            initData().then(function () {\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('radioAdsCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', 'campaignId', 'viewDetail', 'kachingZonecampaignEditorService', 'campaignsService', '$q', function ($scope, $state, $stateParams, campaignEditorService, campaignId, viewDetail, kachingZonecampaignEditorService, campaignsService, $q) {\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        editor.init(campaignId);\n\n        $scope.step = 1;\n        if (viewDetail) {\n            $scope.step = 4;\n            $scope.viewDetail = viewDetail;\n        }\n        $scope.progress = 1;\n        $scope.balance = undefined;\n\n        if (campaignId !== undefined) {\n            $scope.editId = campaignId;\n            $scope.loadEditMode = false;\n            $scope.progress = 4;\n        } else {\n            $scope.createMode = true;\n        }\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/radio-ads/steps/';\n        $scope.radioAdsStep = {\n            step1: templateFolder + 'step1.html',\n            step2: templateFolder + 'step2.html',\n            step3: templateFolder + 'step3.html',\n            step4: templateFolder + 'step4.html'\n        };\n\n        $scope.goNext = function () {\n            $scope.step += 1;\n            $scope.progress += 1;\n        };\n\n        $scope.goPrev = function () {\n            $scope.step -= 1;\n        };\n\n        $scope.updateStep = function (newVal) {\n            if ($scope.editId) {\n                $scope.step = newVal;\n            } else {\n                $scope.createMode = false;\n                if (newVal <= $scope.progress) {\n                    $scope.step = newVal;\n                } else {\n                    return;\n                }\n            }\n        };\n\n        $scope.updateBalance = function (value) {\n            $scope.balance = value;\n        };\n\n        $scope.activeCampaign = function () {\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n            // var campaign = editor.dataGet('campaign');\n\n            var campaignId = editor.dataGet('campaignId');\n            campaignsService.getCampaign(campaignId).then(function (data) {\n                if (data.media && data.media.length > 0) {\n                    if (campaignStatus === 'start' || campaignStatus === false || !$scope.editId && !campaignStatus) {\n                        $scope.campaignId = editor.dataGet('campaignId');\n                        campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                            deferred.resolve(response);\n                        }, function (response) {\n                            deferred.reject(response);\n                        });\n                    }\n                } else {\n                    deferred.reject();\n                }\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.goToFund = function (modal) {\n            $scope.$broadcast('fund-broadcast');\n            modal.$hide();\n            $state.go('funds');\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('radioStep1Ctrl', ['$scope', '$state', '$stateParams', 'apiUrl', 'authToken', 'errorHandler', 'campaignEditorService', 'utils', 'FileUploader', 'campaignsService', '$q', '$http', '$location', '$anchorScroll', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'userService', function ($scope, $state, $stateParams, apiUrl, authToken, errorHandler, campaignEditorService, utils, FileUploader, campaignsService, $q, $http, $location, $anchorScroll, kachingZonesHelpers, kachingZonecampaignEditorService, userService) {\n        var helper = kachingZonesHelpers;\n        // var editor = campaignEditorService;\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.view = {\n            busy: true\n        };\n        $scope.fieldHasError = utils.fieldHasError;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'customerLogo') {\n                $scope.campaign.logo_image = newItem._file;\n            }\n            if (newItem.alias === 'backgroundImage') {\n                $scope.campaign.header_image = newItem._file;\n            }\n        };\n\n        $scope.campaign = {};\n        $scope.targeting = {};\n        $scope.budgeting = {};\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.data = {\n            campaign: $scope.campaign,\n            targeting: $scope.targeting,\n            budgeting: $scope.budgeting,\n            daterange: $scope.daterange\n        };\n        $scope.hasBudget = false;\n\n        $scope.campaignStatus = {\n            status: 'start'\n        };\n\n        // flatform\n        $scope.allFlatform = {\n            all: 'true'\n        };\n        $scope.flatform = {\n            os: 'ios'\n        };\n\n        $scope.$watch('allFlatform.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.flatform.os === null) {\n                    $scope.flatform.os = 'ios';\n                }\n            }\n        });\n\n        $scope.$watch('flatform.os', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allFlatform.all = 'false';\n            }\n        });\n\n        // gender\n        $scope.allGender = {\n            all: 'true'\n        };\n        $scope.gender = {\n            sex: 'male'\n        };\n\n        $scope.$watch('allGender.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.gender.sex === null) {\n                    $scope.gender.sex = 'male';\n                }\n            }\n        });\n\n        $scope.$watch('gender.sex', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allGender.all = 'false';\n            }\n        });\n\n        // community\n\n        $scope.communityOption = {\n            all: true\n        };\n        $scope.unSelectAllCommunities = function () {\n            $scope.targeting.selectedCommunity = [];\n        };\n        $scope.firstSelectCommunity = function () {\n            if ($scope.data.selectedCommunity.length === 0) {\n                $scope.data.selectedCommunity = ['Urban'];\n            }\n        };\n        $scope.toggleCommunity = function (item, list) {\n            var idx = list.indexOf(item);\n            if (idx > -1) {\n                list.splice(idx, 1);\n            } else {\n                list.push(item);\n            }\n\n            $scope.communityOption.all = false;\n        };\n        $scope.communityExists = function (item, list) {\n            return list.indexOf(item) > -1;\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n            console.log($scope.data);\n        };\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            if ($scope.editId !== undefined) {\n                campaignsService.getCampaign($scope.editId).then(function (campaign) {\n                    $scope.campaign = campaign;\n                    $scope.campaign.logo_image = campaign.logo_image;\n                    $scope.campaign.header_image = campaign.header_image;\n                    // $scope.campaign.amount = campaign.fund;\n                    $scope.campaign.customerName = campaign.client;\n                    $scope.campaign.description = campaign.description;\n                    $scope.campaign.logo_description = campaign.logo_description;\n                    $scope.campaign.header_description = campaign.header_description;\n\n                    if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                        $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                        $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n                    $scope.campaign.type = 'radio';\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                    $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                    $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                    $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                }\n                $scope.campaign.type = 'radio';\n                deferred.resolve();\n            }\n            return deferred.promise;\n        };\n\n        var updateGender = function updateGender() {\n            if ($scope.targeting.gender.male && $scope.targeting.gender.female) {\n                $scope.allGender.all = 'true';\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.targeting.gender.male) {\n                    $scope.gender.sex = 'male';\n                } else {\n                    $scope.gender.sex = 'female';\n                }\n                $scope.allGender.all = 'false';\n            }\n        };\n\n        var updatePlatform = function updatePlatform() {\n            if ($scope.targeting.os.ios && $scope.targeting.os.android) {\n                $scope.allFlatform.all = 'true';\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.targeting.os.ios) {\n                    $scope.flatform.os = 'ios';\n                } else {\n                    $scope.flatform.os = 'android';\n                }\n                $scope.allFlatform.all = 'false';\n            }\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                updateGender();\n                updatePlatform();\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting.allCategories = response.allCategories;\n                    $scope.targeting.allLocations = response.allLocations;\n                    $scope.targeting.categories = response.categories;\n                    $scope.targeting.locations = response.locations;\n                    $scope.targeting.gender = response.gender;\n                    $scope.targeting.os = response.os;\n                    $scope.targeting.ageRange = response.ageRange;\n                    $scope.targeting.ageRanges = response.ageRanges;\n                    // $scope.view.busy = false;\n                    updateGender();\n                    updatePlatform();\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n        var initBudgeting = function initBudgeting() {\n            var deferred = $q.defer();\n            var budgetingData = editor.dataGet('budgeting');\n            if (!_.isEmpty(budgetingData)) {\n                $scope.budgeting = budgetingData;\n                $scope.hasBudget = true;\n            } else {\n                if ($scope.editId) {\n                    campaignsService.getCampaignBudget($scope.editId).then(function (data) {\n                        $scope.budgeting = data.results[0];\n                        $scope.hasBudget = true;\n                        deferred.resolve();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                        deferred.reject();\n                    });\n                }\n            }\n            deferred.resolve();\n            return deferred.promise;\n        };\n        var initBalance = function initBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function (response) {\n                $scope.balance = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                console.log('balance: ', $scope.balance);\n                $scope.updateBalance($scope.balance);\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        };\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n            initBudgeting().then(function () {\n                deferred3.resolve();\n            }, function () {\n                deferred3.reject();\n            });\n\n            initBalance().then(function () {\n                deferred4.resolve();\n            }, function () {\n                deferred4.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            editor.currentStep(1);\n            editor.previousState(1);\n            $scope.fundError = false;\n\n            $scope.catAccordionStatus = {\n                open: true\n            };\n\n            $scope.countriesAccordionStatus = {\n                open: true\n            };\n\n            $scope.view.busy = true;\n            initData().then(function () {\n                if ($scope.editId) {\n                    $scope.campaign.id = $scope.editId;\n                    // $scope.hasBudget = true;\n                }\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n        function checkAllOption(allVal, arrVal) {\n            var all = true;\n            angular.forEach(arrVal, function (item, index) {\n                if (item.selected === false) {\n                    all = false;\n                    return;\n                }\n            });\n            return all;\n        }\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n\n                // angular.element()\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step1', 'submitted', true);\n\n            editor.dataSet('campaignStatus', $scope.campaignStatus.status);\n\n            $scope.targeting.allCategories = checkAllOption($scope.targeting.allCategories, $scope.targeting.categories);\n            $scope.targeting.allLocations = checkAllOption($scope.targeting.allLocations, $scope.targeting.locations);\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = $scope.daterange.dates.startDate.toISOString();\n                $scope.campaign.end_date = $scope.daterange.dates.endDate.toISOString();\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('campaign', $scope.campaign);\n\n                if ($scope.allFlatform.all === 'true') {\n                    $scope.targeting.os.android = true;\n                    $scope.targeting.os.ios = true;\n                } else {\n                    if ($scope.flatform.os === 'ios') {\n                        $scope.targeting.os.ios = true;\n                        $scope.targeting.os.android = false;\n                    } else {\n                        $scope.targeting.os.ios = false;\n                        $scope.targeting.os.android = true;\n                    }\n                }\n\n                if ($scope.allGender.all === 'true') {\n                    $scope.targeting.gender.male = true;\n                    $scope.targeting.gender.female = true;\n                } else {\n                    if ($scope.gender.sex === 'male') {\n                        $scope.targeting.gender.male = true;\n                        $scope.targeting.gender.female = false;\n                    } else {\n                        $scope.targeting.gender.male = false;\n                        $scope.targeting.gender.female = true;\n                    }\n                }\n\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('targeting', $scope.targeting);\n\n                // dummy budgeting data - TODO: replace this with real data\n                if ($scope.editId === undefined && !$scope.hasBudget) {\n                    $scope.budgeting = {\n                        cost_per_view: 12,\n                        amount: 0,\n                        type: 1\n                    };\n                }\n                $scope.budgeting.hasBudget = $scope.hasBudget;\n\n                editor.dataSet('budgeting', $scope.budgeting);\n\n                $scope.fundError = false;\n                editor.save('step1').then(function (data) {\n                    $scope.goNext();\n                    $scope.view.busy = false;\n                    if ($scope.editId !== undefined && editor.stepGet('step1', 'submitted')) {\n                        helper.alert('success', 'Campaign has been updated.');\n                    } else {\n                        helper.alert('success', 'Campaign has been created.');\n                    }\n                    $scope.activeCampaign();\n                }, function (response) {\n                    if (response.status == 400 && response.data.errorDetails.logicProcessing.processingErrors[0].code == 44) {\n                        helper.alert('danger', response.data.errorDetails.logicProcessing.processingErrors[0].message);\n                        $scope.fundError = true;\n                    } else {\n                        errorHandler.processApiResponse(response);\n                    }\n                    $scope.view.busy = false;\n                    console.log('create campaign error');\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n                if (angular.element('.ng-invalid').length > 0) {\n                    angular.element('.ng-invalid').focus();\n                }\n                if (angular.element('.image-error').length > 0) {\n                    angular.element('.image-error').focus();\n                }\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n            }\n        };\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - campaign', angular.copy($scope.campaign));\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('radioStep2Ctrl', ['$scope', '$state', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', 'countryService', 'campaignEditorService', 'campaignsService', '$http', '$q', 'errorHandler', '$anchorScroll', '$location', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', function ($scope, $state, apiUrl, authToken, utils, mediaService, FileUploader, countryService, campaignEditorService, campaignsService, $http, $q, errorHandler, $anchorScroll, $location, kachingZonesHelpers, kachingZonecampaignEditorService) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.formSummited = false;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.data = {\n            arImageFile: '',\n            imageFile: '',\n            mediaName: '',\n            mediaId: '',\n            imageName: '',\n            arImageName: '',\n            description: ''\n        };\n\n        $scope.mediaTypeProp = {\n            'type': 'select',\n            'name': 'media_type',\n            'mediaTypeSelect': 'Upload Media',\n            'values': ['Upload Media', 'External Link']\n        };\n\n        $scope.errors = {\n            video: {},\n            image: {},\n            arImage: {}\n        };\n\n        var imageStyle = 'background-image: none;border-color: #ccc;';\n\n        $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n        $scope.imageFileList = [];\n        $scope.imageReviewIdx = 0;\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.updateReviewIndex = function (idx) {\n            $scope.imageReviewIdx = idx;\n            $scope.data.imageFile = $scope.imageFileList[$scope.imageReviewIdx];\n            console.log($scope.data.imageFile);\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'arDisplay') {\n                $scope.data.arImageFile = newItem._file;\n            }\n            if (newItem.alias === 'display') {\n                $scope.data.imageFile = newItem._file;\n                setTimeout(function () {\n                    var $review = angular.element('.uploader-dropzone.image-selected');\n                    var imgStyle = $review.attr('style');\n                    $scope.imageList[$scope.imageReviewIdx] = imgStyle;\n                    $scope.imageFileList[$scope.imageReviewIdx] = $scope.data.imageFile;\n                    $scope.imageReviewIdx++;\n                    if ($scope.imageReviewIdx === 4) {\n                        $scope.imageReviewIdx = 0;\n                    }\n                    $scope.$apply();\n                }, 100);\n            }\n        };\n\n        $scope.showErrors = function () {\n            return $scope.mediaList.length === 0 && editor.stepGet('step2', 'submitted') || $scope.validateError;\n        };\n\n        $scope.videoHasError = function () {\n            return _typeof($scope.data.videoFile) !== 'object';\n        };\n\n        $scope.viewMedia = function () {\n            $scope.$hide();\n            $state.go('media.view', {\n                mediaId: $scope.data.mediaId\n            });\n        };\n\n        var saveMedia = function saveMedia() {\n\n            var deferred = $q.defer();\n\n            if ($scope.form1.$valid && $scope.data.imageFile !== null) {\n                var mediaData = {\n                    description: $scope.data.description,\n                    type: 'radio',\n                    target_name: $scope.data.imageName,\n                    target_format: 'radio'\n                    // radio_station: $scope.selectedStation.name\n                };\n\n                if ($scope.selectedStation) {\n                    if ($scope.selectedStation.name.toUpperCase() === 'OTHER') {\n                        mediaData.radio_station = $scope.stationOther;\n                        $scope.stationOther = '';\n                    } else {\n                        mediaData.radio_station = $scope.selectedStation.name;\n                    }\n                }\n\n                if ($scope.data.radioUrl) {\n                    mediaData.target_url = $scope.data.radioUrl;\n\n                    if (mediaData.target_url.indexOf('http://') === -1) {\n                        mediaData.target_url = 'http://' + mediaData.target_url;\n                    }\n                }\n\n                if ($scope.editMode) {\n                    mediaData.id = $scope.previewMediaId;\n                }\n                if ($scope.data.imageFile !== null && _typeof($scope.data.imageFile) === 'object') {\n                    mediaData.radio = $scope.data.imageFile;\n                }\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                $scope.validateError = true;\n                editor.stepSet('step2', 'valid', false);\n                setTimeout(function () {\n                    helper.scrollToFirstError($scope);\n                }, 100);\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.saveMedia = function () {\n            var deferred = $q.defer();\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                saveMedia().then(function (data) {\n                    $scope.form1.$setPristine();\n                    if ($scope.editMode) {\n                        $scope.editMode = false;\n                        helper.alert('success', 'Media has been updated.');\n                        $scope.view.busy = false;\n                        $scope.clearForm();\n                        $scope.loadSubmittedMedia();\n                        deferred.resolve();\n                    } else {\n                        $scope.mediaList.push(data);\n                        editor.dataSet('mediaList', $scope.mediaList);\n                        data.target = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                        $scope.getMedia(data.id).then(function () {\n                            deferred.resolve();\n                        }, function () {\n                            deferred.reject();\n                        });\n                        $scope.clearForm();\n                    }\n                }, function (response) {\n                    $scope.form1.$setPristine();\n                    $scope.view.busy = false;\n                    deferred.reject();\n                });\n            } else {\n                helper.scrollToFirstError($scope);\n                helper.alert('danger', 'Please fill all required fields.');\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.clearForm = function () {\n            helper.clearForm();\n\n            $scope.data = {\n                arImageFile: '',\n                imageFile: '',\n                mediaName: '',\n                mediaId: '',\n                imageName: '',\n                arImageName: '',\n                description: '',\n                brandImageFile: '',\n                brandDescription: '',\n                animation: ''\n            };\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('.image-review-list');\n\n            $scope.imageList = [];\n            var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n            while ($scope.imageList.length < 4) {\n                $scope.imageList.push(emptyImageStyle);\n            }\n            $scope.imageFileList = [];\n            $scope.imageReviewIdx = 0;\n        };\n\n        $scope.cancelEdit = function () {\n            $scope.clearForm();\n            $scope.editMode = false;\n            $scope.stationOther = '';\n        };\n\n        $scope.getMedia = function (mediaId) {\n            var deferred = $q.defer();\n            $scope.view.busy = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.view.busy = false;\n                $scope.media = mediaItem;\n                editor.dataSet('media', $scope.media);\n\n                editor.save('step2').then(function () {\n                    $scope.campaignId = editor.dataGet('campaignId');\n                    campaignsService.getCampaign($scope.campaignId);\n                    // show notification\n                    helper.alert('success', 'Media has been created.');\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }, function () {\n                // $scope.view.busyMedia = false;\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        $scope.editMedia = function (mediaId) {\n            helper.alert('info', 'You are in edit mode!');\n            $scope.editMode = true;\n            helper.resetAngularFields($scope);\n            $scope.previewMediaId = mediaId.id;\n            mediaService.getMediaItem($scope.previewMediaId).then(function (response) {\n                $scope.data.description = response.description;\n                $scope.data.imageName = response.target_name;\n                $scope.data.imageFile = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                $scope.data.radioUrl = response.target_url;\n\n                var currentStation = _.find($scope.stations, {\n                    name: response.radio_station\n                });\n\n                if (currentStation) {\n                    $scope.isOther = false;\n                    $scope.selectedStation = currentStation;\n                } else {\n                    $scope.isOther = true;\n                    $scope.stationOther = response.radio_station;\n                    $scope.selectedStation = _.find($scope.stations, {\n                        name: 'Other'\n                    });\n                }\n\n                $scope.imageList = [];\n                $scope.imageFileList = [];\n                $scope.imageReviewIdx = 0;\n                if ($scope.data.imageFile) {\n                    setTimeout(function () {\n                        var $review = angular.element('.uploader-dropzone.image-selected');\n                        var imgStyle = $review.attr('style');\n                        $scope.imageList.push(imgStyle);\n                        $scope.imageFileList.push(imgStyle);\n                        $scope.imageReviewIdx = 1;\n                        var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                        while ($scope.imageList.length < 4) {\n                            $scope.imageList.push(emptyImageStyle);\n                        }\n                    }, 100);\n                } else {\n                    var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                    while ($scope.imageList.length < 4) {\n                        $scope.imageList.push(emptyImageStyle);\n                    }\n                }\n            });\n            $scope.editMediaMode = true;\n        };\n\n        $scope.deleteMedia = function (media) {\n            $scope.previewMediaId = media.id;\n            campaignsService.deleteMedia($scope.previewMediaId).then(function (response) {\n                console.log(response);\n                helper.alert('success', 'Media has been deleted.');\n                $scope.loadSubmittedMedia();\n            }, function (response) {\n                console.log(response);\n                helper.alert('danger', 'Media has not been deleted.');\n            });\n        };\n\n        $scope.loadSubmittedMedia = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    var mediaTemplate = [];\n                    angular.forEach(response.media, function (item, id) {\n                        if (!item.target) {\n                            item.target = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                            mediaTemplate.push(item);\n                        }\n                    });\n                    $scope.mediaList = mediaTemplate;\n                });\n            }\n        };\n\n        $scope.getFormats = function () {\n            $scope.formats = ['Commercial'];\n        };\n        $scope.getFormats();\n\n        $scope.stations = [{\n            id: 'Z100_FM',\n            name: 'FZ 100'\n        }, {\n            id: 'Z200_AM',\n            name: 'FZ_200'\n        }, {\n            id: 'Jazz_FM',\n            name: 'Jazz FM'\n        }, {\n            id: '101.9_FM',\n            name: '101.9 FM'\n        }, {\n            id: 'KISS_FM',\n            name: 'KISS FM'\n        }, {\n            id: '95_FM',\n            name: '95 FM'\n        }, {\n            id: 'other',\n            name: 'Other'\n        }];\n        $scope.selectedStation = $scope.stations[0];\n\n        // Check other values of selected\n        $scope.changeSelect = function () {\n            if ($scope.selectedStation.name.toUpperCase() === 'OTHER') {\n                if (!$scope.stationOther) {\n                    $scope.stationOther = '';\n                }\n                $scope.isOther = true;\n            } else {\n                $scope.isOther = false;\n            }\n        };\n\n        $scope.finish = function () {\n\n            var deferred = $q.defer();\n\n            var campaignStatus = editor.dataGet('campaignStatus');\n            var campaign = editor.dataGet('campaign');\n\n            if (campaignStatus === 'start' && !campaign.status || $scope.editId) {\n                // $scope.view.busy = true;\n                // $scope.campaignId = editor.dataGet( 'campaignId' );\n                // campaignsService.setPrepared( $scope.campaignId ).then(\n                //     function( response ) {\n                //         $scope.view.busy = false;\n                //         deferred.resolve(response);\n                //     },\n                //     function( response ) {\n                //         errorHandler.processApiResponse( response );\n                //         $scope.view.busy = false;\n                //         deferred.reject(response);\n                //     }\n                // );\n                $scope.activeCampaign().then(function () {\n                    deferred.resolve();\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                deferred.resolve();\n            }\n\n            return deferred.promise;\n        };\n\n        $scope.init = function () {\n\n            $scope.validateError = false;\n            $scope.loadSubmittedMedia();\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(2);\n            editor.previousState(2);\n\n            $scope.mediaList = [];\n\n            if ($scope.editId) {\n                $scope.initEditMode($scope.editId);\n            } else {\n                var mediaListData = editor.dataGet('mediaList');\n                if (!_.isEmpty(mediaListData)) {\n                    $scope.mediaList = mediaListData;\n                }\n            }\n\n            $scope.view.busy = false;\n            $scope.editMediaMode = false;\n            $scope.editMode = false;\n        };\n\n        $scope.initEditMode = function () {\n            // $scope.view.busy = true;\n            campaignsService.getCampaign($scope.editId).then(function (data) {\n                // $scope.campaign\n                $scope.validateError = false;\n                $scope.mediaList = data.media;\n                angular.forEach($scope.mediaList, function (value, key) {\n                    if (value.target === null) {\n                        value.target = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                    }\n                });\n            }, function () {});\n        };\n\n        var checkFormPristine = function checkFormPristine() {\n            if (!$scope.form1.$pristine) {\n                return false;\n            } else {\n                // if ($scope.latitude || $scope.longitude) {\n                //     return false;\n                // }\n                for (var property in $scope.data) {\n                    if ($scope.data[property]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        };\n\n        $scope.nextStep = function () {\n            $scope.form1.$setSubmitted();\n            if (checkFormPristine() && $scope.mediaList.length > 0) {\n                editor.stepSet('step2', 'submitted', true);\n                if ($scope.mediaList.length > 0) {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.finish().then(function () {\n                        $scope.goNext();\n                    });\n                } else {\n                    editor.stepSet('step2', 'valid', false);\n                    setTimeout(function () {\n                        helper.scrollToFirstError($scope);\n                    }, 100);\n                    helper.alert('danger', 'Please add at least one Audio');\n                }\n            } else {\n                $scope.saveMedia().then(function () {\n                    editor.stepSet('step2', 'submitted', true);\n                    if ($scope.mediaList.length > 0) {\n                        editor.stepSet('step2', 'valid', true);\n                        $scope.finish().then(function () {\n                            $scope.goNext();\n                        });\n                    } else {\n                        editor.stepSet('step2', 'valid', false);\n                        setTimeout(function () {\n                            helper.scrollToFirstError($scope);\n                        }, 100);\n                        helper.alert('danger', 'Please add at least one Audio');\n                    }\n                }, function () {});\n            }\n        };\n\n        $scope.goPrev = function () {\n            $scope.updateStep(1);\n        };\n\n        $scope.needBasicValidateZone = function () {\n            if ($scope.data.imageFile || $scope.data.imageName || $scope.data.url || $scope.data.description) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        $scope.init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('radioStep3Ctrl', ['$scope', 'productsService', 'campaignEditorService', 'campaignsService', 'mediaService', 'utils', 'FileUploader', 'apiUrl', 'authToken', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', function ($scope, productsService, campaignEditorService, campaignsService, mediaService, utils, FileUploader, apiUrl, authToken, $http, $q, errorHandler, kachingZonesHelpers, kachingZonecampaignEditorService) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/products/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.view = {\n            busy: true,\n            productImageUploadStarted: false,\n            productImageUploadProgress: 0,\n            productImageUploadComplete: false\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.productImageFile = newItem._file;\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            $scope.view.productImageUploadStarted = true;\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            $scope.view.productImageUploadComplete = true;\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            $scope.view.productImageUploadProgress = progress;\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n        };\n\n        $scope.data = {\n            'title': '',\n            'description': '',\n            'pirce': '',\n            'url': ''\n        };\n\n        $scope.previewData = {\n            isInstore: false,\n            followIBeacon: { enabled: false },\n            scanReceipt: { enabled: false },\n            issueQR: { enabled: false },\n            buyProducts: { enabled: false },\n            sendInformation: { enabled: false },\n            register: { enabled: false },\n            share: { enabled: false },\n            openMicrophone: { enabled: false },\n            watchVideo: { enabled: false }\n        };\n\n        $scope.recommendedProducts = [];\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-triangle-left\"></span>', '<span class=\"glyphicon glyphicon-triangle-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n        $scope.products = editor.dataGet('products');\n\n        var getRecommendedProducts = function getRecommendedProducts() {\n            productsService.getProducts({ limit: 16, offset: 0, ordering: '-last_used_date' }).then(function (products) {\n                $scope.recommendedProducts = products.items;\n            });\n        };\n\n        var myArr = [{\n            type: 'type',\n            perDollarPerClick: 3\n        }, {\n            type: 'another type',\n            perDollarPerClick: 2\n        }];\n        $scope.purchaseAds = myArr;\n\n        $scope.saveProduct = function () {\n            var deferred = $q.defer();\n            createProduct().then(function (data) {\n                if (data && data.id) {\n                    addProductToCampaign($scope.addedProducts.concat([data])).then(function () {\n                        campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                            $scope.addedProducts = campaign.products;\n                        }, function (response) {});\n                    }, function () {});\n                }\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n            });\n            return deferred.promise;\n        };\n\n        function createProduct() {\n\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n\n            if (_typeof($scope.data.productImageFile) === 'object') {\n                productData.image = $scope.data.productImageFile;\n            }\n\n            if ($scope.editMode === true) {\n                productData.id = $scope.data.productIdInEdit;\n            }\n\n            var deferred = $q.defer();\n\n            productsService.createProduct(productData).then(function (data) {\n                deferred.resolve(data);\n                $scope.data.productIdInEdit = undefined;\n                $scope.editMode = false;\n            }, function (response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        // campaignsService.saveProducts\n        function addProductToCampaign(product) {\n            var deferred = $q.defer();\n\n            campaignsService.saveProducts($scope.campaignId, product).then(function (data) {\n                // $scope.view.busy = false;\n                helper.alert('success', 'Product has been added');\n                deferred.resolve(data);\n            }, function (response) {\n                // $scope.view.busy = false;\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        }\n\n        $scope.selectRecommendedProduct = function (product) {\n            $scope.editMode = true;\n            $scope.data.productIdInEdit = product.id;\n            $scope.data.title = product.title;\n            $scope.data.description = product.description;\n            $scope.data.price = product.price;\n            $scope.data.url = product.url;\n            $scope.data.productImageFile = product.image;\n            helper.alert('info', 'Product in edit mode!');\n        };\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step3', 'submitted', true);\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step3', 'valid', true);\n                $scope.updateAllMedia($scope.medias).then(function () {\n                    $scope.goNext();\n                    helper.alert('success', 'All media has been updated');\n                    $scope.view.busy = false;\n                    $scope.activeCampaign();\n                }, function (response) {\n                    $scope.view.busy = false;\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        $scope.updateAllMedia = function (medias) {\n            var deferred = $q.defer();\n            var promisses = [];\n\n            angular.forEach(medias, function (media) {\n                var prodDeferred = $q.defer();\n                promisses.push(prodDeferred.promise);\n                var mediaData = {\n                    id: media.id,\n                    bets_per_view: media.bets_per_view,\n                    type: 'radio'\n                };\n                campaignsService.updateMedia(mediaData).then(function (response) {\n                    prodDeferred.resolve(response);\n                }, function (response) {\n                    prodDeferred.reject(response);\n                });\n\n                // Update media\n                var rewardDeferred = $q.defer();\n                promisses.push(rewardDeferred.promise);\n                var rewardData = {\n                    send_information: media.reward.send_information,\n                    share: media.reward.share,\n                    product: media.reward.product\n                };\n                mediaService.updateReward(media.id, rewardData).then(function (response) {\n                    rewardDeferred.resolve(response);\n                }, function (response) {\n                    rewardDeferred.reject(response);\n                });\n\n                // Update Register\n                var registerDeferred = $q.defer();\n                promisses.push(registerDeferred.promise);\n                var campaign = {\n                    id: $scope.campaignId,\n                    register: $scope.campaign.register\n                };\n                campaignsService.saveKachingZoneCampagin(campaign).then(function (response) {\n                    registerDeferred.resolve();\n                }, function (response) {\n                    registerDeferred.reject();\n                });\n            });\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n            return deferred.promise;\n        };\n\n        var init = function init() {\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(3);\n            editor.previousState(3);\n\n            if ($scope.editId) {\n                $scope.campaignId = $scope.editId;\n            } else {\n                $scope.campaignId = editor.dataGet('campaignId');\n            }\n\n            $scope.addedProducts = [];\n            getRecommendedProducts();\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n            $scope.grandTotal = 0;\n            campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                $scope.addedProducts = campaign.products;\n                angular.forEach(campaign.media, function (media, index) {\n                    if (media.target === null && media.type === 'radio') {\n                        media.target = kachingAppConfig.wpTemplateUri + '/assets/images/audio_icon.jpg';\n                    }\n                });\n\n                $scope.campaign = campaign;\n\n                if (!$scope.campaign.register) {\n                    $scope.campaign.register = 0;\n                }\n\n                if (campaign.media.length > 0) {\n                    $scope.medias = campaign.media;\n                    angular.forEach($scope.medias, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                        if (!value.reward) {\n                            value.reward = {\n                                send_information: 0,\n                                share: 0,\n                                product: 0\n                            };\n                        }\n                    });\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        init();\n\n        $scope.$watchCollection('medias', function (newVal, oldVal) {});\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.saveProduct();\n                $scope.nextStep();\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('radioStep4Ctrl', ['$scope', 'productsService', 'campaignsService', 'campaignEditorService', 'kachingZonecampaignEditorService', '$q', 'errorHandler', function ($scope, productsService, campaignsService, campaignEditorService, kachingZonecampaignEditorService, $q, errorHandler) {\n        var editor = kachingZonecampaignEditorService;\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.locations = {};\n        $scope.categories = {};\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            var mediaListData = editor.dataGet('mediaList');\n            if (!_.isEmpty(mediaListData)) {\n                $scope.mediaList = mediaListData;\n                $scope.campaignId = editor.dataGet('campaignId');\n                $scope.media = editor.dataGet('media');\n                campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                    $scope.campaign = response;\n                });\n                deferred.resolve();\n            } else {\n                campaignsService.getCampaign($scope.editId).then(function (data) {\n                    $scope.mediaList = data.media;\n                    $scope.campaign = data;\n                    angular.forEach($scope.mediaList, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                    });\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                var arrLocations = [],\n                    arrCategories = [];\n                // Get a location have selected true\n                angular.forEach($scope.targeting.locations, function (item, id) {\n                    if (item.selected === true) {\n                        arrLocations.push(item);\n                    }\n                });\n                // Get a category have selected true\n                angular.forEach($scope.targeting.categories, function (item, id) {\n                    if (item.selected === true) {\n                        arrCategories.push(item);\n                    }\n                });\n                $scope.locations = arrLocations;\n                $scope.categories = arrCategories;\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting = response;\n                    var arrLocations = [],\n                        arrCategories = [];\n                    // Get a location have selected true\n                    angular.forEach($scope.targeting.locations, function (item, id) {\n                        if (item.selected === true) {\n                            arrLocations.push(item);\n                        }\n                    });\n                    // Get a category have selected true\n                    angular.forEach($scope.targeting.categories, function (item, id) {\n                        if (item.selected === true) {\n                            arrCategories.push(item);\n                        }\n                    });\n                    $scope.locations = arrLocations;\n                    $scope.categories = arrCategories;\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(4);\n            editor.previousState(4);\n\n            $scope.campaignId = editor.dataGet('campaignId');\n            $scope.media = editor.dataGet('media');\n            campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                $scope.dataFromApi = response;\n            });\n\n            $scope.mediaList = [];\n            $scope.grandTotal = 0;\n\n            initData().then(function () {\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('tvAdsCtrl', ['$scope', '$state', '$stateParams', 'campaignEditorService', 'campaignId', 'viewDetail', 'kachingZonecampaignEditorService', 'campaignsService', '$q', function ($scope, $state, $stateParams, campaignEditorService, campaignId, viewDetail, kachingZonecampaignEditorService, campaignsService, $q) {\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.logData = function () {\n            editor.logData();\n        };\n\n        editor.init(campaignId);\n\n        $scope.step = 1;\n\n        if (viewDetail) {\n            $scope.step = 4;\n            $scope.viewDetail = viewDetail;\n        }\n\n        $scope.progress = 1;\n        $scope.balance = undefined;\n\n        if (campaignId !== undefined) {\n            $scope.editId = campaignId;\n            $scope.loadEditMode = false;\n            $scope.progress = 4;\n        } else {\n            $scope.createMode = true;\n        }\n\n        $scope.currentStep = editor.currentStep;\n\n        var templateFolder = kachingAppConfig.wpTemplateUri + '/assets/kaching/kaching-zones/tv-ads/steps/';\n        $scope.tvAdsStep = {\n            step1: templateFolder + 'step2.html',\n            step2: templateFolder + 'step2.html',\n            step3: templateFolder + 'step3.html',\n            step4: templateFolder + 'step4.html'\n        };\n\n        $scope.goNext = function () {\n            $scope.progress += 1;\n            $scope.step += 1;\n        };\n\n        $scope.goPrev = function () {\n            $scope.step -= 1;\n        };\n\n        $scope.updateStep = function (newVal) {\n            if ($scope.editId) {\n                $scope.step = newVal;\n            } else {\n                $scope.createMode = false;\n                if (newVal <= $scope.progress) {\n                    $scope.step = newVal;\n                } else {\n                    return;\n                }\n            }\n        };\n\n        $scope.activeCampaign = function () {\n            var deferred = $q.defer();\n            var campaignStatus = editor.dataGet('campaignStatus');\n            // var campaign = editor.dataGet('campaign');\n\n            var campaignId = editor.dataGet('campaignId');\n            campaignsService.getCampaign(campaignId).then(function (data) {\n                if (data.media && data.media.length > 0) {\n                    if (campaignStatus === 'start' || campaignStatus === false || !$scope.editId && !campaignStatus) {\n                        $scope.campaignId = editor.dataGet('campaignId');\n                        campaignsService.setPrepared($scope.campaignId).then(function (response) {\n                            deferred.resolve(response);\n                        }, function (response) {\n                            deferred.reject(response);\n                        });\n                    }\n                } else {\n                    deferred.reject();\n                }\n            }, function () {\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.updateBalance = function (value) {\n            $scope.balance = value;\n        };\n\n        $scope.goToFund = function (modal) {\n            $scope.$broadcast('fund-broadcast');\n            modal.$hide();\n            $state.go('funds');\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('tvStep1Ctrl', ['$scope', '$state', '$stateParams', 'apiUrl', 'authToken', 'errorHandler', 'campaignEditorService', 'utils', 'FileUploader', 'campaignsService', '$q', '$http', '$location', '$anchorScroll', 'kachingZonesHelpers', 'kachingZonecampaignEditorService', 'userService', function ($scope, $state, $stateParams, apiUrl, authToken, errorHandler, campaignEditorService, utils, FileUploader, campaignsService, $q, $http, $location, $anchorScroll, kachingZonesHelpers, kachingZonecampaignEditorService, userService) {\n\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'customerLogo') {\n                $scope.campaign.logo_image = newItem._file;\n            }\n            if (newItem.alias === 'backgroundImage') {\n                $scope.campaign.header_image = newItem._file;\n            }\n        };\n\n        $scope.campaign = {};\n        $scope.targeting = {};\n        $scope.budgeting = {};\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.data = {\n            campaign: $scope.campaign,\n            targeting: $scope.targeting,\n            budgeting: $scope.budgeting,\n            daterange: $scope.daterange\n        };\n        $scope.hasBudget = false;\n\n        // campaign status\n        // INCOMPLETE = 0\n        // BILLING = 1\n        // PREPARED = 2\n        // LIVE = 3\n        // COMPLETED = 4\n        // STOPPED = 5\n        $scope.campaignStatus = {\n            status: 'start'\n        };\n\n        // flatform\n        $scope.allFlatform = {\n            all: 'true'\n        };\n        $scope.flatform = {\n            os: 'ios'\n        };\n\n        $scope.$watch('allFlatform.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.flatform.os === null) {\n                    $scope.flatform.os = 'ios';\n                }\n            }\n        });\n\n        $scope.$watch('flatform.os', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allFlatform.all = 'false';\n            }\n        });\n\n        // gender\n        $scope.allGender = {\n            all: 'true'\n        };\n        $scope.gender = {\n            sex: 'male'\n        };\n\n        $scope.$watch('allGender.all', function (newValue, oldValue) {\n            if (newValue === 'true' || newValue === true) {\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.gender.sex === null) {\n                    $scope.gender.sex = 'male';\n                }\n            }\n        });\n\n        $scope.$watch('gender.sex', function (newValue, oldValue) {\n            if (newValue !== null) {\n                $scope.allGender.all = 'false';\n            }\n        });\n\n        // community\n\n        $scope.communityOption = {\n            all: true\n        };\n        $scope.unSelectAllCommunities = function () {\n            $scope.targeting.selectedCommunity = [];\n        };\n        $scope.firstSelectCommunity = function () {\n            if ($scope.data.selectedCommunity.length === 0) {\n                $scope.data.selectedCommunity = ['Urban'];\n            }\n        };\n        $scope.toggleCommunity = function (item, list) {\n            var idx = list.indexOf(item);\n            if (idx > -1) {\n                list.splice(idx, 1);\n            } else {\n                list.push(item);\n            }\n\n            $scope.communityOption.all = false;\n        };\n        $scope.communityExists = function (item, list) {\n            return list.indexOf(item) > -1;\n        };\n\n        $scope.updateDataModel = function (e, obj) {\n            e.preventDefault();\n            obj.selected = !obj.selected;\n            console.log($scope.data);\n        };\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            if ($scope.editId !== undefined) {\n                campaignsService.getCampaign($scope.editId).then(function (campaign) {\n                    $scope.campaign = campaign;\n                    $scope.campaign.logo_image = campaign.logo_image;\n                    $scope.campaign.header_image = campaign.header_image;\n                    // $scope.campaign.amount = campaign.fund;\n                    $scope.campaign.customerName = campaign.client;\n                    $scope.campaign.description = campaign.description;\n                    $scope.campaign.logo_description = campaign.logo_description;\n                    $scope.campaign.header_description = campaign.header_description;\n\n                    if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                        $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                        $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                        $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                    }\n                    $scope.campaign.type = 'tv-ads';\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            } else {\n                $scope.campaign = editor.dataGet('campaign');\n                if (typeof $scope.campaign.start_date !== 'undefined' && typeof $scope.campaign.end_date !== 'undefined') {\n                    $scope.daterange.dates.startDate = moment($scope.campaign.start_date);\n                    $scope.daterange.dates.endDate = moment($scope.campaign.end_date);\n                    $scope.daterange.display = $scope.daterange.dates.startDate.format('YYYY-MM-DD') + ' - ' + $scope.daterange.dates.endDate.format('YYYY-MM-DD');\n                }\n                $scope.campaign.type = 'tv-ads';\n                deferred.resolve();\n            }\n            return deferred.promise;\n        };\n\n        var updateGender = function updateGender() {\n            if ($scope.targeting.gender.male && $scope.targeting.gender.female) {\n                $scope.allGender.all = 'true';\n                $scope.gender.sex = null;\n            } else {\n                if ($scope.targeting.gender.male) {\n                    $scope.gender.sex = 'male';\n                } else {\n                    $scope.gender.sex = 'female';\n                }\n                $scope.allGender.all = 'false';\n            }\n        };\n\n        var updatePlatform = function updatePlatform() {\n            if ($scope.targeting.os.ios && $scope.targeting.os.android) {\n                $scope.allFlatform.all = 'true';\n                $scope.flatform.os = null;\n            } else {\n                if ($scope.targeting.os.ios) {\n                    $scope.flatform.os = 'ios';\n                } else {\n                    $scope.flatform.os = 'android';\n                }\n                $scope.allFlatform.all = 'false';\n            }\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                updateGender();\n                updatePlatform();\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting.allCategories = response.allCategories;\n                    $scope.targeting.allLocations = response.allLocations;\n                    $scope.targeting.categories = response.categories;\n                    $scope.targeting.locations = response.locations;\n                    $scope.targeting.gender = response.gender;\n                    $scope.targeting.os = response.os;\n                    $scope.targeting.ageRange = response.ageRange;\n                    $scope.targeting.ageRanges = response.ageRanges;\n                    // $scope.view.busy = false;\n                    updateGender();\n                    updatePlatform();\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n        var initBudgeting = function initBudgeting() {\n            var deferred = $q.defer();\n            var budgetingData = editor.dataGet('budgeting');\n            if (!_.isEmpty(budgetingData)) {\n                $scope.budgeting = budgetingData;\n                $scope.hasBudget = true;\n            } else {\n                if ($scope.editId) {\n                    campaignsService.getCampaignBudget($scope.editId).then(function (data) {\n                        $scope.budgeting = data.results[0];\n                        $scope.hasBudget = true;\n                        deferred.resolve();\n                    }, function (response) {\n                        errorHandler.processApiResponse(response);\n                        deferred.reject();\n                    });\n                }\n            }\n            deferred.resolve();\n            return deferred.promise;\n        };\n        var initBalance = function initBalance() {\n            var deferred = $q.defer();\n            userService.getBalance().then(function (response) {\n                $scope.balance = response.credits_balance / response.cash_to_credits_conversion_ratio;\n                console.log('balance: ', $scope.balance);\n                $scope.updateBalance($scope.balance);\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n            return deferred.promise;\n        };\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n            var deferred3 = $q.defer();\n            var deferred4 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise, deferred3.promise, deferred4.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n            initBudgeting().then(function () {\n                deferred3.resolve();\n            }, function () {\n                deferred3.reject();\n            });\n\n            initBalance().then(function () {\n                deferred4.resolve();\n            }, function () {\n                deferred4.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            editor.currentStep(1);\n            editor.previousState(1);\n            $scope.fundError = false;\n\n            $scope.catAccordionStatus = {\n                open: true\n            };\n\n            $scope.countriesAccordionStatus = {\n                open: true\n            };\n\n            $scope.view.busy = true;\n            initData().then(function () {\n                if ($scope.editId) {\n                    $scope.campaign.id = $scope.editId;\n                    // $scope.hasBudget = true;\n                }\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        $scope.$watch(function () {\n            return $scope.daterange.dates;\n        }, function (newValue, oldValue) {\n            if (newValue === undefined || newValue.startDate === null || newValue.endDate === null) {\n                return;\n            }\n            $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n        });\n        $scope.showErrors = function () {\n            return editor.stepGet('step1', 'submitted');\n        };\n        function checkAllOption(allVal, arrVal) {\n            var all = true;\n            angular.forEach(arrVal, function (item, index) {\n                if (item.selected === false) {\n                    all = false;\n                    return;\n                }\n            });\n            return all;\n        }\n\n        $scope.scrollToFirstError = function () {\n            if (angular.element('.has-error').length > 0) {\n                var firstErrorId = angular.element('.has-error')[0].id;\n\n                // angular.element()\n                $location.hash(firstErrorId);\n                $anchorScroll();\n            }\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step1', 'submitted', true);\n\n            // $scope.campaignStatus\n            editor.dataSet('campaignStatus', $scope.campaignStatus.status);\n\n            $scope.targeting.allCategories = checkAllOption($scope.targeting.allCategories, $scope.targeting.categories);\n            $scope.targeting.allLocations = checkAllOption($scope.targeting.allLocations, $scope.targeting.locations);\n\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step1', 'valid', true);\n\n                $scope.campaign.start_date = $scope.daterange.dates.startDate.toISOString();\n                $scope.campaign.end_date = $scope.daterange.dates.endDate.toISOString();\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('campaign', $scope.campaign);\n\n                if ($scope.allFlatform.all === 'true') {\n                    $scope.targeting.os.android = true;\n                    $scope.targeting.os.ios = true;\n                } else {\n                    if ($scope.flatform.os === 'ios') {\n                        $scope.targeting.os.ios = true;\n                        $scope.targeting.os.android = false;\n                    } else {\n                        $scope.targeting.os.ios = false;\n                        $scope.targeting.os.android = true;\n                    }\n                }\n\n                if ($scope.allGender.all === 'true') {\n                    $scope.targeting.gender.male = true;\n                    $scope.targeting.gender.female = true;\n                } else {\n                    if ($scope.gender.sex === 'male') {\n                        $scope.targeting.gender.male = true;\n                        $scope.targeting.gender.female = false;\n                    } else {\n                        $scope.targeting.gender.male = false;\n                        $scope.targeting.gender.female = true;\n                    }\n                }\n\n                // Store data to model in kaching zone campaign editor service.\n                editor.dataSet('targeting', $scope.targeting);\n\n                // dummy budgeting data - TODO: replace this with real data\n                if ($scope.editId === undefined && !$scope.hasBudget) {\n                    $scope.budgeting = {\n                        cost_per_view: 12,\n                        amount: 0,\n                        type: 1\n                    };\n                }\n                $scope.budgeting.hasBudget = $scope.hasBudget;\n\n                editor.dataSet('budgeting', $scope.budgeting);\n\n                $scope.fundError = false;\n                editor.save('step1').then(function (data) {\n                    $scope.goNext();\n                    $scope.view.busy = false;\n                    if ($scope.editId !== undefined && editor.stepGet('step1', 'submitted')) {\n                        helper.alert('success', 'Campaign has been updated.');\n                    } else {\n                        helper.alert('success', 'Campaign has been created.');\n                    }\n                    $scope.activeCampaign();\n                }, function (response) {\n                    if (response.status == 400 && response.data.errorDetails.logicProcessing.processingErrors[0].code == 44) {\n                        helper.alert('danger', response.data.errorDetails.logicProcessing.processingErrors[0].message);\n                        $scope.fundError = true;\n                    } else {\n                        errorHandler.processApiResponse(response);\n                    }\n                    $scope.view.busy = false;\n                    console.log('create campaign error');\n                });\n            } else {\n                editor.stepSet('step1', 'valid', false);\n                if (angular.element('.ng-invalid').length > 0) {\n                    angular.element('.ng-invalid').focus();\n                }\n                if (angular.element('.image-error').length > 0) {\n                    angular.element('.image-error').focus();\n                }\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n            }\n        };\n        $scope.logControllerData = function () {\n            console.log('campaignEditorStep1Ctrl - campaign', angular.copy($scope.campaign));\n        };\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('tvStep2Ctrl', ['$scope', '$state', 'apiUrl', 'authToken', 'utils', 'mediaService', 'FileUploader', 'countryService', 'kachingZonecampaignEditorService', 'campaignsService', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', '$anchorScroll', '$location', function ($scope, $state, apiUrl, authToken, utils, mediaService, FileUploader, countryService, kachingZonecampaignEditorService, campaignsService, $http, $q, errorHandler, kachingZonesHelpers, $anchorScroll, $location) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/media/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.view = {\n            busy: true,\n            uploading: false,\n            submitted: false,\n            mediaCreated: false,\n\n            videoUploadStarted: false,\n            videoUploadProgress: 0,\n            videoUploadComplete: false,\n\n            imageUploadStarted: false,\n            imageUploadProgress: 0,\n            imageUploadComplete: false,\n\n            arImageUploadStarted: false,\n            arImageUploadProgress: 0,\n            arImageUploadComplete: false,\n\n            brandImageUploadStarted: false,\n            brandImageUploadProgress: 0,\n            brandImageUploadComplete: false\n        };\n\n        $scope.data = {\n            arImageFile: '',\n            imageFile: '',\n            mediaName: '',\n            mediaId: '',\n            imageName: '',\n            arImageName: '',\n            description: '',\n            brandImageFile: '',\n            brandDescription: '',\n            animation: ''\n        };\n\n        $scope.tvStations = ['ABC', 'CNN', 'DBS', 'HTK', 'SKY', 'BBC', 'TV NEWS', 'Other'];\n\n        // Check other values of selected\n        $scope.changeSelect = function () {\n            if ($scope.selectedTvStation.toUpperCase() === 'OTHER') {\n                if (!$scope.stationOther) {\n                    $scope.stationOther = '';\n                }\n                $scope.isOther = true;\n            } else {\n                $scope.isOther = false;\n            }\n        };\n\n        $scope.mediaTypeProp = {\n            'type': 'select',\n            'name': 'media_type',\n            'mediaTypeSelect': 'Upload Media',\n            'values': ['Upload Media', 'External Link']\n        };\n\n        $scope.errors = {\n            video: {},\n            image: {},\n            arImage: {}\n        };\n\n        var imageStyle = 'background-image: none;border-color: #ccc;';\n        $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n        $scope.imageFileList = [];\n        $scope.imageReviewIdx = 0;\n\n        $scope.mediaList = [];\n\n        var checkFormPristine = function checkFormPristine() {\n            if (!$scope.form1.$pristine) {\n                return false;\n            } else {\n                // if ($scope.latitude || $scope.longitude) {\n                //     return false;\n                // }\n                for (var property in $scope.data) {\n                    if ($scope.data[property]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        };\n\n        $scope.nextStep = function () {\n            $scope.form1.$setSubmitted();\n            if (checkFormPristine() && $scope.mediaList.length > 0) {\n                editor.stepSet('step2', 'submitted', true);\n                if ($scope.mediaList.length > 0) {\n                    editor.stepSet('step2', 'valid', true);\n                    $scope.finish().then(function () {\n                        $scope.goNext();\n                    });\n                } else {\n                    editor.stepSet('step2', 'valid', false);\n                    setTimeout(function () {\n                        $scope.scrollToFirstError();\n                    }, 100);\n                    helper.alert('danger', 'Please add at least one AR');\n                }\n            } else {\n                $scope.saveMedia().then(function () {\n                    editor.stepSet('step2', 'submitted', true);\n                    if ($scope.mediaList.length > 0) {\n                        editor.stepSet('step2', 'valid', true);\n                        $scope.finish().then(function () {\n                            $scope.goNext();\n                        });\n                    } else {\n                        editor.stepSet('step2', 'valid', false);\n                        setTimeout(function () {\n                            $scope.scrollToFirstError();\n                        }, 100);\n                        helper.alert('danger', 'Please add at least one AR');\n                    }\n                }, function () {});\n            }\n        };\n\n        $scope.goPrev = function () {\n            $scope.updateStep(1);\n        };\n\n        $scope.updateReviewIndex = function (idx) {\n            $scope.imageReviewIdx = idx;\n            $scope.data.imageFile = $scope.imageFileList[$scope.imageReviewIdx];\n            console.log($scope.data.imageFile);\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            if (newItem.alias === 'arDisplay') {\n                $scope.data.arImageFile = newItem._file;\n            }\n            if (newItem.alias === 'brandImage') {\n                $scope.data.brandImageFile = newItem._file;\n            }\n            if (newItem.alias === 'display') {\n                $scope.data.imageFile = newItem._file;\n                setTimeout(function () {\n                    var $review = angular.element('.uploader-dropzone.image-selected');\n                    var imgStyle = $review.attr('style');\n                    $scope.imageList[$scope.imageReviewIdx] = imgStyle;\n                    $scope.imageFileList[$scope.imageReviewIdx] = $scope.data.imageFile;\n                    $scope.imageReviewIdx++;\n                    if ($scope.imageReviewIdx === 4) {\n                        $scope.imageReviewIdx = 0;\n                    }\n                    $scope.$apply();\n                }, 100);\n            }\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            if (item.alias === 'arDisplay') {\n                $scope.view.arImageUploadStarted = true;\n            }\n            if (item.alias === 'display') {\n                $scope.view.imageUploadStarted = true;\n            }\n            if (item.alias === 'brandImage') {\n                $scope.view.brandImageUploadStarted = true;\n            }\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            if (fileItem.alias === 'arDisplay') {\n                $scope.view.arImageUploadComplete = true;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadComplete = true;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.brandImageUploadComplete = true;\n            }\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            if (fileItem.alias === 'arDisplay') {\n                $scope.view.arImageUploadProgress = progress;\n            }\n            if (fileItem.alias === 'display') {\n                $scope.view.imageUploadProgress = progress;\n            }\n            if (fileItem.alias === 'brandImage') {\n                $scope.view.brandImageUploadProgress = progress;\n            }\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n        };\n\n        $scope.showErrors = function () {\n            return $scope.view.submitted;\n        };\n\n        $scope.videoHasError = function () {\n            return _typeof($scope.data.videoFile) !== 'object';\n        };\n\n        $scope.imageHasError = function () {\n            if (_typeof($scope.data.imageFile) !== 'object') {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.viewMedia = function () {\n            $scope.$hide();\n            $state.go('media.view', {\n                mediaId: $scope.data.mediaId\n            });\n        };\n\n        $scope.editMedia = function (mediaId) {\n            helper.alert('info', 'You are in edit mode!');\n            $scope.editMode = true;\n            helper.resetAngularFields($scope);\n            $scope.previewMediaId = mediaId.id;\n            mediaService.getMediaItem($scope.previewMediaId).then(function (response) {\n                $scope.data.description = response.description;\n                $scope.data.arImageFile = helper.getMediaPreviewFromUrl(response.ar_resource);\n                $scope.data.arImageName = response.ar_name;\n                $scope.appearance = response.ar_appearance;\n                $scope.imageType = response.ar_resource_type;\n                $scope.data.imageName = response.target_name;\n                $scope.data.url = response.target_url;\n                $scope.data.imageFile = response.target;\n                $scope.data.brandImageFile = response.brand_image;\n                $scope.selectedGender = response.gender;\n                $scope.selectedCategory = response.category;\n                $scope.data.animation = response.animation_type;\n                $scope.selectedTvStation = response.tv_station;\n\n                if (_.find($scope.tvStations, function (item) {\n                    return item == $scope.selectedTvStation;\n                })) {\n                    $scope.isOther = false;\n                } else {\n                    $scope.isOther = true;\n                    $scope.stationOther = $scope.selectedTvStation;\n                    $scope.selectedTvStation = 'Other';\n                }\n\n                $scope.imageList = [];\n                $scope.imageFileList = [];\n                $scope.imageReviewIdx = 0;\n                if ($scope.data.imageFile) {\n                    setTimeout(function () {\n                        var $review = angular.element('.uploader-dropzone.image-selected');\n                        var imgStyle = $review.attr('style');\n                        $scope.imageList.push(imgStyle);\n                        $scope.imageFileList.push(imgStyle);\n                        $scope.imageReviewIdx = 1;\n                        var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                        while ($scope.imageList.length < 4) {\n                            $scope.imageList.push(emptyImageStyle);\n                        }\n                        if ($scope.imageList.length > 0) {\n                            $scope.isAddImage = true;\n                        }\n                    }, 100);\n                } else {\n                    var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n                    while ($scope.imageList.length < 4) {\n                        $scope.imageList.push(emptyImageStyle);\n                    }\n                }\n            });\n        };\n\n        var saveMedia = function saveMedia() {\n\n            var deferred = $q.defer();\n\n            if ($scope.form1.$valid && $scope.data.arImageFile !== null) {\n                $scope.validateError = false;\n                $scope.isAddImage = false;\n\n                var mediaData = {\n                    description: $scope.data.description,\n                    type: 'tv-ads',\n                    ar_name: $scope.data.arImageName,\n                    ar_appearance: $scope.appearance,\n                    ar_resource_type: $scope.imageType,\n                    target_name: $scope.data.imageName,\n                    target_format: 'tv-ads'\n                    // target_url: $scope.data.url,\n                };\n\n                if ($scope.selectedTvStation) {\n                    if ($scope.selectedTvStation.toUpperCase() === 'OTHER') {\n                        mediaData.tv_station = $scope.stationOther;\n                        $scope.stationOther = '';\n                    } else {\n                        mediaData.tv_station = $scope.selectedTvStation;\n                    }\n                }\n\n                if ($scope.data.url) {\n                    mediaData.target_url = $scope.data.url;\n\n                    if (mediaData.target_url.indexOf('http://') === -1) {\n                        mediaData.target_url = 'http://' + mediaData.target_url;\n                    }\n                } else {\n                    if (!$scope.data.url) {\n                        mediaData.target_url = '';\n                    }\n                }\n\n                if ($scope.editMode) {\n                    mediaData.id = $scope.previewMediaId;\n                }\n\n                if ($scope.data.arImageFile !== null && _typeof($scope.data.arImageFile) === 'object') {\n                    mediaData.ar_resource = $scope.data.arImageFile;\n                }\n                if ($scope.data.imageFile !== null && _typeof($scope.data.imageFile) === 'object') {\n                    mediaData.target = $scope.data.imageFile;\n                } else {\n                    if (!$scope.data.imageFile) {\n                        mediaData.target = '';\n                    }\n                }\n\n                mediaService.saveKachingZoneMedia(mediaData).then(function (data) {\n                    deferred.resolve(data);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                $scope.validateError = true;\n                editor.stepSet('step2', 'valid', false);\n                setTimeout(function () {\n                    $scope.scrollToFirstError();\n                }, 100);\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.saveMedia = function () {\n            var deferred = $q.defer();\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                saveMedia().then(function (data) {\n                    $scope.form1.$setPristine();\n                    if ($scope.editMode) {\n                        $scope.editMode = false;\n                        helper.alert('success', 'Media has been updated.');\n                        $scope.view.busy = false;\n                        $scope.clearForm();\n                        $scope.loadSubmittedMedia();\n                        deferred.resolve();\n                    } else {\n                        $scope.mediaList.push(data);\n                        editor.dataSet('mediaList', $scope.mediaList);\n                        $scope.getMedia(data.id).then(function () {\n                            deferred.resolve();\n                        }, function () {\n                            deferred.reject();\n                        });\n                        $scope.clearForm();\n                    }\n                }, function (response) {\n                    $scope.form1.$setPristine();\n                    $scope.view.busy = false;\n                    deferred.reject();\n                });\n            } else {\n                $scope.scrollToFirstError();\n                helper.alert('danger', 'Please fill all required fields');\n                deferred.reject();\n            }\n            return deferred.promise;\n        };\n\n        $scope.deleteMedia = function (mediaId) {\n            $scope.previewMediaId = mediaId.id;\n            campaignsService.deleteMedia($scope.previewMediaId).then(function (response) {\n                console.log(response);\n                helper.alert('success', 'Media has been deleted');\n                $scope.loadSubmittedMedia();\n            }, function (response) {\n                console.log(response);\n                helper.alert('danger', 'Media has not been deleted.');\n            });\n        };\n\n        $scope.removeAddImageForm = function () {\n            $scope.data.description = '';\n            $scope.data.imageName = '';\n            $scope.data.imageFile = '';\n            $scope.data.url = '';\n            $scope.selectedTvStation = $scope.tvStations[0];\n            $scope.stationOther = '';\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('.image-review-list');\n            $scope.imageList = [];\n            $scope.imageReviewIdx = 0;\n            var imageStyle = 'background-image: none;border-color: #ccc;';\n            $scope.imageList = [imageStyle, imageStyle, imageStyle, imageStyle];\n\n            var mediaData = {\n                description: '',\n                target: '',\n                target_name: '',\n                target_format: '',\n                target_url: '',\n                tv_station: ''\n            };\n\n            $scope.isAddImage = false;\n            $scope.isOther = false;\n            $scope.form1.description.$pristine;\n            $scope.form1.imageName.$pristine;\n            $scope.form1.imageFile.$pristine;\n            $scope.form1.url.$pristine;\n        };\n\n        $scope.clearForm = function () {\n            helper.clearForm();\n\n            $scope.data = {\n                arImageFile: '',\n                imageFile: '',\n                mediaName: '',\n                mediaId: '',\n                imageName: '',\n                arImageName: '',\n                description: '',\n                brandImageFile: '',\n                brandDescription: '',\n                animation: ''\n            };\n\n            helper.clearFileUploader('#imageFile');\n            helper.clearFileUploader('#arImageFile');\n            helper.clearFileUploader('.image-review-list');\n\n            $scope.imageList = [];\n            var emptyImageStyle = 'background-image: none;border-color: #ccc;';\n            while ($scope.imageList.length < 4) {\n                $scope.imageList.push(emptyImageStyle);\n            }\n            $scope.imageFileList = [];\n            $scope.imageReviewIdx = 0;\n        };\n\n        $scope.cancelEdit = function () {\n            $scope.clearForm();\n            $scope.editMode = false;\n            $scope.stationOther = '';\n            $scope.isAddImage = false;\n        };\n\n        $scope.getMedia = function (mediaId) {\n            var deferred = $q.defer();\n            // $scope.view.busyMedia = true;\n            $scope.view.busy = true;\n            mediaService.getMediaItem(mediaId).then(function (mediaItem) {\n                $scope.view.busy = false;\n                $scope.media = mediaItem;\n                editor.dataSet('media', $scope.media);\n\n                editor.save('step2').then(function () {\n                    $scope.campaignId = editor.dataGet('campaignId');\n                    campaignsService.getCampaign($scope.campaignId);\n                    // show notification\n                    helper.alert('success', 'Media has been created.');\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }, function () {\n                // $scope.view.busyMedia = false;\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n        $scope.getFormats = function () {\n            $scope.formats = ['Commercial'];\n        };\n\n        $scope.getFormats();\n\n        $scope.loadSubmittedMedia = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.mediaList = response.media;\n                });\n            }\n        };\n\n        $scope.finish = function () {\n\n            var deferred = $q.defer();\n\n            var campaignStatus = editor.dataGet('campaignStatus');\n            var campaign = editor.dataGet('campaign');\n\n            if (campaignStatus === 'start' && !campaign.status || $scope.editId) {\n                $scope.activeCampaign().then(function () {\n                    deferred.resolve();\n                }, function () {\n                    deferred.reject();\n                });\n            } else {\n                deferred.resolve();\n            }\n\n            return deferred.promise;\n        };\n\n        $scope.scrollToFirstError = function () {\n            var elementName = $scope.form1.$error.required[0].$name;\n            var firstErrorId = document.getElementsByName(elementName)[0].id;\n            $location.hash(firstErrorId);\n            $anchorScroll();\n        };\n\n        $scope.needBasicValidateZone = function () {\n            if ($scope.data.imageName || $scope.data.imageFile) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        $scope.init = function () {\n            $scope.editMode = false;\n            $scope.isAddImage = false;\n            $scope.loadSubmittedMedia();\n            var targetingData = editor.dataGet('targeting');\n            $scope.view.busy = false;\n        };\n\n        function checkMediaValidation() {\n            if ($scope.data.arImageName === '') {\n                helper.alert('danger', 'Please fill all required fields');\n                return false;\n            }\n            return true;\n        }\n        function checkCampaignValidation() {\n            if ($scope.mediaList.length !== 0) {\n                return true;\n            }\n            helper.alert('danger', 'Please submit at least one media');\n            return false;\n        }\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.nextStep();\n            }\n        });\n\n        $scope.init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('tvStep3Ctrl', ['$scope', 'productsService', 'kachingZonecampaignEditorService', 'campaignsService', 'mediaService', 'utils', 'FileUploader', 'apiUrl', 'authToken', '$http', '$q', 'errorHandler', 'kachingZonesHelpers', function ($scope, productsService, kachingZonecampaignEditorService, campaignsService, mediaService, utils, FileUploader, apiUrl, authToken, $http, $q, errorHandler, kachingZonesHelpers) {\n        var helper = kachingZonesHelpers;\n        var editor = kachingZonecampaignEditorService;\n\n        var uploader = $scope.uploader = new FileUploader({\n            url: apiUrl + '/products/',\n            method: 'PATCH',\n            headers: {\n                'Authorization': 'Token ' + authToken.get()\n            }\n        });\n\n        $scope.view = {\n            busy: true,\n            productImageUploadStarted: false,\n            productImageUploadProgress: 0,\n            productImageUploadComplete: false\n        };\n\n        uploader.onAfterAddingFile = function (newItem) {\n            utils.cleanupUploaderQueue(uploader);\n            $scope.data.productImageFile = newItem._file;\n        };\n\n        uploader.onBeforeUploadItem = function (item) {\n            $scope.view.productImageUploadStarted = true;\n            item.url = apiUrl + '/media/' + $scope.data.mediaId + '/';\n        };\n\n        uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            $scope.view.productImageUploadComplete = true;\n        };\n\n        uploader.onProgressItem = function (fileItem, progress) {\n            $scope.view.productImageUploadProgress = progress;\n        };\n\n        uploader.onCompleteAll = function () {\n            $scope.view.mediaCreated = true;\n        };\n\n        $scope.data = {\n            'title': '',\n            'description': '',\n            'pirce': '',\n            'url': ''\n        };\n\n        $scope.previewData = {\n            isInstore: false,\n            followIBeacon: { enabled: false },\n            scanReceipt: { enabled: false },\n            issueQR: { enabled: false },\n            buyProducts: { enabled: false },\n            sendInformation: { enabled: false },\n            register: { enabled: false },\n            share: { enabled: false },\n            openMicrophone: { enabled: false },\n            watchVideo: { enabled: false }\n        };\n\n        $scope.recommendedProducts = [];\n        $scope.carouselOptions = {\n            nav: true,\n            dots: false,\n            navText: ['<span class=\"glyphicon glyphicon-triangle-left\"></span>', '<span class=\"glyphicon glyphicon-triangle-right\"></span>'],\n            navRewind: false,\n            loop: false,\n            items: 4\n        };\n        $scope.products = editor.dataGet('products');\n\n        var myArr = [{\n            type: 'type',\n            perDollarPerClick: 3\n        }, {\n            type: 'another type',\n            perDollarPerClick: 2\n        }];\n        $scope.purchaseAds = myArr;\n        $scope.increaseAmount = function (media) {\n            media.bets_per_view = 1 * media.bets_per_view + 1;\n            $scope.grandTotal = 0;\n            angular.forEach($scope.medias, function (value, key) {\n                $scope.grandTotal += 1 * value.bets_per_view;\n            });\n        };\n\n        $scope.decreaseAmount = function (media) {\n            if (media.bets_per_view > 1) {\n                media.bets_per_view = 1 * media.bets_per_view - 1;\n                $scope.grandTotal = 0;\n                angular.forEach($scope.medias, function (value, key) {\n                    $scope.grandTotal += 1 * value.bets_per_view;\n                });\n            }\n        };\n\n        $scope.updateAmount = function (media) {\n            $scope.grandTotal = 0;\n            angular.forEach($scope.medias, function (value, key) {\n                $scope.grandTotal += 1 * value.bets_per_view;\n            });\n        };\n\n        $scope.fieldHasError = utils.fieldHasError;\n        $scope.showErrors = function () {\n            return editor.stepGet('step3', 'submitted');\n        };\n\n        $scope.nextStep = function () {\n            editor.stepSet('step3', 'submitted', true);\n            if ($scope.form1.$valid) {\n                $scope.view.busy = true;\n                editor.stepSet('step3', 'valid', true);\n                $scope.updateAllMedia($scope.medias).then(function () {\n                    $scope.goNext();\n                    helper.alert('success', 'All media has been updated');\n                    $scope.view.busy = false;\n                    $scope.activeCampaign();\n                }, function (response) {\n                    $scope.view.busy = false;\n                    errorHandler.processApiResponse(response);\n                });\n            }\n        };\n\n        $scope.selectRecommendedProduct = function (product) {\n            $scope.editMode = true;\n            $scope.data.productIdInEdit = product.id;\n            $scope.data.title = product.title;\n            $scope.data.description = product.description;\n            $scope.data.price = product.price;\n            $scope.data.url = product.url;\n            $scope.data.productImageFile = product.image;\n            helper.alert('info', 'Product in edit mode!');\n        };\n\n        $scope.updateAllMedia = function (medias) {\n            var deferred = $q.defer();\n            var promisses = [];\n\n            angular.forEach(medias, function (media) {\n                var prodDeferred = $q.defer();\n                promisses.push(prodDeferred.promise);\n                var mediaData = {\n                    id: media.id,\n                    bets_per_view: media.bets_per_view,\n                    type: 'tv-ads'\n                };\n                campaignsService.updateMedia(mediaData).then(function (response) {\n                    prodDeferred.resolve(response);\n                }, function (response) {\n                    prodDeferred.reject(response);\n                });\n\n                // Update Media\n                var rewardDeferred = $q.defer();\n                promisses.push(rewardDeferred.promise);\n                var rewardData = {\n                    send_information: media.reward.send_information,\n                    share: media.reward.share,\n                    product: media.reward.product\n                };\n                mediaService.updateReward(media.id, rewardData).then(function (response) {\n                    rewardDeferred.resolve(response);\n                }, function (response) {\n                    rewardDeferred.reject(response);\n                });\n\n                // Update Register\n                var registerDeferred = $q.defer();\n                promisses.push(registerDeferred.promise);\n                var campaign = {\n                    id: $scope.campaignId,\n                    register: $scope.campaign.register\n                };\n                campaignsService.saveKachingZoneCampagin(campaign).then(function (response) {\n                    registerDeferred.resolve(response);\n                }, function (response) {\n                    registerDeferred.reject(response);\n                });\n            });\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            });\n            return deferred.promise;\n        };\n\n        $scope.saveProduct = function () {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url,\n                image: $scope.data.productImageFile\n            };\n\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n\n            return deferred.promise;\n        };\n\n        $scope.updateProduct = function (productId) {\n            if ($scope.data.url.match(/^http[s]?:\\/\\//i) === null) {\n                $scope.data.url = 'http://' + $scope.data.url;\n            }\n            var productData = {\n                id: productId,\n                title: $scope.data.title,\n                description: $scope.data.description,\n                price: $scope.data.price,\n                url: $scope.data.url\n            };\n            if (_typeof($scope.data.productImageFile) === 'object' && $scope.data.productImageFile != null) {\n                productData.image = $scope.data.productImageFile;\n            }\n            var deferred = $q.defer();\n            productsService.createProduct(productData).then(function successCallback(response) {\n                deferred.resolve(response);\n            }, function errorCallback(response) {\n                deferred.reject(response);\n                errorHandler.processApiResponse(response);\n            });\n            return deferred.promise;\n        };\n\n        $scope.submitProduct = function () {\n            if ($scope.editMode) {\n                $scope.updateProduct($scope.data.productIdInEdit).then(function (response) {\n                    helper.alert('success', 'Product have been updated');\n                    $scope.loadSubmittedProducts();\n                    $scope.editMode = false;\n                }, function (error) {\n                    errorHandler.processApiResponse(error);\n                    $scope.editMode = false;\n                });\n            } else {\n                $scope.view.busy = true;\n                $scope.saveProduct().then(function (response) {\n                    console.log(response);\n                    productsService.getProduct(response.id).then(function (product) {\n                        $scope.recommendedProducts.push(product);\n                        campaignsService.saveProducts($scope.campaignId, $scope.recommendedProducts).then(function (reponse) {\n                            $scope.view.busy = false;\n                            helper.alert('success', 'Product have been added');\n                        }, function (error) {\n                            errorHandler.processApiResponse(error);\n                        });\n                    }, function (error) {\n                        errorHandler.processApiResponse(error);\n                    });\n                }, function (error) {\n                    console.log(error);\n                    $scope.view.busy = false;\n                });\n            }\n        };\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        var init = function init() {\n            $scope.loadSubmittedProducts();\n            utils.addUploaderTypeFilter(uploader, 'image', {\n                imageFilter: ['image/png', 'image/jpg', 'image/jpeg']\n            });\n            $scope.campaignId = editor.dataGet('campaignId');\n            $scope.grandTotal = 0;\n            campaignsService.getCampaign($scope.campaignId).then(function (campaign) {\n                $scope.campaign = campaign;\n\n                if (!$scope.campaign.register) {\n                    $scope.campaign.register = 0;\n                }\n\n                if (campaign.media.length > 0) {\n                    $scope.medias = campaign.media;\n                    angular.forEach($scope.medias, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                        if (!value.reward) {\n                            value.reward = {\n                                send_information: 0,\n                                share: 0,\n                                product: 0\n                            };\n                        }\n                    });\n                }\n                $scope.view.busy = false;\n            }, function (response) {\n                errorHandler.processApiResponse(response);\n                $scope.view.busy = false;\n                errorHandler.processApiResponse(response);\n            });\n        };\n\n        init();\n\n        $scope.$watchCollection('medias', function (newVal, oldVal) {});\n\n        $scope.$on('fund-broadcast', function () {\n            if ($scope.editId) {\n                $scope.saveProduct();\n                $scope.nextStep();\n            }\n        });\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('tvStep4Ctrl', ['$scope', 'productsService', 'campaignsService', 'campaignEditorService', 'kachingZonecampaignEditorService', '$q', 'errorHandler', function ($scope, productsService, campaignsService, campaignEditorService, kachingZonecampaignEditorService, $q, errorHandler) {\n        var editor = kachingZonecampaignEditorService;\n        $scope.view = {\n            busy: true\n        };\n\n        $scope.locations = {};\n        $scope.categories = {};\n\n        $scope.loadSubmittedProducts = function () {\n            if (editor.dataGet().campaignId !== undefined) {\n                campaignsService.getCampaign(editor.dataGet().campaignId).then(function (response) {\n                    $scope.recommendedProducts = response.products;\n                });\n            }\n        };\n\n        var initCampaign = function initCampaign() {\n            var deferred = $q.defer();\n            var mediaListData = editor.dataGet('mediaList');\n            if (!_.isEmpty(mediaListData)) {\n                $scope.mediaList = mediaListData;\n                $scope.campaignId = editor.dataGet('campaignId');\n                $scope.media = editor.dataGet('media');\n                campaignsService.getCampaign($scope.campaignId).then(function (response) {\n                    $scope.campaign = response;\n                });\n                deferred.resolve();\n            } else {\n                campaignsService.getCampaign($scope.editId).then(function (data) {\n                    $scope.mediaList = data.media;\n                    $scope.campaign = data;\n                    angular.forEach($scope.mediaList, function (value, key) {\n                        $scope.grandTotal += 1 * value.bets_per_view;\n                    });\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initTargetings = function initTargetings() {\n            var deferred = $q.defer();\n            var targetingData = editor.dataGet('targeting');\n            if (!_.isEmpty(targetingData)) {\n                $scope.targeting = targetingData;\n                var arrLocations = [],\n                    arrCategories = [];\n                // Get a location have selected true\n                angular.forEach($scope.targeting.locations, function (item, id) {\n                    if (item.selected === true) {\n                        arrLocations.push(item);\n                    }\n                });\n                // Get a category have selected true\n                angular.forEach($scope.targeting.categories, function (item, id) {\n                    if (item.selected === true) {\n                        arrCategories.push(item);\n                    }\n                });\n                $scope.locations = arrLocations;\n                $scope.categories = arrCategories;\n                deferred.resolve();\n            } else {\n                // $scope.view.busy = true;\n                var id = $scope.editId || undefined;\n                campaignsService.getTargeting(id).then(function (response) {\n                    $scope.targeting = response;\n                    var arrLocations = [],\n                        arrCategories = [];\n                    // Get a location have selected true\n                    angular.forEach($scope.targeting.locations, function (item, id) {\n                        if (item.selected === true) {\n                            arrLocations.push(item);\n                        }\n                    });\n                    // Get a category have selected true\n                    angular.forEach($scope.targeting.categories, function (item, id) {\n                        if (item.selected === true) {\n                            arrCategories.push(item);\n                        }\n                    });\n                    $scope.locations = arrLocations;\n                    $scope.categories = arrCategories;\n                    deferred.resolve();\n                }, function (response) {\n                    errorHandler.processApiResponse(response);\n                    deferred.reject();\n                });\n            }\n            return deferred.promise;\n        };\n\n        var initData = function initData() {\n            var deferred = $q.defer();\n            var deferred1 = $q.defer();\n            var deferred2 = $q.defer();\n\n            var promisses = [deferred1.promise, deferred2.promise];\n\n            initCampaign().then(function () {\n                deferred1.resolve();\n            }, function () {\n                deferred1.reject();\n            });\n\n            initTargetings().then(function () {\n                deferred2.resolve();\n            }, function () {\n                deferred2.reject();\n            });\n\n            $q.all(promisses).then(function () {\n                deferred.resolve();\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        var init = function init() {\n            $scope.view.busy = true;\n\n            if (!$scope.editId) {\n                if (!editor.stepGet('step1', 'valid') || !editor.stepGet('step2', 'valid') || !editor.stepGet('step3', 'valid')) {\n                    $scope.updateStep(editor.currentStep());\n                }\n            }\n\n            editor.currentStep(4);\n            editor.previousState(4);\n\n            $scope.loadSubmittedProducts();\n            $scope.mediaList = [];\n            $scope.grandTotal = 0;\n\n            initData().then(function () {\n                $scope.view.busy = false;\n            }, function () {\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();\n\n// (function() {\n//     'use strict';\n//\n//     angular.module('panelApp')\n//         .controller('tvStep4Ctrl', [\n//             '$scope',\n//             'productsService',\n//             'campaignsService',\n//             'campaignEditorService',\n//             function(\n//                 $scope,\n//                 productsService,\n//                 campaignsService,\n//                 campaignEditorService\n//             ) {\n//                 var editor = campaignEditorService;\n//                 $scope.view = {\n//                     busy: true\n//                 };\n//                 $scope.loadSubmittedProducts = function() {\n//                     if (editor.dataGet().campaignId !== undefined) {\n//                         campaignsService.getCampaign(editor.dataGet().campaignId).then(function(response) {\n//                             $scope.recommendedProducts = response.products;\n//                         });\n//                     }\n//                 };\n//                 var init = function() {\n//                     var editor = campaignEditorService;\n//                     $scope.campaignId = editor.dataGet('campaignId');\n//                     $scope.media = editor.dataGet('media');\n//                     campaignsService.getCampaign($scope.campaignId).then(function(response) {\n//                         $scope.dataFromApi = response;\n//                     });\n//                     $scope.loadSubmittedProducts();\n//                     $scope.view.busy = false;\n//\n//                     $scope.mediaList = [];\n//                     if ($scope.editId) {\n//                         // $scope.initEditMode($scope.editId);\n//                         campaignsService.getCampaign( $scope.editId ).then(\n//                             function(data){\n//                                 // $scope.campaign\n//                                 $scope.mediaList = data.media;\n//                                 angular.forEach($scope.mediaList, function (value, key) {\n//                                     $scope.grandTotal += 1*value.bets_per_view;\n//                                 });\n//                             },\n//                             function(){\n//                             }\n//                         );\n//                     } else {\n//                         var mediaListData = editor.dataGet('mediaList');\n//                         if (  ! _.isEmpty( mediaListData ) ) {\n//\n//                             $scope.mediaList = mediaListData;\n//\n//                         }\n//                     }\n//                 };\n//\n//                 init();\n//             }\n//         ]);\n// })();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('mediaPreview', ['$modal', function ($modal) {\n        return {\n            restrict: 'E',\n            scope: {\n                mediaList: '=mediaList',\n                itemEdit: '&',\n                itemDelete: '&',\n                showEdit: '=showEdit',\n                showDelete: '=showDelete',\n                viewMedia: '=viewMedia',\n                review: '=',\n                viewTab: '=',\n                selectedMedia: '=',\n                hasAr: '=',\n                connector: '='\n            },\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/directives/mediaPreview/media-preview.tmpl.html',\n            link: function link(scope, ele, attrs) {\n                ele.on('click', '.glyphicon', function (event) {\n                    var $mediaItem = angular.element(this).closest('li.media-preview');\n                    var $expandedItem = $mediaItem.find('.media-preview-expanded');\n\n                    $mediaItem.toggleClass('actived');\n                    $mediaItem.find('.glyphicon').toggleClass('glyphicon-menu-down').toggleClass('glyphicon-menu-right');\n                    $expandedItem.slideToggle();\n\n                    var $others = angular.element('li.media-preview').not($mediaItem);\n                    $others.find('.glyphicon').removeClass('glyphicon-menu-down').addClass('glyphicon-menu-right');\n                    $others.find('.media-preview-expanded').slideUp();\n                    $others.removeClass('actived');\n                });\n                scope.filter = function (item) {\n                    var type = 'all';\n                    if (scope.tab === 'video') {\n                        type = 'video';\n                    } else if (scope.tab === 'image') {\n                        type = 'image';\n                    } else {\n                        return true;\n                    }\n                    return item.ar_resource_type === type ? true : false;\n                };\n                if (scope.connector) {\n                    scope.connector.resetSelectedMedia = function () {\n                        scope.editingMediaId = undefined;\n                    };\n                }\n            },\n            controller: function controller($scope) {\n                $scope.previewMedia = function (event, media) {\n                    media.selected = false;\n                    if (event.target.tagName === 'SPAN') {\n                        return false;\n                    }\n                    if (!$scope.selectedMedia) {\n                        $scope.selectedMedia = media;\n                        media.selected = true;\n                    } else {\n                        if ($scope.selectedMedia.id !== media.id) {\n                            if ($scope.selectedMedia.id) {\n                                $scope.selectedMedia.selected = false;\n                            }\n                            $scope.selectedMedia = media;\n                            media.selected = true;\n                        } else {\n                            media.selected = false;\n                            $scope.selectedMedia = null;\n                        }\n                    }\n                };\n\n                $scope.showDeleteMediaDialog = function (_media) {\n                    var options = {\n                        delete: function _delete(media) {\n                            $scope.itemDelete({ media: media });\n                        }\n                    };\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaDeleteModal/modalTmpl.html',\n                        controller: 'mediaDeleteModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        placement: 'center',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            },\n                            media: function media() {\n                                return _media;\n                            }\n                        }\n                    });\n                };\n                $scope.edit = function (mediaId) {\n                    $scope.itemEdit({ mediaId: mediaId });\n                    $scope.editingMediaId = mediaId.id;\n                };\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('countryService', ['$q', '$http', function ($q, $http) {\n        return {\n            getCities: getCities,\n            getDistricts: getDistricts\n        };\n        function getCities(countryCode, city) {\n            var url = 'http://api.geonames.org/searchJSON?country=' + countryCode + '&fcode=PPLA&fcode=PPLC&username=ulabvn';\n\n            if (!!city) {\n                url += '&q=' + city;\n            }\n\n            console.log(url);\n\n            return makeRequest('GET', url);\n        }\n\n        function getDistricts(countryCode, city) {\n            var url = 'http://api.geonames.org/searchJSON?country=' + countryCode + '&q=' + city + '&fcode=PPLA2&fcode=PPLC&username=ulabvn';\n            if (!!city) {\n                url += '&q=' + city;\n            }\n\n            console.log(url);\n\n            return makeRequest('GET', url);\n        }\n\n        function makeRequest(method, url) {\n\n            var deferred = $q.defer();\n\n            var request = {\n                method: method,\n                url: url\n            };\n\n            $http(request).then(function (response) {\n                deferred.resolve(response.data);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('balanceInput', function () {\n        return {\n            restrict: 'A',\n            require: 'ngModel',\n            scope: {\n                balance: '@'\n            },\n            link: function link(scope, elem, attr, ngModel) {\n                //For DOM -> model validation\n                ngModel.$parsers.unshift(function (value) {\n                    var spentCoins = attr.spentCoins || 1;\n                    var valid = 1 * value >= 1 * spentCoins && 1 * value <= 1 * attr.balance;\n                    ngModel.$setValidity('balanceInput', valid);\n                    return value;\n                });\n\n                //For model -> DOM validation\n                ngModel.$formatters.unshift(function (value) {\n                    return value;\n                });\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('urlInput', function () {\n        return {\n            restrict: 'A',\n            require: 'ngModel',\n            link: function link(scope, el, attr, ctrl) {\n                ctrl.$validators.urlInput = function (modelValue, viewValue) {\n                    if (ctrl.$isEmpty(modelValue)) {\n                        return true;\n                    }\n\n                    var urlRegex = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/;\n                    return urlRegex.test(viewValue);\n                };\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('instoreMediaPreview', ['$modal', function ($modal) {\n        return {\n            restrict: 'E',\n            scope: {\n                storeList: '=storeList',\n                itemEdit: '&',\n                itemDelete: '&',\n                showEdit: '=showEdit',\n                showDelete: '=showDelete',\n                viewMedia: '=viewMedia',\n                review: '=',\n                viewTab: '=',\n                selectedMedia: '=',\n                connector: '='\n            },\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/directives/instoreMediaPreview/instore-media-preview.tmpl.html',\n            link: function link(scope, ele, attrs) {\n                ele.on('click', '.glyphicon', function () {\n\n                    var $mediaItem = angular.element(this).closest('li.media-preview');\n                    var $expandedItem = $mediaItem.find('.media-preview-expanded');\n\n                    $mediaItem.toggleClass('actived');\n                    $mediaItem.find('.glyphicon').toggleClass('glyphicon-menu-down').toggleClass('glyphicon-menu-right');\n                    $expandedItem.slideToggle();\n\n                    var $others = angular.element('li.media-preview').not($mediaItem);\n                    $others.find('.glyphicon').removeClass('glyphicon-menu-down').addClass('glyphicon-menu-right');\n                    $others.find('.media-preview-expanded').slideUp();\n                    $others.removeClass('actived');\n                });\n                scope.filter = function (item) {\n                    var type = 'all';\n                    if (scope.tab === 'video') {\n                        type = 'video';\n                    } else if (scope.tab === 'image') {\n                        type = 'image';\n                    } else {\n                        return true;\n                    }\n                    return item.ar_resource_type === type ? true : false;\n                };\n                scope.storeFilter = function (item) {\n                    if (scope.tab === 'video') {\n                        return item.hasVideo;\n                    } else if (scope.tab === 'image') {\n                        return item.hasImage;\n                    } else {\n                        return true;\n                    }\n                };\n                if (scope.connector) {\n                    scope.connector.resetInStoreSelectedMedia = function () {\n                        scope.editingMediaId = undefined;\n                    };\n                }\n            },\n            controller: function controller($scope) {\n                $scope.previewMedia = function (event, media) {\n                    media.selected = false;\n                    if (event.target.tagName === 'SPAN') {\n                        return false;\n                    }\n                    if (!$scope.selectedMedia) {\n                        $scope.selectedMedia = media;\n                        media.selected = true;\n                    } else {\n                        if ($scope.selectedMedia.id !== media.id) {\n                            if ($scope.selectedMedia.id) {\n                                $scope.selectedMedia.selected = false;\n                            }\n                            $scope.selectedMedia = media;\n                            media.selected = true;\n                        } else {\n                            media.selected = false;\n                            $scope.selectedMedia = null;\n                        }\n                    }\n                };\n                $scope.showDeleteMediaDialog = function (_media) {\n                    var options = {\n                        delete: function _delete(media) {\n                            $scope.itemDelete({ media: media });\n                        }\n                    };\n                    $modal({\n                        templateUrl: templateDirUri + '/assets/kaching/panel-module/components/mediaDeleteModal/modalTmpl.html',\n                        controller: 'mediaDeleteModalCtrl',\n                        animation: 'am-fade-and-scale',\n                        placement: 'center',\n                        resolve: {\n                            modalOptions: function modalOptions() {\n                                return options;\n                            },\n                            media: function media() {\n                                return _media;\n                            }\n                        }\n                    });\n                };\n                $scope.edit = function (mediaId) {\n                    $scope.itemEdit({ mediaId: mediaId });\n                    $scope.editingMediaId = mediaId.id;\n                };\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('lotteryFilter', ['$window', '$rootScope', function ($window, $rootScope) {\n        return function (items, from, to, winnerName) {\n            var fromDate = new Date(from).getTime();\n            var toDate = new Date(to).getTime();\n            var dataFilterDate = from && to ? items.filter(function (item) {\n                var itemTime = new Date(item.date.split(' ')[0]).getTime();\n                return itemTime >= fromDate && itemTime <= toDate;\n            }) : items;\n\n            var dataFilterWinner = winnerName ? dataFilterDate.filter(function (item) {\n                return item.winner.toLowerCase().indexOf(winnerName.toLowerCase()) > -1 ? true : false;\n            }) : dataFilterDate;\n\n            var filteredData = dataFilterWinner;\n            $rootScope.kaching.lotteryFilteredDataLength = filteredData.length;\n            return filteredData;\n        };\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('lotteryService', ['$q', 'apiService', function ($q, apiService) {\n\n        return {\n            getLotteryList: getLotteryList\n        };\n\n        function getLotteryList(params) {\n\n            var deferred = $q.defer();\n\n            var requestParams = {\n                page_size: 10,\n                page: 1\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('page_size' in params) {\n                    requestParams.page_size = params.page_size;\n                }\n                if ('page' in params) {\n                    requestParams.page = params.page;\n                }\n            }\n\n            apiService.get('/draws/', requestParams, true).then(function (response) {\n                deferred.resolve({\n                    count: response.count,\n                    items: response.results,\n                    next: response.next,\n                    previous: response.previous\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('lotteryCtrl', ['$scope', '$state', '$q', 'lotteryService', '$rootScope', function ($scope, $state, $q, lotteryService, $rootScope) {\n        var itemsPerPage = 8;\n        if (!$rootScope.kaching) $rootScope.kaching = {};\n        $rootScope.kaching.lotteryFilteredDataLength = 8;\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            currentPage: 1,\n            maxSize: 10\n        };\n\n        $scope.data = {\n            lotteryListsCount: 0,\n            lotteryLists: []\n        };\n\n        $scope.changePage = function () {\n            getLotteryList();\n        };\n\n        var getLotteryList = function getLotteryList(all) {\n\n            var params = {\n                page_size: itemsPerPage,\n                page: $scope.view.currentPage\n            };\n\n            lotteryService.getLotteryList({ page: 1, page_size: 9999999 }).then(function (data) {\n                // List for CSV\n                $scope.lotteryList = [];\n                // End list for CSV\n                $scope.data.lotteryLists = [];\n                $scope.view.busy = false;\n                var data = _.filter(data.items, function (item) {\n                    return item.participant_draws.length > 0;\n                });\n\n                angular.forEach(data, function (item, key) {\n\n                    var dataItem = {\n                        date: item.winsel_date === null ? '-' : moment(item.winsel_date).format('MM-DD-YYYY hh:mm')\n                    };\n\n                    angular.forEach(item.participant_draws, function (subItem, subKey) {\n                        dataItem.photo = subItem.participant.avatar, dataItem.winner = subItem.participant.name, dataItem.dollars = subItem.winning_amount ? '$ ' + subItem.winning_amount : '-';\n                    });\n\n                    $scope.data.lotteryLists.push(dataItem);\n                    $scope.lotteryList.push({\n                        photo: dataItem.photo,\n                        winner: dataItem.winner,\n                        date: dataItem.date,\n                        dollars: dataItem.dollars\n                    });\n                });\n            }, function (response) {\n                $scope.view.busy = false;\n            });\n        };\n\n        // Filter Zone\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('MM-DD-YYYY'),\n            display: 'Select date range'\n        };\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            }\n        });\n\n        var init = function init() {\n            getLotteryList();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nif (typeof Object.prototype.extend !== 'function') {\n    Object.defineProperty(Object.prototype, \"extend\", {\n        value: function value(obj) {\n            for (var i in obj) {\n                if (obj.hasOwnProperty(i)) {\n                    this[i] = obj[i];\n                }\n            }\n        },\n        enumerable: false\n    });\n}\n(function (window) {\n    'use strict';\n\n    function KachingLottery(element, settings) {\n        var _ = this;\n        _.options = {\n            totalColumn: 8,\n            elementH: 440,\n            imageSrc: kachingAppConfig.wpTemplateUri + '/assets/kaching/lottery/libs/imagestrip@2x.png'\n        };\n        _.timer = undefined;\n        _.element = element;\n        if (_.element.length === 1) {\n            _.element = _.element.get(0);\n        }\n        if (settings && (typeof settings === 'undefined' ? 'undefined' : _typeof(settings)) === 'object') {\n            _.settings = settings;\n        }\n        _.initControl();\n    }\n    KachingLottery.prototype.initControl = function () {\n        var _ = this;\n        if (_.element && _typeof(_.element) !== 'object') {\n            return;\n        }\n        _.options.extend(_.settings);\n        for (var i = 0; i < _.options.totalColumn; i++) {\n            var child = document.createElement('div');\n            var image = document.createElement('img');\n            child.className = 'lottery-item';\n            image.className = 'lottery-item-image';\n            image.src = _.options.imageSrc;\n            child.append(image);\n            _.element.append(child);\n        }\n        _.options.itemH = _.options.elementH / 10;\n        _.options.ignoreList = [];\n        _.startAnimation();\n    };\n    KachingLottery.prototype.resetImageObj = function (imgObj) {\n        imgObj.style.position = 'relative';\n        imgObj.style.left = '0px';\n        imgObj.style.top = '0px';\n    };\n    KachingLottery.prototype.stopItem = function (index, number) {\n        var _ = this;\n        var interval = 1;\n        var imageList = document.getElementsByClassName('lottery-item-image');\n        var item = imageList[index];\n        var currentPos = parseInt(item.style.top.slice(0, -2));\n        var stopPos = _.options.itemH * number;\n        var i = 0;\n        if (!_.options.ignoreList.includes(index)) {\n            _.options.ignoreList.push(index);\n        }\n        var stop = new Promise(function (resolve, reject) {\n            (function decelerate() {\n                i++;\n                if (Math.abs(currentPos) == stopPos) {\n                    resolve(true);\n                    return;\n                } else {\n                    if (Math.abs(currentPos) == _.options.elementH - _.options.itemH) {\n                        currentPos = 0;\n                    }\n                    currentPos--;\n                    item.style.top = currentPos + 'px';\n                    window.setTimeout(decelerate, Math.floor(i / 10));\n                }\n            })();\n        });\n        return stop;\n    };\n    KachingLottery.prototype.startAnimation = function (currentPos) {\n        var _ = this;\n        var pos = currentPos || 0;\n        var imageList = document.getElementsByClassName('lottery-item-image');\n        for (var i = 0; i < imageList.length; i++) {\n            _.resetImageObj(imageList[i]);\n        }\n        _.timer = setInterval(moveAll, 1);\n        function moveAll() {\n            if (Math.abs(pos) == _.options.elementH - _.options.itemH) {\n                for (var i = 0; i < imageList.length; i++) {\n                    if (_.options.ignoreList && _.options.ignoreList.includes(i)) {\n                        continue;\n                    }\n                    _.resetImageObj(imageList[i]);\n                }\n                pos = 0;\n            }\n            pos -= 5.5;\n            for (var i = 0; i < imageList.length; i++) {\n                if (_.options.ignoreList && _.options.ignoreList.includes(i)) {\n                    continue;\n                }\n                imageList[i].style.top = pos + 'px';\n            }\n        }\n    };\n    return window.KachingLottery = KachingLottery;\n})(window);","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('testLotteryCtrl', ['$scope', function ($scope) {\n        var $lotterEl = angular.element('#lottery-control');\n        window.lottery = undefined;\n        function initLotteryControl() {\n            if (!KachingLottery) {\n                return;\n            } else {\n                lottery = new KachingLottery($lotterEl);\n            }\n        }\n        var init = function init() {\n            initLotteryControl();\n        };\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('coinMappingCtrl', ['$scope', '$state', '$q', 'coinMappingService', 'kachingZonesHelpers', '$rootScope', function ($scope, $state, $q, coinMappingService, kachingZonesHelpers, $rootScope) {\n        if (!$rootScope.kaching) $rootScope.kaching = {};\n        $rootScope.kaching.coinMappingFilteredDataLength = 8;\n        var helper = kachingZonesHelpers;\n        var itemsPerPage = 8;\n        var maxSize = 10;\n\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            maxSize: maxSize,\n            currentPage: 1\n        };\n\n        $scope.data = {\n            coinMappingListCount: 0,\n            coinMappingList: []\n        };\n\n        $scope.changePage = function () {\n            getCoinMappingList();\n        };\n\n        $scope.changeRate = function (item) {\n            if (!item.rate) {\n                item.hasChanged = false;\n                return;\n            }\n            if (item.rate != item.oldRate) {\n                item.hasChanged = true;\n            } else {\n                item.hasChanged = false;\n            }\n            // item.oldRate = item.rate;\n        };\n\n        $scope.checkRate = function (item) {\n            if (!item.rate) {\n                item.rate = item.oldRate;\n            }\n        };\n\n        $scope.updateRate = function (item) {\n            coinMappingService.updateRateExchange(item).then(function (response) {\n                helper.alert('success', 'Coin mapping has been updated successfully.');\n                item.oldRate = response.rate_exchange;\n                item.hasChanged = false;\n                $scope.$apply();\n            }, function (response) {\n                helper.alert('danger', 'Cannot update coin mapping now. Please try later.');\n            });\n        };\n\n        var getCoinMappingList = function getCoinMappingList() {\n\n            coinMappingService.getCountries().then(function (data) {\n                $scope.data.coinMappingListCount = data.count;\n                $scope.data.coinMappingList = [];\n                $scope.view.busy = false;\n                angular.forEach(data.items, function (value, key) {\n                    var dataItem = {\n                        id: value.id,\n                        country: value.short_name,\n                        rate: value.rate_exchange,\n                        oldRate: value.rate_exchange,\n                        hasChanged: false\n                    };\n                    $scope.data.coinMappingList.push(dataItem);\n                });\n                $scope.data.coinMappingList = _.sortBy($scope.data.coinMappingList, function (o) {\n                    return o.country;\n                });\n            }, function (response) {\n                $scope.view.busy = false;\n                deferred.reject();\n            });\n        };\n\n        var init = function init() {\n            getCoinMappingList();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('coinMappingService', ['$q', 'apiService', function ($q, apiService) {\n\n        return {\n            getCountries: getCountries,\n            updateRateExchange: updateRateExchange\n        };\n\n        function getCountries(params) {\n\n            var deferred = $q.defer();\n\n            apiService.get('/countries/', null, true).then(function (response) {\n                deferred.resolve({\n                    count: response.length,\n                    items: response\n                });\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        };\n\n        function updateRateExchange(item) {\n\n            var deferred = $q.defer();\n\n            var data = { rate_exchange: item.rate };\n\n            // http://{{domain}}/cms-api/countries/41/changeRateExchange/\n\n            apiService.put('/countries/' + item.id + '/changeRateExchange/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').filter('coinMappingFilter', ['$window', '$rootScope', function ($window, $rootScope) {\n        return function (items, country) {\n            var dataFilterCountry = country ? items.filter(function (item) {\n                return item.country.toLowerCase().indexOf(country.toLowerCase()) > -1 ? true : false;\n            }) : items;\n\n            var filteredData = dataFilterCountry;\n            $rootScope.kaching.coinMappingFilteredDataLength = filteredData.length;\n            return filteredData;\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('advertiserOrganizationManagementCtrl', ['$scope', '$state', '$q', 'advertiserOrganizationManagementService', '$modal', '$alert', function ($scope, $state, $q, advertiserOrganizationManagementService, $modal, $alert) {\n        var service = advertiserOrganizationManagementService;\n\n        $scope.statusAdvertisers = service.getStatus();\n        $scope.statusAdvertisers.unshift({\n            value: -1,\n            label: 'Any status'\n        });\n        $scope.statusAdvertiser = $scope.statusAdvertisers[0] || undefined;\n        $scope.goToUserList = goToUserList;\n        $scope.editAdvertisement = editAdvertisement;\n        $scope.createAdvertisement = createAdvertisement;\n\n        var itemsPerPage = 10;\n        var maxSize = 10;\n\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            maxSize: maxSize,\n            currentPage: 1\n        };\n\n        $scope.data = {\n            advertiserCount: 0,\n            advertiserOrganizationList: []\n        };\n\n        $scope.changePage = function () {\n            getAdvertiserOrganizationList();\n        };\n\n        $scope.filters = {};\n\n        $scope.updateFilters = function () {\n            $scope.filters.status = $scope.statusAdvertiser.value === -1 ? undefined : $scope.statusAdvertiser.value;\n            $scope.reloadAdvertiseList();\n        };\n\n        $scope.reloadAdvertiseList = function (page) {\n            if (page) {\n                $scope.view.currentPage = page;\n            } else {\n                $scope.view.currentPage = 1;\n            }\n\n            getAdvertiserOrganizationList();\n        };\n\n        function getAdvertiserOrganizationList() {\n\n            var params = {\n                page_size: itemsPerPage,\n                page: $scope.view.currentPage\n            };\n\n            if ($scope.filters.name && $scope.filters.name.length > 0) {\n                params.name = $scope.filters.name;\n            }\n            if (typeof $scope.filters.status !== 'undefined') {\n                params.status = $scope.filters.status;\n            }\n\n            advertiserOrganizationManagementService.getAdvertiserOrganizationList(params).then(function getSuccessfully(data) {\n                $scope.data.advertiserOrganizationList = [];\n                $scope.data.advertiserCount = data.count;\n                $scope.view.busy = false;\n                $scope.data.advertiserOrganizationList = data.results.map(function (item) {\n                    var status;\n                    switch (item.status) {\n                        case 0:\n                            status = 'Pending';\n                            break;\n                        case 1:\n                            status = 'Active';\n                            break;\n                        case 2:\n                            status = 'Inactive';\n                            break;\n                        default:\n                    }\n                    return {\n                        id: item.id,\n                        name: item.name || '',\n                        date: item.date_joined ? moment(item.date_joined).format('YYYY-MM-DD hh:mm') : '-',\n                        status: status\n                    };\n                });\n            }, function getFailingly(err) {\n                console.error(err);\n            });\n        }\n\n        var deleteAdvertiser = function deleteAdvertiser(advertiserId) {\n            $scope.view.busy = true;\n            advertiserOrganizationManagementService.deleteAdvertiser(advertiserId).then(function (data) {\n                $alert({\n                    title: 'Advertiser deleted.',\n                    content: '',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getAdvertiserOrganizationList();\n                $scope.view.busy = false;\n            }, function (error) {\n                $scope.view.busy = false;\n                $alert({\n                    title: '',\n                    content: 'Cannot delete this advertiser. Please try again another.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'danger',\n                    show: true\n                });\n            });\n        };\n\n        function editAdvertisement(orderItem) {\n            $state.go('kaching.advertiserOrganizationManagement.edit', { id: orderItem.id });\n        };\n\n        function createAdvertisement() {\n            $state.go('kaching.advertiserOrganizationManagement.new');\n        }\n\n        $scope.showDeleteConfirm = function (advertiser) {\n            var advertiserId = advertiser.id;\n            var options = {\n                okFunction: function okFunction(advertiser) {\n                    deleteAdvertiser(advertiser.id);\n                },\n                modalData: function (_modalData) {\n                    function modalData() {\n                        return _modalData.apply(this, arguments);\n                    }\n\n                    modalData.toString = function () {\n                        return _modalData.toString();\n                    };\n\n                    return modalData;\n                }(function () {\n                    return modalData;\n                })\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/confirmModal/modalTmpl.html',\n                controller: 'confirmModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    modalTitle: function modalTitle() {\n                        return 'Confirmation';\n                    },\n                    modalContent: function modalContent() {\n                        return 'Are you sure you want to delete this business?';\n                    },\n                    cancelText: function cancelText() {\n                        return 'Cancel';\n                    },\n                    okText: function okText() {\n                        return 'Continue';\n                    },\n                    modalData: function modalData() {\n                        return advertiser;\n                    }\n                }\n            });\n        };\n\n        function goToUserList(company) {\n            $state.go('kaching.userManagement.company', { company: company });\n        }\n\n        function initFilters() {\n            $scope.filters = {\n                name: '',\n                status: undefined\n            };\n        }\n\n        function init() {\n            getAdvertiserOrganizationList();\n            initFilters();\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('advertiserManagementDetailCtrl', ['$scope', '$state', '$q', 'advertiserOrganizationManagementService', 'kachingZonesHelpers', 'utils', function ($scope, $state, $q, advertiserOrganizationManagementService, kachingZonesHelpers, utils) {\n        var service = advertiserOrganizationManagementService;\n        var helpers = kachingZonesHelpers;\n        var advertiserId = $state.params.id;\n\n        $scope.statusAdvertisers = service.getStatus();\n        $scope.statusAdvertiser = $scope.statusAdvertisers[0] || undefined;\n        $scope.goToAdvertiseList = goToAdvertiseList;\n        $scope.saveAdvertiseDetail = saveAdvertiseDetail;\n        $scope.createAdvertisement = createAdvertisement;\n        $scope.data = {};\n        $scope.view = {\n            busy: true,\n            submitted: false\n        };\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        if (!$state.params.id) {\n            var currentDate = moment().utc().valueOf();\n            $scope.data.date_joined = moment(currentDate).format('YYYY-MM-DD hh:mm');\n            $scope.data.status = $scope.statusAdvertiser.label;\n        }\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            }\n        });\n\n        function goToAdvertiseList() {\n            $state.go('kaching.advertiserOrganizationManagement');\n        }\n\n        $scope.getAdvertiserDetail = function () {\n            service.getAdvertiserDetail(advertiserId).then(function (data) {\n                $scope.data = data;\n                $scope.data.status = _.findWhere($scope.statusAdvertisers, { value: data.status });\n                if ($scope.locations) {\n                    $scope.data.country = _.findWhere($scope.locations, { id: data.country });\n                }\n                $scope.data.date_joined = data.date_joined ? moment(data.date_joined).format('YYYY-MM-DD hh:mm') : '-';\n                $scope.view.busy = false;\n            }, function (error) {\n                console.log(error);\n                $scope.view.busy = false;\n            });\n        };\n\n        function saveAdvertiseDetail() {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                var dataItem = $scope.data;\n                var data = {\n                    id: dataItem.id ? dataItem.id : '',\n                    name: $scope.data.name,\n                    email: $scope.data.email,\n                    country: $scope.data.country.id,\n                    address: $scope.data.address,\n                    city: $scope.data.city,\n                    status: $scope.data.status.value\n                };\n                $scope.view.busy = true;\n                service.updateAdvertiserDetail(data).then(function (response) {\n                    helpers.alert('success', 'Business has been updated.');\n                    $state.go('kaching.advertiserOrganizationManagement', { updatingId: data.id });\n                    $scope.view.busy = false;\n                }, function (error) {\n                    $scope.view.busy = false;\n                    helpers.alert('danger', 'Business has not been updated.');\n                });\n            }\n        }\n\n        function createAdvertisement() {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                var data = {\n                    name: $scope.data.name,\n                    email: $scope.data.email,\n                    country: $scope.data.country.id,\n                    address: $scope.data.address,\n                    city: $scope.data.city,\n                    // date: $scope.data.date_joined,\n                    status: $scope.statusAdvertiser.value\n                };\n                $scope.view.busy = true;\n                service.createAdvertisement(data).then(function (response) {\n                    helpers.alert('success', 'Business has been created.');\n                    $state.go('kaching.advertiserOrganizationManagement');\n                    $scope.view.busy = false;\n                }, function (error) {\n                    $scope.view.busy = false;\n                    helpers.alert('danger', 'Business has not been created.');\n                });\n            }\n        }\n\n        function init() {\n            service.getCountryList().then(function (data) {\n                $scope.locations = data;\n                if ($state.params.id) {\n                    $scope.getAdvertiserDetail();\n                }\n                $scope.view.busy = false;\n            }, function (error) {\n                if ($state.params.id) {\n                    $scope.getAdvertiserDetail();\n                }\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('advertiserOrganizationManagementService', ['$q', 'apiService', function ($q, apiService) {\n        return {\n            getStatus: getStatus,\n            getAdvertiserOrganizationList: getAdvertiserOrganizationList,\n            deleteAdvertiser: deleteAdvertiser,\n            getAdvertiserDetail: getAdvertiserDetail,\n            updateAdvertiserDetail: updateAdvertiserDetail,\n            createAdvertisement: createAdvertisement,\n            getCountryList: getCountryList\n        };\n\n        function getStatus() {\n            return [{\n                value: 0,\n                label: 'Pending'\n            }, {\n                value: 1,\n                label: 'Active'\n            }, {\n                value: 2,\n                label: 'Inactive'\n            }];\n        }\n\n        function getAdvertiserOrganizationList(params) {\n\n            var requestParams = {\n                page_size: 10,\n                page: 1,\n                limit: 10,\n                offset: 0\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('page_size' in params) {\n                    requestParams.page_size = params.page_size;\n                }\n                if ('page' in params) {\n                    requestParams.page = params.page;\n                }\n                // if ( 'limit' in params ) {\n                //     requestParams.limit = params.limit;\n                // }\n                // if ( 'offset' in params ) {\n                //     requestParams.offset = params.offset;\n                // }\n                if ('name' in params) {\n                    requestParams.name = params.name;\n                }\n                if ('status' in params) {\n                    requestParams.status = params.status;\n                }\n            }\n\n            var deferred = $q.defer();\n            var request = '/companies/';\n            apiService.get(request, requestParams, true).then(function successful(response) {\n                deferred.resolve(response);\n            }, function fail(error) {\n                deferred.reject(error);\n            });\n            return deferred.promise;\n        }\n\n        function deleteAdvertiser(advertiserId) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/companies/' + advertiserId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getAdvertiserDetail(advertiserId) {\n            var deferred = $q.defer();\n\n            apiService.get('/companies/' + advertiserId + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function updateAdvertiserDetail(data) {\n            var deferred = $q.defer();\n            apiService.patch('/companies/' + data.id + '/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function createAdvertisement(data) {\n            var deferred = $q.defer();\n            apiService.post('/companies/', data, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        // getCountryList\n        function getCountryList() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/countries/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('userManagementCtrl', ['$scope', '$state', '$stateParams', '$q', '$modal', '$alert', 'userManagementService', function ($scope, $state, $stateParams, $q, $modal, $alert, userManagementService) {\n        var service = userManagementService;\n\n        $scope.statusAdvertisers = service.getStatus();\n        $scope.statusAdvertisers.unshift({\n            value: -1,\n            label: 'Any status'\n        });\n        $scope.status = $scope.statusAdvertisers[0] || undefined;\n        var itemsPerPage = 10;\n        var maxSize = 10;\n\n        $scope.view = {\n            itemsPerPage: itemsPerPage,\n            maxSize: maxSize,\n            currentPage: 1\n        };\n\n        $scope.data = {\n            userListCount: 0,\n            userList: []\n        };\n\n        $scope.filters = {};\n\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.changePage = function () {\n            getUserList();\n        };\n\n        function getUserList() {\n\n            var params = {\n                page_size: itemsPerPage,\n                page: $scope.view.currentPage\n            };\n\n            if ($scope.filters.name.length > 0) {\n                params.first_name = $scope.filters.name;\n                // params.last_name = $scope.filters.name;\n            }\n            if ($stateParams.company) {\n                $scope.filters.company = $stateParams.company;\n            }\n            if ($scope.filters.company.length > 0) {\n                params.company = $scope.filters.company;\n            }\n            if ($scope.status.value !== -1) {\n                params.status = $scope.status.value;\n            }\n\n            service.getUserList(params).then(function getSuccessfully(data) {\n                $scope.view.busy = false;\n                $scope.data.userList = [];\n                $scope.data.userListCount = data.count;\n\n                angular.forEach(data.results, function (item, key) {\n                    var status;\n                    switch (item.status) {\n                        case 0:\n                            status = 'Pending';\n                            break;\n                        case 1:\n                            status = 'Active';\n                            break;\n                        case 2:\n                            status = 'Inactive';\n                            break;\n                        default:\n                    }\n\n                    var dataItem = {\n                        id: item.id,\n                        photo: item.avatar,\n                        userName: item.first_name + ' ' + item.last_name,\n                        advertiser: item.advertiser.name,\n                        date: item.date_joined ? moment(item.date_joined).format('YYYY-MM-DD hh:mm') : '-',\n                        status: status\n                    };\n\n                    $scope.data.userList.push(dataItem);\n                });\n            }, function getFailingly(err) {\n                console.error(err);\n            });\n        }\n\n        var deleteUser = function deleteUser(userID) {\n            $scope.view.busy = true;\n            service.deleteUser(userID).then(function (data) {\n                $alert({\n                    title: 'User deleted.',\n                    content: '',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'success',\n                    show: true\n                });\n                getUserList();\n                $scope.view.busy = false;\n            }, function (error) {\n                $scope.view.busy = false;\n                $alert({\n                    title: '',\n                    content: 'Cannot delete this user. Please try again another.',\n                    container: '#alerts-container',\n                    placement: 'top',\n                    duration: 3,\n                    type: 'danger',\n                    show: true\n                });\n            });\n        };\n\n        $scope.showDeleteConfirm = function (userItem) {\n            var userID = userItem.id;\n            var options = {\n                okFunction: function okFunction(userItem) {\n                    deleteUser(userItem.id);\n                },\n                modalData: function (_modalData) {\n                    function modalData() {\n                        return _modalData.apply(this, arguments);\n                    }\n\n                    modalData.toString = function () {\n                        return _modalData.toString();\n                    };\n\n                    return modalData;\n                }(function () {\n                    return modalData;\n                })\n            };\n            $modal({\n                templateUrl: templateDirUri + '/assets/kaching/panel-module/components/confirmModal/modalTmpl.html',\n                controller: 'confirmModalCtrl',\n                animation: 'am-fade-and-scale',\n                placement: 'center',\n                resolve: {\n                    modalOptions: function modalOptions() {\n                        return options;\n                    },\n                    modalTitle: function modalTitle() {\n                        return 'Confirmation';\n                    },\n                    modalContent: function modalContent() {\n                        return 'Are you sure you want to delete this user?';\n                    },\n                    cancelText: function cancelText() {\n                        return 'Cancel';\n                    },\n                    okText: function okText() {\n                        return 'Continue';\n                    },\n                    modalData: function modalData() {\n                        return userItem;\n                    }\n                }\n            });\n        };\n\n        $scope.editUser = function (userItem) {\n            $state.go('kaching.userManagement.edit', { id: userItem.id });\n        };\n\n        $scope.createUser = function () {\n            $state.go('kaching.userManagement.new');\n        };\n\n        $scope.updateFilters = function () {\n            $scope.reloadUserList();\n        };\n\n        $scope.reloadUserList = function (page) {\n            if (page) {\n                $scope.view.currentPage = page;\n            } else {\n                $scope.view.currentPage = 1;\n            }\n\n            getUserList();\n        };\n\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.filters.start_date = moment(newValue.startDate).format('YYYY-MM-DD');\n                $scope.filters.end_date = moment(newValue.endDate).format('YYYY-MM-DD');\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            } else {\n                $scope.filters.start_date = null;\n                $scope.filters.end_date = null;\n            }\n            $scope.updateFilters();\n        });\n\n        function initFilters() {\n            $scope.filters = {\n                name: '',\n                company: ''\n            };\n        }\n\n        function init() {\n            initFilters();\n            getUserList();\n        }\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').controller('userManagementDetailCtrl', ['$scope', '$state', '$stateParams', '$q', 'FileUploader', 'kachingZonesHelpers', 'userManagementService', 'advertiserOrganizationManagementService', 'utils', function ($scope, $state, $stateParams, $q, FileUploader, kachingZonesHelpers, userManagementService, advertiserOrganizationManagementService, utils) {\n        var service = userManagementService;\n        var advertiserService = advertiserOrganizationManagementService;\n        var helpers = kachingZonesHelpers;\n        var userID = $stateParams.id;\n\n        $scope.view = {\n            busy: true,\n            submitted: false\n        };\n\n        $scope.fieldHasError = utils.fieldHasError;\n\n        $scope.data = {\n            first_name: '',\n            last_name: '',\n            email: '',\n            avatar: undefined\n        };\n\n        $scope.statusUsers = service.getStatus();\n        $scope.statusUser = $scope.statusUsers[0] || undefined;\n        $scope.goToUserList = goToUserList;\n        $scope.saveUserDetail = saveUserDetail;\n        $scope.createUser = createUser;\n        $scope.daterange = {\n            dates: {\n                startDate: null,\n                endDate: null\n            },\n            min: moment().format('YYYY-MM-DD'),\n            display: 'Select date range'\n        };\n\n        $scope.$watch('daterange.dates', function (newValue, oldValue) {\n            if (newValue === null) {\n                return;\n            }\n            if (newValue.startDate) {\n                $scope.daterange.display = newValue.startDate.format('YYYY-MM-DD') + ' - ' + newValue.endDate.format('YYYY-MM-DD');\n            }\n        });\n\n        if (!$stateParams.id) {\n            $scope.data.status = $scope.statusUser.label;\n        }\n\n        $scope.profileImageUploader = new FileUploader();\n\n        $scope.previewImage = function (event) {\n            var imageFile = event.target.files[0];\n            if (imageFile) {\n                var reader = new FileReader();\n                reader.readAsDataURL(imageFile);\n                reader.addEventListener('load', function () {\n                    angular.element('#profileImage').css('background-image', 'url(' + reader.result + ')');\n                });\n\n                $scope.data.avatar = imageFile;\n            }\n        };\n\n        function getCompanyList() {\n            advertiserService.getAdvertiserOrganizationList({ page: 1, page_size: 999999999 }).then(function getSuccessfully(data) {\n                $scope.companyList = [];\n                $scope.companyList = data.results.map(function (item) {\n                    return {\n                        id: item.id,\n                        name: item.name\n                    };\n                });\n            }, function getFailingly(err) {\n                console.error(err);\n            });\n        }\n\n        function getUserDetail() {\n            $scope.view.busy = true;\n            service.getUserDetail(userID).then(function getSuccessfully(data) {\n                $scope.data = data;\n                $scope.data.status = _.findWhere($scope.statusUsers, { value: data.status });\n                angular.element('#profileImage').css('background-image', 'url(' + $scope.data.avatar + ')');\n                $scope.data.date_joined = moment(data.date_joined).format('YYYY-MM-DD hh:mm');\n                if ($scope.locations) {\n                    $scope.data.country = _.findWhere($scope.locations, { id: data.country });\n                }\n                $scope.view.busy = false;\n            }, function getFailingly(err) {\n                console.error(err);\n                $scope.view.busy = false;\n            });\n        }\n\n        function saveUserDetail() {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                var dataItem = $scope.data;\n                var data = {\n                    id: dataItem.id ? dataItem.id : '',\n                    first_name: $scope.data.first_name,\n                    last_name: $scope.data.last_name,\n                    email: $scope.data.email,\n                    address: $scope.data.address,\n                    country: $scope.data.country.id,\n                    city: $scope.data.city,\n                    postal_code: $scope.data.postal_code,\n                    status: $scope.data.status.value\n                };\n                if ($scope.data.avatar && _typeof($scope.data.avatar) === 'object') {\n                    data.avatar = $scope.data.avatar;\n                }\n                $scope.view.busy = true;\n                service.saveUserDetail(data).then(function (response) {\n                    $scope.view.busy = false;\n                    helpers.alert('success', 'User has been updated.');\n                    $state.go('kaching.userManagement', { updatingId: data.id });\n                }, function (error) {\n                    $scope.view.busy = false;\n                    helpers.alert('danger', 'User has not been updated.');\n                });\n            }\n        }\n\n        function createUser() {\n            $scope.view.submitted = true;\n            if ($scope.form1.$valid) {\n                var data = {\n                    first_name: $scope.data.first_name,\n                    last_name: $scope.data.last_name,\n                    email: $scope.data.email,\n                    password: $scope.data.password,\n                    address: $scope.data.address,\n                    country: $scope.data.country.id,\n                    city: $scope.data.city,\n                    postal_code: $scope.data.postal_code,\n                    status: $scope.statusUser.value,\n                    advertiser: $scope.data.company.id\n                };\n                if ($scope.data.avatar && _typeof($scope.data.avatar) === 'object') {\n                    data.avatar = $scope.data.avatar;\n                }\n                $scope.view.busy = true;\n                service.createUser(data).then(function (response) {\n                    $scope.view.busy = false;\n                    helpers.alert('success', 'User has been created.');\n                    $state.go('kaching.userManagement');\n                }, function (error) {\n                    $scope.view.busy = false;\n                    helpers.alert('danger', 'User has not been created.');\n                });\n            }\n        }\n\n        function goToUserList() {\n            $state.go('kaching.userManagement');\n        }\n\n        var init = function init() {\n            service.getCountryList().then(function (data) {\n                $scope.locations = data;\n                if ($stateParams.id) {\n                    getUserDetail();\n                } else {\n                    getCompanyList();\n                }\n                $scope.view.busy = false;\n            }, function (error) {\n                if ($stateParams.id) {\n                    getUserDetail();\n                } else {\n                    getCompanyList();\n                }\n                $scope.view.busy = false;\n            });\n        };\n\n        init();\n    }]);\n})();","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').factory('userManagementService', ['$q', 'apiService', function ($q, apiService) {\n        return {\n            getStatus: getStatus,\n            getCountryList: getCountryList,\n            getUserList: getUserList,\n            getUserDetail: getUserDetail,\n            saveUserDetail: saveUserDetail,\n            createUser: createUser,\n            deleteUser: deleteUser\n        };\n\n        function getStatus() {\n            return [{\n                value: 0,\n                label: 'Pending'\n            }, {\n                value: 1,\n                label: 'Active'\n            }, {\n                value: 2,\n                label: 'Inactive'\n            }];\n        }\n\n        function getCountryList() {\n\n            var deferred = $q.defer();\n\n            apiService.get('/countries/', null, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function getUserList(params) {\n\n            var requestParams = {\n                page_size: 10,\n                page: 1\n            };\n\n            if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n                if ('page_size' in params) {\n                    requestParams.page_size = params.page_size;\n                }\n                if ('page' in params) {\n                    requestParams.page = params.page;\n                }\n\n                if ('first_name' in params) {\n                    requestParams.first_name = params.first_name;\n                }\n\n                if ('last_name' in params) {\n                    requestParams.last_name = params.last_name;\n                }\n\n                if ('company' in params) {\n                    requestParams.company = params.company;\n                }\n\n                if ('status' in params) {\n                    requestParams.status = params.status;\n                }\n            }\n\n            var deferred = $q.defer();\n            var request = '/admin/users/';\n            apiService.get(request, requestParams, true).then(function successful(response) {\n                deferred.resolve(response);\n            }, function fail(error) {\n                deferred.reject(error);\n            });\n            return deferred.promise;\n        }\n\n        function getUserDetail(userID) {\n            var deferred = $q.defer();\n\n            apiService.get('/admin/users/' + userID + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n\n        function saveUserDetail(data) {\n            var deferred = $q.defer();\n            if (data.avatar) {\n                apiService.patchMultiPart('/admin/users/' + data.id + '/', data, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.patch('/admin/users/' + data.id + '/', data, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n            return deferred.promise;\n        }\n\n        function createUser(data) {\n            var deferred = $q.defer();\n            if (data.avatar) {\n                apiService.postMultiPart('/admin/users/', data, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            } else {\n                apiService.post('/admin/users/', data, true).then(function (response) {\n                    deferred.resolve(response);\n                }, function (response) {\n                    deferred.reject(response);\n                });\n            }\n            return deferred.promise;\n        }\n\n        function deleteUser(userID) {\n\n            var deferred = $q.defer();\n\n            apiService.delete('/admin/users/' + userID + '/', false, true).then(function (response) {\n                deferred.resolve(response);\n            }, function (response) {\n                deferred.reject(response);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('btnClearUploadFile', ['kachingZonesHelpers', function (kachingZonesHelpers) {\n        return {\n            restrict: 'EA',\n            scope: {\n                currentFile: '=',\n                imageName: '='\n            },\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/directives/btnClearUploadFile/btnClearUploadFileTmpl.html',\n            link: function link(scope, ele, attrs) {\n                scope.$watch('currentFile', function (newValue, preValue) {\n                    scope.hasFile = scope.currentFile ? true : false;\n                });\n\n                scope.clearCurrentFile = function () {\n                    kachingZonesHelpers.clearFileUploader('#' + scope.imageName);\n                    scope.currentFile ? scope.currentFile = null : scope.currentFile = scope.currentFile;\n                };\n            }\n        };\n    }]);\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('validNumber', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function link(scope, element, attrs, ngModelCtrl) {\n                if (!ngModelCtrl) {\n                    return;\n                }\n\n                ngModelCtrl.$parsers.push(function (val) {\n                    if (angular.isUndefined(val)) {\n                        var val = '';\n                    }\n\n                    var clean = val.replace(/[^-0-9\\.]/g, '');\n                    var negativeCheck = clean.split('-');\n                    var decimalCheck = clean.split('.');\n                    if (!angular.isUndefined(negativeCheck[1])) {\n                        negativeCheck[1] = negativeCheck[1].slice(0, negativeCheck[1].length);\n                        clean = negativeCheck[0] + '-' + negativeCheck[1];\n                        if (negativeCheck[0].length > 0) {\n                            clean = negativeCheck[0];\n                        }\n                    }\n\n                    if (!angular.isUndefined(decimalCheck[1])) {\n                        decimalCheck[1] = decimalCheck[1].slice(0, 2);\n                        clean = decimalCheck[0] + '.' + decimalCheck[1];\n                    }\n\n                    if (val !== clean) {\n                        ngModelCtrl.$setViewValue(clean);\n                        ngModelCtrl.$render();\n                    }\n                    return clean;\n                });\n\n                element.bind('keypress', function (event) {\n                    if (event.keyCode === 32) {\n                        event.preventDefault();\n                    }\n                });\n            }\n        };\n    });\n})();","'use strict';\n\n(function () {\n    'use strict';\n\n    angular.module('panelApp').directive('datePickerAddon', ['kachingZonesHelpers', function (kachingZonesHelpers) {\n        return {\n            restrict: 'EA',\n            scope: {\n                displayDate: '=',\n                dateRange: '=',\n                campaingStyle: '=',\n                clearStatus: '='\n            },\n            templateUrl: kachingAppConfig.wpTemplateUri + '/assets/kaching/directives/datePickerAddon/datePickerAddonTmpl.html',\n            link: function link(scope, ele, attrs) {\n                scope.$watch('dateRange', function (newValue, preValue) {\n                    scope.hasDate = scope.dateRange.startDate ? true : false;\n                });\n\n                scope.clearCurrentDate = function (event) {\n                    event.preventDefault();\n                    scope.displayDate = 'Select date range';\n                    scope.dateRange = {\n                        dates: {\n                            startDate: null,\n                            endDate: null\n                        }\n                    };\n                };\n            }\n        };\n    }]);\n})();"],"sourceRoot":"/source/"}